!function(){var e,t,n,r,s,i,o={43185:function(e,t,n){"use strict";var r=n(25002),s=Object.defineProperty,i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,l=(e,t,n)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,c=(e,t)=>{for(var n in t||(t={}))o.call(t,n)&&l(e,n,t[n]);if(i)for(var n of i(t))a.call(t,n)&&l(e,n,t[n]);return e};const u="website",d={personalCabinet:()=>n.e(94739).then(n.t.bind(n,94739,23)),realty:()=>n.e(20576).then(n.t.bind(n,20576,23)),pharma:()=>n.e(46894).then(n.t.bind(n,46894,23))},p={uz:()=>n.e(68890).then(n.t.bind(n,68890,19)),ky:()=>n.e(87445).then(n.t.bind(n,87445,19)),kk:()=>n.e(20939).then(n.t.bind(n,20939,19)),ka:()=>n.e(90861).then(n.t.bind(n,90861,19)),en:()=>n.e(73526).then(n.t.bind(n,73526,19))};t.A=new class{constructor(){this.currLang=wb.currentLanguage,this.initOptions={ns:[u],defaultNS:[u],resources:{ru:{[u]:window.__ru__}}},this.i18nService=(0,r.getI18nService)(),this.i18nService.registerRemoteMfeImports(d)}async initI18nInstance(){if(this.i18nService.instance)return this.i18nService.instance;{const e=await this.i18nService.createI18nInstance({hostName:u,options:this.initOptions,lazyForeignTranslations:p});return document.documentElement.lang=this.currLang,localStorage.setItem("wb__lang",this.currLang),$.views.helpers({t:(t,n={})=>e.t(t,c({ns:u},n)),plural:(t,n)=>{var r=n,{count:s,displayCount:l}=r,d=((e,t)=>{var n={};for(var r in e)o.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&i)for(var r of i(e))t.indexOf(r)<0&&a.call(e,r)&&(n[r]=e[r]);return n})(r,["count","displayCount"]);return e.t(`${t}.plural`,c({count:s||0,displayCount:l||s||0,interpolation:{escapeValue:!l},ns:u},d))}}),e}}}},85483:function(){"use strict";const e={},t=e=>e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2;let n=t;const r=(e,...t)=>e.replace(/{(\d+)}/g,(e,n)=>void 0!==t[n]?String(t[n]):e),s=t=>{const n=e[t];return{value:n||t,notfound:!n}},i=e=>"string"==typeof e&&e.includes("{0}");$.localize=(t,...o)=>{if(!o.length&&(e=>Boolean(e))(t))return"object"==typeof(l=t)&&null!==l&&"pluralRule"in l?("function"==typeof(a=t.pluralRule)&&1===a.length&&(n=a),""):s(t).value;var a,l;const c=o[0];if(1===o.length&&(e=>"object"==typeof e)(c))return Object.assign(e,c),"";if(o.length>1&&i(t)&&(u=o,Array.isArray(u))){const e=s(t);return r(e.value,...o)}var u;return""},$.pluralize=(e,...o)=>{if("number"!=typeof e)return"";if(0===o.length)return String(e);const a=s(o.join(",")),l=a.value.split(","),c=a.notfound?t(e):n(e),u=l[c<l.length?c:l.length-1];return i(u)?r(u,e):u}},75158:function(e,t,n){"use strict";var r=n(59168),s=n(33863),i=n(88927),o=n(51799),a=n(59067),l=Object.defineProperty,c=(e,t,n)=>((e,t,n)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);var u=class{constructor(){c(this,"el",null),c(this,"imgs",null),c(this,"pic",null),c(this,"data",null),c(this,"timer",null),c(this,"currentImg",null),c(this,"currentImgIdx",-1),this.pic=null,this.data=null,this._bindEvents()}start(e){return this.timer&&(this.timer.stop(),this.timer=null),this.imgs=Array.from(e.querySelectorAll(".j-banners-carousel-item")),this.imgs.length>1&&(this.timer=new a.A({func:this.updateImage.bind(this),interval:4e3}),this.el=e,this.currentImg=e.querySelector(".j-banners-carousel-item.active"),null==this.currentImg?(this.currentImgIdx=0,this.imgs[this.currentImgIdx].classList.add("active")):this.currentImgIdx=this.imgs.indexOf(this.currentImg),this.timer.start()),this}pause(){var e;null==(e=this.timer)||e.stop()}resume(){var e;null==(e=this.timer)||e.start()}stop(){var e;null==(e=this.timer)||e.stop(),this.timer=null}updateImage(){if(!this.imgs||!this.currentImg)return;let e=this.currentImgIdx+1;e>=this.imgs.length&&(e=0);const t=this.imgs[e];if(this.currentImg.classList.remove("active"),t.classList.add("active"),this.currentImg=t,this.currentImgIdx=e,"d"===wb.settings.displayMode){const e=document.querySelector(".j-tooltip-advertising");e&&e.elemTarget.closest(".j-slider-banners")&&e.close()}}_bindEvents(){window.addEventListener("spaTransition",()=>this.stop())}},d=n(42891),p=n(8379),h=Object.defineProperty,m=(e,t,n)=>((e,t,n)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class g{constructor(){m(this,"items",[]),m(this,"images",[]),m(this,"count",0),m(this,"isLooped",!1),this._setImg=this._setImg.bind(this)}init(e){this.items=e.items,this.images=this._getImages(this.items),this.count=e.count,this.isLooped=e.isLooped}loadImages(e){if(0===this.images.length)return;const t=this.items.indexOf(e);let n=this.isLooped?t-this.count:t;n<0&&(n=0);let r=t+this.count+1;r>=this.items.length&&(r=this.items.length);const s=this.items.slice(n,r);for(let e=0;e<s.length;e++)this._loadSlideImage(s[e])}_getImages(e){return e.map(e=>e.querySelector("img")||null).filter(e=>!!e)}_loadSlideImage(e){const t=e.querySelector("img");(0,p.tH)(t,HTMLImageElement)&&this._loadImage(t)}_loadImage(e){const t=e.dataset.original;if(!t)return;this._setImg(e,t);const n=this.images.filter(e=>e.dataset.original===t);if(null==n?void 0:n.length)for(let e=0;e<n.length;e++)this._setImg(n[e],t)}_setImg(e,t){const n=this.images.indexOf(e);-1!==n&&(e.src=t,this.images.splice(n,1))}}var f=n(88166),b=Object.defineProperty,y=Object.defineProperties,v=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable,I=(e,t,n)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;$.views.tags({baseBannersTag:{initBase(){this.saveState=this.saveState.bind(this)},saveState(e){const t=(0,o.a)();if(!t.trySaveStateV2(e)){const{data:n}=$.view(e);t.saveState({l:this.tagCtx.props.analiticsCode,t:(null==n?void 0:n.id)||"",t2:parseInt(e.dataset.bannerIndex)+1})}}},bigBanners:{baseTag:"baseBannersTag",hasEars:!1,hasPagination:!1,isBannersWithIframe:!1,template:'{^{if ~tag.bannersList.length > 0}}\n                <div class="swiper-container j-main-banners{{if !~tagCtx.props.isAdaptive}} big-banner-inner{{/if}}">\n                    <div class="swiper-wrapper{{if !~tagCtx.props.isAdaptive}} big-banner{{/if}}">\n                        {^{for ~tag.bannersList}}\n                            {{singleBanner banner=#data itemClass=\'swiper-slide\'\n                                imgClass=(~tagCtx.props.hasEars?\'\':\'swiper-lazy\')\n                                isLazy=(~tagCtx.props.hasEars?true:(#getIndex() > 0))\n                                swiperLazyLoad=!~tagCtx.props.hasEars\n                                protectAdult=~tagCtx.props.protectAdult\n                                imgContClass=~tagCtx.props.imgContClass bannersZoneClass=~tagCtx.props.bannersZoneClass\n                                bannersZonesContainer=~tagCtx.props.bannersZonesContainer\n                                bannerIndex=#getIndex() analiticsCode=~tagCtx.props.analiticsCode\n                                qty_block_delivery_before=~tagCtx.props.qty_block_delivery_before\n                                width=~tag.width height=~tag.height\n                            /}}\n                        {{/for}}\n                    </div>\n\n                    <button class="swiper-button-prev{{if ~tag.bannersList.length <= 1}} hide{{/if}} j-not-close-pop-up-on-click" type="button">{{:~t(\'common.goBack\')}}</button>\n                    <button class="swiper-button-next{{if ~tag.bannersList.length <= 1}} hide{{/if}} j-not-close-pop-up-on-click" type="button">{{:~t(\'common.goForward\')}}</button>\n\n                    {{if ~tag.hasPagination}}\n                        <div class="swiper-pagination{{if ~tag.bannersList.length <= 1}} hide{{/if}}"></div>\n                    {{/if}}\n                </div>\n            {{/if}}',init(){this.initBase(),this.bannersList=[],this.swiper=null,this.width=this.tagCtx.props.width||!1,this.height=this.tagCtx.props.height||!1,this.hasPagination=this.tagCtx.props.hasPagination,this.hasEars=this.tagCtx.props.hasEars,this.isBannersWithIframe=this.tagCtx.props.isBannersWithIframe,this.doOnIntersect=this.doOnIntersect.bind(this),this.doOnOutOfViewport=this.doOnOutOfViewport.bind(this),this.sendShownStat=this.sendShownStat.bind(this),this.checkPlayVideo=this.checkPlayVideo.bind(this),this.checkPlayVideo=this.checkPlayVideo.bind(this),this.toggleIsCarouselVisible=this.toggleIsCarouselVisible.bind(this)},onUpdate:!1,async onAfterLink(){var e,t;const n=this;null==(e=this.swiper)||e.destroy(),null==(t=this.observer)||t.destroy(),this._prepareBannersList();const s=this.linkCtx.elem.querySelector(".j-main-banners");if(!s)return void(this.swiper=null);await WbSpaModel.prototype.$helper.nextTick();function a(e){var t;null==(t=n.iframeHelper)||t.setBannerAsActiveByIndex(e)}const l={container:s,handlers:{stopSlide:function(e){var t;const r=n.swiper;if(!r)return!1;r.realIndex===e&&(null==(t=r.autoplay)||t.stop())},changeSlide:function(e){var t,r;const s=n.swiper;if(!s)return!1;s.realIndex===e&&(s.slideNext(),!(null==(t=s.autoplay)?void 0:t.running)&&(null==(r=s.autoplay)||r.start()))}},slideDuration:1e4};this.iframeHelper=this.isBannersWithIframe?new d.y(l):null;const c=this.hasEars?{slidesPerView:"auto",centeredSlides:!0,loopedSlides:3}:{};this.earsLazyLoader=this.hasEars?new g:null;const u=()=>{if(!this.earsLazyLoader)return;const e={items:[...s.querySelectorAll(".swiper-slide")],count:2,isLooped:!0};this.earsLazyLoader.init(e)},p=e=>{this.earsLazyLoader&&this.earsLazyLoader.loadImages(e)};var h,m;this.swiper=new Swiper(s,(h=((e,t)=>{for(var n in t||(t={}))S.call(t,n)&&I(e,n,t[n]);if(w)for(var n of w(t))_.call(t,n)&&I(e,n,t[n]);return e})({speed:500,loop:this.bannersList.length>1,preloadImages:!1,threshold:5,spaceBetween:this.hasEars?null:8,breakpoints:{1024:{threshold:10}},lazy:{loadOnTransitionStart:!0,loadPrevNext:!0,loadPrevNextAmount:this.hasEars?2:1},autoplay:{disableOnInteraction:!1,enabled:!0,delay:1e4}},c),m={pagination:{el:s.querySelector(".swiper-pagination"),renderBullet:(e,t)=>`<div role="button" type="button" aria-label="Dot slide" class="${t}"></div>`,clickable:!1},navigation:{nextEl:s.querySelector(".swiper-button-next"),prevEl:s.querySelector(".swiper-button-prev"),disabledClass:"hide"},on:{init:()=>{var e,t,n;u();const r=s.querySelector(".swiper-slide-active");p(r),null==(t=null==(e=this.tagCtx.props.bigBannersCallbacks)?void 0:e.onInit)||t.call(e),null==(n=this.iframeHelper)||n.init(this.bannersList),a(0)},click:e=>{var t,r;null==(r=null==(t=this.tagCtx.props.bigBannersCallbacks)?void 0:t.onClick)||r.call(t,e);const i=n.isBannersWithIframe?function(e){var t;if(!n.swiper)return e;const r=e.closest(`.${n.swiper.params.slideDuplicateClass}`);if(!r){const t=null==e?void 0:e.closest(".j-banner-click-stat");return t||e}const i=`.${n.swiper.params.slideClass}[data-swiper-slide-index="${r.dataset.swiperSlideIndex}"]:not(.${n.swiper.params.slideDuplicateClass})`,o=null==(t=s.querySelectorAll(i))?void 0:t[0],a=null==o?void 0:o.querySelector(".j-banner-click-stat");return a||e}(e.target):e.target.closest(".j-banner-click-stat");null!=i&&(WbSpaModel.prototype.$stat.banners.sendClickStatistic($(i)),this.saveState(i))},crutch:(e,t)=>{this.hasEars&&(t.updateActiveIndex(e),t.updateSlidesClasses(),t.updateSlides())}}},y(h,v(m)))),this.swiper.on("transitionEnd",()=>{this.hasEars?this.swiper.loopFix():this.swiper.slideToLoop(this.swiper.realIndex,0,!1)}),this.swiper.on("slideChange",()=>{const e=n.swiper;if(e){const t=e.activeIndex,n=e.slides[t];p(n)}!function(){const e=n.swiper;if(!e)return!1;a(e.realIndex)}(),this.sendShownStat()}),this.swiper.on("transitionStart",()=>{if(!this.hasEars){let e=this.swiper.$wrapperEl,t=this.swiper.params;e.children("."+t.slideClass+"."+t.slideDuplicateClass).each(function(){let n=this.getAttribute("data-swiper-slide-index");this.innerHTML=e.children("."+t.slideClass+'[data-swiper-slide-index="'+n+'"]:not(.'+t.slideDuplicateClass+")").html()})}if("d"===wb.settings.displayMode){const e=document.querySelector(".j-tooltip-advertising");e&&e.elemTarget.closest(".j-main-banners")&&e.close()}if(!n.swiper)return!1;!function(){var e,t,r;if(!n.isBannersWithIframe)return;const s=n.swiper;s&&n.iframeHelper&&s.realIndex!==(null==(e=n.iframeHelper.currentActiveBanner)?void 0:e.bannerSlideIndex)&&!(null==(t=s.autoplay)?void 0:t.running)&&(null==(r=s.autoplay)||r.start())}()}),this.isBannersWithIframe&&(0,r.J)().addEventListener("needStopVideo",this.checkPlayVideo);this.observer=(()=>{const e=navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.indexOf("Trident/")>0;let t;e?this.doOnIntersect():(t=(0,i.ZS)().getCarouselBannersObserver(s,{threshold:.5}),s.addEventListener(t.elementInViewportEventName,this.doOnIntersect),s.addEventListener(t.elementOutOfViewportEventName,this.doOnOutOfViewport),t.observe());return{destroy:()=>{!e&&t&&(t.destroy(),s.removeEventListener(t.elementInViewportEventName,this.doOnIntersect),s.removeEventListener(t.elementOutOfViewportEventName,this.doOnOutOfViewport))}}})(),this.bannersObserver=function(){if(!n.isBannersWithIframe)return;const e=Array.from(s.querySelectorAll(".swiper-slide")||[]);if(!(null==e?void 0:e.length))return;const t=(0,i.ZS)().getSimpleObserver(e=>{var t;const r=function(e){const t=$.view(e);let r=null==t?void 0:t.data;if(!r||!r.id||!r.placementOptions){const t=Number(e.getAttribute("data-swiper-slide-index"));t>=0&&(r=n.bannersList[t])}return r}(e);if(!r||r.wbaShownStatSent)return;r.wbaShownStatSent=!0;const s=e.querySelector(".j-banner"),i=!!r.ordBannerMark,a=r.isVideo||r.isHtml5,l={eventName:"Banner_S",bannerName:s.title,location:s.dataset.analiticsCode,link:s.href,ind:s.dataset.bannerIndex,bid:s.dataset.bannerId,withPromoMark:i,pixelSrc:r.pixelSrc,adv_params:a?(null==(t=r.htmlData)?void 0:t.data)||"":void 0,banner_load_time:a?r.loadTime:void 0};(0,o.a)().sendBannersWbaEventByData(l)},{threshold:.5});return null==t||t.observe(e),t}()},checkPlayVideo({detail:e}){"phone"!==wb.settings.displayType&&(e.needStopVideo?this.doOnOutOfViewport():this.doOnIntersect())},sendShownStat(){var e;if(this.isBannersWithIframe)return;if(!this.isCarouselVisible)return;const t=null==(e=this.swiper.slides)?void 0:e[this.swiper.activeIndex];if(!t||t.classList.contains("swiper-slide-duplicate"))return;const n=t.querySelector(".j-banner");if(n.dataset.wbaShownStatSent)return;const{data:r}=$.view(n),s=!!r.ordBannerMark;n.dataset.wbaShownStatSent=!0,(0,o.a)().sendBannersWbaEvent("Banner_S",n.title,n.dataset.analiticsCode,n.href,n.dataset.bannerIndex,n.dataset.bannerId,s,r.pixelSrc)},doOnIntersect(){this.toggleIsCarouselVisible(!0),this.sendShownStat(),this.swiper.autoplay.start()},doOnOutOfViewport(){this.toggleIsCarouselVisible(!1),this.swiper.autoplay.stop()},toggleIsCarouselVisible(e){var t;this.isCarouselVisible=e,null==(t=this.iframeHelper)||t.setCarouselVisible(e)},onDispose(){var e,t,n,s;null==(e=this.swiper)||e.destroy(),null==(t=this.observer)||t.destroy(),null==(n=this.iframeHelper)||n.destroy(),null==(s=this.bannersObserver)||s.destroy(),(0,r.J)().removeEventListener("needStopVideo",this.checkPlayVideo)},_prepareBannersList(){var e;const t=null!=(e=this.tagCtx.props.bannersList)?e:[];$.observable(this.bannersList).refresh(t)}},bannersCarousel:{baseTag:"baseBannersTag",template:'<div class="swiper-container j-single-banner">\n                <div class="swiper-wrapper">\n                    {{for ~tag.banners}}\n                    <div class="swiper-slide">\n                        {{singleBanner banner=#data bannerIndex=#getIndex() analiticsCode=~tag.analiticsCode itemClass=\'swiper-img\' width=~tag.width height=~tag.height /}}\n                    </div>\n                    {{/for}}\n                </div>\n            </div>\n            <button class="swiper-button-prev" type="button" aria-label="{{:~t(\'common.goBack\')}}"></button>\n            <button class="swiper-button-next" type="button" aria-label="{{:~t(\'common.goForward\')}}"></button>',init(){var e;this.initBase(),this.banners=null!=(e=this.tagCtx.props.banners)?e:[],this.analiticsCode=this.tagCtx.props.analiticsCode,this.width=this.tagCtx.props.width||!1,this.height=this.tagCtx.props.height||!1,this.swiper=null,this.container=null,this.displayMode=this.setDisplayMode(),this.createSlider=this.createSlider.bind(this),this.setDisplayMode=this.setDisplayMode.bind(this),this.updateSlider=this.updateSlider.bind(this)},async onAfterLink(){var e,t;const n=this;function r(){var e,t;null==(t=null==(e=n.swiper)?void 0:e.autoplay)||t.start()}function s(){var e,t;null==(t=null==(e=n.swiper)?void 0:e.autoplay)||t.stop()}null==(e=this.swiper)||e.destroy(),null==(t=this.observer)||t.destroy(),this.container=this.linkCtx.elem.querySelector(".swiper-container"),null!=this.container?(await WbSpaModel.prototype.$helper.nextTick(),this.swiper=this.createSlider(),window.addEventListener("resize",this.updateSlider),this.swiper.on("transitionStart",()=>{if("d"===wb.settings.displayMode){const e=document.querySelector(".j-tooltip-advertising");e&&e.elemTarget.closest(".j-single-banner")&&e.close()}}),this.observer=function(){var e,t;const o=navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.indexOf("Trident/")>0;let a;o?r():(a=(0,i.ZS)().getCarouselBannersObserver(n.container,{threshold:.5}),null==(e=n.container)||e.addEventListener(a.elementInViewportEventName,r),null==(t=n.container)||t.addEventListener(a.elementOutOfViewportEventName,s),a.observe());return{destroy:function(){var e,t;!o&&a&&(a.destroy(),null==(e=n.container)||e.removeEventListener(a.elementInViewportEventName,r),null==(t=n.container)||t.removeEventListener(a.elementOutOfViewportEventName,s))}}}()):this.swiper=null},onDispose(){var e;null==(e=this.swiper)||e.destroy(),window.removeEventListener("resize",this.updateSlider)},createSlider(){return new Swiper(this.container,{preloadImages:!1,loop:!0,lazy:{loadOnTransitionStart:!0,loadPrevNext:!0},autoplay:{delay:5e3,disableOnInteraction:!1},slidesPerView:"auto",navigation:{nextEl:".j-slider-banners-mini .swiper-button-next",prevEl:".j-slider-banners-mini .swiper-button-prev",disabledClass:"hide"},breakpoints:{1024:{loop:!1}},on:{click:e=>{const t=e.target.closest(".j-banner-click-stat");null!=t&&(WbSpaModel.prototype.$stat.banners.sendClickStatistic($(t)),this.saveState(t))}}})},setDisplayMode(){let e=1280-(window.innerWidth-document.documentElement.clientWidth);return document.documentElement.clientWidth>=e?"displayMode1":"displayMode2"},updateSlider(){var e;let t=this.setDisplayMode();this.displayMode!==t&&(this.displayMode=t,null==(e=this.swiper)||e.destroy(),this.swiper=this.createSlider())}},bannersCarouselNew:{baseTag:"baseBannersTag",template:'<div class="slider-main__list j-banners-wrapper-new">\n                {{for item}}\n                    {{singleBanner banner=#data bannerIndex=#getIndex() analiticsCode=~tag.analiticsCode itemClass=~tag.getItemClass(#getIndex()) width=~tag.width height=~tag.height /}}\n                {{/for}}\n            </div>',init(){var e;this.initBase(),this.banners=null!=(e=this.tagCtx.props.banners)?e:[],this.analiticsCode=this.tagCtx.props.analiticsCode,this.width=this.tagCtx.props.width||!1,this.height=this.tagCtx.props.height||!1,this.carousel=new u,this.getItemClass=e=>"j-banners-carousel-item slider-main__slide"+(0===e?" active":""),this._startCarousel=this._startCarousel.bind(this)},async onAfterLink(){var e;this.container=null==(e=this.linkCtx)?void 0:e.elem.querySelector(".j-banners-wrapper-new"),null!=this.container&&(this._startCarousel(),$.observe(wb.settings,"displayType",this._startCarousel))},onDispose(){var e;null==(e=this.observer)||e.destroy(),this.carousel.stop(),$.unobserve(wb.settings,"displayType",this._startCarousel)},_setObserver(){const e=this;function t(t){t.target.classList.contains("j-banners-wrapper-new")&&e.carousel.start(t.target)}function n(t){t.target.classList.contains("j-banners-wrapper-new")&&e.carousel.stop()}this._stopSliding(),this.observer=function(){const r=navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.indexOf("Trident/")>0;if(r)return;const s=(0,i.ZS)().getCarouselBannersObserver(e.container,{threshold:.9});return e.container.addEventListener(s.elementInViewportEventName,t),e.container.addEventListener(s.elementOutOfViewportEventName,n),s.observe(),{destroy:function(){if(r||!s)return;s.destroy(),e.container.removeEventListener(s.elementInViewportEventName,t),e.container.removeEventListener(s.elementOutOfViewportEventName,n)}}}()},_stopSliding(){var e,t;null==(e=this.carousel)||e.stop(),null==(t=this.observer)||t.destroy(),this.observer=null},_startCarousel(){"phone"===wb.settings.displayType?this._stopSliding():this._setObserver()}},singleBanner:{template:'<div class="img-plug {{:~tag.banner.bannerClass}} {{:~tagCtx.props.bannersZonesContainer || \'banners-zones-container\'}}{{if ~tagCtx.props.itemClass}}{{: \' \' + ~tagCtx.props.itemClass }}{{/if}}" data-plug-text="{{:~imgLoadError}}">\n                <div class="{{:~tagCtx.props.bannersZoneClass || \'banners-zones\'}}" data-link="{on ~tagCtx.props.protectAdult && ~tag.protectAdultGoods}">\n                    <a class="banner-href j-analitics-item j-banner-shown-stat j-banner-click-stat j-banner-wba j-banner{{if ~tag.banner.target === \'_blank\'}} j-not-close-pop-up-on-click{{/if}}"\n                        data-link="{on ~tag.analytic.proceedAndSave ~tag.bannerSettings.analyticsCode null null ~tag.banner.id null #getIndex()+1 }"\n                        href="{{: ~tag.banner.link}}" title="{{attr: ~tag.banner.alt}}" target="{{: ~tag.banner.target || \'_blank\'}}"\n                        data-banner-id="{{: ~tag.banner.id}}" data-statistic-fields=\'{{:~toJson(~tag.banner.statisticFields)}}\'\n                        data-banner-index=\'{{:~tag.banner.bannerIndex}}\' data-analitics-code=\'{{:~tag.bannerSettings.analyticsCode}}\'>\n                            {{if ~tag.banner.isHtml5 || ~tag.banner.isVideo}}\n                                {{iframeBanner banner=~tag.banner bannerSettings=~tag.bannerSettings /}}\n                            {{else}}\n                                {{bannerImg banner=~tag.banner bannerSettings=~tag.bannerSettings /}}\n                            {{/if}}\n                    </a>\n\n                    {{btnAdvertising banner=~tag.banner /}}\n                </div>\n            </div>',init(){this.banner=this.tagCtx.props.banner,this.banner.imgLoadError=f.R.t("common.photoIsMissing"),this.banner.width=this.tagCtx.props.width||!1,this.banner.height=this.tagCtx.props.height||!1,this.banner.bannerIndex=this.tagCtx.props.bannerIndex,this.analytic=(0,o.a)(),this.bannerSettings={imgContClass:this.tagCtx.props.imgContClass,imgClass:this.tagCtx.props.imgClass,analyticsCode:this.tagCtx.props.analiticsCode,carousel:this.tagCtx.props.carousel,showPromoText:this.tagCtx.props.showPromoText,isLazy:this.tagCtx.props.isLazy,swiperLazyLoad:this.tagCtx.props.swiperLazyLoad},(this.banner.isVideo||this.banner.isHtml5)&&(this.tagCtx.props.itemClass=`${this.tagCtx.props.itemClass||""} j-iframe-banner`),this.banner.getFullEcomInfo=function(e){var t;const{data:n}=$.view(e),r=parseInt(e.dataset.bannerIndex)+1,s=(null==(t=null==n?void 0:n.banner)?void 0:t.id)||(null==n?void 0:n.id)||e.dataset.bannerId,i=this.tagCtx.props.analiticsCode,o=this.tagCtx.props.qty_block_delivery_before||null,a={analiticsCode:i,index:r,termsForListName:{t:s,t2:r},tailObjectTerms:{bid:s,bid_index:r}};return["DLB","DLA"].includes(i)&&o&&(a.tailObjectTerms.qty_block_delivery_before=o),["TBB","TAB"].includes(i)&&(a.tailObjectTerms.name=this.banner.alt),a}.bind(this)},update(){},protectAdultGoods(e){const t=this.ctx.root;(0,s.z)().isConfirmed||(e.preventDefault(),(0,s.z)().proceedIfAdultConfirmed(!0,()=>{var t;const n=null==(t=e.target.closest("a"))?void 0:t.href;null!=n&&(0,i.cI)().moveTo(n)},t))},onAfterLink(){var e;this.showBannerObserver=(0,i.ZS)().getSimpleObserver(()=>{const e=this.parentElem.querySelector(".j-banner");this.analytic.sendBannersWbaEvent("Banner_S","",e.dataset.analiticsCode,e.href,e.dataset.bannerIndex,e.dataset.bannerId,"",null,!0)},{threshold:.5}),null==(e=this.showBannerObserver)||e.observe([this.parentElem])},onDispose(){var e;null==(e=this.showBannerObserver)||e.destroy()}},bannerImg:{template:'<div class="{{: ~tag.bannerSettings.imgContClass || \'img-wrap\'}}">\n                {{if ~tag.bannerSettings.isLazy}}\n                    <img src="{{urlSiteStatic: \'i/blank.gif\'}}" class="{{: ~tag.bannerSettings.imgClass || ""}}" name="{{: \'banner_\' + ~tag.banner.id}}"\n                    data-{{if ~tag.bannerSettings.swiperLazyLoad}}src{{else}}original{{/if}}="{{> ~tag.banner.absoluteUrl}}"\n                    data-src-pb="{{url: ~tag.banner.absoluteUrlPb}}" alt="{{attr: ~tag.banner.alt}}"\n                    {{if !!~tag.banner.width && !!~tag.banner.height}}width="{{: ~tag.banner.width}}" height="{{: ~tag.banner.height}}"{{/if}}\n                    {{if ~tag.isBannersWithIframe}}style="opacity: 0" onload="this.style.opacity=\'1\'"{{/if}} />\n                {{else}}\n                    <img src="{{url: ~tag.banner.absoluteUrl}}" data-src-pb="{{url: ~tag.banner.absoluteUrlPb}}"\n                    {{if ~tag.bannerSettings.isLazy === undefined}}loading="lazy"{{/if}} class="{{: ~tag.bannerSettings.imgClass || ""}}"\n                    name="{{: \'banner_\' + ~tag.banner.id}}" alt="{{attr: ~tag.banner.alt}}"\n                    {{if !!~tag.banner.width && !!~tag.banner.height}}width="{{: ~tag.banner.width}}" height="{{: ~tag.banner.height}}"{{/if}}\n                    {{if ~tag.isBannersWithIframe}}style="opacity: 0" onload="this.style.opacity=\'1\'"{{/if}} />\n                {{/if}}\n            </div>\n            {{if ~tag.bannerSettings.showPromoText && ~tag.bannerSettings.carousel}}\n                {{for ~tag.banner.promoTextLines}}\n                        <span class="item-info">{{>}}</span>\n                {{/for}}\n            {{/if}}',init(){this.banner=this.tagCtx.props.banner,this.bannerSettings=this.tagCtx.props.bannerSettings,this.isBannersWithIframe=this.tagCtx.props.isBannersWithIframe}},iframeBanner:{template:'\n            {{bannerImg banner=~tag.banner bannerSettings=~tag.bannerSettings isBannersWithIframe=true /}}\n\n            <iframe class="banner-iframe"\n                id="{{:~tag.banner.iframeId}}"\n                src="{{:~tag.banner.htmlSrc}}"\n                title="{{:~tag.banner.alt}}"\n                frameborder="0" scrolling="no" allow="autoplay" sandbox="allow-scripts">\n             </iframe>\n            ',init(){this.banner=this.tagCtx.props.banner,this.bannerSettings=this.tagCtx.props.bannerSettings;const e=this.bannerSettings.imgContClass||"img-wrap";this.bannerSettings.imgContClass=`${e} j-iframe-banner-img-cont`;const t=this.banner.isHtml5?"html5":"video";this.banner.iframeId=`${t}-${this.banner.id}`}}})},22351:function(){"use strict";var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,a=(e,t)=>{for(var n in t||(t={}))s.call(t,n)&&o(e,n,t[n]);if(r)for(var n of r(t))i.call(t,n)&&o(e,n,t[n]);return e},l=(e,r)=>t(e,n(r));null==$||$.views.tags({tooltip:{dataBoundOnly:!0,boundProps:["text","tmplData"],tooltipClass:"tooltip",init:function(){var e;this.settings={delay:0,dist:10,distAlignBy:0,responsive:!0,blockedBodyScroll:!1,popupMode:!1},this.text=this.tagCtx.props.text,this.tmplName=this.tagCtx.props.tmplName,this.tmplData=this.tagCtx.props.tmplData,this.tmplType=this.tagCtx.props.tmplType,this.contentSlr=this.tagCtx.props.contentSlr,this.classList=(null==(e=this.tagCtx.props.classes)?void 0:e.split(" "))||[],this.useBinding=this.tagCtx.props.useBinding,this.overlay=this.tagCtx.props.overlay,this.tagCtx.props.hasOwnProperty("distance")&&(this.settings.dist=this.tagCtx.props.distance),this.tagCtx.props.hasOwnProperty("distanceAlignBy")&&(this.settings.distAlignBy=this.tagCtx.props.distanceAlignBy),this.tagCtx.props.hasOwnProperty("delay")&&(this.settings.delay=this.tagCtx.props.delay),this.tagCtx.props.hasOwnProperty("blockedBodyScroll")&&(this.settings.blockedBodyScroll=this.tagCtx.props.blockedBodyScroll),this.tagCtx.props.hasOwnProperty("popupMode")&&(this.settings.popupMode=this.tagCtx.props.popupMode),this.responsive=this.settings.responsive,this.tagCtx.props.hasOwnProperty("responsive")&&(this.responsive=this.tagCtx.props.responsive);let t=this.tagCtx.props.pos||"center top";this.posHorizontal=t.split(" ")[0],this.posVertical=t.split(" ")[1],this.linkedElMarkup=this.linkCtx.elem.innerHTML,this.rightCollision=this.tagCtx.props.rightCollision,this.disabled=this.tagCtx.props.disabled,this.preventDefault=this.tagCtx.props.preventDefault,this.stopPropagation=this.tagCtx.props.stopPropagation,this.isModal=!!this.tagCtx.props.isModal,this.popupMode=this.responsive&&"m"===wb.settings.displayMode||this.responsive&&this.settings.popupMode,this.showTooltip=!1,this.closeOnDisable=this.tagCtx.props.closeOnDisable},onUpdate:function(){if(!this.closeOnDisable)return!1;this.disabled&&this._destroy()},onAfterChange:function(){this.text=this.tagCtx.props.text,this.tmplData=this.tagCtx.props.tmplData},onBind:function(){if(this.disabled)return!1;this._bindEvents()},onUnbind:function(){this._destroy()},_bindEvents:function(){"always"==this.tagCtx.props.trigger?this._positionAt.call(this):"click"==this.tagCtx.props.trigger||this.popupMode?this.linkCtx.elem.addEventListener("click",this._positionAt.bind(this)):"Shown"==this.tagCtx.props.trigger?(this.linkCtx.elem.addEventListener("Shown",this._positionAt.bind(this)),this.linkCtx.elem.addEventListener("Unshown",this._destroy.bind(this))):(this.linkCtx.elem.addEventListener("mouseover",this._positionAt.bind(this)),this.linkCtx.elem.addEventListener("mousemove",this._positionAt.bind(this)),this.linkCtx.elem.addEventListener("mouseout",e=>{this.linkCtx.elem.contains(e.relatedTarget)||setTimeout(()=>{this.insideTip||this._destroy()},this.settings.delay)}))},_destroy:function(){var e,t,n;document.removeEventListener("click",this),!this.popupMode&&this.tooltip&&document.body.removeChild(this.tooltip),this.tooltip=null,this.insideTip=!1,null==(e=this.overlayEl)||e.remove(),this.showTooltip=!1,null==(n=(t=this.tagCtx.props).onClose)||n.call(t)},async _getMarkup(){if(this.contentSlr)return{html:document.querySelector(this.contentSlr).innerHTML};if(this.tmplName&&!$.templates[this.tmplName]&&await $.views.loadTemplateAsync(this.tmplName),this.tagCtx.props.useBind&&this.tmplName){return{bound:!0,link:$.link[this.tmplName]}}return this.text?{html:`<div class="tooltip__content">${this.text}</div>`}:this.tmplName?{html:$.templates[this.tmplName].render(this._getTmplData(),this.tagCtx.props.tmplHelper)}:null},handleEvent:function(e){if("click"==e.type){this.linkCtx.elem.contains(e.target)||this.tooltip.contains(e.target)||this._destroy()}},_getTmplData:function(){return"function"==typeof this.tmplData?this.tmplType?l(a({},this.tmplData()),{tmplType:this.tmplType}):this.tmplData():this.tmplType?l(a({},this.tmplData),{tmplType:this.tmplType}):this.tmplData},async _positionAt(e){var t,n;if("click"==this.tagCtx.props.trigger&&this.stopPropagation&&e.stopImmediatePropagation(),this.showTooltip&&"click"==this.tagCtx.props.trigger)return this._destroy();if(this.tooltip)return;this.showTooltip=!0;const r=await this._getMarkup();if(!r)return;if(!this.showTooltip)return;if(this.popupMode){this.preventDefault&&e.preventDefault(),this.stopPropagation&&e.stopPropagation();let t={lockScroll:!1,modal:this.isModal,showCloseBtn:"always"!=this.tagCtx.props.trigger,useHtml:!0,contentClasses:["content"],popupClassesList:["shown","tooltip","tooltip--mobile",...this.classList],useCenteredFunction:!1,onShow:e=>e.classList.remove("popup")};t.onHide=()=>{var e,t;null==(t=null==(e=this.tagCtx.props.tmplHelper)?void 0:e.onPopupHide)||t.call(e),this._destroy()},r.bound?t.onShow=e=>{e.classList.remove("popup"),r.link(e.querySelector(".content"),this._getTmplData(),l(a({},this.tagCtx.props.tmplHelper),{close:()=>this.tooltip.close()}))}:t.msg=r.html,this.tooltip=await wb.popup.showCustomPopup(t);return void(()=>{const e=window.getComputedStyle(document.body).getPropertyValue("inset"),t=this.tooltip.popup;let n=0;(e||"auto"===!e)&&(n=parseFloat(e.split(" ")[0])),isNaN(n)&&(n=0),t.style.top=Math.max(document.documentElement.clientHeight/2+(window.scrollY-n)-t.clientHeight/2,window.scrollY-n)+"px",t.style.left=Math.max(document.documentElement.clientWidth/2-t.clientWidth/2,0)+"px"})()}if(document.querySelectorAll("."+this.tooltipClass).forEach(e=>{var t;return null==(t=e.close)?void 0:t.call(e)}),this.tooltip=document.createElement("div"),this.tooltip.style.display="inline-block",this.tooltip.style.position="absolute",this.tooltip.style.zIndex="11111",this.tooltip.style.width=this.tagCtx.props.width,this.tagCtx.props.maxWidth&&(this.tooltip.style.maxWidth=this.tagCtx.props.maxWidth),r.bound){const e=this.tagCtx.view;r.link(this.tooltip,this._getTmplData(),l(a({parentView:e},this.tagCtx.props.tmplHelper),{close:this._destroy.bind(this)}))}else this.tooltip.innerHTML=r.html;if(this.tooltip.classList.add(this.tooltipClass),this.tooltip.classList.addMany(this.classList),this.tooltip.close=()=>this._destroy(),this.tooltip.elemTarget=e.target,"click"!=this.tagCtx.props.trigger&&(this.tooltip.addEventListener("mouseenter",()=>this.insideTip=!0),this.tooltip.addEventListener("mouseleave",()=>{this.insideTip=!1,setTimeout(()=>{this.insideTip||this._destroy()},this.settings.delay)})),"click"==this.tagCtx.props.trigger){document.addEventListener("click",this);const e=this.tooltip.querySelector(".j-close");null==e||e.addEventListener("click",()=>this._destroy())}this.overlay&&(this.overlayEl=document.createElement("div"),this.overlayEl.classList.addMany(["overlay","j-custom-overlay"]),document.body.appendChild(this.overlayEl)),document.body.appendChild(this.tooltip);let s,i,o=this.linkCtx.elem.getBoundingClientRect(),c=(e,t)=>{if(this.tagCtx.props.alignBy){const e=this.linkCtx.elem.closest(this.tagCtx.props.alignBy);if(e)return parseInt(e.getBoundingClientRect()[t])+this.settings.distAlignBy}return parseInt(e)};switch(this.posHorizontal){case"left":s=parseInt(o.left)-this.settings.dist-this.tooltip.offsetWidth,parseInt(o.left)-this.tooltip.offsetWidth<0&&(s=this.settings.dist);break;case"right":s=o.right+this.settings.dist,parseInt(o.right)+this.tooltip.offsetWidth>document.documentElement.clientWidth&&(s=document.documentElement.clientWidth-this.tooltip.offsetWidth-this.settings.dist);break;case"alignleft":s=c(o.left,"left");const e=document.documentElement.clientWidth-(s+this.tooltip.offsetWidth);e<0&&(s+=e);break;case"alignright":s=c(o.right,"right")-this.tooltip.offsetWidth;break;case"aligncenter":s=(c(o.left,"left")+c(o.left,"right"))/2-this.tooltip.offsetWidth/2;break;default:s=parseInt(o.left)+((null!=(t=this.linkCtx.elem.offsetWidth)?t:o.width)-this.tooltip.offsetWidth)/2;parseInt(o.right)-(null!=(n=this.linkCtx.elem.offsetWidth)?n:o.width)/2+this.tooltip.offsetWidth/2-document.documentElement.clientWidth>0&&(s=parseInt(o.right)-this.tooltip.offsetWidth)}switch(this.posVertical){case"center":i=(parseInt(o.top)+parseInt(o.bottom))/2-this.tooltip.offsetHeight/2;break;case"bottom":if(i=parseInt(o.bottom)+this.settings.dist,parseInt(o.bottom)+this.tooltip.offsetHeight>document.documentElement.clientHeight)i=parseInt(o.top)-this.tooltip.offsetHeight-this.settings.dist;else if(this.tagCtx.props.checkCollision){const e=(()=>{const e=this.linkCtx.elem.closest(this.tagCtx.props.alignBy);return e?e.getBoundingClientRect():o})(),t=document.querySelector(this.tagCtx.props.checkCollision);if(t){const n=t.getBoundingClientRect(),r=parseInt(window.getComputedStyle(this.tooltip).marginTop);parseInt(e.bottom)+this.tooltip.offsetHeight+this.settings.dist+r>n.top&&(i=parseInt(e.top)-this.tooltip.offsetHeight-this.settings.dist)}}break;default:i=parseInt(o.top)-this.tooltip.offsetHeight-this.settings.dist,this.settings.blockedBodyScroll&!WbSpaModel.prototype.$isDesktop&&(i+=-1*document.body.getBoundingClientRect().y)}s=s<0?parseInt(o.left):s,i=i<0?parseInt(o.bottom)+this.settings.dist:i,e.clientY>i?this.tooltip.classList.add("tooltip--top"):this.tooltip.classList.add("tooltip--bottom"),this.tooltip.style.left=s+"px",this.tooltip.style.top=i+pageYOffset+"px"}}})},71607:function(){"use strict";DOMTokenList.prototype.addMany=function(e){if(null==e||!Array.isArray(e))throw new Error("DOMTokenList.prototype.addMany accepts only array");e.forEach(e=>this.add(e))},DOMTokenList.prototype.removeMany=function(e){if(null==e||!Array.isArray(e))throw new Error("DOMTokenList.prototype.removeMany accepts only array");e.forEach(e=>this.remove(e))}},90623:function(){"use strict";HTMLElement.prototype.hide=function(){this.style.display="none"},HTMLElement.prototype.show=function(){this.style.display="block"},HTMLElement.prototype.width=function(){return 0==this.clientWidth?getComputedStyle(this).width.replace("px",""):this.clientWidth},HTMLElement.prototype.wrap=function(e){var t;let n=(new DOMParser).parseFromString(e,"text/html").body.firstElementChild;if(null!=n){for(null==(t=this.parentNode)||t.insertBefore(n,this);null!=n.firstElementChild;)n=n.firstElementChild;n.appendChild(this)}},HTMLElement.prototype.parents=function(e){const t=[];let n=this;const r=void 0!==e;for(;null!==(n=n.parentElement);)n.nodeType===Node.ELEMENT_NODE&&(r&&!n.matches(e)||t.push(n));return t},HTMLElement.prototype.isHidden=function(){return 0===this.offsetWidth&&0===this.offsetHeight||"none"===window.getComputedStyle(this).display},HTMLElement.prototype.isVisible=function(){return!this.isHidden()}},35707:function(){"use strict";URLSearchParams.prototype.toDictionary=function(){const e={};return this.forEach((t,n)=>e[n]=t),e},URLSearchParams.prototype.hasOwnProperty("size")||Object.defineProperty(URLSearchParams.prototype,"size",{get:function(){let e=0;for(let t of this.keys())e++;return e}})},585:function(){"use strict";Array.prototype.getIntesection=function(e){return Array.isArray(e)?this.filter(t=>e.includes(t)):(console.error("Argument must be an array"),[])},Array.prototype.last||(Array.prototype.last=function(){return this[this.length-1]}),Array.prototype.first||(Array.prototype.first=function(){return this[0]}),Array.prototype.max=function(){return Math.max.apply(null,this)},Array.prototype.min=function(){return Math.min.apply(null,this)},Array.prototype.findWhere=function(e){return this.find(t=>Object.keys(e).every(n=>t[n]===e[n]))},Array.prototype.distinct=function(){return this.filter(function(e,t,n){return n.indexOf(e)===t})},Array.prototype.toHashSet=function(e){if(null!=e&&"function"!=typeof e)throw new TypeError("toHashSet method require callback function or null");return this.reduce((t,n)=>{var r;return t.add(null!=(r=null==e?void 0:e(n))?r:n),t},new Set)},Array.prototype.toMap=function(e,t){if(null!=e&&"function"!=typeof e)throw new TypeError("toMap method require callback function or null");if(null!=t&&"function"!=typeof t)throw new TypeError("toMap method require callback function or null");return this.reduce((n,r)=>(n.set(null==e?r:e(r),null==t?r:t(r)),n),new Map)},Array.prototype.sum=function(e){let t=0;for(let n=0,r=this.length;n<r;n++)t+=e?this[n][e]:this[n];return t},Array.prototype.sumBy=function(e){let t=0;for(let n=0,r=this.length;n<r;n++)t+=e(this[n]);return t},Array.prototype.groupBy=function(e){const t=new Map;return this.forEach(n=>{const r=e(n),s=t.get(r);s?s.push(n):t.set(r,[n])}),t},Array.prototype.selectMany=function(e){return this.length?this.map(t=>e(t)).reduce((e,t)=>e.concat(t),[]):[]},Array.prototype.toChunk=function(e){const t=Math.ceil(this.length/e),n=new Array(t);for(let r=0;r<t;r++){const t=e*r;n[r]=this.slice(t,t+e)}return n},Array.prototype.merge=function(e,{lookup:t=e=>e,hasConflict:n=(e,t)=>!1}={}){if(!e||0==e.length)return!1;const r=new Map;for(const e of this||[]){const n=JSON.stringify(t(e));r.set(n,e)}let s=!1;for(const i of e){const e=JSON.stringify(t(i));if(r.has(e)){const t=r.get(e);null!=t&&n(i,t)&&(Object.assign(t,i),s=!0)}else this.push(i),s=!0}return s},Array.prototype.diff=function(e,{lookup:t=e=>e,hasConflict:n=(e,t)=>!1}={}){const r=[];if(!e||0==e.length)return r;const s=new Map;for(const e of this||[]){const n=JSON.stringify(t(e));s.set(n,e)}for(const i of e){const e=JSON.stringify(t(i));if(s.has(e)){const t=s.get(e);null!=t&&n(i,t)&&r.push(i)}else r.push(i)}return r},Array.prototype.remove=function(e){let t=this.indexOf(e);t>-1&&this.splice(t,1)}},56228:function(){"use strict";Event.prototype.stopPropagation=function(e){return function(){this.isPropagationStopped=!0,e.call(this)}}(Event.prototype.stopPropagation)},70988:function(){"use strict";var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r;const a=e=>{const a=history[e],l=Object.getOwnPropertyDescriptor(history,e);var c;Object.defineProperty(history,e,(c=((e,t)=>{for(var n in t||(t={}))s.call(t,n)&&o(e,n,t[n]);if(r)for(var n of r(t))i.call(t,n)&&o(e,n,t[n]);return e})({},l),t(c,n({value:function(...t){const n=a.apply(this,t),[r]=t,s=new CustomEvent(e,{detail:{state:r}});return window.dispatchEvent(s),n}}))))};a("pushState"),a("replaceState")},14074:function(){"use strict";var e=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),t=function(e,t){this[0]=e,this[1]=t},n=n=>{var r,s=n[e("asyncIterator")],i=!1,o={};return null==s?(s=n[e("iterator")](),r=e=>o[e]=t=>s[e](t)):(s=s.call(n),r=e=>o[e]=n=>{if(i){if(i=!1,"throw"===e)throw n;return n}return i=!0,{done:!1,value:new t(new Promise(t=>{var r=s[e](n);r instanceof Object||(e=>{throw TypeError(e)})("Object expected"),t(r)}),1)}}),o[e("iterator")]=()=>o,r("next"),"throw"in s?r("throw"):o.throw=e=>{throw e},"return"in s&&r("return"),o};Map.prototype.every=function(e){if("function"!=typeof e)throw new TypeError("Callback is not a function");let t=!0;return this.forEach((n,r,s)=>{t=t&&e(n,r,s)}),t},Map.prototype.some=function(e){if(!(e instanceof Function))throw new TypeError("Callback is not a function");let t=!1;return this.forEach((n,r,s)=>{t||(t=e(n,r,s))}),t},Map.prototype.reduce=function(e,t){if("function"!=typeof e)throw new TypeError("Map reduce argument 1 must be a function");let n=t,r=0;return this.forEach((s,i,o)=>{r++,n=1!=r||null!=t?e(n,s,i,o):s}),n},Map.prototype.map=function(e){if("function"!=typeof e)throw new TypeError("Callback is not a function");const t=new Map;return this.forEach((n,r,s)=>{t.set(r,e(n,r,s))}),t},Map.prototype.toArray=function(e){if("function"!=typeof e&&null!=e)throw new TypeError("Callback if not a function");const t=[];let n=0;return this.forEach((r,s)=>{t.push(null==e?r:e(r,s,n)),n++}),t},Map.prototype.find=function(e){if("function"!=typeof e)throw new TypeError("Callback is not a function");let t=null;return this.forEach((n,r,s)=>{t||e(n,r,s)&&(t=n)}),t},Map.prototype.sort=function(e){const t=new Map;this[Symbol.iterator]=function*(){yield*n([...this.entries()].sort(e))};for(let[e,n]of this)t.set(e,n);return t}},77906:function(){"use strict";NodeList.prototype.toArray=function(){return Array.prototype.slice.call(this)},HTMLCollection.prototype.forEach=function(e){Array.prototype.slice.call(this).forEach((t,n,r)=>e(t,n,r))}},12031:function(){"use strict";Number.prototype.countDecimals=function(){return Math.floor(this.valueOf())===this.valueOf()?0:this.toString().split(".")[1].length||0},Number.prototype.toFixedNumber=function(e,t=10){const n=Math.pow(t,e);return Math.round(Number(this)*n)/n},Number.prototype.parseIntOrDefault=function(e=null){return Number.isInteger(this)?~~this:e},Number.prototype.floatToFixed=function(e){return Number.isInteger(this)?this.toString():this.toFixed(e)}},88144:function(){"use strict";Set.prototype.toArray=function(e){if(null!=e&&"function"!=typeof e)throw new TypeError("Callback at Set.prototype.toArray must be null or function");const t=[];return this.forEach(n=>t.push(null==e?n:e(n))),t},Set.prototype.map=function(e){if("function"!=typeof e)throw new TypeError("Callback at Set.prototype.map must be function");const t=new Set;return this.forEach(n=>t.add(e(n))),t},Set.prototype.filter=function(e){if("function"!=typeof e)throw new TypeError("Callback at Set.prototype.map must be function");const t=new Set;return this.forEach(n=>{e(n)&&t.add(n)}),t}},4659:function(){"use strict";if("localStorage"in window||null!==window.localStorage){const e=Storage.prototype.setItem;Storage.prototype.setItem=function(t,n){try{e.apply(this,arguments)}catch(t){if(-1===t.message.indexOf("quota"))throw wb.spa.logError(t),t;let n,r,s={len:0},i=0;for(r in localStorage)localStorage.hasOwnProperty(r)&&(n=2*(localStorage[r].length+r.length),i+=n,s.len<n&&(s={len:n,key:r}));if(s.key)if(s.len>307200){this.removeItem(s.key);const n=`localstorage delkey:${s.key}, len:${s.len/1024} KB, key:${arguments[0]}, exp:${t.message}`;console.log(n),wb.spa.logError(new Error(n)),e.apply(this,arguments)}else{const e=`localstorage exception key:${arguments[0]}, exp:${t.message}, storageKeys:${localStorage.length}, storageLen:${i/1024} KB`;console.log(e),wb.spa.logError(new Error(e))}}},Storage.prototype.trySetItem=function(e,t){try{this.setItem(e,t)}catch(e){}},Storage.prototype.clearStartsWith=function(e,t){if(e)try{Object.entries(this).filter(n=>0===n[0].indexOf(e)&&n[0]!==t).forEach(e=>{this.removeItem(e[0])})}catch(e){}},Storage.prototype.putObject=function(e,t,{tryCatch:n}={}){if(n)try{this.setItem(e,JSON.stringify(t))}catch(e){}else this.setItem(e,JSON.stringify(t))},Storage.prototype.getObject=function(e){var t=this.getItem(e);try{return t&&JSON.parse(t)}catch(t){this.removeItem(e)}return null},Storage.prototype.hasItem=function(e){return null!=this.getItem(e)}}},9135:function(){"use strict";String.prototype.format=function(){let e=String(this);for(let t=0;t<arguments.length;t++){const n=new RegExp("\\{"+t+"\\}","gm");e=e.replace(n,arguments[t])}return e},String.prototype.formatPhone=function(e){let t=this.split(""),n="";for(let r=0;r<e.length;r++)n+="#"===e[r]?t.splice(0,1):e[r];return n},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.toSafeString=function(){return encodeURIComponent(this.replace(/<\/?[^>]+>/gi,"").trim())},String.prototype.hashCode=function(){let e,t,n=0;if(0===this.length)return n;for(e=0;e<this.length;e++)t=this.charCodeAt(e),n=(n<<5)-n+t,n|=0;return n},String.prototype.parseIntOrDefault=function(e=null){const t=parseInt(String(this));return isNaN(t)?e:t}},30174:function(){"use strict";window.requestIdleCallback||(window.requestIdleCallback=function(e,t){return setTimeout(e,1)})},69464:function(e,t,n){"use strict";n(9135),n(585),n(14074),n(88144),n(90623),n(71607);var r=n(88166);Date.prototype.format=function(e,t){const n=function(){const e=/d{1,4}|M{1,5}|yy(?:yy)?|([HhmsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,t=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,r=/[^-+\dA-Z]/g,s=function(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e},i=e=>{var n;return null==(n=(String(e).match(t)||[""]).pop())?void 0:n.replace(r,"")};return function(t,r,o){var a,l,c,u,d;const p=n;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(t)||"string"!=typeof t||/\d/.test(t)||(r=t,t=void 0),t=t?new Date(t):new Date,isNaN(Number(t)))throw SyntaxError("invalid date");"UTC:"==(r=String(function(e){const t=wb.currentLanguage;if("ru"!==t&&n.masksOverrides&&(null==n?void 0:n.masksOverrides[t])&&n.masksOverrides[t][e])return n.masksOverrides[t][e];return e}(r)||p.defaultMask)).slice(0,4)&&(r=r.slice(4),o=!0);const h=o?"getUTC":"get",m=(e,t,n)=>t[`${e}${n}`](),g=m(h,t,"Date"),f=m(h,t,"Day"),b=m(h,t,"Month"),y=m(h,t,"FullYear"),v=m(h,t,"Hours"),w=m(h,t,"Minutes"),S=m(h,t,"Seconds"),_=m(h,t,"Milliseconds"),I=o?0:t.getTimezoneOffset();const C={d:g,dd:s(g),ddd:null==(a=p.i18n)?void 0:a.shortDaysTranslations[f],dddd:null==(l=p.i18n)?void 0:l.longDaysTranslations[f],M:b+1,MM:s(b+1),MMM:null==(c=p.i18n)?void 0:c.shortMonthsTranslations[b],MMMM:null==(u=p.i18n)?void 0:u.monthGenitiveTranslations[b],MMMMM:null==(d=p.i18n)?void 0:d.longMonthsTranslations[b],yy:String(y).slice(2),yyyy:y,h:v%12||12,hh:s(v%12||12),H:v,HH:s(v),m:w,mm:s(w),s:S,ss:s(S),l:s(_,3),L:s(_>99?Math.round(_/10):_),t:v<12?"a":"p",tt:v<12?"am":"pm",T:v<12?"A":"P",TT:v<12?"AM":"PM",Z:o?"UTC":i(t),o:(I>0?"-":"+")+s(100*Math.floor(Math.abs(I)/60)+Math.abs(I)%60,4),S:function(e){const t=e%10;let n;return n=t>3||11===e%100?0:t,["th","st","nd","rd"][n]}(g)};return r.replace(e,e=>e in C?String(C[e]):e.slice(1,e.length-1))}}();n.defaultMask="ddd dd MMM yyyy",n.masksOverrides={en:{"d MMMM":"MMMM d","d MMM":"MMM d","dd MMMM yyyy, HH:mm":"MMMM dd yyyy, HH:mm","dd MMMM yyyy":"MMMM dd yyyy"},ky:{"d MMMM":"d-MMMM","dd MMMM":"dd-MMMM","d MMM":"d-MMM","dd MMM":"dd-MMM","dd MMMM HH:mm":"dd-MMMM HH:mm","d MMMM yyyy, HH:mm":"d-MMMM yyyy, HH:mm","dd MMMM yyyy, HH:mm":"dd-MMMM yyyy, HH:mm","d MMMM yyyy":"d-MMMM yyyy","dd MMM yyyy":"dd-MMM yyyy","dd MMMM yyyy":"dd-MMMM yyyy"}};const s=r.R.t,i=["sun","mon","tue","wed","thu","fri","sat"],o=i.map(e=>s(`common.dates.dayNamesShort.${e}`)),a=i.map(e=>s(`common.dates.dayNamesLong.${e}`)),l=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],c=l.map(e=>s(`common.dates.monthNamesLong.${e}`)),u=l.map(e=>s(`common.dates.monthNamesShort.${e}`)),d=l.map(e=>s(`common.dates.monthNamesGenitive.${e}`));return n.i18n={shortDaysTranslations:o,longDaysTranslations:a,longMonthsTranslations:c,shortMonthsTranslations:u,monthGenitiveTranslations:d},n(this,e,t)},Date.prototype.daysBetween=function(e){const t=new Date(this.getFullYear(),this.getMonth(),this.getDate()),n=(new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-t.getTime())/864e5;return Math.floor(n)},Date.prototype.minutesBetween=function(e){return Math.floor((this.getTime()-e.getTime())/6e4)},Date.prototype.dateEqual=function(e){return this.getDate()===e.getDate()&&this.getMonth()===e.getMonth()&&this.getFullYear()===e.getFullYear()},Date.prototype.is1stJan=function(){return 1===this.getDate()&&0===this.getMonth()},Date.prototype.getUtcTime=function(){return this.getTime()-6e4*this.getTimezoneOffset()},Date.utcNow=function(){return(new Date).getUtcTime()},Date.prototype.addDays=function(e){let t=new Date(this.valueOf());return t.setDate(t.getDate()+e),t},Date.prototype.addYears=function(e){let t=new Date(this.valueOf());return t.setFullYear(t.getFullYear()+e),t},Date.prototype.addMinutes=function(e){let t=new Date(this.valueOf());return t.setMinutes(t.getMinutes()+e),t},Date.prototype.addHours=function(e){const t=new Date(this.valueOf());return isNaN(e)||t.setHours(t.getHours()+ +e),t},Date.prototype.resetHours=function(e){const t=new Date(this.valueOf());return isNaN(e)||t.setHours(e,0,0,0),t};n(12031),n(4659),n(56228),n(35707),n(77906),n(30174);var s=n(88927);const i=document.referrer;window.originReferer=i,Object.defineProperty(document,"referrer",{get:()=>{try{return(0,s.cI)().referrer}catch(e){return i}}});n(70988),n(31226);var o=n(90532),a=n.n(o),l=n(27473),c=n(82516),u=n(28288),d=n(86291);const p=["10","14"],{PROXY_HTTPS:h,ENV:m,HIGHLIGHT_URL:g}=l.A,f={deepClone:e=>JSON.parse(JSON.stringify(e)),getHashCode:e=>{let t,n,r=0;if(0===e.length)return r;for(t=0;t<e.length;t++)n=e.charCodeAt(t),r=(r<<5)-r+n,r|=0;return r},generateGuid:e=>{const t=URL.createObjectURL(new Blob).split("/").pop();return e?t:null==t?void 0:t.replace(/-/g,"")},hasBit(e,t){return 0!==(t&1<<e)},toMap(e,t,n){if(!t&&"function"!=typeof t)throw new TypeError("toMap method require callback function or null");if(!n&&"function"!=typeof n)throw new TypeError("toMap method require callback function or null");return e.reduce((e,r)=>(e.set(t?t(r):r,n?n(r):r),e),new Map)},dateToFormat(e,t){return e.format(t)},roundUpToNextMultipleOfNumber(e,t){const n=Math.ceil(e/t)*t;return n!==e?n:n+t},toTimeFormat:function(e,t){if(null==t)return"";const n=wb.helpers.timeExtraction(t,!0);return e.format(`${Number(n.hours)>0?n.hours+":":""}${n.minutes}:${n.seconds}`)},timeExtraction:function(e,t=!1){return Object.entries({hours:36e5,minutes:6e4,seconds:1e3}).reduce((n,r)=>{const s=Math.floor(e/r[1]);return n[r[0]]=t?`0${s}`.slice(-2):s,e-=s*r[1],n},{})},getInstPeriod(e){if(!e)return 0;switch((240&e)>>4){case 4:return 3;case 5:return 6;case 9:return 12;default:return 0}},getInstPeriodV2(e,t){if(!e)return 0;let n;if(t){n=(e&240)>>>4}else{n=(e&120)>>>3}return[4,5,9].includes(n)?n/100:0},date:{leftBefore:e=>{const t=wb.helpers.date.serverDate?new Date(wb.helpers.date.serverDate):new Date,n=e.getTime()-t.getTime(),r=Math.floor(n/1e3%60),s=Math.floor(n/6e4%60),i=Math.floor(n/36e5);return"{0}:{1}:{2}".format($.views.converters.leadZero(i,2),$.views.converters.leadZero(s,2),$.views.converters.leadZero(r,2))},diff:(e,t=new Date)=>{const n={days:0,months:0,years:0};if(e==t)return n;if(e>t)return wb.helpers.date.diff(t,e);if(n.years=t.getFullYear()-e.getFullYear(),n.months=t.getMonth()-e.getMonth(),n.days=t.getDate()-e.getDate(),n.days<0){const t=new Date(e.getFullYear(),e.getMonth()+1,0);n.months--,n.days+=t.getDate()}return n.months<0&&(n.years--,n.months+=12),n},formatEstimated:(e,t,n)=>{const{timeFrom:s,timeTo:i}=n||{},o=new Date;o.setHours(0,0,0,0);const a=new Date(e);t||(t=new Date(e)),t.setDate(t.getDate());if(t.valueOf()-o.valueOf()<0)return r.R.t("delivery.status.delayed");if(!s||!i)return a.getMonth()!==t.getMonth()?`${a.format("d MMMM")}-${t.format("d MMMM")}`:a.getDate()!==t.getDate()?`${a.getDate()}-${t.format("d MMMM")}`:`${a.format("d MMMM")}`;const l=$.views.converters.formatTimeStr(s);return r.R.t("delivery.dayNameWithTimeFromTimeTo",{dayName:$.views.converters.dayNameFromDate(a,!0),newTimeFrom:l,timeTo:i})},paymentFeedbackTimerStr:e=>{const t=Date.now(),n=Number(e)-Number(t),s=Math.floor(n/1e3%60),i=Math.floor(n/6e4%60),o=Math.floor(n/36e5),a=Math.floor(n/864e5);if(n<0)return"";if(o>=24){const e=o%24>=12?a+1:a;return`${r.R.plural("common.time.days",{count:e})}`}return"{0}:{1}:{2}".format($.views.converters.leadZero(o,2),$.views.converters.leadZero(i,2),$.views.converters.leadZero(s,2))}},getParamsFromUrlQuery:e=>{if(!e)return{};0===e.indexOf("?")&&(e=e.substring(1));const t=e.split("&"),n={};for(let e=0,r=t.length;e<r;e++){const r=t[e].split("=");n[r[0]]=r[1]}return n},appendToParamsFromQuery:(e,t)=>{if(!t)return;0===t.indexOf("?")&&(t=t.substring(1));const n=t.split("&");for(let t=0,r=n.length;t<r;t++){const r=n[t].split("=");e.set(r[0],r[1])}},getCardImgName:e=>{if(1===e.idx&&e.viewFlags){const t=((e,t)=>{const n=parseInt((wb.xnm.isViewFlagSet(t,c._q.photoTestGroup1)?"1":"0")+(wb.xnm.isViewFlagSet(t,c._q.photoTestGroup0)?"1":"0"),2);if(0===n)return;const r=wb.cookieHelper.getCookie("_wbauid");if(!r)return;const s=e+r+"ABTest=Be$t",i=a()(s),o=JSBI.BigInt("0x"+i.slice(-16)),l=JSBI.remainder(o,JSBI.BigInt(n+1)),u=JSBI.toNumber(l);return 0!=u?`ab_${u}`:void 0})(e.nmId,e.viewFlags);return null!=t?t:e.idx}return e.idx},url:{urlForJsTmpl:(e,t=!1)=>(0,u.urlSiteStatic)(`t/jst/${e}`,t),urlProductStatic:(e,t=!1,n="ru",r=!1)=>`${(0,d.V)().constructHostV2(e,"nm",r)}/info/${n}/card.json`,urlSellerStatic:(e,t=!1)=>`${(0,d.V)().constructHostV2(e,"nm",t)}/info/sellers.json`,urlCertificateStatic:e=>`${(0,d.V)().constructHostV2(e,"nm",!1)}/info/certificate.json`,urlStaticData:(e,t=!1)=>(0,u.urlStaticBasket)(`data/${e}`,0,t),urlFeedbackPhoto:(e,t="ms",n=!1,r)=>{var s,i,o;let a;if((null==(s=wb.global.settings.switches)?void 0:s.enableNewFeedbacksPhotoShards)&&(0,u.checkMobileRange)(Number(wb.user.getId()),(null==(o=null==(i=wb.global.settings.mobileAppVariables)?void 0:i.objects)?void 0:o.newFeedbacksPhotoShardsRange)||[])&&r&&-1!==r.indexOf("/"))return a=(0,d.V)().volFeedbackPhotoUuidHost(r,n),`https://${a}/${t}.${$.views.converters.toWebp("jpg")}`;{const r=parseInt(String(e),10);return a=(0,d.V)().constructHostV2(r,"feedbackPhoto",n),`${a}/photos/${t}.${$.views.converters.toWebp("jpg")}`}},urlVideoProduct:(e,t="mp4",n="360p",r=!1)=>{const s=parseInt(e,10);return`${(0,d.V)().constructHostV2(s,"video",r)}/${t}/${n}/${"mp4"===t?"1.mp4":"index.m3u8"}`},urlImageTags:function(e,t,n=!1){const r=(0,d.V)().constructHostV2(e,"nm",n);return t?`${r}/info/tags/${t}.json`:`${r}/info/tags/picMap.json`},urlFeedbackVideo:(e,t="preview.webp",n=!1)=>{const r=e.id;return`https://${(0,d.V)().volFeedbackVideoHost(String(r),n)}/${t}`},urlUserMark(e){const t="/w/users/mark",n="release"===m?"https://":h;if(wb.global.settings.switches.switchVersionOnHighlight){if("feedbacks"===e&&wb.global.settings.variables.highlightForFeedbacks)return n+wb.global.settings.variables.highlightForFeedbacks+t;if("questions"===e&&wb.global.settings.variables.highlightForQuestions)return n+wb.global.settings.variables.highlightForQuestions+t}return`${g}/highlight-api/api/v1/w/users/mark`}},replaceDeliveryFilterVal:e=>e.replace(/&fdlvr=(\d+)/,(e,t)=>{if(p.includes(t))return`&fdlvr=${t}`;const n=23-new Date(Date.now()).getHours()-1;let r=null;switch(parseInt(t)){case 4:r=n>4?4:n;break;case 12:r=n;break;case 24:r=24+n;break;case 48:r=48+n;break;case 72:r=72+n;break;case 120:r=120+n}return null!=r?`&fdlvr=${r}`:""}),path:{fileName:e=>(null==e?void 0:e.substring(e.lastIndexOf("/")+1))||"",extension:e=>(null==e?void 0:e.slice(1+(Math.max(e.lastIndexOf("."),0)||e.length)))||""},iOS:function(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},huawei:()=>{const e=navigator.userAgent||navigator.vendor||window.opera;return/huawei/i.test(e)},formatVideoDuration:e=>{const t=Math.floor(e/60),n=e%60;return`${t<10?`0${t}`:t}:${n<10?`0${n}`:n}`},downloadFile:(e,t)=>{const n=URL.createObjectURL(e),r=document.createElement("a");r.setAttribute("target","_blank"),r.href=n,t&&(r.download=t),document.body.appendChild(r),r.click(),document.body.removeChild(r)},downloadOrShareFile:async(e,t,n,r,s)=>{const i=new File([e],t,{type:n}),o=[i];try{if("m"===wb.settings.displayMode&&navigator.canShare({files:o}))return await navigator.share({files:o}),void(null==s||s())}catch(e){wb.spa.logError(e,r)}wb.helpers.downloadFile(i)},clearText:e=>{const t=document.createElement("div");t.innerHTML=e.replace(/<br\s*\/?>/gi," ");return(t.textContent||t.innerText||"").replace(/\u00A0/g," ").trim()}};wb.helpers=f;var b=n(65644),y=n(74929),v=n(51799),w=n(42094),S=n(33863),_=n(28946),I=n(59168),C=n(76904),k=n(40204),P=n(10288),E=Object.defineProperty,T=(e,t,n)=>((e,t,n)=>t in e?E(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);const O="wbx__tokenData",x="auth_token",M="v2",A=`/${M}/auth/slide-v3`,R=`/${M}/auth/slide-v3-confirm`,D=`/${M}/auth/logoff`,{AUTH_URL:L,AUTH_INTERNAL_URL:B}=l.A;const N=Object.freeze(["vmeste.wildberries.ru","vmeste-stage.wildberries.ru","digital.wildberries.ru","vsemrabota.ru","guru.wildberries.ru","guru-stage.wildberries.ru","travel.wildberries.ru","digital.wb.ru","seller.wildberries.ru","career.wb.ru","wibes.ru","wb-bank.ru"]),j="error404";var F=Object.defineProperty,U=Object.defineProperties,W=Object.getOwnPropertyDescriptors,H=Object.getOwnPropertySymbols,V=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable,q=(e,t,n)=>t in e?F(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,K=(e,t,n)=>q(e,"symbol"!=typeof t?t+"":t,n);class G{constructor(e){K(this,"router"),K(this,"moveTo",({targetLink:e,replaceState:t,forceTransition:n,forceUpdate:r})=>{var i,o,a,l,c,u,d,p;const h=(0,v.a)(),m=(0,s.uL)();let g;try{g=new URL(e,window.location.origin)}catch(e){return}if("javascript:"===g.protocol)return;if(N.includes(g.host))return void(window.location.href=g.toString());const f=this.router.findRoute(g.pathname),b=g.hostname===window.location.hostname,y=g.pathname===window.location.pathname,w=window.location.search===g.search,S=f&&Boolean(f.subroutes),_=!!S&&(null==(i=f.subroutes)?void 0:i.includes(g.pathname.substring(1))),I=y&&w,C=(null==f?void 0:f.name)===(null==(o=this.router.currentRoute)?void 0:o.name),k=S?y||_&&C:y&&w;if(!(f&&this.router.routesDictionary[f.name]&&b))return this.router.isLeaving=!0,t?void window.location.replace(String(e)):void(window.location.href=String(e));this.router.isLeaving=!1,(null==(a=this.router.currentRoute)?void 0:a.name)===f.name&&window.dispatchEvent(new CustomEvent("spaTransition",{detail:{isFinished:!0,dest:f}}));const P={name:f.name};if(k&&!n)return null==(c=null==(l=m.viewModel)?void 0:l.onSamePageNavigation)||c.call(l,e),window.dispatchEvent(new CustomEvent("samePageNavigation",{detail:{targetLink:e}})),void(I||this.router.pushState(P,document.title,g.href));this.router.targetRoute=f.name,this.router.referrer=window.location.href;const E=h.getTempAnalyticForState();E&&(P.analyticData=E),t?this.router.replaceState(P,document.title,g.href):this.router.pushState(P,document.title,g.href);(null==(u=this.router.currentRoute)?void 0:u.name)===f.name&&(g.pathname.substring(1)===f.path||(null==(d=f.subroutes)?void 0:d.includes(g.pathname.substring(1))))&&(null==(p=null==f?void 0:f.subroutes)?void 0:p.length)>0?window.dispatchEvent(new CustomEvent("samePageNavigation",{detail:{targetLink:e}})):this.router.goToRoute(f,g,r).catch(()=>{})}),this.router=e,this.move=this.move.bind(this),this.moveTo=this.moveTo.bind(this),this.moveToSignIn=this.moveToSignIn.bind(this),this.moveTo404=this.moveTo404.bind(this),this.moveTo500=this.moveTo500.bind(this),this.refresh=this.refresh.bind(this)}move({steps:e,event:t}){var n;const r=null==t?void 0:t.currentTarget;null!=(null==r?void 0:r.href)?(null==(n=this.router.customHistory)?void 0:n.canMove(e))&&(null==t||t.preventDefault(),window.history.go(e)):window.history.go(e)}moveToSignIn({p:e,replaceState:t}){let n=(e=>{let t="/security/login";return e?`${t}?returnUrl=${encodeURIComponent(e)}`:window.location.pathname===t?-1===window.location.search.indexOf("returnUrl=")?t:window.location.href:`${t}?returnUrl=${encodeURIComponent(window.location.href)}`})(e&&e.query&&e.query.returnUrl);this.router.moveTo(new URL(n,window.location.href).href,t)}async moveTo404(){try{const e=(0,s.kB)();this.router.abortController.abort();const t=new AbortController;this.router.abortController=t,this.router.currentRoute={name:j,useReact:!0,reactPageName:j,containerId:0},e.setData({routeName:j,viewData:void 0,containerId:0,isNeedLoadData:!1,isTransition:!1,forceUpdate:!1,signal:t.signal}),window.dispatchEvent(new CustomEvent("spaTransition",{detail:{isFinished:!0}})),window.scrollTo(0,0)}catch(e){console.error(e),$.link.criticalError("#app")}}async moveTo500({error:e,payload:t}={}){this.router.currentRoute=((e,t)=>U(e,W(t)))(((e,t)=>{for(var n in t||(t={}))V.call(t,n)&&q(e,n,t[n]);if(H)for(var n of H(t))z.call(t,n)&&q(e,n,t[n]);return e})({},this.router.currentRoute),{useReact:!1});try{this.router.updateRouteData({routeName:"criticalError",viewData:void 0,isTransition:!1,isNeedLoadData:!1,forceUpdate:!1})}catch(e){console.error(e),this.router.updateRouteData({routeName:"absoluteCriticalError",viewData:void 0,isTransition:!1,isNeedLoadData:!1,forceUpdate:!1})}finally{wb.spa.logError(e,t,!0)}}refresh(){const e=(0,s.uL)(),t=this.router.currentRoute;e.clearNotActiveContainer(),this.router.goToRoute(t,window.location,!0)}static factory(e){return new G(e)}}var J=n(7698),Y=n(58602),Q=Object.defineProperty,X=(e,t,n)=>((e,t,n)=>t in e?Q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class Z extends Y.Observable{constructor(){super(...arguments),X(this,"isReady",!0),X(this,"location",{pathname:window.location.pathname,search:window.location.search,hash:window.location.hash,state:window.history.state}),X(this,"lastSearch",null),X(this,"lastPathname",null),X(this,"lastAddress"),X(this,"lastCurrency")}updateLocation(e){this.location={pathname:window.location.pathname,search:window.location.search,hash:window.location.hash,state:e}}setStatus(e){this.isReady=e}static factory(){return new Z}}var ee=Object.defineProperty,te=(e,t,n)=>((e,t,n)=>t in e?ee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class ne extends Y.Observable{constructor(){super(...arguments),te(this,"routeName",""),te(this,"viewData",null),te(this,"containerId",0),te(this,"isTransition",!1),te(this,"isNeedLoadData",!0),te(this,"signal"),te(this,"forceUpdate",!1),te(this,"dataId",0)}setData(e){Object.entries(e).map(([e,t])=>this[e]!==t).filter(e=>e).length>0&&(this.routeName=e.routeName,this.viewData=e.viewData,this.containerId=e.containerId,this.isTransition=e.isTransition,this.isNeedLoadData=e.isNeedLoadData,this.signal=e.signal,this.forceUpdate=e.forceUpdate,this.dataId=this.dataId+1)}static factory(){return new ne}}var re=Object.defineProperty,se=Object.getOwnPropertySymbols,ie=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable,ae=(e,t,n)=>t in e?re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const le=(e,t)=>{if(null==e.routePathSegments)return e.path;const n=e.routePathSegments.reduce((e,n)=>{e+="/";const r=n.name;return n.isParameter&&r?(!n.isOptional||n.isOptional&&null!=t[r])&&(e+=t[r]):e+=n.content,e},"").replace(/[\/\?]$/,"");return e.externalPath?e.externalPath+n:n},ce=(e,t=0)=>{const n=(0,s.dU)(),r=e.requiredCss?Promise.all(e.requiredCss.map(n.loadCssAsync)):Promise.resolve(),i=e.requiredJs?Promise.all(e.requiredJs.map(n.loadJsAsync)):Promise.resolve(),o=e.requiredModel?n.loadJsAsync(e.requiredModel):Promise.resolve();return Promise.all([i,r,o]).then(([e])=>Promise.resolve(e)).catch(n=>n.isNotFound||n.isCancelled||t>=3?Promise.reject(n):(t++,ce(e,t)))},ue=(e,t,n)=>{const r=(0,C.getHttpClient)(),s=("string"==typeof n?n:`${e.replace("Entrypoint","")}`).toLowerCase(),i=(window._debug,`${s}.json`),o=t[i],a=window._debug?`${i}?${o}`:i.replace(".json",`.${o}.json`);return r.fetchStatic(a,{},wb.helpers.url.urlForJsTmpl).then(t=>{const n=t,{main:r,localization:s}=n,i=((e,t)=>{var n={};for(var r in e)ie.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&se)for(var r of se(e))t.indexOf(r)<0&&oe.call(e,r)&&(n[r]=e[r]);return n})(n,["main","localization"]);return $.templates(((e,t)=>{for(var n in t||(t={}))ie.call(t,n)&&ae(e,n,t[n]);if(se)for(var n of se(t))oe.call(t,n)&&ae(e,n,t[n]);return e})({[e]:r},i)),Promise.resolve()}).catch(e=>Promise.reject(e))};var de=Object.defineProperty,pe=(e,t,n)=>((e,t,n)=>t in e?de(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class he{constructor(e,t){pe(this,"state"),pe(this,"previous"),pe(this,"next"),this.state=e,this.previous=t,this.next=null}updateNext(e){this.next=e}updatePrevious(e){this.previous=e}update(e){this.state=e}static factory(e,t){return new he(e,t)}}var me=Object.defineProperty,ge=(e,t,n)=>((e,t,n)=>t in e?me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class fe{constructor(){ge(this,"head"),ge(this,"current"),this.head=null,this.current=null}push(e){const t=he.factory(e,this.current);this.head||(this.head=t),this.current&&this.current.updateNext(t),this.current=t}tryUpdateCurrrent(e){return null!==this.current&&(this.current.update(e),!0)}reInit(e){const t=e.reduce((e,t)=>(e.set(t.state,he.factory(t.state,null)),e),new Map);e.forEach(e=>{const n=t.get(e.state);if(e.next){const r=t.find(t=>t.state.id===e.next);null==n||n.updateNext(r)}if(e.previous){const r=t.find(t=>t.state.id===e.previous);null==n||n.updatePrevious(r)}});const n=t.find(e=>void 0===e.previous);return!!n&&(this.head=n,this.current=null,!0)}makeCurrent(e){let t=this.head;for(;t;){if(t.state.id===e){this.current=t;break}t=t.next}}canMove(e){let t=this.current,n=e>0?-1:1,r=e>0?"next":"previous",s=e;for(;0!==s;){if(null===t)return;t=t[r],s+=n}return!0}toJSON(){var e,t;let n=this.head;const r=[];for(;n;)r.push({state:n.state,next:null==(e=n.next)?void 0:e.state.id,previous:null==(t=n.previous)?void 0:t.state.id}),n=n.next;return r}static factory(){return new fe}}var be=Object.defineProperty,ye=(e,t,n)=>((e,t,n)=>t in e?be(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);const ve="spa_history";var we=class{constructor(){ye(this,"history"),this.history=fe.factory()}updateCache(){sessionStorage.putObject(ve,this.history)}addItem(e){this.history.push(e),this.updateCache()}init(e){const t=sessionStorage.getObject(ve);if(t&&e&&e.id){this.history.reInit(t)&&this.history.makeCurrent(e.id)}}updateCurrent(e){e.id&&this.history.makeCurrent(e.id)}updateCurrentItem(e){this.history.tryUpdateCurrrent(e)||this.history.push(e),this.updateCache()}canMove(e){return this.history.canMove(e)}},Se=Object.defineProperty,_e=Object.getOwnPropertySymbols,Ie=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable,ke=(e,t,n)=>t in e?Se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Pe=(e,t)=>{for(var n in t||(t={}))Ie.call(t,n)&&ke(e,n,t[n]);if(_e)for(var n of _e(t))Ce.call(t,n)&&ke(e,n,t[n]);return e},Ee=(e,t,n)=>ke(e,"symbol"!=typeof t?t+"":t,n);class Te{constructor(){Ee(this,"abortController"),Ee(this,"initTask",new w.cY),Ee(this,"prevRoute",null),Ee(this,"currentRoute"),Ee(this,"targetRoute"),Ee(this,"customHistory"),Ee(this,"isLeaving"),Ee(this,"queryParams"),Ee(this,"referrer"),Ee(this,"routeParameters"),Ee(this,"routesDictionary"),Ee(this,"userIsAuth",!1),Ee(this,"resourseLoader"),Ee(this,"onRouteChange")}async init(e){var t;const n=(0,s.pL)(),r=window.history.state,{moveTo404:i,moveTo500:o}=(0,s.VX)(),a=new we;a.init(r),this.customHistory=a,this.abortController=new AbortController,this.routeParameters={},this.referrer=window.originReferer,this.onRouteChange=e,n.updateLocation(r);const l=await this.getRouteNameByLocation(window.location.pathname,window.location.search);return l?(this.currentRoute=this.routesDictionary[l],this.setTargetRoute(l),(null==r?void 0:r.name)||this._replaceState({name:l},document.title,window.location.href),null==(t=this.initTask)||t.resolve(null),this.routerTransitionAsync({destName:l,url:window.location,isInitialRender:!0,forceUpdate:!1,isTransition:!1}).catch(e=>{var t;return console.log(e),e.isCancelled||o(),null==(t=this.initTask)||t.resolve(null),Promise.resolve()})):i()}async getRouteNameByLocation(e,t){var n,r;let s=null==(n=this.findRoute(e))?void 0:n.name;if(!s)try{const n=(0,C.getHttpClient)(),i=await n.fetchJSON(`/webapi/check-redirect${e}${t}`,{},{useProccessResponse:!0});(null==i?void 0:i.redirect)&&(s=null==(r=this.findRoute(window.location.pathname))?void 0:r.name)}catch(e){}return s}setData(e){this.routesDictionary=e}setResourseLoader(e){this.resourseLoader=e}setTargetRoute(e){this.targetRoute=e,this.routeChange()}move(e,t){const{move:n}=(0,s.VX)();n({steps:e,event:t})}moveTo(e,t=!1,n=!1,r=!1){const{moveTo:i}=(0,s.VX)();i({targetLink:e,replaceState:t,forceTransition:n,forceUpdate:r})}goToRoute(e,t,n=!1){const r=null==e?void 0:e.name;return window.dispatchEvent(new CustomEvent("spaTransition",{detail:{isFinished:!1,dest:e}})),this.abortController.abort(),this.abortController=new AbortController,this.routerTransitionAsync({destName:r,url:t,isInitialRender:!1,forceUpdate:n,isTransition:!0})}addState(e,t,n){var r;this.pushState(Pe({isRouterTrigger:!0,name:(null==(r=this.currentRoute)?void 0:r.name)||""},e),null!=t?t:"",null!=n?n:"")}replaceState(e,t,n){var r;this._replaceState(Pe({isLocalHandler:!0,name:(null==(r=this.currentRoute)?void 0:r.name)||""},e),null!=t?t:"",null!=n?n:"")}pushState(e,t,n){var r;const i=(0,s.MA)().generateGuid();e.id=i,window.history.pushState(e,t,n),null==(r=this.customHistory)||r.addItem(e)}_replaceState(e,t,n){var r;const i=(0,s.MA)();e.id=i.generateGuid(),e.title=t,window.history.replaceState(e,"",n),null==(r=this.customHistory)||r.updateCurrentItem(e)}routeChange(){this.onRouteChange&&this.onRouteChange()}async updateRouteDataExternal(e,t){var n;t=t||(null==(n=this.currentRoute)?void 0:n.name)||"",await this.updateRouteData({routeName:t,viewData:e,isNeedLoadData:!1})}async loadRouteDataAsync(e,t=0,n=!1,r=!1){var s;const i=e?new URL(`${le(e,this.routeParameters)}?${null==(s=this.queryParams)?void 0:s.toString()}`,window.location.origin):void 0;return this.resourseLoader.loadData({url:i,triesCount:t,noRetries:n,forceUpdate:r,routeName:null==e?void 0:e.name}).then(e=>({viewData:e.viewData,isAborted:e.redirected}))}async moveTo500Async(e,t){const{moveTo500:n}=(0,s.VX)();await n({error:e,payload:t})}async moveTo404Async(){const{moveTo404:e}=(0,s.VX)();await e()}refresh(){const{refresh:e}=(0,s.VX)();e()}moveToSignIn(e,t){const{moveToSignIn:n}=(0,s.VX)();n({p:e,replaceState:t})}async routerTransitionAsync({destName:e,url:t=window.location,isInitialRender:n,forceUpdate:r,isTransition:i}){var o;const a=(0,s.sp)(),{moveTo404:l,moveTo500:c}=(0,s.VX)(),u=(0,v.a)(),d=(0,s.uL)();this.prevRoute=this.currentRoute,this.currentRoute=this.routesDictionary[e];let p=i||r||n;const h=d.find(2);!r&&"SpaBasketEntrypoint"===e&&(null==h?void 0:h.viewModel)&&(p=!1),"SpaBasketEntrypoint"!==this.prevRoute.name||"SpaSearchEntrypoint"!==this.currentRoute.name&&"SpaSellerCatalogEntrypoint"!==this.currentRoute.name&&"SpaCatalogEntrypoint"!==this.currentRoute.name&&"SpaRecentCatalogEntrypoint"!==this.currentRoute.name&&"SpaRecommendationsCatalogEntrypoint"!==this.currentRoute.name&&"SpaBrandsEntrypoint"!==this.currentRoute.name||(p=!0);const m=this.abortController.signal;u.sendEvent("pageview",{cookies_alert:(null==(o=wb.spa.getMainReactLayout())?void 0:o.cookiePolicy.check())?1:0});try{const n=(0,s.MA)();if(!this.currentRoute)throw new C.NotFoundError;this.updateRouteParametres(t.pathname.substring(1),this.currentRoute),this.updateQueryModel(t);const o=le(this.currentRoute,this.routeParameters);!this.currentRoute.metaTagsUrl&&a.update(o,null),n.menuLk().then(e=>{null==e||e.updateMenu(o,this.currentRoute.lkMenuOptions,this.userIsAuth)});let l=null;if(p&&!m.aborted){this.updateState(!1);const{viewData:t}=await this.loadRouteData({routeName:e,abortSignal:m});l=t}return p||m.aborted||(this.updateState(!1),await new Promise(e=>requestAnimationFrame(()=>e()))),this.updateRouteData({routeName:e,viewData:l,abortSignal:m,isTransition:i,isNeedLoadData:!i,forceUpdate:r}),window.dispatchEvent(new CustomEvent("spaTransition",{detail:{isFinished:!0,dest:this.currentRoute}})),void window.scrollTo(0,0)}catch(t){if(t.isNotFound)return void l();if(!t.isCancelled&&!t.isUnauthorize&&null!=t.message&&""!=t.message){console.log(t.message,t);return void c({error:t,payload:{method:"routerTransitionAsync",destRoute:e,current:window.location.toString(),initial:n,forced:r}})}throw t}}findRoute(e){var t;const n=e.substring(1).split("/"),r=e.substring(1);let s=null!=(t=Object.keys(this.routesDictionary).filter(e=>{var t;const s=this.routesDictionary[e];return s.routePathSegments?("SpaCatalogEntrypoint"!==s.name||".aspx"!==r.slice(-5))&&s.routePathSegments.every((e,t)=>{var r;return e.isParameter?!(null!=(r=null==e?void 0:e.isOptional)&&!r)||n[t]:e.content===n[t]}):s.path===r||(null==(t=s.subroutes)?void 0:t.includes(r))}).map(e=>this.routesDictionary[e]))?t:[];if(s.length>1){const e=e=>{var t,n;return null!=(n=null==(t=e.routePathSegments)?void 0:t.some(e=>e.isCatchAll))&&n};s.sort((t,n)=>Number(e(t))-Number(e(n))),s=s.filter(e=>"SpaCatalogEntrypoint"!==e.name)}return s[0]}async loadRouteData({routeName:e,abortSignal:t}){const{isAborted:n,viewData:r}=await this.loadRequiredResoursesAsync(e);return t&&t.aborted?{isAborted:!0,viewData:null}:{isAborted:Boolean(null==t?void 0:t.aborted)||n,viewData:r}}updateState(e){const t=(0,s.pL)(),n=(0,J.w)();$.observable(n).setProperty({isReady:e}),t.setStatus(e)}loadRequiredResoursesAsync(e,t=0){return this.resourseLoader.loadResoursesData({routeName:e,parameters:this.routeParameters,query:this.queryParams,triesCount:t}).then(e=>({viewData:e.viewData,isAborted:e.redirected}))}async updateRouteData({routeName:e,viewData:t,abortSignal:n,isTransition:r,forceUpdate:i=!1,isNeedLoadData:o}){var a,l,c;const u=(0,s.kB)(),d=n||this.abortController.signal;if(r=r||!1,d.aborted)return;const p=this.routesDictionary[e],h=Boolean(p),m=null!=(l=null==(a=this.currentRoute)?void 0:a.containerId)?l:0,g=p?null!=(c=p.containerId)?c:0:m;u.setData({routeName:e,viewData:t,containerId:g,isTransition:r,isNeedLoadData:!!h&&o,forceUpdate:i,signal:d})}updateRouteParametres(e,t){if(!t.routePathSegments)return void(this.routeParameters={});const n=e.split("/"),r=t.routePathSegments.reduce((e,t,r)=>(t.isParameter&&t.name&&(t.isCatchAll?e[t.name]=n.slice(r).join("/"):e[t.name]=n[r]),e),{});this.routeParameters=r}updateQueryModel(e){this.queryParams=new URLSearchParams((null!=e?e:window.location).search)}static factory(){return new Te}}var Oe=Te;var xe=class{async onActionExecuting(){const e=(0,s.Z1)(),t=(0,s.u4)().getUid();e.userData.setKey("0"!==t,t),await e.userData.getUserDataAsync()}};var Me=class{async onBeforeActionExecuting(e){var t;const n=(0,s.u4)(),r=await n.getLocationData();e.searchParams.set("country",null!=(t=r.locale)?t:"")}},Ae=Object.defineProperty,Re=(e,t,n)=>((e,t,n)=>t in e?Ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);var De=class{constructor(e){Re(this,"checkFunction"),this.checkFunction=null!=e?e:()=>!0}onBeforeActionExecuting(e,t,n){n.cancelRequest=this.checkFunction()}};var Le=class{onBeforeActionExecuting(e,t,n){const r=(0,s.cI)();t.body||(t.body=new URLSearchParams),t.body.set("changeEmail","SpaChangeEmailEntrypoint"==r.targetRoute)}},Be=n(18136),$e=Object.defineProperty,Ne=(e,t,n)=>((e,t,n)=>t in e?$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);var je=class{constructor(){Ne(this,"bplOffer"),Ne(this,"customsDutySigned"),Ne(this,"getBalanceTask"),Ne(this,"isBuyItNowMode"),Ne(this,"isAuth"),Ne(this,"requestUserUid"),Ne(this,"pdlInstOptions",null),Ne(this,"userBalanceSigned"),Ne(this,"userBrokerInstConfig"),Ne(this,"userBrokerInstStatus"),Ne(this,"userGradeSigned"),Ne(this,"promoDeliveryPoint"),Ne(this,"promoBasketTitle"),Ne(this,"queryParams")}async onBeforeActionExecuting(e,t,n){var r,i,o,a,l,c,u,d;const p=(0,s.Z1)(),h=(0,y.c)();if(!h.isAuth&&(null==(r=wb.global.settings.switches)?void 0:r.enableCatalogAuthForPrice))return n.redirected=!0,void(0,s.cI)().moveToSignIn({query:{returnUrl:window.location.href}},!0);const m=(0,s.u4)(),g=(0,s.DR)(),f=(0,s.MA)(),{getService:b}=(0,s.DR)();p.favsService.syncFromServerAsync();const v=p.cartService;this.isAuth=h.isAuth,this.requestUserUid=p.cartService.getUserUid(),this.queryParams=Object.fromEntries(e.searchParams),this.isBuyItNowMode=this.queryParams.includeInOrderStr||this.queryParams.sellerId||this.queryParams.promoId||this.queryParams.storeId||this.queryParams.digitalProducts,this.getBalanceTask=this.isAuth?m.getBalance({timeout:1e3}).catch(e=>Promise.resolve()):Promise.resolve();const w=this.queryParams.promoId?p.aidService.getAidData(this.queryParams.promoId):Promise.resolve(null),[S]=await Promise.all([m.getCurrencyAsync(),v.sync({timeout:3e3,syncPromo:this.queryParams.promoId}).catch(e=>{wb.spa.logError(e,{customMsg:"BasketDataPipeline sync"},!0)}),b("clientActionsHelper")]),_=v.publicBasketApiUrl,I=new URL(_,window.location.origin);e.port=I.port,e.pathname=(I.pathname+e.pathname).replace("//",""),e.host=I.host,t.credentials="include",t.headers={"Content-Type":"application/json"};const[C,k,P,E,T,O,x,M]=await Promise.all([m.getXinfoSignedV1(),this.getBalanceTask,m.getUserGrade(S),p.installmentAggregatorService.getAvailableInstallment(),m.getBrokerInstallmentStatus(),m.getBrokerInstallmentConfig(),m.getCustomsDuty(S),w]);if(this.userBalanceSigned=k,this.userGradeSigned=P,this.pdlInstOptions=null,"pdl"===(null==E?void 0:E.type))this.pdlInstOptions=await p.installmentAggregatorService.getLimit("pdl");else if((null==E?void 0:E.type)===Be.c.cwb){const[e,t]=await Promise.all([m.getBrokerInstallmentStatus(),m.getBrokerInstallmentConfig()]);this.userBrokerInstStatus=e,this.userBrokerInstConfig=t}let A;this.customsDutySigned=x,p.userAddressService.getByCoordinates(C.latitude,C.longitude,C.address);let R=C.addressDataSign,D=C.address;if(this.isAuth){const e=await g.getServiceOf("groupedDeliveriesService").then(e=>e.getPurchaseInfo());A=null==e?void 0:e.unpaid}let L=v.getItems(this.queryParams);L.forEach(e=>e.leaveAtTheDoor=!1);const B=this.getBasketMode(this.queryParams),$="digital"===B;"aid"===B?(null==M?void 0:M.isActive)?(this.promoDeliveryPoint={country:M.pickupOffice.country,address:M.pickupOffice.address,addressId:M.pickupOffice.id.toString(),officeId:M.pickupOffice.id,dest:M.pickupOffice.dest,sign:M.pickupOffice.sign,lat:M.pickupOffice.lat.toString(),lon:M.pickupOffice.lon.toString()},this.promoBasketTitle=M.basketTitle,R=p.userAddressService.getAddressSignData(this.promoDeliveryPoint),D="aid"):L=[]:$&&(this.promoDeliveryPoint={country:"ru",address:"digital",addressId:"1",officeId:1,dest:-1257786,sign:"42rp0F6k6qc=",lat:"55.75470275000001",lon:"37.62148895"},R="officeId=1&dest=-1257786&sign=42rp0F6k6qc=&lat=55.75470275000001&lng=37.62148895",D="digital"),0===L.length&&(n.cancelRequest=()=>!0);const N=(null==(i=this.userBrokerInstConfig)?void 0:i.productPlans)&&this.userBrokerInstStatus&&"completed"===this.userBrokerInstStatus.status?Math.floor(this.userBrokerInstStatus.availableSum/100):0;t.body=JSON.stringify({items:L,currency:S,xInfo:C.xinfo,cityLatitude:(null==(o=this.promoDeliveryPoint)?void 0:o.lat)||C.latitude,cityLongitude:(null==(a=this.promoDeliveryPoint)?void 0:a.lon)||C.longitude,address:D,userBalanceSigned:this.userBalanceSigned,unpaidAmount:A,userDataSign:C.userDataSign,addressDataSign:R,userGradeSigned:P,customsDutySigned:x,iwcNetLimit:(null==(c=null==(l=this.pdlInstOptions)?void 0:l.productTypes)?void 0:c.length)?this.pdlInstOptions.limit:-1,cwbLimit:N,bplOffer:this.bplOffer,instType:null==E?void 0:E.type,b2bSellerId:wb.settings.b2bMode?null==(u=wb.settings.selectedCompany)?void 0:u.id:null,b2BPayerUuid:wb.settings.b2bMode?null==(d=wb.settings.selectedCompany)?void 0:d.uuid:null,isBuyItNowMode:!!this.isBuyItNowMode,includeInOrder:[1,...L.filter(e=>e.includeInOrder).map(e=>e.characteristicId)],currentLocale:wb.settings.currentLocale,isPostPayForPreorderCourier:f.isPostPayForPreorderCourier()})}async onActionExecuted(e){var t,n;const r=(0,s.Z1)();if(e.responseData||(e.responseData={}),e.responseData.isNetworkError)await(null==(t=r.cartService.localBasket)?void 0:t.enrichProductsIfNeedAsync());else if((null==(n=e.responseData.data)?void 0:n.basket)&&(r.cartService.enrichItemsLocalInfo(this.queryParams,e.responseData.data.basket.basketItems),this.isBuyItNowMode||r.cartService.save(e.responseData.data.basket,this.requestUserUid),this.isAuth&&"courier"===e.responseData.data.basket.deliveryWay&&wb.user.checkEnabledSmartCalendar()&&!wb.settings.b2bMode)){const t=e.responseData.data.basket.deliveryPoint;await r.smartCalendarDays.loadSmartCalendar(null==t?void 0:t.addressId,null==t?void 0:t.dest)}e.responseData.userBalanceSigned=this.userBalanceSigned,e.responseData.pdlInstOptions=this.pdlInstOptions,e.responseData.userGradeSigned=this.userGradeSigned,e.responseData.customsDutySigned=this.customsDutySigned,e.responseData.promoDeliveryPoint=this.promoDeliveryPoint,e.responseData.promoBasketTitle=this.promoBasketTitle}getBasketMode(e){return e.digitalProducts?"digital":e.promoId?"aid":"main"}};var Fe=class{async onBeforeActionExecuting(e){const t=(0,s.Z1)(),n=(0,s.cI)(),i=(0,s.sL)(),o=sessionStorage.getItem("cacheCardData");try{const s=(0,v.a)();if(!!e.searchParams.get("bc")){const a=e.searchParams.get("status")||"",l=e.searchParams.get("failReason")||"",c=new URL(location.href);if(c.searchParams.delete("bc"),window.history.replaceState({},document.title,c.href),"failed"===a){const e=new URLSearchParams({status:a,failReason:l});return void n.moveTo(`/lk/payment/fail?${e}`)}if(o){const{cardData:e,statusCard:n}=JSON.parse(o);t.cartService.cacheCard(e,n),sessionStorage.removeItem("cacheCardData")}i.execModule("bottomNotificationPanel","showNotification",[0,r.R.t("basket.cardIsSuccessfullyLinked")]),wb.settings.cardBindSuccess=!0,s.sendEvent("Checkout_PayMethod_AddCard_Ok",{name:"not_defined"})}else wb.settings.cardBindSuccess=!1}catch(e){}}},Ue=Object.defineProperty,We=(e,t,n)=>((e,t,n)=>t in e?Ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);var He=class{constructor(){We(this,"data")}async onActionExecuting(e,t,n){var r,i;const o=(0,s.cI)();if(null==(r=o.currentRoute)?void 0:r.useReact)return;const a=(0,s.DR)(),l=(0,s.Z1)();await a.getService("clientActionsHelper"),l.clientActionsHelper.beforeAddAction();const c=parseInt(o.routeParameters.cod1S),u=(null==(i=o.queryParams)?void 0:i.has("size"))&&parseInt(o.queryParams.get("size")||"")||null,d=await l.productCard.loadProductCardAsync(c,u);if(null===d)return n.redirected=!0,o.moveTo404Async();this.data=d,l.clientActionsHelper.addAction({nm:c,name:d.selectedNomenclature.goodsName})}async onActionExecuted(e){var t;(null==(t=(0,s.cI)().currentRoute)?void 0:t.useReact)||(e.responseData?Object.assign(e.responseData,this.data):e.responseData=this.data)}},Ve=Object.defineProperty,ze=Object.defineProperties,qe=Object.getOwnPropertyDescriptors,Ke=Object.getOwnPropertySymbols,Ge=Object.prototype.hasOwnProperty,Je=Object.prototype.propertyIsEnumerable,Ye=(e,t,n)=>t in e?Ve(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Qe=class{constructor(){var e,t;Ye(this,"symbol"!=typeof(e="data")?e+"":e,t),this.data=null}get $services(){return(0,s.Z1)()}get $router(){return(0,s.cI)()}onBeforeActionExecuting(){this.data=null}async onActionExecuting(e,t,n){var r;const s=await this.$services.favsService.getWlArrivedCatalogModelAsync();if(0==(null!=(r=null==s?void 0:s.goods)?r:[]).length)return n.redirected=!0,this.$router.moveTo404Async();this.data=s}onActionExecuted(e){var t;if(null==this.data)return;const n=this._adaptGoods(null!=(t=this.data.goods)?t:[]);e.responseData={goods:n,goodsCount:n.length}}_adaptGoods(e){return e.map(e=>{var t;return((e,t)=>ze(e,qe(t)))(((e,t)=>{for(var n in t||(t={}))Ge.call(t,n)&&Ye(e,n,t[n]);if(Ke)for(var n of Ke(t))Je.call(t,n)&&Ye(e,n,t[n]);return e})({},e),{pics:1,brand:e.brandName,name:e.goodsName,canQuickOrder:!e.digitalGood,sale:Math.max(e.sale,null!=(t=null==e?void 0:e.personalSale)?t:0)})})}},Xe=Object.defineProperty,Ze=(e,t,n)=>((e,t,n)=>t in e?Xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);var et=class{constructor(){Ze(this,"data"),this.data={isEmptyCache:!0}}async onActionExecuting(e){const t=(0,s.Z1)();this.data=await t.favsService.getFavsDataAsync(e.searchParams.toString(),!0)}onActionExecuted(e){null!=this.data&&(e.responseData||(e.responseData={}),Object.assign(e.responseData,this.data))}};var tt=Object.freeze({main:1,goods:2,search:3,brand:4,brandConstructor:5,brandConstructorCatalog:6,seller:7,sellerCustomMain:9,promoEntry:11,categoryDenyLink:12,recommendationsSearch:13}),nt=n(39889);var rt=class{async getSeoTags(e){const t=`seo-catalog-tags-by-url-ru-${e=e.replace("/catalogdata/","/catalog/")}.json`,n=await WbSpaModel.prototype.$httpClient.fetchStatic(t,{timeout:3e3});return(null==n?void 0:n.link)&&(n.link=n.link.replace("/catalog/","/catalogdata/")),n}},st=n(46743),it=Object.defineProperty,ot=Object.getOwnPropertySymbols,at=Object.prototype.hasOwnProperty,lt=Object.prototype.propertyIsEnumerable,ct=(e,t,n)=>((e,t,n)=>t in e?it(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);var ut=class{constructor(){ct(this,"cancelled"),ct(this,"catalogMenu"),ct(this,"currentMenuItem"),ct(this,"initialized"),ct(this,"modules"),ct(this,"products"),ct(this,"seoTagsService"),ct(this,"sort"),ct(this,"xData"),ct(this,"xInfo"),ct(this,"isSnippetHasSizes"),this.initialized=!1,this.cancelled=!1,this.catalogMenu=null,this.currentMenuItem=null,this.modules={}}get $router(){return(0,s.cI)()}get $moduleLoader(){return(0,s.sL)()}get $services(){return(0,s.Z1)()}get $analytic(){return(0,v.a)()}async onBeforeActionExecuting(e,t,n){var r,i;const o=(0,s.MA)();this.xData=this.xInfo=this.products=this.sort=null,this.cancelled=!1;const a=new URL(e);if(a.pathname=a.pathname.replace("/webapi",""),this.initialized||await this._initAsync(a),this.currentMenuItem=this.catalogMenu.getCurrentMenuItem(a),(null==(r=this.currentMenuItem)?void 0:r.landing)||(null==(i=this.currentMenuItem)?void 0:i.isDenyLink))return void(this.cancelled=!0);this.currentMenuItem?this.currentMenuItem.seoTagInfo=null:this.currentMenuItem=await this._tryGetMenuItemFromTags(a);const[l,c]=await Promise.all([this._getXDataAsync(),o.getCurrentXInfoWithClustersAsync()]);this.xData=l,this.xInfo=c,n.cancelRequest=null!=this.xData,n.cancelRequest||(t.body=this.xInfo)}async _tryGetMenuItemFromTags(e){var t;const n=await(null==(t=this.seoTagsService)?void 0:t.getSeoTags(e.pathname));if(!n||!n.searchQuery)return null;e.pathname=n.link;const r=this.catalogMenu.getCurrentMenuItem(e);return r?(r.seoTagInfo=n,r):null}async onActionExecuting(){var e,t;const n=(0,v.a)();if(this.xData&&this.xInfo&&!this.cancelled){let r=this.modules.QueryHelper.getInitialParams(),{sort:s=this.modules.SorterModel.getSortFromCache,page:i=1}=r,o=((e,t)=>{var n={};for(var r in e)at.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&ot)for(var r of ot(e))t.indexOf(r)<0&&lt.call(e,r)&&(n[r]=e[r]);return n})(r,["sort","page"]);s!==this.modules.SorterModel.getSortFromCache&&nt.A.updateCatalogOptions("sort",s);const a=new this.modules.QueryHelper({sort:s,page:i,filters:this.modules.QueryHelper.checkOnlyFilterParams(o)}).getQueryStringForCatalog(),l=n.checkDataInSplitterServiceV2("common","ab_enableSnippetElectronics","specs")||n.checkDataInSplitterServiceV2("common","ab_enableSnippetElectronics","specs_buy_now")||n.checkDataInSplitterServiceV2("common","ab_enableSnippetElectronics","hidden_specs_buy_now");this.xData.meta_charcs=l&&"charcs"===(null==(e=this.currentMenuItem)?void 0:e.snippet)&&!wb.settings.b2bMode;const c=wb.global.settings.switches.enableInfiniteScroll||n.checkDataInSplitterServiceV2("common","ab_enableAutoNextPage","yes"),u=new URLSearchParams(a);u.delete("page");const d=this.modules.CatalogProvider.createGoodsProvider(this.xData),{goods:p=[]}=await this._loadGoodsAsync(d,c?u:a);this.products=p,this.sort=s,this.isSnippetHasSizes="sizes"===(null==(t=this.currentMenuItem)?void 0:t.snippet)}}async _loadGoodsAsync(e,t){try{const{goods:n=[],resp:r}=await e.loadGoodsAsync(t);return{goods:n,resp:r}}catch(e){return{goods:[],resp:null}}}onActionExecuted(e){var t,n,r,s,i,o,a,l,c,u,d,p,h,m;if(null==this.xData||this.cancelled)return;e.responseData||(e.responseData={});const g=this.catalogMenu.getSitePathItems(this.currentMenuItem),f={xData:this.xData,menuId:null==(t=this.currentMenuItem)?void 0:t.id,currentMenuItem:this.currentMenuItem,rootMenuItem:this.catalogMenu.getRootNode(this.currentMenuItem),hasSelectedChild:!!(null==(n=this.currentMenuItem)?void 0:n.childs),sitePathItems:g,emptyCatalogLink:null==(r=this.currentMenuItem)?void 0:r.url,tagsUrl:null!=(a=null==(i=null==(s=this.currentMenuItem)?void 0:s.seoTagInfo)?void 0:i.url)?a:null==(o=this.currentMenuItem)?void 0:o.url,products:this.products,targetUrl:"GP",title:null!=(h=null!=(d=null==(c=null==(l=this.currentMenuItem)?void 0:l.seoTagInfo)?void 0:c.name)?d:null==(u=this.currentMenuItem)?void 0:u.seo)?h:null==(p=this.currentMenuItem)?void 0:p.name,containerClass:"catalog-page",isAdultProtection:!wb.adult.isConfirmed,sorterModel:new this.modules.SorterModel(this.sort,null==(m=this.currentMenuItem)?void 0:m.url),isSnippetHasSizes:this.isSnippetHasSizes},b={mainVersion:0,type:tt.goods,model:f};Object.assign(e.responseData,{data:b})}async _initAsync(e){var t;const[n,r,s,i,o]=await Promise.all([this.$moduleLoader.loadModuleAsync("xCatalogData"),this.$moduleLoader.loadModuleAsync("queryHelper"),this.$moduleLoader.loadModuleAsync("xCatalogProvider"),this.$moduleLoader.loadModuleAsync("sorterModel"),wb.spa.getCatalogMenu()]);this.catalogMenu=o;const a=(null==(t=this.catalogMenu.getCurrentMenuItem(e))?void 0:t.id)===st.z;this.modules={XCatalogData:n.XCatalogData,XSearchCatalogData:n.XSeachData,QueryHelper:r,CatalogProvider:s,SorterModel:a?i.ResaleCatalogSorterModel:i.CatalogSorterModel},this.seoTagsService=new rt}async _getXDataAsync(){var e,t;const n=null==(e=this.currentMenuItem)?void 0:e.seoTagInfo;return n?new this.modules.XSearchCatalogData(n.searchQuery,n.searchQuery):wb.global.settings.switches.enableSearchFromCatalogSubjectWeb&&!this.$analytic.checkDataInSplitterServiceV2("common","ab_disableSearchFromCatalogSubject","yes")&&(null==(t=this.currentMenuItem)?void 0:t.searchQuery)?new this.modules.XSearchCatalogData(this.currentMenuItem.searchQuery,this.currentMenuItem.searchQuery):this.currentMenuItem&&this.currentMenuItem.shard?new this.modules.XCatalogData(this.currentMenuItem.query,this.currentMenuItem.shard):null}},dt=Object.defineProperty,pt=(e,t,n)=>((e,t,n)=>t in e?dt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);var ht=class{constructor(){pt(this,"cancelled"),pt(this,"catalogMenu"),pt(this,"currentMenuItem"),pt(this,"initialized"),pt(this,"requestCancelled"),this.initialized=!1,this.requestCancelled=!1,this.cancelled=!1,this.catalogMenu=null,this.currentMenuItem=null}get $services(){return(0,s.Z1)()}get $moduleLoader(){return(0,s.sL)()}get $isDesktop(){return"d"===wb.settings.displayMode}async onBeforeActionExecuting(e,t,n){var r;this.requestCancelled=this.cancelled=!1,await this._initAsync();const s=new URL(e);s.pathname=s.pathname.replace("/webapi",""),this.currentMenuItem=this.catalogMenu.getCurrentMenuItem(s),(null==(r=this.currentMenuItem)?void 0:r.isDenyLink)?n.cancelRequest=this.requestCancelled=null!=this.currentMenuItem:this.cancelled=!0}async onActionExecuted(e){var t,n,r,s,i;if(this.cancelled)return;e.responseData||(e.responseData={});const o=this.catalogMenu.getSitePathItems(this.currentMenuItem),a={mainVersion:0,type:tt.categoryDenyLink,model:{menuId:null==(t=this.currentMenuItem)?void 0:t.id,currentMenuItem:this.currentMenuItem,rootMenuItem:this.catalogMenu.getRootNode(this.currentMenuItem),children:null==(n=this.currentMenuItem)?void 0:n.childs,sitePathItems:o,title:null!=(i=null==(r=this.currentMenuItem)?void 0:r.seo)?i:null==(s=this.currentMenuItem)?void 0:s.name,isAdultProtection:!wb.adult.isConfirmed,catalogMenu:this.catalogMenu,catalogPromoLeftMenu:this.catalogMenu.getCatalogDenyMenu(this.currentMenuItem,o)}};Object.assign(e.responseData,{data:a})}async _initAsync(){this.catalogMenu=await wb.spa.getCatalogMenu(),this.initialized=this.catalogMenu.isInited}},mt=Object.defineProperty,gt=Object.getOwnPropertySymbols,ft=Object.prototype.hasOwnProperty,bt=Object.prototype.propertyIsEnumerable,yt=(e,t,n)=>((e,t,n)=>t in e?mt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);var vt=class{constructor(){yt(this,"catalogMenu"),yt(this,"emptySearch"),yt(this,"emptySearchRecom"),yt(this,"initialized"),yt(this,"isEmpty"),yt(this,"isNetworkError"),yt(this,"modules"),yt(this,"products"),yt(this,"sort"),yt(this,"targetUrl"),yt(this,"xData"),yt(this,"xInfo"),yt(this,"isSnippetHasSizes"),yt(this,"searchInSellerData",null)}get $router(){return(0,s.cI)()}get $moduleLoader(){return(0,s.sL)()}get $getService(){return(0,s.DR)().getService}get $services(){return(0,s.Z1)()}get $httpClient(){return(0,C.getHttpClient)()}get $helper(){return(0,s.dU)()}async onBeforeActionExecuting(e,t,n){if(n.cancelRequest=!0,this.initialized||await this._initAsync(),e.searchParams.has("fsupplier"))try{const t=e.searchParams.get("fsupplier");t&&!t.includes(";")&&(this.searchInSellerData=await this.$httpClient.fetchStatic(`supplier-by-id/${t}.json`,{},wb.helpers.url.urlStaticData))}catch(e){this.searchInSellerData=null}this.$services.clientActionsHelper.beforeAddAction()}async onActionExecuting(e,t,n){var r,i,o,a;const l=(0,s.MA)(),c=(0,v.a)(),u=c.checkDataInSplitterServiceV2("common","ab_enableFilterTransferSearch","yes"),d=this.modules.QueryHelper.getInitialParams();this.catalogMenu=this.xData=this.products=this.targetUrl=this.isEmpty=null,this.isNetworkError=void 0;let p=d,{brand:h,page:m=1,sort:g="popular",cardsize:f,search:b,targeturl:y,nocorrection:w,ssubject:S}=p,_=((e,t)=>{var n={};for(var r in e)ft.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&gt)for(var r of gt(e))t.indexOf(r)<0&&bt.call(e,r)&&(n[r]=e[r]);return n})(p,["brand","page","sort","cardsize","search","targeturl","nocorrection","ssubject"]);const I=new this.modules.QueryHelper({search:b,sort:g,page:m,ssubject:S,filters:this.modules.QueryHelper.checkOnlyFilterParams(_)}),C=I.getQueryStringForCatalog();C.set("inheritFilters",String(u));const k=wb.global.settings.switches.enableInfiniteScroll||c.checkDataInSplitterServiceV2("common","ab_enableAutoNextPage","yes"),P=new URLSearchParams(C);P.delete("page");const E=await this._getXDataAsync(d);if(null==E.search||""===E.search.toSafeString())return this._sendSearchEventForNonSearchPages(E),n.redirected=!0,this.$router.moveTo404Async();const T=await l.getCurrentXInfoWithClustersAsync(),O=this.modules.CatalogProvider.createGoodsProvider(E),{goods:x=[],resp:M,isNetworkError:A}=await this._loadGoodsAsync(O,k?P:C),R=(null==M?void 0:M.metadata)?null==M?void 0:M.metadata:M;if(this.isEmpty=void 0!==(null==R?void 0:R.is_empty)?R.is_empty:null,this.isSnippetHasSizes="sizes"===(null==R?void 0:R.snippet),(null==R?void 0:R.name)||(E.gender=null),"redirect"===(null==R?void 0:R.catalog_type)&&(null==R?void 0:R.catalog_value)){const e=await this._checkRedirectUrl(R.catalog_value);if(e)return this._sendSearchEventForNonSearchPages(E),this._updateRealtyAnalytics(e,R),n.redirected=!0,this.$router.moveTo(e,!0)}else if("product-redirect"===(null==R?void 0:R.catalog_type)){const e=await this._getUrlToProductCard(R);if(e)return this._sendSearchEventForNonSearchPages(E),n.redirected=!0,this.$services.clientActionsHelper.onSearchRedirectToProduct(),this.$services.productCard.updateAnalyticsForProductRedirect(E),this.$router.moveTo(e,!0)}(c.checkDataInSplitterServiceV2("common","ab_enableSnippetElectronics","specs")||c.checkDataInSplitterServiceV2("common","ab_enableSnippetElectronics","specs_buy_now")||c.checkDataInSplitterServiceV2("common","ab_enableSnippetElectronics","hidden_specs_buy_now"))&&"charcs"===R.snippet&&!wb.settings.b2bMode&&(E.meta_charcs=!0),(null==R?void 0:R.title)&&(E.title=R.title),(null==R?void 0:R.name)&&(null==R?void 0:R.change_input)&&(E.search=R.name),(null==R?void 0:R.catalog_value)&&(E.xcatalogQuery=R.catalog_value),(null==R?void 0:R.catalog_type)&&(E.xcatalogShard=R.catalog_type),(null==R?void 0:R.context)&&(E.xcatalogContext=R.context),E.normQuery=null!=(r=null==R?void 0:R.normquery)?r:"",(null==R?void 0:R.rs)&&(E.rs=R.rs),(null==R?void 0:R.qv)&&(E.qv=R.qv),E.originalSearch=null!=(i=null==R?void 0:R.original)?i:null,E.change_input=null!=(o=null==R?void 0:R.change_input)&&o,this.products=A?[]:x,this.emptySearch=0===(null==(a=this.products)?void 0:a.length)&&(0===I.getFiltersQuery().toString().length||I.getFiltersQuery().has("fsupplier")||I.getFiltersQuery().has("fc2c")),this.isNetworkError=A,this.emptySearchRecom=[],this.emptySearch&&(this.emptySearchRecom=await this._getEmptySearchRecommendations(E)),this._needChangeEmptyUserSearch(this,E)&&(E.userSearch=E.search),this.xData=E,this.targetUrl=y,this.xInfo=T,this.sort=g}_sendSearchEventForNonSearchPages(e){const t=(0,v.a)(),n=t.getLastSearchAnaliticsData();n&&e.search===n.text&&t.sendEvent("Search_Request_Send",n)}onActionExecuted(e){var t;const n=(0,s.u4)();e.responseData||(e.responseData={});const r=null!=(t=this.xData.title)?t:this.xData.search,i={type:tt.search,model:{title:r,xData:this.xData,tagsUrl:""===this.xData.search.toSafeString()?null:`${this.xData.search.toSafeString()}&lang=ru&${this.xInfo}&locale=${n.getLocale()}`,emptySearch:this.emptySearch,products:this.products,emptySearchRecom:this.emptySearchRecom,targetUrl:this.targetUrl,needAdultProtection:!wb.adult.isConfirmed,sorterModel:new this.modules.SorterModel(this.sort,window.location.href),currentMenuItem:null,rootMenuItem:null,isNetworkError:this.isNetworkError,isEmpty:this.isEmpty,hasSelectedChild:!1,isSnippetHasSizes:this.isSnippetHasSizes,searchInSellerData:null}};this.searchInSellerData&&(i.model.searchInSellerData=this.searchInSellerData),Object.assign(e.responseData,{data:i})}async _loadGoodsAsync(e,t){try{const{goods:n=[],resp:r}=await e.loadGoodsAsync(t,void 0,!1,this.searchInSellerData);return{goods:n,resp:r}}catch(e){return{goods:[],resp:null,isNetworkError:e instanceof C.TooManyRequestsError?"limit":"service"}}}async _initAsync(){const[e,t,n,r]=await Promise.all([this.$moduleLoader.loadModuleAsync("xCatalogData"),this.$moduleLoader.loadModuleAsync("queryHelper"),this.$moduleLoader.loadModuleAsync("xCatalogProvider"),this.$moduleLoader.loadModuleAsync("sorterModel"),this.$getService("clientActionsHelper")]);this.modules={XCatalogData:e.XSeachData,QueryHelper:t,CatalogProvider:n,SorterModel:r.CatalogSorterModel},this.initialized=!0}async _getXDataAsync(e){return new this.modules.XCatalogData(e.search,e.search,e.nocorrection,e.ssubject,e.inheritFilters)}async _checkRedirectUrl(e){var t;try{const n=new URL(e.startsWith("http")?e:"https://"+e);if(n.host.endsWith(".wildberries.ru")){const e=!n.pathname.startsWith("/recent")&&n.pathname.startsWith("/catalog");if("/lk/communications"===n.pathname)return n.pathname;if("/realty"===n.pathname)return n.searchParams.set("entryPoint","Search"),n.toString();if(e&&(null==(t=await wb.spa.getCatalogMenu())?void 0:t.menuByUrl.get(n.pathname))||!e)return n.toString()}return n.toString()}catch(e){return null}}async _getUrlToProductCard(e){var t;const n=Number(e.name);if(!this.$helper.isNumber(n))return null;if(n<=1e3||n>=1e9)return null;try{const e=await wb.xnm.getXnmProducts([n],!1,!0);if(!((null==(t=null==e?void 0:e[n])?void 0:t.pics)>0))return null;const r=new URL(`/catalog/${n}/detail.aspx`,window.location.origin);return r.searchParams.set("targetUrl","SP"),r}catch(e){return null}}async _getEmptySearchRecommendations(e){const t=`https://search-goods.wildberries.ru/search?query=${encodeURIComponent(e.search)}`;try{const e=await this.$httpClient.fetchJSON(t,{},{timeout:2e3});if(!(Array.isArray(e)&&e.length>0))return[];const n=await wb.xnm.getCatalogCards(e,!1,!1);return Object.values(n).reduce((e,t)=>(t.id&&e.push(wb.xnm.convertXProductToSpaCatalogProduct(t)),e),[])}catch(e){return console.error(e.message),[]}}_notShowTecDoc(e){var t,n;return!(null==(t=null==e?void 0:e.xcatalogContext)?void 0:t.includes("autoproduct"))||wb.settings.isIE||!(null==(n=wb.global.settings.switches)?void 0:n.tecDocEnable)}_needChangeEmptyUserSearch(e,t){var n;if(!e.emptySearch)return!1;if(this._notShowTecDoc(t))return!1;return-1!==(null==(n=t.userSearch)?void 0:n.indexOf("automodel:"))}_updateRealtyAnalytics(e,t){var n,r,i;if(!e.includes("realty"))return;const o=(0,v.a)(),a=(0,s.cI)(),l={normquery:null!=(n=t.name)?n:"",entry_point:null!=(i=o.getLocationFromEntrypoint(null==(r=a.currentRoute)?void 0:r.name))?i:""};o.updateTailObjectData(l),o.saveState({l:"SRT"})}};const wt=["wide","mini"];var St=class{constructor(){this.fullMenu=null,this.menuByUrl=new Map,this.menuById=new Map,this.brandsMenuList={items:null},this.promoId=null,this.isSpecial=null,this.isTrend=!1}async initMenu(e){var t,n,r,s;if(!e)return;const i=null==(t=e.promo.shelves)?void 0:t.reduce((e,t)=>{const n=t.type;return e[n]||(e[n]=[]),e[n].push(t),e},{});this.promoId=null!=(n=e.promo.id)?n:0,this.isSpecial=e.promo.isSpecial,this.isTrend=e.isTrend,this.promoShelf=null!=(r=null==i?void 0:i.promo)?r:null,this.brandShelves=null!=(s=null==i?void 0:i.brand)?s:null,this.shelves=e.promo.shelves,this.isExtended=e.promo.isExtended,this._createMenuMap(e),this._generateImg(e)}getCurrentMenuItem(e){if(!e)return null;"string"==typeof e&&(e=new URL(e,window.location.origin));const t=e.pathname.replace("/promotionscatalogdata","").replace("/promotions","");return this.menuByUrl.get(t)}getSitePathItems(e){if(!e)return null;const t=[];t.push({id:e.id,name:e.name,pageUrl:e.url});let n=e.parentId?e.parentId:this.menuById.get(e.id).parentId;for(;null!=n;){const e=this.menuById.get(n);t.push({id:n,name:e.name,pageUrl:e.url}),n=e.parentId}return t.push({id:2192,name:r.R.t("catalog.promotions"),pageUrl:"/promotions"}),t.reverse()}getCatalogMenu(e,t){var n,r,s,i,o,a;if(!e)return;if(e.landing||2===t.length)return{current:{name:e.name,link:e.url,isTop:e.isTop,lastSelected:!1},sideMenu:[],parent:{},parents:[],tagsMenu:null!=(r=null==(n=e.childNodes)?void 0:n.map(e=>({name:e.name,link:e.url})))?r:[]};const l=t[t.length-2],c=t.slice(1).map(e=>({name:e.name,link:e.pageUrl}));c[c.length-1].lastSelected=!0;const u=null==(s=e.childNodes)?void 0:s.map(e=>({name:e.name,link:e.url,anc:!0}));if((null==(i=e.childNodes)?void 0:i.length)>0)return{current:{name:e.name,link:e.url,isTop:e.isTop,lastSelected:!1},sideMenu:[...c,...u],parent:{name:l.name,link:l.pageUrl},parents:this.getParents(e.id),tagsMenu:null!=u?u:[]};const d=this.getCurrentMenuItem(l.pageUrl);return{current:{name:e.name,link:e.url,isTop:e.isTop,lastSelected:!0},sideMenu:c,parent:{name:l.name,link:l.pageUrl},parents:this.getParents(e.id),tagsMenu:null!=(a=null==(o=d.childNodes)?void 0:o.map(e=>({name:e.name,link:e.url})))?a:[]}}hasItem(e){return!!e&&this.menuById.has(e)}getCatalogLink(e){return this.menuById.get(e).url}getParents(e){const t=[];let n=this.menuById.get(e).parentId;for(;null!=n;){const e=this.menuById.get(n);t.push({name:e.name,link:e.url,isLanding:e.landing}),n=e.parentId}return t.reverse()}getRootNode(e){let t=this.menuById.get(e.id);for(;null!=t.parentId;)t=this.menuById.get(t.parentId);return this._adaptMenu(t)}_createMenuMap(e){var t,n;this.brandsMenuList.allItems=e.promo.brands,this.brandsMenuList.hasAllBrandsButton=(null==(t=e.promo.brands)?void 0:t.length)>7,this.brandsMenuList.items=null==(n=e.promo.brands)?void 0:n.slice(0,7),this.fullMenu=e.menu,e.extraMenu&&this.fullMenu.unshift(...e.extraMenu),this.fullMenu.forEach(t=>{var n;return this._setNode(t,null,1,null==(n=e.promo.categories)?void 0:n.imgPath)})}_setNode(e,t,n,r){var s;2===n&&r&&(e.imgPath=r);const i=e.url.startsWith("/promotions")?e.url.replace("/promotions",""):e.url;this.menuByUrl.set(i,e),this.menuById.set(e.id,{id:e.id,parentId:t,url:e.url,name:e.name,landing:e.landing,childs:e.childNodes,promoId:this.promoId}),null==(s=e.childNodes)||s.forEach(t=>this._setNode(t,e.id,n+1,r))}_adaptMenu(e){var t;const n=this.menuById.get(e.id);return n.childs=null==(t=n.childs)?void 0:t.map(e=>this._adaptMenu(e)),n}_generateImg(e){var t;const n=e.promo;n.poster&&(this._generatePoster(n.poster),(null==(t=n.categories)?void 0:t.background)&&this._generateCategoryImgBackground(n.categories.background))}_generatePoster(e){e&&wt.forEach(t=>{const n=`no-repeat url('${e[t]}'), ${e.background}`;document.documentElement.style.setProperty(`--custom-promo-poster-${t}`,n)})}_generateCategoryImgBackground(e){document.documentElement.style.setProperty("--custom-promo-image-background",e)}},_t=n(64566),It=Object.defineProperty,Ct=Object.getOwnPropertySymbols,kt=Object.prototype.hasOwnProperty,Pt=Object.prototype.propertyIsEnumerable,Et=(e,t,n)=>((e,t,n)=>t in e?It(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);var Tt=class{constructor(){Et(this,"bannersTask"),Et(this,"catalogMenu"),Et(this,"currentMenuItem"),Et(this,"enableEntryPromoPage"),Et(this,"initialized"),Et(this,"modules"),Et(this,"products"),Et(this,"promoKey"),Et(this,"promotionsService"),Et(this,"rewriteDestTo"),Et(this,"showCategories"),Et(this,"sort"),Et(this,"type"),Et(this,"xData"),Et(this,"xInfo"),Et(this,"isNewPromoBanners"),Et(this,"interestsManager"),Et(this,"interestInfo"),Et(this,"isInterestPage"),this.initialized=!1,this.catalogMenu=null,this.modules={},this.isNewPromoBanners=!0}get $router(){return(0,s.cI)()}get $moduleLoader(){return(0,s.sL)()}async onBeforeActionExecuting(e,t,n){var r;const i=(0,s.cI)(),o=(0,s.u4)(),a=(0,s.DR)(),l=(0,s.MA)();if(this.xData=this.xInfo=this.currentMenuItem=this.products=this.type=this.sort=null,n.cancelRequest)return;if(this.promotionsService=await a.getService("promotionsService"),this.promotionsService.isTrendPathname(window.location.pathname)&&!(0,s.MA)().isTrendEnabledMenu())return this.promotionsService.leaveFromTrendPage(!1),n.redirected=!0,i.moveTo404Async();this.initialized||await this._initAsync();const c=new URL(e);c.pathname=c.pathname.replace("/webapi","");const u=c.pathname.split("/")[2];this.isInterestPage=await this._ckeckIsInterestPage(c);const d=this._promoKey(u,o.getLocale(),wb.currentLanguage);if(this.promoKey!==d){const e=await this.promotionsService.getPromoDataByUrl(u,o.getLocale(),wb.currentLanguage);await this._loadPromoMenu(e,u)}if(this.catalogMenu.promoId>0&&(this.currentMenuItem=this.catalogMenu.getCurrentMenuItem(c)))this.currentMenuItem=this.catalogMenu.getCurrentMenuItem(c),this.showCategories=null==(r=this.currentMenuItem)?void 0:r.isTop,this.xData=this.currentMenuItem?new this.modules.XCatalogData(this.currentMenuItem.query,this.currentMenuItem.shardKey):null,this.xData.isPromo=!0,this.enableEntryPromoPage=this.showCategories,this.bannersTask=this.showCategories?this._bannersTask(this.catalogMenu.promoId):Promise.resolve(null);else{if(!this.isInterestPage)return n.redirected=!0,i.moveTo404Async();if(!await this._tryFillDataForBeforeActionExecutingForInterests(c))return n.redirected=!0,this.$router.moveTo404Async()}this.xInfo=await l.getCurrentXInfoWithClustersAsync(),n.cancelRequest=null!=this.xData}async onActionExecuting(){const e=(0,v.a)();if(this.xData&&this.xInfo&&!this.enableEntryPromoPage||this.isInterestPage){let t=this.modules.QueryHelper.getInitialParams(),{sort:n=this.modules.SorterModel.getSortFromCache,page:r=1}=t,s=((e,t)=>{var n={};for(var r in e)kt.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&Ct)for(var r of Ct(e))t.indexOf(r)<0&&Pt.call(e,r)&&(n[r]=e[r]);return n})(t,["sort","page"]);const i=new this.modules.QueryHelper({sort:n,page:r,filters:this.modules.QueryHelper.checkOnlyFilterParams(s)}).getQueryStringForCatalog(),o=wb.global.settings.switches.enableInfiniteScroll||e.checkDataInSplitterServiceV2("common","ab_enableAutoNextPage","yes"),a=new URLSearchParams(i);a.delete("page");const l=this.modules.xCatalogProvider.createGoodsProvider(this.xData);if(this.isInterestPage)this.products=await this._getGoodsByInterest(i,this.interestInfo||null);else{const{goods:e=[]}=await l.loadGoodsAsync(o?a:i);this.products=e}this.sort=n}}onActionExecuted(e){var t;if(null==this.xData)return;e.responseData||(e.responseData={});const n=null==(t=this.catalogMenu)?void 0:t.getSitePathItems(this.currentMenuItem),r=this.isInterestPage?this._getCatalogModelForInterest(n):this.enableEntryPromoPage?this._getEntryModel(n):this._getCatalogModel(n);Object.assign(e.responseData,{data:r})}async _initAsync(){const e=(0,s.sL)(),[t,n,r,i]=await Promise.all([e.loadModuleAsync("xCatalogData"),e.loadModuleAsync("queryHelper"),e.loadModuleAsync("xCatalogProvider"),e.loadModuleAsync("sorterModel")]);this.modules={XCatalogData:t.XCatalogData,QueryHelper:n,xCatalogProvider:r,SorterModel:i.CatalogSorterModel},this.catalogMenu=new St,this.initialized=!0}async _loadPromoMenu(e,t){const n=(0,s.u4)();await this.catalogMenu.initMenu(e),this.promoKey=this.catalogMenu?this._promoKey(t,n.getLocale(),wb.currentLanguage):null}_promoKey(e,t="ru",n){return`${e}-${t}-${n}`}_getEntryModel(e){var t,n,r,i,o,a,l,c,u;const d=(0,s.cI)();if(this.catalogMenu.isTrend){this.currentMenuItem=null==(t=this.catalogMenu.fullMenu)?void 0:t.last();const e=new URL(window.location.href);e.pathname=null!=(r=null==(n=this.currentMenuItem)?void 0:n.url)?r:"",d.replaceState(window.history.state,document.title,e)}return{mainVersion:0,type:tt.promoEntry,model:{xData:this.xData,menuId:null==(i=this.currentMenuItem)?void 0:i.id,currentMenuItem:this.catalogMenu.menuById.get(null==(o=this.currentMenuItem)?void 0:o.id),rootMenuItem:this.catalogMenu.getRootNode(this.currentMenuItem),children:null==(a=this.currentMenuItem)?void 0:a.childNodes,sitePathItems:e,title:null!=(u=null==(l=this.currentMenuItem)?void 0:l.seo)?u:null==(c=this.currentMenuItem)?void 0:c.name,needAdultProtection:!wb.adult.isConfirmed,catalogMenu:this.catalogMenu,promoId:this.catalogMenu.promoId,catalogPromoLeftMenu:this.catalogMenu.getCatalogMenu(this.currentMenuItem,e),bannersTask:this.bannersTask,isSpecial:this.catalogMenu.isSpecial,catalogType:tt.promoEntry,promoShelf:this.catalogMenu.promoShelf,brandShelves:this.catalogMenu.brandShelves,isExtended:this.catalogMenu.isExtended}}}_getCatalogModel(e){var t,n,r,s,i,o,a,l,c;return{mainVersion:0,type:tt.goods,model:{xData:this.xData,menuId:null==(t=this.currentMenuItem)?void 0:t.id,currentMenuItem:this.catalogMenu.menuById.get(null==(n=this.currentMenuItem)?void 0:n.id),rootMenuItem:this.catalogMenu.getRootNode(this.currentMenuItem),hasSelectedChild:!!(null==(r=this.currentMenuItem)?void 0:r.childs),sitePathItems:e,promoMenuV2:!0,catalogPromoLeftMenu:this.catalogMenu.getCatalogMenu(this.currentMenuItem,e),emptyCatalogLink:null==(s=this.currentMenuItem)?void 0:s.url,tagsUrl:null==(i=this.currentMenuItem)?void 0:i.url,products:this.products,targetUrl:"GP",title:null!=(l=null==(o=this.currentMenuItem)?void 0:o.seo)?l:null==(a=this.currentMenuItem)?void 0:a.name,containerClass:"catalog-page",needAdultProtection:!wb.adult.isConfirmed,sorterModel:new this.modules.SorterModel(this.sort,null==(c=this.currentMenuItem)?void 0:c.url),promoId:this.catalogMenu.promoId,isSpecial:this.catalogMenu.isSpecial,shelves:this.catalogMenu.shelves,isExtended:this.catalogMenu.isExtended,isTrend:this.catalogMenu.isTrend}}}async _bannersTask(e){const t=(0,s.Z1)(),n=this.isNewPromoBanners?"phone"===wb.settings.displayType:"m"===wb.settings.displayMode;return this.catalogMenu.isTrend?t.bannersService.getTrendBanners():this.catalogMenu.isExtended?t.bannersService.getPromotionSpecialBanners():t.bannersService.getPromoCatalogBanners(n,e)}async _ckeckIsInterestPage(e){if("interests"!==e.pathname.split("/").slice(-1)[0])return!1;const t=e.searchParams.get("interest"),n=e.searchParams.get("interestPromoId");if(!t||!n)return!1;const r=new(await(0,_t.g)())({promoId:n,promoShelves:[]}),s=r.getInterestInfoBySearchName(t);return!!s&&(this.interestInfo=s,this.interestsManager=r,!0)}async _tryFillDataForBeforeActionExecutingForInterests(e){if(!this.interestsManager||!this.interestInfo)return!1;const t=e.pathname.split("/"),n=t.slice(0,t.length-1).join("/"),r=new URL(n,e.origin),s=this.catalogMenu.getCurrentMenuItem(r);if(!s)return!1;const i=s.id;return this.currentMenuItem={id:100*i,name:this.interestInfo.interests_name,url:e.href,parentId:i,isTop:!1,landing:!1,seo:null,title:this.interestInfo.interests_name},this.xData=await this.interestsManager.getXData([this.interestInfo],this.interestInfo.search_name),!0}async _getGoodsByInterest(e,t){var n;if(!this.interestsManager||!t)return null;e.has("interest")&&e.delete("interest"),e.append("query",t.search_name);const r=this.modules.xCatalogProvider.createGoodsProvider(this.xData),s=await r.loadGoodsAsync(e);return(null==(n=null==s?void 0:s.goods)?void 0:n.length)?s.goods:null}_getCatalogModelForInterest(e){var t,n,r,s,i,o,a,l;return{mainVersion:0,type:tt.goods,model:{xData:this.xData,menuId:null==(t=this.currentMenuItem)?void 0:t.id,currentMenuItem:this.currentMenuItem||null,rootMenuItem:null,hasSelectedChild:!!(null==(n=this.currentMenuItem)?void 0:n.childs),sitePathItems:e,promoMenuV2:!0,catalogPromoLeftMenu:null,emptyCatalogLink:null==(r=this.currentMenuItem)?void 0:r.url,tagsUrl:null==(s=this.currentMenuItem)?void 0:s.url,products:this.products,targetUrl:"GP",title:null!=(a=null==(i=this.currentMenuItem)?void 0:i.seo)?a:null==(o=this.currentMenuItem)?void 0:o.name,containerClass:"catalog-page",needAdultProtection:!wb.adult.isConfirmed,sorterModel:new this.modules.SorterModel(this.sort,null==(l=this.currentMenuItem)?void 0:l.url),promoId:this.catalogMenu.promoId,isSpecial:this.catalogMenu.isSpecial,shelves:this.catalogMenu.shelves,isExtended:this.catalogMenu.isExtended,isTrend:this.catalogMenu.isTrend,isInterest:this.isInterestPage}}}};class Ot{get menuBase(){return Ot.prototype.menuBaseData}set menuBase(e){Ot.prototype.menuBaseData=e}static get menuById(){return Ot.prototype.menuByIdData}static async init(){var e;if(Ot.prototype.menuBaseData||Ot.prototype.currentLanguage===wb.currentLanguage)return;const t=wb.currentLanguage,n=["ka"].includes(t)?`subject-base-${t}.json`:"subject-base.json";Ot.prototype.menuBaseData=null!=(e=await WbSpaModel.prototype.$httpClient.fetchStatic(n,{timeout:1e4}))?e:[],Ot.prototype.currentLanguage=t,Ot.prototype.menuByIdData=new Map,Ot.prototype._createMenuMap()}_createMenuMap(){Ot.prototype.menuBase.forEach(e=>Ot.prototype._setNode(e,null))}_setNode(e,t){var n;t&&(e.parentId=t),Ot.prototype.menuByIdData.set(e.id,e),null==(n=e.childs)||n.forEach(t=>Ot.prototype._setNode(t,e.id))}}var xt=Ot;var Mt=class extends xt{constructor(e,t){super(),this.modules=e,this.brandConstructorService=t,this.brandData=null,this.fullMenu=null,this.menuByUrl=new Map,this.menuById=new Map}async initMenu(e,t,n,r){var s;let i=await WbSpaModel.prototype.$httpClient.fetchStatic(`brands/${e}.json`,{},wb.helpers.url.urlStaticData);if(!i){const t=null==(s=e.split("-"))?void 0:s[0];t&&(i=await WbSpaModel.prototype.$httpClient.fetchStatic(`brands-by-id/${t}.json`,{},wb.helpers.url.urlStaticData)),i&&(location.href=$.views.helpers.brandUrl(i.url))}if(!i)return null;super.menuBase||await xt.init(),this.isConstructor=t.indexOf(i.id)>=0,this.brandData=i;const o=$.views.helpers.brandUrl(i.url),a=await this._getMenuItems(i,n,o,r);this.fullMenu=this._getFullMenu(i,o,a,this.infoMenu),this._createMenuMap(),this.isInited=!0}_getFullMenu(e,t,n,r=[]){return[{id:e.id+"b",name:e.name,url:t,shard:this.isConstructor?"":this._brandToShard(e.name),query:this.isConstructor?"":this._brandToQuery(e.id),childs:n.concat(r)}]}async _getMenuItems(e,t,n,s){var i,o,a;if(!this.isConstructor)return await this._getChildsFromSubjects(e,t,n);const l=this.brandConstructorService.getPageInfo(s),c=await this.brandConstructorService.getMenus(e,l.pageType,l.infoUrl,l.previewMode);if(this.previewMode=l.previewMode,this.hasCustomMenu=(null==(i=null==c?void 0:c.menu)?void 0:i.length)>0,(null==(a=null==(o=null==c?void 0:c.infoMenu)?void 0:o.menuInfoItems)?void 0:a.length)>0&&(this.infoMenu=c.infoMenu.menuInfoItems.map(t=>(t.id=`${t.id}info`,t.url=`${n}/info/${t.href}`,t.isInfo=!0,this._convertBrandScemeItemToMenuItemDTO(t,e)))),this.hasCustomMenu)return await this._getChildsFromCustomMenu(e,c.menu);const u=await this._getChildsFromSubjects(e,t,n),d={id:e.id+"b-all",name:r.R.t("catalog.wholeRange"),url:`${n}/all`,seo:r.R.t("catalog.wholeRangeOfBrand",{brandName:e.name}),shard:this._brandToShard(e.name),query:this._brandToQuery(e.id),childs:[]};return u.push(d),u}async _getChildsFromCustomMenu(e,t){const n=t.map(t=>this._convertBrandScemeItemToMenuItemDTO(t,e,!0));return n.sort((e,t)=>e-t),n}async _getChildsFromSubjects(e,t,n){var r,s,i,o;const a=this._brandToShard(e.name),l=this._brandToQuery(e.id),c=new this.modules.XCatalogData(l,a,"Brand"),u=this.modules.xCatalogProvider.createGoodsProvider(c),d=await u.loadSubjectsAsync(t,c),p=null!=(i=null==(s=null==(r=null==d?void 0:d.data)?void 0:r.filters.find(e=>"xsubject"===e.key))?void 0:s.items.map(e=>e.id))?i:[],h=[];for(const t of this.menuBase){let r=!1;const s=[];for(const i of null!=(o=null==t?void 0:t.childs)?o:[])if(p.indexOf(i.id)>=0){r=!0;const t=Object.assign({},i);t.seo=`${e.name} ${i.name}`,t.url=`${n}/${t.url}`,t.shard=this._brandToShard(e.name),t.query=this._brandToQuery(e.id,t.id),s.push(t)}if(r){const r=Object.assign({},t);r.seo=`${e.name} ${t.name}`,r.url=`${n}/${t.url}`,r.shard=this._brandToShard(e.name),r.query=this._brandToQuery(e.id,r.id),r.childs=s,r.parent=e.id+"b",h.push(r)}}return h}_convertBrandScemeItemToMenuItemDTO(e,t,n){const r=this._getXQueryForMenuItem(t,e.query),s={id:e.id,name:e.title,url:e.url.toLowerCase(),seo:`${t.name} ${e.title}`,sort:e.sort,shard:this._brandToShard(t.name),query:r};return n&&(s.isCustom=n,s.parentId=t.id+"b"),e.isInfo&&(s.isInfo=!0),s}_getXQueryForMenuItem(e,t){const n=new URLSearchParams(t);return n.has("type")&&n.delete("type"),n.set("brand",e.id),decodeURIComponent(n)}getBrandInfo(){return{id:this.brandData.siteId,brandCod:this.brandData.id,name:this.brandData.name,brandLink:$.views.helpers.brandUrl(this.brandData.url),hash:this.brandData.hash}}getCurrentMenuItem(e){var t;if(!(e=null!=(t=null==e?void 0:e.pathname)?t:e))return null;const n=e.replace("/data","").replace("/preview","");let r=this.menuByUrl.get(n);return!r&&this.hasCustomMenu&&this.menuByUrl.forEach(e=>{e.url.split("?")[0]==n&&(r=e)}),null!=r?r:this.menuByUrl.get(n.slice(0,n.lastIndexOf("/")))}getSitePathItems(e){if(!e)return null;const t=[];t.push({id:e.id,name:e.name,pageUrl:e.url,isInfo:e.isInfo,analytic:["BCA",null,null,e.id]});let n=this.menuById.get(e.id).parentId;for(;null!=n;){const e=this.menuById.get(n);t.push({id:n,name:e.name,pageUrl:e.url,analytic:["BCA",null,null,n]}),n=e.parentId}const s=this._brandLetterToSitePathParam(this.brandData.letter);return t.push({id:0,name:r.R.t("brands.brandByLetter",{currentLetterName:s.toUpperCase()}),pageUrl:`/wildberries/brandlist.aspx?letter=${s}`}),t.reverse()}getCatalogMenu(e){var t,n,r,s;const i=[];if((e=null==e?void 0:e.filter(e=>!e.isInfo))&&0!==e.length)if(1===e.length){const r={name:"",link:""},s=null!=(n=null==(t=this.menuByUrl.get(e[0].pageUrl).childs)?void 0:t.filter(e=>!e.isInfo).map(e=>({node:{id:e.id,name:e.name,link:e.url},children:[]})))?n:[];i.push({node:r,children:s})}else{const t=this.menuByUrl.get(e[1].pageUrl),n={id:t.id,isOpen:!0,lastSelected:e[e.length-1].id===t.id,link:t.isDenyLink?null:t.url,name:t.name},o=n.lastSelected?null!=(s=null==(r=t.childs)?void 0:r.filter(e=>!e.isInfo).map(e=>({node:{id:e.id,name:e.name,link:e.url},children:[]})))?s:[]:this.getCatalogMenu(e.slice(1));i.push({node:n,children:o})}else i.push({node:{name:"",link:""},children:[]});return i}hasItem(e){return!!e&&this.menuById.has(e)}getCatalogLink(e){return this.menuById.get(e).url}getParents(e){const t=[];let n=this.menuById.get(e).parentId;for(;null!=n;){const e=this.menuById.get(n);t.push(e.name),n=e.parentId}return t.reverse()}getRootNode(e){let t=this.menuById.get(e.id);for(;null!=t.parentId;)t=this.menuById.get(t.parentId);return this._adaptMenu(t)}_createMenuMap(){this.fullMenu.forEach(e=>this._setNode(e,null))}_setNode(e,t,n){var r;e.hasHardSort=e.query.includes("sort"),this.menuByUrl.set(e.url,e),this.menuById.set(e.id,{parentId:t,url:e.url,name:e.name,childs:e.childs,id:e.id,hasHardSort:e.hasHardSort}),null==(r=e.childs)||r.forEach(t=>this._setNode(t,e.id,n))}_brandToShard(e){const t=e?e.toLowerCase():" ",n=t.charCodeAt(0);return 48<=n&&n<=57||97<=n&&n<=122||1072<=n&&n<=1105?`brands/${t[0]}`:"brands/special"}_brandToQuery(e,t){return t?`brand=${e}&subject=${t}`:`brand=${e}`}_brandLetterToSitePathParam(e){const t=e.charCodeAt(0);return 1072<=t&&t<=1105?"а-я":97<=t&&t<=122?e:"123"}_adaptMenu(e){var t;const n=this.menuById.get(e.id);return n.childs=null==(t=n.childs)?void 0:t.map(e=>this._adaptMenu(e)),n}},At=Object.defineProperty,Rt=Object.getOwnPropertySymbols,Dt=Object.prototype.hasOwnProperty,Lt=Object.prototype.propertyIsEnumerable,Bt=(e,t,n)=>((e,t,n)=>t in e?At(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);var $t=class{constructor(e){Bt(this,"brand"),Bt(this,"catalogMenu"),Bt(this,"currentMenuItem"),Bt(this,"modules"),Bt(this,"products"),Bt(this,"sort"),Bt(this,"xData"),Bt(this,"xInfo"),Object.assign(this,e)}get $router(){return(0,s.cI)()}async onBeforeActionExecuting(e,t,n){var r,s;this.xData=this.modules&&new this.modules.XCatalogData(null==(r=this.currentMenuItem)?void 0:r.query,null==(s=this.currentMenuItem)?void 0:s.shard,"Brand"),n.cancelRequest=null!=this.xData}async onActionExecuting(e,t,n){var r,s,i;const o=(0,v.a)();if(this.xData&&this.xInfo){let e=null==(r=this.modules)?void 0:r.QueryHelper.getInitialParams(),{sort:t=(null==(s=this.modules)?void 0:s.SorterModel.getSortFromCache),page:a=1,sle:l}=e,c=((e,t)=>{var n={};for(var r in e)Dt.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&Rt)for(var r of Rt(e))t.indexOf(r)<0&&Lt.call(e,r)&&(n[r]=e[r]);return n})(e,["sort","page","sle"]);if("adidas"===this.brand&&l)return n.redirected=!0,void this.$router.moveTo404Async();const u=(this.modules&&new this.modules.QueryHelper({sort:t,page:a,filters:this.modules.QueryHelper.checkOnlyFilterParams(c)})).getQueryStringForCatalog(),d=wb.global.settings.switches.enableInfiniteScroll||o.checkDataInSplitterServiceV2("common","ab_enableAutoNextPage","yes"),p=new URLSearchParams(u);p.delete("page");const h=null==(i=this.modules)?void 0:i.xCatalogProvider.createGoodsProvider(this.xData),{goods:m=[]}=await h.loadGoodsAsync(d?p:u);this.products=m,this.sort=t}}onActionExecuted(e){var t,n,r,s,i,o;if(null==this.xData)return;e.responseData||(e.responseData={});const a=this.catalogMenu.getSitePathItems(this.currentMenuItem),l={mainVersion:0,type:tt.brand,model:{brandInfo:this.catalogMenu.getBrandInfo(),xData:this.xData,currentMenuItem:this.currentMenuItem,rootMenuItem:this.catalogMenu.getRootNode(this.currentMenuItem),hasSelectedChild:!1,sitePathItems:a,catalogMenu:this.catalogMenu.getCatalogMenu(null==a?void 0:a.slice(1)),emptyCatalogLink:null==(t=this.currentMenuItem)?void 0:t.url,tagsUrl:null==(n=this.currentMenuItem)?void 0:n.url,products:this.products,promoMenuV2:!1,targetUrl:"BP",title:null!=(i=null==(r=this.currentMenuItem)?void 0:r.seo)?i:null==(s=this.currentMenuItem)?void 0:s.name,containerClass:"catalog-page",needAdultProtection:!wb.adult.isConfirmed,sorterModel:this.modules&&new this.modules.SorterModel(this.sort,null==(o=this.currentMenuItem)?void 0:o.url)}};Object.assign(e.responseData,{data:l})}},Nt=Object.defineProperty,jt=Object.getOwnPropertySymbols,Ft=Object.prototype.hasOwnProperty,Ut=Object.prototype.propertyIsEnumerable,Wt=(e,t,n)=>((e,t,n)=>t in e?Nt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);var Ht=class{constructor(e){Wt(this,"xData"),Wt(this,"xInfo"),Wt(this,"brand"),Wt(this,"products"),Wt(this,"sort"),Wt(this,"currentMenuItem"),Wt(this,"catalogMenu"),Wt(this,"brandConstructorService"),Wt(this,"modules"),Wt(this,"brandScheme"),Object.assign(this,e)}get $router(){return(0,s.cI)()}async onBeforeActionExecuting(e,t,n){var r,s;this.xData=this.modules&&new this.modules.XCatalogData(null==(r=this.currentMenuItem)?void 0:r.query,null==(s=this.currentMenuItem)?void 0:s.shard,"Brand"),n.cancelRequest=null!=this.xData}async onActionExecuting(e,t,n){var r,s,i;if(this.xData&&this.xData.xcatalogShard&&this.xInfo){let e=null==(r=this.modules)?void 0:r.QueryHelper.getInitialParams(),{sort:t=(null==(s=this.modules)?void 0:s.SorterModel.getSortFromCache),page:o=1,sle:a}=e,l=((e,t)=>{var n={};for(var r in e)Ft.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&jt)for(var r of jt(e))t.indexOf(r)<0&&Ut.call(e,r)&&(n[r]=e[r]);return n})(e,["sort","page","sle"]);if("adidas"===this.brand&&a)return n.redirected=!0,void this.$router.moveTo404Async();const c=this.modules&&new this.modules.QueryHelper({sort:t,page:o,filters:this.modules.QueryHelper.checkOnlyFilterParams(l)}),u="sort";this.xData.xcatalogQuery.includes(u)&&c.queryDictionary.hasOwnProperty(u)&&delete c.queryDictionary[u];const d=c.getQueryStringForCatalog(),p=null==(i=this.modules)?void 0:i.xCatalogProvider.createGoodsProvider(this.xData),{goods:h=[]}=await p.loadGoodsAsync(d);this.products=h,this.sort=t}}async onActionExecuted(e){var t,n,r,i;const o=(0,s.sL)();if(null==this.xData)return;e.responseData||(e.responseData={});const a=this.catalogMenu.getSitePathItems(this.currentMenuItem),l=this.catalogMenu.getCatalogMenu(null==a?void 0:a.slice(1)),c=this.brandConstructorService.convertSchemeToViewModel(this.brandScheme,this.catalogMenu,this.currentMenuItem);await o.loadModuleAsync("brandConstructorConfig");const u=await this._getMetaTags(this.currentMenuItem),d={mainVersion:0,type:tt.brandConstructorCatalog,model:{brandInfo:this.catalogMenu.getBrandInfo(),currentMenuItem:this.currentMenuItem,rootMenuItem:this.catalogMenu.getRootNode(this.currentMenuItem),containerClass:"brand-constructor-catalog",isCatalog:!0,needAdultProtection:!wb.adult.isConfirmed,sitePathItems:a,catalogMenu:l,brandScheme:c,title:null==(t=this.currentMenuItem)?void 0:t.seo,metaTags:u,tagsUrl:null==(n=this.currentMenuItem)?void 0:n.url,sorterModel:this.modules&&new this.modules.SorterModel(this.sort,null==(r=this.currentMenuItem)?void 0:r.url),products:this.products,xData:this.xData,targetUrl:"BP",emptyCatalogLink:null==(i=this.currentMenuItem)?void 0:i.url}};Object.assign(e.responseData,{data:d})}async _getMetaTags(e){var t;const n=(0,C.getHttpClient)();try{const r=null==e?void 0:e.url.split("?")[0].replace("brands/","brands/metatags/"),s=await n.fetchJSON(`/webapi/spa${r}?${new URLSearchParams({name:(null==e?void 0:e.name)||""})}`,{},{timeout:3e3,nullOnError:!0,useProccessResponse:!0});return null!=(t=null==s?void 0:s.metaTags)?t:[]}catch(e){return[]}}},Vt=Object.defineProperty,zt=(e,t,n)=>((e,t,n)=>t in e?Vt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);var qt=class{constructor(e){zt(this,"currentMenuItem"),zt(this,"catalogMenu"),zt(this,"brandConstructorService"),zt(this,"brandScheme"),Object.assign(this,e)}async onBeforeActionExecuting(e,t,n){n.cancelRequest=null!=this.currentMenuItem}async onActionExecuting(){}async onActionExecuted(e){const t=(0,s.sL)();e.responseData||(e.responseData={});const n=this.catalogMenu.getSitePathItems(this.currentMenuItem),r=this.catalogMenu.getCatalogMenu(null==n?void 0:n.slice(1)),i=this.brandConstructorService.convertSchemeToViewModel(this.brandScheme,this.catalogMenu,this.currentMenuItem),o=await this.brandConstructorService.getMainBanners(this.catalogMenu);await t.loadModuleAsync("brandConstructorConfig");const a={brandInfo:this.catalogMenu.getBrandInfo(),brandDirections:{},containerClass:"brand-constructor-ordinary",isCatalog:!1,needAdultProtection:!wb.adult.isConfirmed,sitePathItems:n,catalogMenu:r,brandScheme:i,mainBanners:o},l={mainVersion:0,type:tt.brandConstructor,model:a};Object.assign(e.responseData,{data:l})}},Kt=Object.defineProperty,Gt=(e,t,n)=>((e,t,n)=>t in e?Kt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);var Jt=class{constructor(e){Gt(this,"brand"),Gt(this,"brandConstructorService"),Gt(this,"brandScheme"),Gt(this,"catalogMenu"),Gt(this,"currentMenuItem"),Gt(this,"ids"),Gt(this,"initialized"),Gt(this,"modules"),Gt(this,"pipeline"),Gt(this,"preview"),Gt(this,"products"),Gt(this,"sort"),Gt(this,"xData"),Gt(this,"xInfo"),Gt(this,"_lastUrl"),this.initialized=!1,this.catalogMenu=null,this.modules={},this.preview=e,this.pipeline=null}async onBeforeActionExecuting(e,t,n){var r,i,o,a,l,c,u,d,p;const h=(0,s.MA)();if(this.xData=this.xInfo=this.currentMenuItem=this.products=this.sort=this.pipeline=this.brandScheme=null,n.cancelRequest)return;let m=new URL(e);m.pathname=m.pathname.replace("/webapi","").toLowerCase();const g=m.pathname.split("/")[this.preview?4:3],f=m.pathname;if(this.brand===g&&this._lastUrl===f||(this.initialized=!1,this.brand=this.catalogMenu=null,this._lastUrl=f),this.brand===g&&this.initialized||await this._initAsync(this.preview),this.xInfo=await h.getCurrentXInfoWithClustersAsync(),this.brand!==g&&await this._loadBrandMenu(g,m.pathname),this.brand){if(this.preview&&!(null==(r=this.catalogMenu)?void 0:r.isConstructor)&&(m=new URL(e.href.replace("/preview","")),m.pathname=m.pathname.replace("/webapi","").toLowerCase()),this.currentMenuItem=null==(i=this.catalogMenu)?void 0:i.getCurrentMenuItem(m),!this.currentMenuItem)return n.cancelRequest=!1,void(n.cancelRequest||(t.body=await h.getCurrentXInfoWithClustersAsync()));if(null==(o=this.catalogMenu)?void 0:o.isConstructor){const e=null==(a=this.brandConstructorService)?void 0:a.getPageInfo(m.pathname),t=null==e?void 0:e.pageType,n=null==e?void 0:e.infoUrl;this.brandScheme=await(null==(l=this.brandConstructorService)?void 0:l.getBrandSchemeAsync(this.catalogMenu.brandData,t,n,null==e?void 0:e.previewMode)),this.brandScheme||(this.ids=[],await this._loadBrandMenu(g,m.pathname))}return(null==(c=this.catalogMenu)?void 0:c.isConstructor)?this.brandScheme.pageType==(null==(u=this.brandConstructorService)?void 0:u.enums.pageType.catalog)?this.pipeline=new Ht(this):this.pipeline=new qt(this):this.pipeline=new $t(this),null==(p=(d=this.pipeline).onBeforeActionExecuting)?void 0:p.call(d,e,t,n)}n.cancelRequest=!1}async onActionExecuting(e,t,n){var r,s;return null==(s=null==(r=this.pipeline)?void 0:r.onActionExecuting)?void 0:s.call(r,e,t,n)}onActionExecuted(e){var t,n;return null==(n=null==(t=this.pipeline)?void 0:t.onActionExecuted)?void 0:n.call(t,e)}async _initAsync(e){const t=(0,s.sL)(),n=(0,s.DR)(),r=this._initConstructorServiceAndGetBrands(e),[i,o,a,l,c]=await Promise.all([t.loadModuleAsync("xCatalogData"),t.loadModuleAsync("queryHelper"),t.loadModuleAsync("xCatalogProvider"),t.loadModuleAsync("sorterModel"),n.getService("promotionsService")]);this.modules={XCatalogData:i.XCatalogData,QueryHelper:o,xCatalogProvider:a,SorterModel:l.CatalogSorterModel},this.ids=await r,this.catalogMenu=new Mt(this.modules,this.brandConstructorService),this.initialized=!0}async _initConstructorServiceAndGetBrands(e){var t,n;const r=(0,s.sL)();await r.loadServiceAsync("brandConstructorService");const i=(0,s.cQ)("brandConstructorService");return this.brandConstructorService=i,null!=(n=await(null==(t=this.brandConstructorService)?void 0:t.getConstructorBrands(e)))?n:[]}async _loadBrandMenu(e,t){var n,r;await(null==(n=this.catalogMenu)?void 0:n.initMenu(e,this.ids,this.xInfo,t)),this.brand=(null==(r=this.catalogMenu)?void 0:r.brandData)?e:null}};var Yt=class extends xt{constructor(e){super(),this.modules=e,this.sellerData=null,this.fullMenu=null,this.menuByUrl=new Map,this.menuById=new Map,this.shard="sellers"}async initMenu(e,t){var n,s,i,o,a,l,c;super.menuBase||await xt.init();const u=this.shard,d=this._sellerToQuery(e,null),p=new this.modules.XCatalogData(d,u,"Seller"),h=this.modules.xCatalogProvider.createGoodsProvider(p),m=await h.loadSubjectsAsync(t,p),g=await this._getSellerData(e);this.sellerData=g,this.fullMenu=[{id:g.id+"s",name:this._trimSellerOrgForms(null!=(s=null!=(n=g.trademark)?n:g.fineName)?s:g.name,g.orgForms),url:"/seller/"+g.id,shard:this.shard,query:this._sellerToQuery(g.id,null),childs:[],title:r.R.t("catalog.allProducts")}];const f=null!=(a=null==(o=null==(i=null==m?void 0:m.data)?void 0:i.filters.find(e=>"xsubject"===e.key))?void 0:o.items.toHashSet(e=>e.id))?a:new Set;for(const e of this.menuBase){let t=!1;const n=[];for(const r of null!=(l=null==e?void 0:e.childs)?l:[])if(f.has(r.id)){t=!0;const e=Object.assign({},r);e.url=`/seller/${g.id}/${e.url}`,e.shard=this.shard,e.query=this._sellerToQuery(g.id,e.id),e.parentId=null!=(c=e.parentId)?c:g.id+"s",e.title=e.name,n.push(e)}if(t){const t=Object.assign({},e);t.url=`/seller/${g.id}/${e.url}`,t.shard=this.shard,t.query=this._sellerToQuery(g.id,t.id),t.childs=n,t.parentId=g.id+"s",t.title=t.name,this.fullMenu[0].childs.push(t)}}this._createMenuMap(),this.isInited=!0}getSellerInfo(){return this.sellerData}getCurrentMenuItem(e){var t;if(!e)return null;const n=e.pathname.replace("/data","");return null!=(t=this.menuByUrl.get(n))?t:this.menuByUrl.get(n.slice(0,n.lastIndexOf("/")))}getSitePathItems(e){if(!e)return null;const t=[];t.push({id:e.id,name:e.name,pageUrl:e.url});let n=this.menuById.get(e.id).parentId;for(;null!=n;){const e=this.menuById.get(n);t.push({id:n,name:e.name,pageUrl:e.url}),n=e.parentId}return t.reverse()}getCatalogMenu(e){var t,n,r,s;const i=[];if(e&&0!==e.length)if(1===e.length){const r={name:"",link:""},s=null!=(n=null==(t=this.menuByUrl.get(e[0].pageUrl).childs)?void 0:t.map(e=>({node:{id:e.id,name:e.name,link:e.url},children:[]})))?n:[];i.push({node:r,children:s})}else{const t=this.menuByUrl.get(e[1].pageUrl),n={id:t.id,isOpen:!0,lastSelected:e[e.length-1].id===t.id,link:t.url,name:t.name},o=n.lastSelected?null!=(s=null==(r=t.childs)?void 0:r.map(e=>({node:{id:e.id,name:e.name,link:e.url},children:[]})))?s:[]:this.getCatalogMenu(e.slice(1));i.push({node:n,children:o})}else i.push({node:{name:"",link:""},children:[]});return i}hasItem(e){return!!e&&this.menuById.has(e)}getCatalogLink(e){return this.menuById.get(e).url}getParents(e){const t=[];let n=this.menuById.get(e).parentId;for(;null!=n;){const e=this.menuById.get(n);t.push(e.name),n=e.parentId}return t.reverse()}getRootNode(e){let t=this.menuById.get(e.id);for(;null!=t.parentId;)t=this.menuById.get(t.parentId);return this._adaptMenu(t)}async _getSellerData(e){var t;const n={id:e,isUnknown:!0,name:r.R.t("common.seller")},s=await WbSpaModel.prototype.$httpClient.fetchStatic(`supplier-by-id/${e}.json`,{},wb.helpers.url.urlStaticData);if(!s)return n;const i=WbSpaModel.prototype.$services.suppliersService.setSupplierInfo(s);return{id:i.supplierId,name:null!=(t=i.supplierFullName)?t:i.supplierName,fineName:this._trimSellerOrgForms(i.supplierName,i.orgForms),ogrn:i.ogrn,ogrnip:i.ogrnip,taxpayerCode:i.taxpayerCode,inn:i.inn,kpp:i.kpp,unp:i.unp,bin:i.bin,unn:i.unn,trademark:i.trademark,legalAddress:i.legalAddress,isUnknown:!1,orgForms:i.orgForms}}_trimSellerOrgForms(e,t=[]){return $.views.converters.trimWord(e,t)}_createMenuMap(){this.fullMenu.forEach(e=>this._setNode(e,null))}_setNode(e,t){var n;this.menuByUrl.set(e.url,e),this.menuById.set(e.id,{parentId:t,url:e.url,name:e.name,id:e.id,childs:e.childs}),null==(n=e.childs)||n.forEach(t=>this._setNode(t,e.id))}_sellerToQuery(e,t){return t?`supplier=${e}&subject=${t}`:`supplier=${e}`}_adaptMenu(e){var t;const n=this.menuById.get(e.id);return n.childs=null==(t=n.childs)?void 0:t.map(e=>this._adaptMenu(e)),n}},Qt=Object.defineProperty,Xt=Object.getOwnPropertySymbols,Zt=Object.prototype.hasOwnProperty,en=Object.prototype.propertyIsEnumerable,tn=(e,t,n)=>((e,t,n)=>t in e?Qt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);var nn=class{constructor(){tn(this,"catalogMenu"),tn(this,"constructorData"),tn(this,"currentMenuItem"),tn(this,"initialized"),tn(this,"isPreview"),tn(this,"modules"),tn(this,"products"),tn(this,"seller"),tn(this,"sort"),tn(this,"type"),tn(this,"xData"),tn(this,"xInfo"),tn(this,"isPaidSubscribeButton",!1),tn(this,"customSellerDetails",{name:null}),this.initialized=!1,this.catalogMenu=null,this.modules={}}async onBeforeActionExecuting(e,t,n){var r,i,o,a,l;const c=(0,C.getHttpClient)(),d=(0,s.cI)(),p=(0,s.MA)();if(this.xData=this.xInfo=this.currentMenuItem=this.products=this.type=this.sort=null,n.cancelRequest)return;this.initialized||await this._initAsync();let h=new URL(e);h.pathname=h.pathname.replace("/webapi","");let m=h.pathname.split("/")[3];if(this.constructorData=await c.fetchStatic(`constructor-api/shops/v3/${m}.json`,{},u.urlStaticBasket,0),this.isPaidSubscribeButton=Boolean(wb.global.settings.switches.enablePaidSubscribeButtonSp&&"paid"===(null==(r=this.constructorData)?void 0:r.subscription)),this.constructorData&&isNaN(Number(m)))h.pathname=`/seller/data/${this.constructorData.supplierID}`,m=this.constructorData.supplierID;else if(this.constructorData&&!isNaN(Number(m))&&(null==(i=this.constructorData.urlPath)?void 0:i.length)>0){const e=window.location.pathname.replace(m,this.constructorData.urlPath).replace("/data","")+h.search;d.replaceState(window.history.state,document.title,e)}const g=new URLSearchParams(h.search);this.isPreview=g.get("preview"),this.isPreview&&(document.body.classList.add("body--no-click"),this.constructorData=await c.fetchStatic(`constructor-api/shops/moderation/${m}.json`,{},u.urlStaticBasket,0)),this.xInfo=await p.getCurrentXInfoWithClustersAsync();const f=Number(m);if(isNaN(f))return n.redirected=!0,d.moveTo404Async();this.seller!==f&&await this._loadBrandMenu(f),this.seller&&(this.currentMenuItem=null==(o=this.catalogMenu)?void 0:o.getCurrentMenuItem(h),this.xData=new this.modules.XCatalogData(null==(a=this.currentMenuItem)?void 0:a.query,null==(l=this.currentMenuItem)?void 0:l.shard,"Seller")),n.cancelRequest=null!=this.xData,this.trySetCustomSellerName(f)}async onActionExecuting(){if(this.xData&&this.xInfo){let e=this.modules.QueryHelper.getInitialParams(),{sort:t=this.modules.SorterModel.getSortFromCache,page:n=1}=e,r=((e,t)=>{var n={};for(var r in e)Zt.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&Xt)for(var r of Xt(e))t.indexOf(r)<0&&en.call(e,r)&&(n[r]=e[r]);return n})(e,["sort","page"]);const s=new this.modules.QueryHelper({sort:t,page:n,filters:this.modules.QueryHelper.checkOnlyFilterParams(r)}).getQueryStringForCatalog(),i=this.modules.xCatalogProvider.createGoodsProvider(this.xData),{goods:o}=await i.loadGoodsAsync(s);this.products=o,this.sort=t}}async onActionExecuted(e){var t,n,r,s,i,o,a,l,c,u;if(null==this.xData)return;e.responseData||(e.responseData={});const d=null==(t=this.catalogMenu)?void 0:t.getSitePathItems(this.currentMenuItem),p={mainVersion:0,type:tt.seller,model:{sellerId:null==(r=null==(n=this.catalogMenu)?void 0:n.sellerData)?void 0:r.id,sellerInfo:null==(s=this.catalogMenu)?void 0:s.getSellerInfo(),xData:this.xData,rootMenuItem:null==(i=this.catalogMenu)?void 0:i.getRootNode(this.currentMenuItem),currentMenuItem:this.currentMenuItem,hasSelectedChild:!1,sitePathItems:d,catalogMenu:null==(o=this.catalogMenu)?void 0:o.getCatalogMenu(d),emptyCatalogLink:null==(a=this.currentMenuItem)?void 0:a.url,tagsUrl:null==(l=this.currentMenuItem)?void 0:l.url,products:this.products,promoMenuV2:!1,title:null==(c=this.currentMenuItem)?void 0:c.title,containerClass:"catalog-page catalog-page--brand",needAdultProtection:!wb.adult.isConfirmed,sorterModel:new this.modules.SorterModel(this.sort,null==(u=this.currentMenuItem)?void 0:u.url),constructorData:this.constructorData,isPreview:this.isPreview,isPaidSubscribeButton:this.isPaidSubscribeButton,customSellerDetails:this.customSellerDetails}};Object.assign(e.responseData,{data:p})}async _initAsync(){const e=(0,s.sL)(),[t,n,r,i,o]=await Promise.all([e.loadModuleAsync("xCatalogData"),e.loadModuleAsync("queryHelper"),e.loadModuleAsync("xCatalogProvider"),e.loadModuleAsync("sorterModel"),e.loadServiceAsync("suppliersService")]);this.modules={XCatalogData:t.XCatalogData,QueryHelper:n,xCatalogProvider:r,SorterModel:i.CatalogSorterModel},this.catalogMenu=new Yt(this.modules),this.initialized=!0}trySetCustomSellerName(e){var t,n;const{mobileAppVariables:r}=wb.global.settings;switch(!0){case null==(t=null==r?void 0:r.objects.eaptekaIds)?void 0:t.includes(e):this.customSellerDetails={name:"eapteka"};break;case null==(n=null==r?void 0:r.objects.rivegaucheIds)?void 0:n.includes(e):this.customSellerDetails={name:"rivegauche"};break;default:this.customSellerDetails={name:null}}}async _loadBrandMenu(e){var t,n;await(null==(t=this.catalogMenu)?void 0:t.initMenu(e,this.xInfo)),this.seller=(null==(n=this.catalogMenu)?void 0:n.sellerData)?e:void 0}},rn=Object.defineProperty,sn=(e,t,n)=>((e,t,n)=>t in e?rn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);var on=class{constructor(e){sn(this,"timeout"),this.timeout=e}onBeforeActionExecuting(e,t,n){n.timeout=this.timeout}},an=Object.defineProperty,ln=(e,t,n)=>((e,t,n)=>t in e?an(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);var cn=class{constructor(){ln(this,"model")}get $getService(){return(0,s.DR)().getService}get $services(){return(0,s.Z1)()}get $router(){return(0,s.cI)()}onBeforeActionExecuting(){this.model=void 0}async onActionExecuting(){await Promise.all([await this.$getService("searchByImageService"),await this.$getService("searchByImageFilters")]);const e=this.$router.routeParameters.imageId;this.model=await this.$services.searchByImageService.getSearchResult(e)}onActionExecuted(e){e.responseData||(e.responseData={}),Object.assign(e.responseData,this.model)}};var un=class{get $httpClient(){return(0,C.getHttpClient)()}get $router(){return(0,s.cI)()}get $user(){return(0,s.u4)()}async onActionExecuted(e){var t;const n=(0,s.cI)();e.responseData||(e.responseData={});const r=null==(t=n.queryParams)?void 0:t.get("searchQuery");if(r){const t=this._getSearchCatalogLink(r),n=`/recommendationssearch?searchQuery=${new URLSearchParams({searchQuery:r})}`,s=await this._loadNmIds(r);if(!Array.isArray(s)||0==s.length)return this.$router.moveTo404Async();const i=await this._loadGoodsByNmIds(s.slice(0,100)),o={type:tt.recommendationsSearch,searchQuery:r,targetUrl:"IM",linkToSearchCatalog:t,originalUrl:n,products:i,nmIds:s};Object.assign(e.responseData,o)}}_getSearchCatalogLink(e){let t=e&&encodeURIComponent(e.replace(/<\/?[^>]+>/gi,"").trim())||"";return`${wb.urlHelper.xSearchBase}?search=${t}`}async _loadNmIds(e){try{const t=(0,v.a)(),n=`https://search-goods.wildberries.ru/search?query=${encodeURIComponent(e)}`,r=t.getRecommendationsSplitterHeaders(),s=await this.$httpClient.fetchJSON(n,{credentials:"omit",headers:r},{timeout:5e3});return(null==s?void 0:s.length)>0?s:null}catch(e){return null}}async _loadGoodsByNmIds(e){try{const t=await wb.xnm.getCatalogCards(e,!1,!1);return e.reduce((e,n)=>{var r;return(null==(r=t[n])?void 0:r.id)&&e.push(wb.xnm.convertXProductToSpaCatalogProduct(t[n])),e},[])}catch(e){return[]}}},dn=Object.defineProperty,pn=(e,t,n)=>((e,t,n)=>t in e?dn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);var hn=class{constructor(){pn(this,"goods"),pn(this,"type"),pn(this,"forproduct"),pn(this,"result"),pn(this,"totalGoodsCount")}get $router(){return(0,s.cI)()}async onActionExecuting(e,t,n){var r,i,o,a,l,c;this.goods=this.type=this.forproduct=this.result=this.totalGoodsCount=void 0;const u=(0,s.DR)(),d=await u.getServiceOf("recommendationsCatalogService"),p=null==(r=this.$router.queryParams)?void 0:r.get("type"),h=null!=(a=null==(o=null==(i=this.$router.queryParams)?void 0:i.get("forproduct"))?void 0:o.parseIntOrDefault())?a:0,m=d.getType(p);if(m){const e=await d.getRecommendations(m.id,h);if(e){let t;if((null==(l=e.goods)?void 0:l.length)?t=e.goods:(null==(c=e.nms)?void 0:c.length)&&(t=await this._loadGoods(e.nms)),Array.isArray(t)&&t.length>0)return this.type=m,this.goods=t,this.result=e,this.forproduct=h,void(this.totalGoodsCount=null==e?void 0:e.totalGoodsCount)}}n.redirected=!0,this.$router.moveTo404Async()}async onActionExecuted(e){var t,n,r,s;e.responseData||(e.responseData={});const{type:i,goods:o,result:a,forproduct:l,totalGoodsCount:c}=this,u=(null==i?void 0:i.id)||0,d={type:u,targetInfo:{targetUrl:(null==i?void 0:i.targetUrl)||""},products:o,statistic:{type:u,source:null==a?void 0:a.source,recommendationsCount:null!=(s=null!=(r=null==(t=null==a?void 0:a.goods)?void 0:t.length)?r:null==(n=null==a?void 0:a.nms)?void 0:n.length)?s:0,productsCount:(null==o?void 0:o.length)||0,parentProduct:Number(l),isVisualSimilarFromRecService:null==a?void 0:a.isVisualSimilarFromRecService},nmId:Number(l),title:(null==i?void 0:i.title)||"",totalGoodsCount:c};Object.assign(e.responseData,d)}async _loadGoods(e){try{const t=await wb.xnm.getCatalogCards(e,!1,!1);return e.reduce((e,n)=>{var r;return(null==(r=t[n])?void 0:r.id)&&e.push(wb.xnm.convertXProductToSpaCatalogProduct(t[n])),e},[])}catch(e){return[]}}},mn=n(70311),gn=n(87974);var fn=class{get $recentViews(){return(0,mn.v)()}get $httpClient(){return(0,C.getHttpClient)()}get $router(){return(0,s.cI)()}get $auth(){return(0,y.c)()}async onActionExecuted(e){e.responseData||(e.responseData={});const t=await this._loadNms();if(0==t.length)return this.$router.moveTo404Async();const n=await this._loadGoods(t);if(0==n.length)return this.$router.moveTo404Async();const s={title:r.R.t("recommendations.viewed"),products:n,type:gn.x.RECENT,targetInfo:{targetUrl:"RG"},statistic:{recommendationsCount:t.length,productsCount:n.length}};Object.assign(e.responseData,s)}async _loadNms(){var e,t,n,r;const i=(0,s.u4)().getUid();let o=null!=(t=null==(e=this.$recentViews.get(i))?void 0:e.nm)?t:[];if(this.$auth.isAuth)try{const e=await this.$httpClient.fetchJSON("/webapi/goods/visited-nm",{method:"POST",body:null},{timeout:2e3});(null==(r=null==(n=null==e?void 0:e.value)?void 0:n.nmsArr)?void 0:r.length)>0&&(o=e.value.nmsArr)}catch(e){console.error(e)}return o}async _loadGoods(e){var t;try{const[n,r]=await Promise.all([wb.xnm.getCatalogCards(e,!0,!0),wb.xnm.getSMergerXnmProducts(e)]),i=r.reduce((e,t)=>(e[t.id]=t.logs,e),{}),o=null==(t=(0,s.Z1)().onePurchasePromoService)?void 0:t.getNmList(),a=r.reverse().map(e=>e.id);return e.reduce((e,t)=>{var r;if(null==(r=n[t])?void 0:r.id){const r=wb.xnm.convertXProductToSpaCatalogProduct(n[t]);r.logs=i[t],r.isAdv=!!r.logs,r.isOnePurchasePromoButtonEnabled=!(null==o?void 0:o.includes(r.nmId)),e.push(r)}return e},[]).sort((e,t)=>a.indexOf(t.cod1S)-a.indexOf(e.cod1S))}catch(e){return[]}}},bn=Object.defineProperty,yn=(e,t,n)=>((e,t,n)=>t in e?bn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);var vn=class{constructor(e){yn(this,"defaultValue"),this.defaultValue=e}onBeforeActionExecuting(e,t,n){n.defaultValue=this.defaultValue}};var wn=class{get $router(){return(0,s.cI)()}get $services(){return(0,s.Z1)()}async onActionExecuting(e,t,n){const{userInfo:r}=await this.$services.userData.getUserDataAsync();r.isAuthenticated||(n.redirected=!0,this.$router.moveToSignIn({query:{returnUrl:window.location.href}},!0))}},Sn=Object.defineProperty,_n=(e,t,n)=>((e,t,n)=>t in e?Sn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);var In=class{constructor(e=[],t=[],n=[]){_n(this,"exceptionLocales"),_n(this,"checkBalanceLocales"),_n(this,"checkCurrencyLocales"),_n(this,"currentLocale",wb.settings.currentLocale),_n(this,"isInvalidLocale",!1),this.exceptionLocales=e,this.checkBalanceLocales=t,this.checkCurrencyLocales=n}get $router(){return(0,s.cI)()}get $user(){return(0,s.u4)()}get $userEnv(){return(0,s.xR)()}get isWalletPageRoute(){return"SpaMyWalletEntrypoint"===this.$router.currentRoute.name||"SpaWalletPurchaseEntrypoint"===this.$router.currentRoute.name}async onBeforeActionExecuting(){this.isInvalidLocale=!1}async onActionExecuting(){if(window.location.pathname.includes("b2b")&&"ru"!==this.currentLocale)throw new C.NotFoundError;if(this.isWalletPageRoute){if("TJS"===this.$user.getCurrency())throw new C.NotFoundError}if(this.exceptionLocales.includes(this.currentLocale)){if(!this.isWalletPageRoute)throw new C.NotFoundError;if((wb.settings.walletTypeCode>0||["ge","tj"].includes(wb.settings.currentLocale))&&"RUB"===this.$userEnv.currency)return void(this.isInvalidLocale=!0);if(this.checkBalanceLocales.includes(this.currentLocale)){const e=await this.$user.getBalance({timeout:2e3});if(0===(null==e?void 0:e.totalBalance))throw new C.NotFoundError}if(this.checkCurrencyLocales.includes(this.currentLocale)){const e=this.$user.getCurrency();if(!e||"USD"===e)throw new C.NotFoundError}}}async onActionExecuted(e){e.responseData&&(e.responseData.isInvalidLocale=this.isInvalidLocale)}},Cn=Object.defineProperty,kn=(e,t,n)=>((e,t,n)=>t in e?Cn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);var Pn=class{constructor(e=[]){kn(this,"allowedLocales"),kn(this,"currentLocale",wb.settings.currentLocale),kn(this,"isInvalidLocale",!1),this.allowedLocales=e}async onActionExecuting(){if(!this.allowedLocales.includes(this.currentLocale))throw new C.NotFoundError}};var En=class{async onBeforeActionExecuting(e,t){const n=(0,s.Z1)().cartService.publicBasketApiUrl;t.credentials="include";const r=new URL(n,window.location.origin);e.port=r.port,e.pathname=(r.pathname+e.pathname).replace("//",""),e.host=r.host}};var Tn=class{onBeforeActionExecuting(e,t){const n=(0,s.u4)();t.body||(t.body=new URLSearchParams),t.body.append("currency",n.getCurrency())}},On=n(63740);var xn=class{get $router(){return(0,s.cI)()}get $services(){return(0,s.Z1)()}async onActionExecuting(e,t,n){var r,s,i,o,a,l,c;const u=(0,y.c)();if((null==(r=this.$router.queryParams)?void 0:r.get("returnUrl"))&&(null==(s=this.$router.queryParams)?void 0:s.get("yqrid"))&&"phone"===(null==(i=wb.settings)?void 0:i.displayType)){let e=null==(o=this.$router.queryParams)?void 0:o.get("returnUrl");try{if("/lk/mywallet/purchases"===new URL(e,window.location.origin).pathname){if("iOS"===(0,On.$)())try{location.href="wildberries://wb-bank/card/activation"}catch(e){setTimeout(()=>{location.href="https://www.wildberries.ru/wb-bank/card/activation"})}else window.location.href="https://www.wildberries.ru/wb-bank/card/activation"}}catch(e){}}if(u.isAuth&&u.jwt){let e,t=null!=(c=(null==(a=this.$router.queryParams)?void 0:a.get("ReturnUrl"))||(null==(l=this.$router.queryParams)?void 0:l.get("returnUrl")))?c:"/lk";try{e=new URL(t,window.location.origin)}catch(e){}(null==e?void 0:e.hostname)!==window.location.hostname&&(t="/lk"),n.redirected=!0,this.$router.moveTo(t)}}},Mn=Object.defineProperty,An=(e,t,n)=>((e,t,n)=>t in e?Mn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);var Rn=class{constructor(){An(this,"getSavedOptionsTask")}async onActionExecuting(e){const t=(0,s.Z1)(),n=(0,s.cI)(),r=(0,y.c)();if(!(e.searchParams.get("redirect_uri")&&e.searchParams.get("client_id")&&e.searchParams.get("scope")&&e.searchParams.get("code_challenge")&&(e=>{const t=e.searchParams.get("redirect_uri");return/^((http|https):\/\/)/.test(null!=t?t:"")})(e)))throw new C.NotFoundError;this.toggleHideClass(!0),r.isAuth?e.searchParams.get("reauth")?this.getSavedOptionsTask=Promise.resolve([]):this.getSavedOptionsTask=t.apiUserStorage.getData([{path:"wb_oauth_saved_options"}],{timeout:1200}):n.moveToSignIn({query:{returnUrl:window.location.href}},!1)}async onActionExecuted(e){var t;if(!(0,y.c)().isAuth)return;const n=await this.getSavedOptionsTask;if(n){if(null==n?void 0:n.length)try{return void(e.responseData=JSON.parse(null!=(t=w.o4.decode(n[0].file))?t:"[]"))}catch(e){}e.responseData=[]}}toggleHideClass(e){const t=document.querySelector("header"),n=document.querySelector("footer"),r=document.querySelector(".j-navbar-mobile"),s=document.querySelector(".j-fixed-block"),i=document.querySelector("body");t&&n&&r&&(e?t.classList.add("hide"):t.classList.remove("hide"),e?n.classList.add("hide"):n.classList.remove("hide"),e?r.classList.add("hide"):r.classList.remove("hide"),window.self!==window.top&&(null==s||s.classList.toggle("hide",e),null==i||i.classList.toggle("body--empty-center",e)))}};var Dn=class{constructor(e){this.redirectTo=e}async onBeforeActionExecuting(e,t,n){const r=(0,s.cI)();n.redirected=!0,r.moveTo(this.redirectTo)}};var Ln=class{async onBeforeActionExecuting(e){e.searchParams.set("cultureUI",wb.currentLanguage)}},Bn=n(13808),$n=n(44325),Nn=Object.defineProperty,jn=(e,t,n)=>((e,t,n)=>t in e?Nn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);var Fn=class{constructor(){jn(this,"path"),this.path=""}async onBeforeActionExecuting(e){this.path=e.pathname.replace("/webapi/servicesdata","/services");const t=Bn.m.legalRedirectUrl(this.path);$n.Xd[this.path]&&wb.spa.redirect(t)}},Un=Object.defineProperty,Wn=(e,t,n)=>((e,t,n)=>t in e?Un(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);var Hn=class{constructor(){Wn(this,"data"),this.data={isEmptyCache:!0,items:[]}}async onActionExecuting(){var e;const t=(0,s.Z1)();this.data=null!=(e=await t.favsSellersService.getFavsSellersDataAsync(!0))?e:{isEmptyCache:!0,items:[]}}async onActionExecuted(e){null!=this.data&&(e.responseData||(e.responseData={}),Object.assign(e.responseData,this.data))}},Vn=Object.defineProperty,zn=(e,t,n)=>((e,t,n)=>t in e?Vn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);const qn={ge:["pravila-polzovaniya-torgovoy-ploshchadkoy","user-agreement-for-wb-services","cookies-policy-seller","data-processing-sellers","seller-offer","organizing-event"],tj:["pravila-polzovaniya-torgovoy-ploshchadkoy","politika-konfidentsialnosti","account-linking-terms"],tm:["politika-konfidentsialnosti"]};var Kn=class{constructor(){zn(this,"pageName"),zn(this,"includeUrl"),this.pageName=""}async onBeforeActionExecuting(e,t,n){this.includeUrl=!1,this._checkCurrentPage(e),this.includeUrl&&(n.cancelRequest=()=>!0)}async onActionExecuted(e){this.includeUrl&&(e.responseData={useLegalApi:!0,servicePage:this.pageName})}_checkCurrentPage(e){for(const t of qn[wb.settings.currentLocale]||[])if(-1!==e.pathname.indexOf(t)){this.includeUrl=!0,this.pageName=t;break}}};const Gn="OK";var Jn=n(52623);var Yn=class{get $router(){return(0,s.cI)()}get $helper(){return(0,s.dU)()}get $userEnv(){return(0,s.xR)()}get $user(){return(0,s.u4)()}get $moduleLoader(){return(0,s.sL)()}get $services(){return(0,s.Z1)()}get $auth(){return(0,y.c)()}get isWalletPageRoute(){return"SpaMyWalletEntrypoint"===this.$router.currentRoute.name||"SpaWalletPurchaseEntrypoint"===this.$router.currentRoute.name}async onBeforeActionExecuting(e,t,n){if(this.isWalletPageRoute){try{await this.$user.getBalance({force:!0,timeout:2e3})}catch(e){if("object"==typeof e&&null!==e&&"isUnauthorize"in e&&e.isUnauthorize||!this.$auth.isAuth)return;throw new C.NotFoundError}if(wb.settings.b2bMode)return 0!==wb.settings.walletTypeCode&&await wb.spa.restoreB2BState(),n.redirected=!0,void this.$router.moveTo("/lk#no-wallet-for-b2b",!0);if(await wb.user.check2FAEnabled()){await this.$moduleLoader.loadServiceAsync("walletAuthService"),await this.$services.walletAuthService.initAsync();const e=await this.$services.walletAuthService.checkToken();(null==e?void 0:e.status)!==Gn&&(n.redirected=!0,this.$router.moveTo("/lk#check2fa",!0))}else if(wb.settings.walletTypeCode>0&&"ru"===wb.settings.currentLocale&&await this.$user.checkWalletRedesignEnabled()){if(!(await this.loadCrypto()).needKey())return;n.redirected=!0,this.$router.moveTo("/lk#securityCode",!0)}}}async loadCrypto(){const e=await(0,Jn.vK)();return await e.initAsync(),e}};var Qn=class{get $router(){return(0,s.cI)()}async onActionExecuting(e,t,n){(0,s.MA)().isResaleEnabled({isSeller:!0})||(n.redirected=!0,this.$router.moveTo("/lk"))}};var Xn=class{get $router(){return(0,s.cI)()}async onActionExecuting(e,t,n){const r=(0,s.MA)();r.isResaleSupplierLKFeedbacksEnabled()||r.isResaleSupplierLKQuestionsEnabled()||(n.redirected=!0,this.$router.moveTo("/lk"))}};var Zn=class{async onBeforeActionExecuting(e,t,n){try{if(!(e.searchParams.get("status")||""))return;const t=wb.global.userSettings.realtyBookingInfo;if(wb.global.userSettings.realtyBookingInfo=void 0,wb.global.saveUserSettings(),!t)return;const{productId:r,bookingId:i}=t;if("string"!=typeof r&&"number"!=typeof r||"string"!=typeof i&&"number"!=typeof i)return;if(!(0,w.Et)(r)||!i)return;n.redirected=!0,(0,s.cI)().moveTo(`/realty/product/${r}/reservation/${i}`,!0)}catch(e){}}};var er=class{constructor(){}async onBeforeActionExecuting(e,t,n){const r=(0,s.cI)(),{enablePharma:i}=wb.global.settings.switches||{};i||(n.redirected=!0,await r.moveTo404Async())}},tr=Object.defineProperty,nr=(e,t,n)=>((e,t,n)=>t in e?tr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);const rr=new xe,sr=new De,ir=new vn({isNetworkError:!0}),or=new wn,ar=new Yn,lr=new Qn,cr=new Xn;class ur{constructor(){var e;nr(this,"globalPipelines"),nr(this,"map");const t=(0,s.cI)(),n=new Map;this.globalPipelines=[new Fe],n.set("SpaHomeData",{pipelines:[sr,new Zn]}),n.set("SpaSignInData",{pipelines:[sr,new xn]}),n.set("SpaRefundData",{pipelines:[or,ir]}),n.set("SpaProductCardData",{pipelines:[sr,new He]}),n.set("SpaGetGroupedDeliveries",{pipelines:[or,sr,new on(1e3)],fallback:()=>({options:{}})}),n.set("SpaHeadArchivePositions",{pipelines:[or,ir],fallback:()=>({limit:150,filters:{type:"all",status:0}})}),n.set("SpaBasketData",{maxTriesCount:0,pipelines:[...(null==(e=wb.global.settings.switches)?void 0:e.enableCatalogAuthForPrice)?[or]:[],ir,rr,new je,new on(4e3)]}),n.set("SpaEmailedConfirmData",{pipelines:[new Le,new De(()=>{const{targetRoute:e}=t;return"SpaConfirmEmailedEntrypoint"!=e&&"SpaChangeEmailEntrypoint"!=e})]}),n.set("SpaWalletPurchaseData",{pipelines:[or,ar,rr,new In(["by","kz","kg","am","uz","ge","tj","global"],["ge"],["global","tj"]),ir,new Tn]}),n.set("SpaCustomerReceiptData",{pipelines:[sr,rr,new In(["ge","tj"]),ir]}),n.set("SpaPersonalCabinetData",{pipelines:[ir,rr,or]}),n.set("SpaTravelLkData",{pipelines:[sr]}),n.set("SpaBasketBuyItNowData",{maxTriesCount:0,pipelines:[rr,new je,ir,new on(3e3)]}),n.set("SpaSearchData",{pipelines:[new vt]}),n.set("SpaRecommendationsSearchCatalogData",{pipelines:[sr,new un]}),n.set("SpaRecommendationsCatalogData",{pipelines:[sr,new hn]}),n.set("SpaRecentCatalogData",{pipelines:[sr,new fn]}),n.set("SpaWlArrivedData",{pipelines:[sr,new Qe,or]}),n.set("SpaCatalogData",{pipelines:[new ut,new ht]}),n.set("SpaPromotionsCatalogData",{pipelines:[new Tt]}),n.set("SpaSellerCatalogData",{pipelines:[new nn]}),n.set("SpaBrandsData",{pipelines:[new Jt]}),n.set("SpaBrandsPreviewData",{pipelines:[new Jt(!0)]}),n.set("SpaFavoritesData",{pipelines:[sr,new et,or]}),n.set("SpaSearchByImageData",{pipelines:[sr,new cn]}),n.set("SpaOrderConfirmedData",{fallback:e=>{if(e){const t=e.url.searchParams.get("orderId");if(t){const e=sessionStorage.getItem(`confirmed_order_${t}`);if(e)return{data:JSON.parse(e)}}}return{data:{broken:!0,order:{}}}},pipelines:[rr,new En]}),n.set("SpaOrderThankYouEntrypoint",{fallback:()=>({})}),n.set("SpaPaymentFailData",{fallback:()=>({})}),n.set("SpaFavoriteBrandsData",{pipelines:[or,ir]}),n.set("SpaHistoryRefundsData",{pipelines:[or,ir]}),n.set("SpaMyCommunicationsData",{pipelines:[or,ir,sr,new Dn("/#wbchat")]}),n.set("SpaMyClaimsData",{pipelines:[or,ir]}),n.set("SpaMyFeedbacksData",{pipelines:[or,ir]}),n.set("SpaC2CAdData",{pipelines:[or,ir,sr,lr]}),n.set("SpaC2COrdersData",{pipelines:[or,ir,sr,lr]}),n.set("SpaC2CProductData",{pipelines:[or,ir,sr,lr]}),n.set("SpaC2CFeedbackQuestionsData",{pipelines:[or,ir,sr,lr,cr]}),n.set("SpaOAuthSignInData",{pipelines:[sr,new Rn,rr]}),n.set("SubscriptionPageData",{pipelines:[sr,rr]}),n.set("ServicePagesData",{pipelines:[new In,new Kn,new Me,new Ln,new Fn]}),n.set("PressCenterData",{pipelines:[new Me,new Ln]}),n.set("ActivateCertificateData",{pipelines:[sr,new Pn(["ru"])]}),n.set("YourCertificatesData",{pipelines:[sr,new Pn(["ru"])]}),n.set("PurchasesCertificatesData",{pipelines:[sr,new Pn(["ru"])]}),n.set("SpaGiftCertificatesThankYouData",{pipelines:[sr,new Pn(["ru"])]}),n.set("SpaGiftCertificatesData",{pipelines:[new Pn(["ru"]),ir,new on(2e3)]}),n.set("SpaFavoriteSellersData",{pipelines:[sr,or,new Hn]}),n.set("SpaRealtyBookingData",{pipelines:[sr]}),n.set("SpaPharmaHomeData",{pipelines:[sr,new er]}),this.map=n}extend(e){var t;const n=e&&this.map.get(e)||{};return n.pipelines=(null!=(t=n.pipelines)?t:[]).concat(this.globalPipelines),n}static richPrototype({prototype:e}){Object.setPrototypeOf(ur.prototype,e)}static factory(){return new ur}}var dr=ur,pr=n(25002),hr=Object.defineProperty,mr=Object.defineProperties,gr=Object.getOwnPropertyDescriptors,fr=Object.getOwnPropertySymbols,br=Object.prototype.hasOwnProperty,yr=Object.prototype.propertyIsEnumerable,vr=(e,t,n)=>t in e?hr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wr=(e,t,n)=>vr(e,"symbol"!=typeof t?t+"":t,n);class Sr{constructor(e,t){wr(this,"routeExtensions"),wr(this,"routesDictionary"),wr(this,"tmplHashes"),this.routeExtensions=dr.factory(),this.routesDictionary=e,this.tmplHashes=t}loadResoursesData({routeName:e,triesCount:t,parameters:n,query:r}){var s;const i=this.routesDictionary[e],o=i.requiredData?new URL(`${le(i.requiredData,n)}?${null==r?void 0:r.toString()}`,window.location.origin):void 0,a=!$.templates[e]&&i.tmpl?ue(e,this.tmplHashes,i.tmpl):Promise.resolve(),l=this.loadData({routeName:null==(s=i.requiredData)?void 0:s.name,url:o,triesCount:t,noRetries:!0}),c=ce(i),u=i.remoteName?(0,pr.getI18nService)().loadRemoteResourcesAsync(i.remoteName):Promise.resolve();return Promise.all([l,c,a,u]).then(([e])=>Promise.resolve(e)).catch(s=>s.isNotFound||s.isUnauthorize||s.isCancelled||t>=3?Promise.reject(s):(t++,this.loadResoursesData({routeName:e,triesCount:t,parameters:n,query:r})))}async loadData({url:e,routeName:t,triesCount:n=0,noRetries:r=!1,forceUpdate:s=!1}){var i,o,a,l,c,u,d,p,h,m;const g=(0,C.getHttpClient)(),f=this.routeExtensions.extend(t);let b={};const y=[];try{if(!e){return{viewData:{},redirected:!1}}b={url:e,params:{method:"POST"},options:{redirectUnauth:!0,replaceState:!0,includeResponse:!0,timeout:1e4}},await Promise.all((null!=(i=null==f?void 0:f.pipelines)?i:[]).map(e=>{var t;return null==(t=e.onBeforeActionExecuting)?void 0:t.call(e,b.url,b.params,b.options,s,n)})),(null==(o=b.options)?void 0:o.cancelRequest)||(null==(a=b.options)?void 0:a.redirected)?y.push(Promise.resolve({})):y.push(g.fetchJSON(String(b.url),b.params,((e,t)=>mr(e,gr(t)))(((e,t)=>{for(var n in t||(t={}))br.call(t,n)&&vr(e,n,t[n]);if(fr)for(var n of fr(t))yr.call(t,n)&&vr(e,n,t[n]);return e})({},b.options),{useProccessResponse:!0}))),y.push(...(null!=(l=null==f?void 0:f.pipelines)?l:[]).map(e=>{var t;return null==(t=e.onActionExecuting)?void 0:t.call(e,b.url,b.params,b.options,s,n)}));const[t]=await Promise.all(y);(null==(c=b.options)?void 0:c.redirected)||await Promise.all((null!=(u=null==f?void 0:f.pipelines)?u:[]).map(e=>{var n;return null==(n=e.onActionExecuted)?void 0:n.call(e,t,s)}));let r=t.responseData;(null==(d=b.options)?void 0:d.cancelRequest)&&(null==f?void 0:f.fallback)&&(r=null==f?void 0:f.fallback(b));return{viewData:r,redirected:null!=(h=null==(p=b.options)?void 0:p.redirected)&&h}}catch(i){const o=null!=(m=f.maxTriesCount)?m:3;if(i.isNotFound||i.isUnauthorize||i.isCancelled||n>=o||r){if((null==f?void 0:f.fallback)&&(i.isCancelled||n>=o)){return{viewData:null==f?void 0:f.fallback(b),redirected:!0}}throw i}return n++,await this.loadData({url:e,triesCount:n,noRetries:r,forceUpdate:s,routeName:t})}}static factory(e,t){return new Sr(e,t)}}var _r=n(8379),Ir=n(74314),Cr=Object.defineProperty,kr=(e,t,n)=>((e,t,n)=>t in e?Cr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);const Pr=e=>Ir.h[e]();const Er="promotion-creatives";let Tr,Or,xr,Mr,Ar={getById(e){return Tr&&Tr[e]},isThermometerNeeded(e){return Or&&Or.has(e)},isRedPriceNeeded(e){return Mr&&Mr.has(e)},getFilter(){return xr},getMainActionId(){return 188852},getHomeCarouselData(){return{caruselUrl:"/promotions/uhtydazha",carouselName:r.R.t("promo.forBrightPrices"),carouselBg:"#ED1AD8"}},async startUpdate(){try{await navigator.locks.request(`lock-${Er}`,async e=>{var t;const n=await WbSpaModel.prototype.$httpClient.fetchStatic(`${Er}.json.hash`,{noCache:!0,fetchType:"text"},wb.helpers.url.urlStaticData);if(n&&n!==(null==(t=localStorage.getObject(Er))?void 0:t.hash)){const e=await WbSpaModel.prototype.$httpClient.fetchStatic(`${Er}.json`,{noCache:!0},wb.helpers.url.urlStaticData);e.hash=n,this.initPromoCreatives(e),localStorage.putObject(Er,e),localStorage.removeItem("promotions"),localStorage.removeItem("promotions-hash")}})}catch(e){}},initPromoCreatives(e){var t,n,r;e&&(Tr={},null==(t=e.panels)||t.forEach(e=>Tr[e.id]=e),Or=new Set(null!=(n=e.thermometer)?n:[]),Mr=new Set(null!=(r=e.redPrices)?r:[]),e.filter&&(null==xr?void 0:xr.id)!==e.filter.id&&(document.documentElement.style.setProperty("--custom-promo-filter-color",e.filter.color),document.documentElement.style.setProperty("--custom-promo-filter-background",e.filter.background),document.documentElement.style.setProperty("--custom-promo-filter-switch-color",e.filter.switch),document.documentElement.style.setProperty("--custom-promo-filter-switch-background",e.filter.switchBackground),document.documentElement.style.setProperty("--custom-promo-filter-switch-active-color",e.filter.switchActive),document.documentElement.style.setProperty("--custom-promo-filter-switch-active-background",e.filter.switchActiveBackground)),xr=e.filter)},richPrototype({prototype:e}){Object.setPrototypeOf(Ar,e)}};var Rr;(Rr=Ar).initPromoCreatives(localStorage.getObject(Er)),Rr.startUpdate(),setInterval(Rr.startUpdate.bind(Rr),18e4);var Dr=Ar,Lr=Object.defineProperty,Br=(e,t,n)=>((e,t,n)=>t in e?Lr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class $r{constructor(e){Br(this,"isGeLocale",!1),Br(this,"isTmLocale",!1),Br(this,"isTjLocale",!1),Br(this,"enableWalletRedesign",!1),Br(this,"stylesLink",""),Br(this,"moneyBalanceGEL",0),Br(this,"moneyBalanceTJS",0),Br(this,"loadTemplateTask"),Br(this,"isResaleEnabledFlag",!1),Br(this,"resaleLink","/resale/ads"),Br(this,"isResaleSupplierLKQuestionsEnabled",!1),Br(this,"isResaleSupplierLKFeedbackQuestionsEnabled",!1),Br(this,"resaleObserver",null),Br(this,"dictionary",{}),Br(this,"alternateRoutes"),Br(this,"walletEl"),Br(this,"walletWrapperEl",null),Br(this,"menuDictionary",{}),Br(this,"menuDictionaryKeys",[]),Br(this,"root",null),Br(this,"roots",[]),Br(this,"isHidden"),Br(this,"hideTooltipInfoCert"),Br(this,"isWBTrackFlag",!1),Br(this,"isB2bDocumentsEnabledFlag",!1),this.setStatic(e),this.alternateRoutes=new Map,this.hideTooltipInfoCert=wb.global.userSettings.closed.includes("hide_tooltip_info_cert"),this.isHidden=!1}async init(){var e,t,n;const r=document.querySelector(".j-lk-menu-top");if(!r)return;const i=[{type:"top",selector:document.querySelector(".j-lk-menu-top")}];this.loadTemplateTask=$.views.loadTemplateAsync("menuLk"),await this.loadTemplateTask,this.moneyBalanceGEL=WbSpaModel.prototype.$auth.isAuth&&(null==(e=WbSpaModel.prototype.$user.balance)?void 0:e.moneyBalanceGEL)||0,this.moneyBalanceTJS=WbSpaModel.prototype.$auth.isAuth&&(null==(t=WbSpaModel.prototype.$user.balance)?void 0:t.moneyBalanceTJS)||0,this.isGeLocale="ge"===wb.settings.currentLocale;const o=(0,s.u4)();this.enableWalletRedesign=await o.checkWalletRedesignEnabled(),this.isTmLocale="tm"===wb.settings.currentLocale,this.isTjLocale="tj"===wb.settings.currentLocale,await WbSpaModel.prototype.$services.userData.getUserDataAsync(),this.isResaleEnabledFlag=WbSpaModel.prototype.isResaleEnabled({isSeller:!0}),this.resaleLink=wb.global.settings.switches.enableNavigationC2CLKtoResaleCatalog?"/catalog/resale":"/resale/ads",this.isB2bDocumentsEnabledFlag=WbSpaModel.prototype.isB2bDocumentsEnabled(),this.isResaleSupplierLKFeedbackQuestionsEnabled=WbSpaModel.prototype.isResaleSupplierLKQuestionsEnabled()||WbSpaModel.prototype.isResaleSupplierLKFeedbacksEnabled(),this.isWBTrackFlag=WbSpaModel.prototype.isWBTrackProfileEnabled(),this.sendResaleShownStat=this.sendResaleShownStat.bind(this),this.resaleObserver=WbSpaModel.prototype.$observerHelper.getSimpleObserver(this.sendResaleShownStat,{threshold:.5}),this.checkShowWalletMenu(),WbSpaModel.prototype.$eventBus.addEventListener("BalanceUpdated",this.checkShowWalletMenu.bind(this)),$.templates.menuLk.link(r,this),$.link(!0,r,this),await this.buildMenuDictionary(r),this.root=r,this.roots=i.map(e=>e.selector),this.initDropDownMenu(),this.toggleVisibilityNodes(),wb.global.subscribe(this.toggleVisibilityNodes.bind(this)),$.observe(wb.settings,"balanceSectionTitle",()=>{var e,t;null==(e=this.walletWrapperEl)||e.classList.add(wb.settings.walletTypeCode>0?"lk-menu-main__item--wallet":"lk-menu-main__item--balance"),null==(t=this.walletEl)||t.setAttribute("data-lk-header-st-name",wb.settings.walletTypeCode<0?"Balance":"Wallet")}),$.observe(wb.settings,"b2bMode",async()=>{await this.rebuildMenuDictionary()});const a=r.querySelector(".j-lk-resale");return a&&(null==(n=this.resaleObserver)||n.observe([a])),this}async rebuildMenuDictionary(){const e=document.querySelector(".j-lk-menu-top");e&&($.templates.menuLk.link(e,this),await this.buildMenuDictionary(e),this.root=e,this.initDropDownMenu(),this.toggleVisibilityNodes())}async buildMenuDictionary(e){const t={};e.querySelectorAll("a").forEach(e=>{var n,r;let s;try{s=new URL(e.href).pathname}catch(e){return}const i="true"==e.dataset.main,o="true"==e.dataset.sub,a=e.parentElement,l=e.closest(i?"li":"ul");t.hasOwnProperty(s)||(t[s]={links:[],elements:[]}),t[s].elements.push(l),t[s].links.push({el:a,isMainMenu:i,isSubMenu:o,path:s,switch:(null==a?void 0:a.dataset.switch)||"",funcSwitch:(null==a?void 0:a.dataset.funcSwitch)||""}),null==(n=e.dataset.altRoutes)||n.split(",").forEach(e=>{e&&this.alternateRoutes.set(e.trim(),s)}),"6"===(null==l?void 0:l.dataset.attr)&&(this.walletWrapperEl=l,this.walletEl=e,null==(r=this.walletWrapperEl)||r.classList.add(wb.settings.walletTypeCode>0?"lk-menu-main__item--wallet":"lk-menu-main__item--balance"))}),this.menuDictionary=t,this.menuDictionaryKeys=Object.keys(this.menuDictionary)}setStatic(e){this.stylesLink=e.stylesLink}checkShowWalletMenu(){const e=WbSpaModel.prototype.$user.getCurrency(),t=this.isTjLocale&&0!==this.moneyBalanceTJS||this.isGeLocale&&0!==this.moneyBalanceGEL||!this.isGeLocale&&"USD"!==e&&"TJS"!==e;$.observable(this).setProperty({balanceCurrency:e,showWalletMenu:t})}async updateMenu(e,t,n){var r;if(await this.loadTemplateTask,this.toggleVisibility(t,n),"/"!=e[0]&&(e="/"+e),null==this.root)return;const s=this.alternateRoutes.get(e);s&&(e=s);const i=this.menuDictionary[e];if(null==i)return;const o=i.elements.length>0?null==(r=i.elements[0])?void 0:r.dataset.attr:"";this.menuDictionaryKeys.forEach(t=>{const n=this.menuDictionary[t].elements;n.length>0&&n.forEach(e=>{const t=(null==e?void 0:e.dataset.attr)==o;null==e||e.classList.toggle("active",t)}),this.menuDictionary[t].links.forEach(t=>{var n;!t.isMainMenu&&(null==(n=t.el)||n.classList.toggle("active",t.path==e))})}),$.observable(this).setProperty({isResaleEnabledFlag:WbSpaModel.prototype.isResaleEnabled({isSeller:!0}),isResaleSupplierLKQuestionsEnabled:WbSpaModel.prototype.isResaleSupplierLKQuestionsEnabled(),isB2bDocumentsEnabledFlag:WbSpaModel.prototype.isB2bDocumentsEnabled()})}toggleVisibility(e,t){const n=WbSpaModel.prototype.$user.getCurrency(),r="SpaWalletPurchaseEntrypoint"===WbSpaModel.prototype.$router.currentRoute.name&&(!n||"USD"===n||"TJS"===n);if(!e||!e.visible||e.authOnly&&void 0!==t&&!t||r)return this.hide();this.show()}toggleVisibilityNodes(){this.menuDictionaryKeys.forEach(e=>{this.menuDictionary[e].links.forEach(e=>{var t,n,r;if(e.switch||e.funcSwitch){let s=wb.global.settings.switches[e.switch]||(null==(t=this[e.funcSwitch])?void 0:t.call(this));if(s)for(const[t,r]of this.alternateRoutes)if(r==e.path){const r=null==(n=e.el)?void 0:n.querySelector("a");if(r){r.href=t;break}}null==(r=e.el)||r.classList.toggle("hide",!s)}})})}async show(){this.isHidden=!1,await WbSpaModel.prototype.$helper.loadCssAsync(this.stylesLink),this.isHidden||(this.roots.forEach(e=>null==e?void 0:e.classList.remove("hide")),"ru"==wb.settings.currentLocale||wb.global.userSettings.closed.includes("new_fin_oper_loc")||(wb.global.userSettings.closed.push("new_fin_oper_loc"),wb.global.saveUserSettings(),this.showFinOperationsTooltip()))}hide(){this.isHidden=!0,this.roots.forEach(e=>null==e?void 0:e.classList.add("hide"))}initDropDownMenu(){const e=["mouseleave","click"];this.menuDictionaryKeys.forEach(t=>{this.menuDictionary[t].links.forEach(t=>{var n;t.isMainMenu&&(null==(n=t.el)||n.addEventListener("mouseover",()=>{var e;t.isMainMenu&&(null==(e=t.el)||e.classList.add("open"))})),e.forEach(function(e){var n;t.isMainMenu&&(null==(n=t.el)||n.addEventListener(e,function(){var e;t.isMainMenu&&(null==(e=t.el)||e.classList.remove("open"))}))})})}),this.addClickStat()}addClickStat(){this.roots.forEach(e=>{null==e||e.addEventListener("click",e=>{var t,n;const r=e.target,s=null==r?void 0:r.closest("a"),i=null==(t=null==s?void 0:s.dataset)?void 0:t.lkHeaderWba,o=null==(n=null==s?void 0:s.dataset)?void 0:n.lkHeaderStName;void 0!==i&&this.handleWbaName(i),void 0!==o&&this.handleWbaNameSt(o)})})}handleWbaName(e){e&&(["LK_Purchases","LK_Favorites","LK_DLV","LK_eCheck","Favourite_Brand","LK_MechtallionTickets"].includes(e)?this.sendClickStat(e):["LK_RefundRegistration"].includes(e)?this.sendClickStat("LK_Refunds"):"LK_Header_Purchases"!==e?"LK_Header_Favorites"!==e?WbSpaModel.prototype.$analitic.sendEvent(`${e}_T`):WbSpaModel.prototype.$analitic.sendEvent("LK_Favorites_T",{location:"LK_Block"}):WbSpaModel.prototype.$analitic.sendEvent("LK_Purchases_T",{location:"LK_Block"}))}sendResaleShownStat(){WbSpaModel.prototype.$analitic.sendEvent("LK_Resale_S")}handleWbaNameSt(e){e&&WbSpaModel.prototype.$analitic.sendEvent("LK_Header_T",{name:e})}sendClickStat(e){WbSpaModel.prototype.$analitic.sendEvent(`${e}_T`,{location:"Sub_Header"})}showFinOperationsTooltip(){const e="lk-menu-main__item--tooltip-active",t=document.getElementById("menuTooltipTarget");if(!t)return;const n=t.querySelector(".j-tooltip-close"),r=()=>t.classList.remove(e);null==n||n.addEventListener("click",r),setTimeout(r,6e3),t.classList.add(e)}closeTooltipInfoCert(){WbSpaModel.prototype.$observable.setProperty({hideTooltipInfoCert:!0}),wb.global.userSettings.closed.push("hide_tooltip_info_cert"),wb.global.saveUserSettings(),$.observable(this).setProperty({hideTooltipInfoCert:!0})}scrollToEl(e){var t;const n=e.currentTarget,r=null==(t=e.currentTarget)?void 0:t.closest("li"),s=r.closest(".lk-menu-sub__list"),i=s.querySelectorAll("li"),o=Array.from(i).indexOf(r);1===o||2===o?s.scrollLeft=(null==n?void 0:n.offsetLeft)+(null==n?void 0:n.offsetWidth)-s.offsetWidth:3!==o&&4!==o||(s.scrollLeft=n.offsetLeft)}static richPrototype({prototype:e}){Object.setPrototypeOf($r.prototype,e)}static factory(e){return new $r(e)}}var Nr=$r;const jr=Object.freeze({mobile:"m",desktop:"d"});let Fr=null;var Ur=Object.defineProperty,Wr=(e,t,n)=>((e,t,n)=>t in e?Ur(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);let Hr=null;const Vr=class e{constructor(){Wr(this,"processing"),Wr(this,"currentData"),Wr(this,"targetData"),this.processing=!1,this.currentData=null,this.targetData=null,this.onPopupShow=this.onPopupShow.bind(this)}async showSlider(e,t,n){const r=(0,s.cI)();if(!(0,s.MA)().isDesktop())return void r.moveTo($.views.converters.urlForGood(e.cod1S,!0,e.newTargetUrl,null,!1,e.chrtId));const{observeDisplayMode:i,removeObserver:o}=this.createObservable();wb.displayModeSettings.addObserver(i),e.onHideCallback=o;if(await this.processingPopup(e.cod1S,e.chrtId,e.newTargetUrl,n))try{await Hr.showSlider(e,t,n)}catch(e){this.onShowError(o)}finally{this.onPopupShow()}}async show(e,t,n,r,i={}){const o=(0,v.a)(),a=(0,s.cI)();if(!(0,s.MA)().isDesktop())return r&&o.updateState(r),void a.moveTo($.views.converters.urlForGood(e,!0,n,null,!1,t));const{observeDisplayMode:l,removeObserver:c}=this.createObservable();wb.displayModeSettings.addObserver(l);if(await this.processingPopup(e,t,n,null))try{await Hr.show(e,t,r,c,i)}catch(e){this.onShowError(c)}finally{this.onPopupShow()}}async onPopupShow(){this.processing=!1,this.currentData=null,this.targetData=null}async processingPopup(e,t,n,r){var s;return this.processing?(e!=(null==(s=this.currentData)?void 0:s.cod1S)&&(this.targetData={cod1S:e,chrtId:t,newTargetUrl:n,cardIndex:r}),!1):(this.processing=!0,this.currentData={cod1S:e,chrtId:t,newTargetUrl:n,cardIndex:r},await this.loadProductCardPopup(),!0)}async loadProductCardPopup(){const e=(0,s.sL)(),t=await e.loadModuleAsync("productCardPopup");Hr=t;window.addEventListener("spaTransition",(()=>{this.processing=!1,this.currentData=null,this.targetData=null}).bind(this))}createObservable(){const e=()=>wb.displayModeSettings.removeObserver(t),t=()=>{e()};return{observeDisplayMode:t,removeObserver:e}}onShowError(e){navigator.onLine||wb.popup.renderModalError("Internet connection is lost"),null==e||e(),this.processing=!1,this.currentData=null,this.targetData=null}static richPrototype({prototype:t}){Object.setPrototypeOf(e.prototype,t)}static factory(t){return t&&e.richPrototype(t),new e}static getSingltone(){return e.instance||(e.instance=e.factory()),e.instance}};Wr(Vr,"instance",null);let zr=Vr;var qr=n(95729),Kr=n(9582),Gr=Object.defineProperty,Jr=(e,t,n)=>((e,t,n)=>t in e?Gr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class Yr{constructor(){Jr(this,"activeContainer"),Jr(this,"appContainers"),this.appContainers=[];for(let e=0;e<Kr.p;e++)this.appContainers.push({containerId:e,isReact:!1,viewModel:null,component:null})}get viewModel(){var e;return"number"==typeof this.activeContainer?null==(e=this.find(this.activeContainer))?void 0:e.viewModel:void 0}updateContainer({containerId:e,viewModel:t,isReact:n,component:r}){const s=this.appContainers[e];s.isReact=n,s.viewModel=t,s.component=r}find(e){return this.appContainers.find(t=>t.containerId===e)}clearNotActiveContainer(){const e=this.appContainers.filter(e=>e.containerId!==this.activeContainer);e.forEach(e=>{var t;null!==e.viewModel&&(e.viewModel.isStatus(qr.F.destroyed)||null==(t=e.viewModel)||t.onBeforeUnrender(),this.updateContainer({containerId:e.containerId,viewModel:null,isReact:!1,component:null}))})}static factory(){return new Yr}}var Qr=n(64852);var Xr=JSON.parse('{"switches":{"addUserVector":true,"addUserVectorCatalog":true,"addUserVectorRecommend":true,"antiDDoSFeedbackComplain":false,"apiShowEvents":true,"bannerWebp":true,"brandLogoV3":true,"catalogActionFilter":true,"catalogShowDeliveryDate":true,"catalogVideoPreview":true,"clubCancelNewSteps":true,"customerReceipt":true,"disableCountryFlags":true,"disableQuestionForm":false,"dontIncludeSoldItemsInOrder":false,"enable2faForEmployee":true,"enableAddQuantityCounter":false,"enableAstroReceipts":true,"enableB2bDelCompany":false,"enableB2bInn":true,"enableBalanceRefill":false,"enableBannerWbClubLostProfit":true,"enableBNPLSberSovcomKtWeb":false,"enableBrandLogoInFilters":false,"enableByPassBalanceNNSZ":true,"enableCargoDeliveryUpdate":false,"enableCargoDeliveryUpdateV2":false,"enableCashback":true,"enableCashbackWidgetHide":false,"enableCatalogCaptcha":true,"enableCatalogProxy":false,"enableCatalogUnregHost":true,"enableCdnConfig":true,"enableCharityInMenu":true,"enableChatBot":true,"enableChatsHistory":true,"enableChatUploadV2":false,"enableChinaLanding":true,"enableChooseColor":true,"enableClaims":true,"enableClaimsInKT":true,"enableClubInBelarus":true,"enableCommentContentCheck":false,"enableContentErrorApi":false,"enableCourierDelivery":true,"enableCourierDeliveryClub":true,"enableCryptoChange":false,"enableCryptoChangeBalance":false,"enableCustomsDuty":true,"enableCWBReceiptsPage":true,"enableDigitalLottery":true,"enableDiscountOffersRequest":true,"enableDoubleChanceActionClub":true,"enableEaptekaCustomSellerpage":true,"enableEaptekaInMenu":true,"enableEaptekaKt":false,"enableErrorImagePlug":false,"enableExcludedFromRating":true,"enableFeedbackFirstLock":true,"enableFeedbackPhoto":true,"enableFeedbacksBables":true,"enableFeedbacksForPoints":true,"enableFeedbacksSortRelevance":false,"enableGenerativeFeedback":false,"enableGiftCerts":true,"enableHeaderDiamondWeb":true,"enableHeaderPersonalMainType":false,"enableHideFrom":true,"enableHomeSaleCarousel":false,"enableHomeSaleTabs":false,"enableHomeSnippetRedesignV2Web":false,"enableImageTags":true,"enableInfiniteScroll":false,"enableInstWBBankPreapprov":true,"enableInternalBasketApiUrl":true,"enableLazyProductSwiper":false,"enableLocalization":false,"enableLogoSbpQr":true,"enableLotteryCatalogMenu":true,"enableMainPromotionInMenu":true,"enableManualGluingOnProduct":true,"enableMe2MeReplenish":true,"enableMyRefunds":true,"enableNewCentralBlock":true,"enableNewDeliveryCodeService":true,"enableNewDesignPDL":true,"enableNewHostOnlineChatGE":false,"enableNewMethodRelatedOnCZZ":true,"enableNewOfferOnFeedback":true,"enableNewPaymentPopup":false,"enableNewRequestInRecDuplicate":false,"enableNewShopWindow":true,"enableNewSimilarInPostponed":true,"enableNewSizeBannerDelivery":true,"enableNewSizeBannerLK":true,"enableNewSizeBannerMain":true,"enableNewSizeBannerSalePage":false,"enableNewSizeBannerSearch":false,"enableNewSizeBannerThxForOrder":false,"enableNewVisualSimilar":true,"enableNewWalletHistory":true,"enableOnlineChat":true,"enableOpenNewTab":false,"enableOrderQRWalletRefill":false,"enableOverLimitOnPaidInst":true,"enablePartnerWbDigital":true,"enablePartnerWbTravel":false,"enablePCc2cFeedbacks":true,"enablePCc2cQuestions":true,"enablePDLCoFinancing":false,"enablePdlDiscount":true,"enablePdlWithoutCardAndSbp":true,"enablePharma":false,"enablePickupInDeliveryFilter":true,"enablePlaceholderDeletion":false,"enablePopupAcceptOffer":true,"enablePopupAcceptOfferTj":true,"enablePremiumSellerAccent":true,"enablePremiumSellerAnswer":true,"enablePrescriptionLever":true,"enablePriceHistoryChart":true,"enableProductCounter":false,"enableProductImageDowngrade":true,"enableProductQuestions":true,"enablePromoCodeOnLanding":true,"enablePromoExtraCatalogSliders":true,"enablePromoExtraHeaderSlider":true,"enablePromoFilterRedesign":false,"enablePublicSellerPercent":true,"enableReactProductPage":true,"enableReactProductPageAbTest":false,"enableRecIdentical":false,"enableRecInLk":true,"enableRefund":true,"enableRefusalInBasket":false,"enableReturnSubjectsWithDays":true,"enableRichVideoAutoplay":true,"enableRoundingPayment":true,"enableRubForFeedbacksInMenu":true,"enableSaleMode":false,"enableSearchContextBanners":false,"enableSearchFromCatalogSubject":false,"enableSearchInSeller":false,"enableSellerPercent":true,"enableSellerRecommendation":true,"enableSellersChat":true,"enableSellersChatGE":false,"enableSendPersonalDataGe":true,"enableSerpRedesignWeb":false,"enableShowFeedbacksBables":true,"enableSignatureInPhotoSearch":true,"enableSizeStockOnSnippet":false,"enableSomeProductInSellers":false,"enableStaticFeedbacks":true,"enableSubscriptionPopup":false,"enableSupplierPromos":false,"enableSupportBooking":true,"enableSyncLocationsDbsV2":true,"enableTalesKT":false,"enableTaskBlock":true,"enableTextToBookOnlyBooking":true,"enableTextVectorInRecInKt":true,"enableTinkoffIdentification":false,"enableTrialTwoHundredForClub":true,"enableTrustFactorsPinned":false,"enableUnauthOnlineChat":true,"enableUnauthOnlineChatGE":false,"enableUnreturnSubjects":true,"enableUpdatedReview":true,"enableV6Ug":false,"enableVipQr":true,"enableVisualFilters":false,"enableWalletDiscountForPaidIns":true,"enableWalletForCerts":true,"enableWalletRedesign":true,"enableWalletRedesignEmployees":true,"enableWbClubCancelAb":true,"enableWbClubFreezingSub":false,"enableWbClubInstantPayment":false,"enableWbClubLevels":false,"enableWbClubPhonePrefix":false,"enableWbClubRedesign":true,"enableWbClubVip":false,"enableWbInstallment":false,"enableWbrands":true,"enableWbxOrder":true,"enableWebpImages":true,"enableWhLocalInMenu":true,"enableWholesaleMenu":true,"feedbacksByNm":true,"generativeFeedbackForEmp":false,"hideFeedbacksForC2C":true,"hideMultipleSellersLever":true,"hidePremiumSellerBadge":true,"hidePriceIncreasePremiumKt":true,"hlsVideoCard":true,"isVisibleRedReturnLabel":true,"isWbGeocoder":true,"localCurrency":false,"mergeSellerAndBrandMobile":true,"metaCharacteristicEnable":true,"multicardEnable":false,"multicardV2Enable":true,"oferta0425Logoff":true,"priceWithLogistics":false,"priceWithLogisticsOnSplitter":true,"profileLkMicrofront":true,"rafflePromo1003":true,"recommendedCardLikeCatalog":true,"relatedGoodsInBasket":false,"removeReviewBlockMobile":true,"sbpSubscribe":true,"showAnswerToCommentBtn":true,"showArticlesPreviewInCard":false,"showBirthdayWbBadge":false,"showFeedbackMessengers":false,"showLogisticsInPrice":true,"showNextPayment":true,"showPremiumSeller":true,"showPrizeDrawBadge":true,"showQuickViewOnWaitingFeedback":false,"showTopSimilar":false,"showTravelOffers":false,"showTrustFactorsFeedbacks":true,"showWallet":true,"showWbKidsLooks":false,"switchVersionOnHighlight":true,"tecDocEnable":true,"useCatalogReturnCost":false,"useFeedbacksNewForClaims":true,"useFreeYandexMapsSite":false,"useNewPublicFeedbacks":true,"useSearchInKT":true,"useSearchInKTWithAB":true,"useStageBannersForLanding":false,"wbClubPaymentWallet":true,"wbTilesMap":true,"enablePowLimitResetOnRestart":true,"enableCatalogAuthForPrice":false,"enableBuyButtonForPostPay":true,"enableUseOrchestrator":false,"enableWBOrderCommentOnCheckout":false,"enableSuperExpressWarehouseDeliveryWb":true,"disableBadgeLotteryOn1ShK":false,"enableCartSiteButtonOrder":true,"enableRedesignStimulusOn1ShK":true,"enableHoldBadFeedback":true,"hideBuyButtonOnBottomSheet":true,"enablePaymentDigitalGoodsEmp":false,"enableDBStoPVZ":false,"enableOrderToSpecialPVZ":true,"enableGoodsQuantatyLimitsInCart":true,"enableCollectionPDForSJ":true,"enableLogisticsInMyDataSJ":true,"enableDutyWithoutPrice":true,"enableRestrictionsOnImportedGoods":true,"enableNNSZForB2BWeb":false,"enableTariffOptionForBrandOn1ShK":false,"enablePrepaidKiosk":true,"enableSortAndFiltersOn1ShK":false,"enableAccountNumberForPayment":false,"enableShowPromoForOPPOn1SHK":false,"enableAutoLimitForOPPOn1SHK":true,"enableSearchInBasket":false,"enableExtraPhoneOn2SHKForFBSAndWH":true,"enablePostPayDeliveryCostForCourier":true,"enableCartShare1SHKEmp":true,"enableWBTravelFSEmployee":true,"enableWBTravelFS":true,"enablePaymentDigitalGoods":false,"enableSendAddSrcInOrder":false,"enableLeaveAtTheDoorOn2SHK":true,"enablePostPayForPreorderCourier":true,"enablePostPayForPreorderCourierForEmp":false,"enableGenSessionTokenFailsLimit":true,"enableShowEmptyFeedbacks":false,"enableBadReasons":false,"enableVisionGoodReasonsOnPC":true,"enableVisionGoodReasonsOnPA":true,"enableQuantityLimitsForGoods":true,"enableRequiredGoodReasons":false,"enableSupplierLKc2cFeedbacks":true,"enableDetailsForPaidDeliveryOn2SHK":true,"enableNewFeedbacksPhotoShards":true,"enableNewConditionsForCallingPD":true,"enableNewAnswerDesignForPremium":true,"disableLogisticOn2SHKInDeliveryBlock":false,"enableC2CNotificationsOnMain":false,"enableSmartPVZ":false,"enableDetailingForLogisticVer3":false,"enableLimitationOrderAmountSmartPVZ":false,"enableGenSessionToken":true,"enableGenSessionTokenSuccessLogs":true,"enableDBSPInBasket":true,"enableCartShare1SHK":true,"enableNewDutyCalculation":false,"enableNewRangingDeferred":false,"enableOnboardingTooltipPaidInstallments":false,"enableCreditForKT":true,"enableInformerDrawDeliveries":true,"enableC2CResaleProfile":true,"enableNotificationOfNonReturnOfLogistics":true,"enableC2CinClaims":true,"enableC2CSales":true,"enableC2CSalesForEmp":true,"enableWbLimitInCartOn1ShK":true,"disableC2CChat":false,"disableC2CChatEmp":true,"enableDetailingForLogisticPurchases":false,"enableReturnsForDbsSellers":false,"enableNewCalculationOfLogistic":true,"enablePdlBacklightingKt":true,"enableRenameDeliveriesInOrders":false,"enableEgroceryCatalog":false,"enableProductRedirectSearch":false,"enableLeaveAtTheDoor":true,"enableFreeCourierWBClub":true,"enablePreselectionDateForDelivery":true,"enablePreselectionDateForKGT":false,"enableCourierDeliveryFromOPPComment":true,"enableUnitedWBCourierDelivery":true,"enableC2CFeedbacksOnPA":true,"enableC2CQuestionsOnPA":true,"enableSupplierLKc2cQuestions":true,"enableViewFeedbackCountWithPhoto":true,"enableRecommendationPoint":false,"enableServiceFee":true,"enableChatsV3":false,"enableChatsV3Emp":true,"enableWalletDiscountRounder":false,"enableCourierDeliveryFromOPPPart":true,"enableDidntFitReason":true,"enableBannerInDetailsInClaims":true,"enableC2CResaleHowToSend":false,"enableInfoMessageInSellerChat":false,"enableHelpBasketReturnDisableInClaims":true,"enableC2CVideos":false,"enableTimerFromPromoPages":true,"enableEgroceryCategory":true,"enableSalaryCard":false,"enableC2CCatalogEntryPoint":true,"enablePDLSMSNotificationLK":true,"enableSmartCalendar":true,"newAndOldSellerLogo":false,"newSellerLogo":true,"enableC2CSalesForAllEmp":true,"enablePaidCargoDeliveryKt":true,"enableNewDiscountLimitForAllWalletLevel":false,"enableWBTrackProfile":false,"enableWBTrackProfileEmployee":false,"enableRemoveRefused":true,"enableOnePurchasePromo":true,"enableFavoriteSellers":true,"enableC2CSearchByResale":true,"enableRealty":true,"enableRealtyForEmployees":false,"enableRealtyDiscount":true,"enablePostamatCode":true,"enableProfileEDO":true,"enableProfileDocuments":true,"enableWBTravelHotels":true,"enableWBTravelHotelsEmployee":false,"enableC2CResaleForUpridWallet":true,"enableC2CAdDeactivationReason":true,"enableFallbackCheckSupplierId":false,"enableC2COrderCancel":true,"enableSearchFromCatalogSubjectWeb":true,"enableSMSTextClickCollect":true,"enableWalletDiscountRounderNNSZ":false,"enableWholesaleKt":true,"enablePDLCoFinancingV2":false,"enableCourierDeliveryFromOPPPartV2":true,"enableCourierDeliveryAddressSelected":true,"enableReasonsInClaimsRedesign":true,"enableClientAdditionalPhoneNumber":true,"enableChatCourierNewDelivery":true,"enableChatWithCourier":true,"enableShowPhoneChatCourier":true,"enableSendContentInCourierChat":true,"enableRestaurantCategory":true,"enableCashbackOfNNSZ":false,"enableDifferentiatedLimit":true,"enableC2CPurchaseCardResaleAction":true,"enableC2COpenOriginalKT":true,"enableCatalogMenuPromoRealEstate":true,"enableUnitedByMinSumOrder":true,"enableBlockIsAdultForLeaveAtTheDoorOnOPP":false,"enableSellerPageSelectionStore":true,"postPaymentCourierCall":true,"enableC2CSendingViaWBTrack":true,"enableChatListTravel":false,"enableChatListTravelEmp":true,"enableInsurance":false,"enablePDLSuppressCRE":false,"enableBNPLDirectCredit":false,"enableC2CPayForCartByWallet":true,"C2CHideCourierInfoFirstStepBasket":true,"enableHidePriceHistory":true,"enableHistoryPriceWithDiscount":true,"enablePDLAgreementCheckbox":true,"enableC2COriginalCostKT":true,"enableNewResaleCatalogBanner":true,"enablePDLOverpaymentSummary":true,"enableDigitalProducts":false,"enableDiscountValueForAll":false,"enableInformerCourierExpressOverSnippet":true,"enablePaidSubscribeButtonSp":true,"enableNavigationC2CLKtoResaleCatalog":true,"enableCreateChatOnListScreen":true,"enableRealtyReservation":false,"enableRealtyReservationForEmployees":false,"enableSellerRecommendations":false,"enablePDLApprovals":true,"enableC2CPurchasesBanner":false,"enableC2CActionsOnProductCard":true,"enableIMEIReturnInClaims":true,"enableLegalInfoForDBSP":true,"enableCancelCourierDelivery":true,"enablePreorderProducts":true,"enablePreorderProductsEmp":false,"enableHideArrowsKt":true,"enableCatchPriceDiffKt":true,"enableFintechLogger":true,"enableChargeableCancellation":true,"enableTranslateAnswerOnFeedbacks":false,"enableNavigationToC2CSellerPage":false,"enableC2CRefactoredShoppingPage":true,"enableTransitionOnFeedbackBT":false,"enableC2CRecommendedSellingPrice":true,"enableDuplicatesInC2CKt":true,"enableTransfersC2CDesignV2":false,"enableC2CFinanceStatusOrder":true,"enablePDlPreviewHide":true,"enableFullscreenMediaSliderRedesign":true,"enableTwoPricesDisplay":true,"enableHistoryPriceWithLogistic":true,"enableC2CNewCardDetailSizeUi":true,"enableNewTimeSlotsSelectionLogic":true,"enableCourierDeliveryDynamicRadius":false,"enableChatListRealty":false,"enableChatListRealtyEmp":false,"enableRealtyDiscountBoard":false,"enableRealtyResidentialCard":false,"enableSellerPageBanner":true,"enableSellerPageBannerLink":true,"enableKtBlockDistance":true,"enableSkipCheckSellerC2CChat":false,"enableTransitionOnWaitingFeedbacksBT":false,"enableTransitionOnQuestionBT":false,"enableHidingOrderCode":true,"enableUserVectorQueryHeader":true,"enableSpecialOrderToAllPosts":false,"enableSpecialOrderByCourier":true,"enableC2COrdersInCarouselSupport":true,"enableChatClickableNotifications":true,"enableEaptekaOnboarding":false,"enableShowOtherSellersAdaptiveKt":false,"enableDescriptionForEAptekaBaskets":false,"newPinFeedbacks":true,"enableGBReasonsTranslateOnFeedbacks":false,"enableDynamicReasons":false,"disablingImtAllRatingTab":false,"wildberriesSellerImtEnabled":false,"enableFeedbacksByNMOnWeb":false,"enableSellerCategory":false,"enableNewReturnsText":true,"enableCarsWBGO":false,"enableWHStatic":false,"enableReturnRulesForCarsWBGO":false,"enableTaskMechanicsKt":true,"enableC2CCatalogSnippetShowSize":false,"enableSearchForEaptekaSellerPage":true,"enableSellerRecommendationsFromStatic":true,"enableGroupBySeller":false,"enableSellerLogoInGroup":false,"enablePricingGroupParam":false,"enableTransitionOnBTForPA":false,"enableTransitionOnBTForPurchaseStar":false,"enableTransitionOnBTForMainSheet":false,"enableC2CAutoMenuFilters":false,"enableSplitWBGOByWarehouses":false},"variables":{"minCreditSum":4999,"catalogReturnCostLocales":["am","kz","kg","uz","by","ru","ge","tj"],"resourseStatSettings":{"img":"2-6;10"},"pricesDeltaToShowSale":5,"wbxOrdersSyncRange":"0;14000000000","newVisualSimilarRange":"0;10000000","newSimilarInPostponedRange":"0;0","enableSubscriptionPopupRange":"0;2000000000","cancelCourierDeliveryTimeOut":10000,"cardMirSbpSaleToShow":0,"failedPaymentsDisplayMinutes":150,"b2bFailedPaymentsDisplayMinutes":14400,"minutesForOrderCancel":60,"highlightForFeedbacks":"highlight.wildberries.ru/highlight-api/api/v2","highlightForQuestions":"highlight.wildberries.ru/highlight-api/api/v2","wbxOrderUsersRange":"0;300000000","astroShopperUsers":"0-250000000;","siteMinVersion":"13.8.0","wlt1DiscountDisplayMaxPrice":15000,"wlt2DiscountDisplayMaxPrice":100000,"webPushPercentage":"100","clientActionsInQuery":"5|1|5|8","promoWithTimers":{"202348":1744577999,"202422":1745355599,"203226":1746046799,"203418":1745182799,"203668":1747169999,"203810":1746997199,"1001365":1748465999,"1001424":1750280399,"1001867":1748897999,"1002155":1748897999,"1002680":1749589199,"1002728":1750021199,"1003173":1750280399,"1003454":1752440399,"1003927":1752872399,"1003993":1752181199,"1005004":1752440399,"1005005":1754513999,"1005061":1753995599},"travelClubDate":"16 января","withLogisticsCountries":["ru"],"discountRounding":{"lowerRoundingThreshold":100000,"multiplicity":5,"expiresAt":1760572800,"discountRoundingSign":"377ef86042e9cd765d004e6de1058c73d0d66da285dac6f7e1d49562777b8de0"}},"currencies":{"BYN":{"rubRate":27.0725},"KZT":{"rubRate":0.15056},"AMD":{"rubRate":0.213058},"KGS":{"rubRate":0.932508},"UZS":{"rubRate":0.00677382},"AZN":{"rubRate":47.9693},"GEL":{"rubRate":30.0582},"TJS":{"rubRate":8.75239},"TMT":{"rubRate":23.2994},"USD":{"rubRate":81.5478},"RUB":{"rubRate":1}},"mobileAppVariables":{"objects":{"optionsGroupsInCart":[{"delivery":[{"dtype":[],"name":"ПВЗ, Курьер","supplierIds":[]}],"icon":"https://static-basket-07.wbbasket.ru/vol142/b2b-basket/wbandroid1","name":"WB магазин"},{"delivery":[{"dtype":[[0],[3]],"name":"ПВЗ, Курьер","supplierIds":[23266]},{"dtype":[[9]],"name":"Самовывоз","supplierIds":[250007822]}],"icon":"https://static-basket-07.wbbasket.ru/vol142/b2b-basket/rivgoshandroid1","name":"РИВ ГОШ"},{"delivery":[{"dtype":[[1],[6],[48]],"name":"Курьер","supplierIds":[4360105,250032443]},{"dtype":[[9],[13]],"name":"Самовывоз","supplierIds":[250017431,250032434]}],"icon":"https://static-basket-07.wbbasket.ru/vol142/b2b-basket/eaptekaandroid1","name":"ЕАПТЕКА"},{"delivery":[{"dtype":[[12]],"name":"ПВЗ","supplierIds":[]}],"icon":"https://static-basket-07.wbbasket.ru/vol142/b2b-basket/resaleandroid1","name":"Ресейл"},{"delivery":[{"dtype":[[10]],"name":"Мгновенно","supplierIds":[]}],"icon":"https://static-basket-07.wbbasket.ru/vol142/b2b-basket/wbdigitalandroid1","name":"Цифровые товары"},{"delivery":[{"dtype":[[1],[6],[1,32],[6,32]],"name":"Курьер","supplierIds":[]},{"dtype":[[9],[13],[9,32]],"name":"Самовывоз","supplierIds":[]}],"icon":"","name":"%s"}],"countryForPostpaidCourier":["ru","by","kz","uz","am"],"superExpressWarehouseDeliveryWbRange":[{"fromId":0,"toId":999999999}],"informerDrawShopper":{"chancePrice":4000,"chancePriceWbClub":2000,"dateFrom":1759352400,"dateToBroadcast":1763046000,"dateToCompletionOrder":1761166799,"dateToPickUp":1762894799,"panelPromoId":1010357},"motivationText":{"s1":"cashback","s2":"rublesPerReview","s3":"wholesale","s5":"installment","s6":"sellerDiscount","s7":"userRating","s8":"insurance","s9":"lottery"},"hidePointsForDBSPVZ":[14,31,32,33,36],"rangeForDBStoPVZ":[{"fromId":0,"toId":0}],"collectionPDCountryDependence":[{"country_code":"sj","fields":[],"pickup_points":[50080949]}],"dutyWithoutPriceCountries":{"from":["uz","ge"],"fromV4":[6,16],"to":["ru"]},"hidePhotoAdultSubjects":[5069,5122,5125,5340,5047,5071,6302,5085,5070,5067,5082,5090,5025,5091,5073,5090,6217,5064,5576,5118,5117,5288,5068,5066,5072,5158,5193],"AccountNumberForPaymentCompanies":[],"AccountNumberForPaymentCountries":["ru"],"timeToUpdateCache":{"feedbacksAndQuestions":{"DBFeedbacksOnPC":86400,"achievements":600,"c2cSupplierFeedbacks":600,"c2cSupplierQuestions":600,"feedbacks":600,"feedbacksOnPA":600,"questions":600},"productCard":{"card.json":120,"detail":120,"identical":600,"richV1.json":600,"seller.json":120,"tarif.json":120}},"extraPhoneOn2SHKForFBSAndWHRange":[{"fromId":0,"toId":999999999}],"enableWBTravelFSRange":[{"fromId":0,"toId":500000000}],"enablePaymentDigitalGoodsRange":[{"fromId":1,"toId":1}],"countryForLeaveAtTheDoorOn2SHK":["ru","by","kz","kg","am"],"currencyForLeaveAtTheDoorOn2SHK":["rub","uzs","amd","byn","kgs","kzt","tjs","gel"],"typePVZForLeaveAtTheDoorOn2SHK":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100],"sessionTokenV2Params":{"N":5,"p":1,"r":8,"target":"970000000000000000"},"postPayForPreorderCourierRange":[{"fromId":0,"toId":999999999}],"currencyForPostPayForPreorderCourier":["RUB"],"showEmptyFeedbacksRange":[{"fromId":0,"toId":999900000}],"quantityLimitsForGoodsObject":[{"count":5,"subjectId":1258,"supplierId":4472687},{"count":5,"subjectId":1258,"supplierId":250020075},{"count":5,"subjectId":1258,"supplierId":9077},{"count":5,"subjectId":1258,"supplierId":866740},{"count":3,"subjectId":1258,"supplierId":39232},{"count":3,"subjectId":1258,"supplierId":250029304},{"count":3,"subjectId":1258,"supplierId":250000991}],"digitalLottery":{"catalogMenu":{"imageUrl":"https://static-basket-01.wbbasket.ru/vol1/apps_main_menu_pics/lottery/mechtallion.png","title":"Лотерея"},"enableInformer":false,"legalInfoUrl":"https://www.wildberries.ru/services/kak-poluchit-vyigrysh-v-loteree","lotterySellerId":864982,"luckyCnt":4,"luckyMaxRange":40,"mainHeader":"https://static-basket-01.wbbasket.ru/vol1/mobile_creative/lottery/mechtallion/header.png","paymentInfo":"Организатор: Министерство финансов Российской Федерации\\nОператор: ООО \\"Спортивные лотереи\\"\\nИНН: 5003133760\\nСлужба поддержки: 8(800)333-73-33\\nИнформация о результатах тиража: https://nloto.ru\\nАгент: ООО \\"РВБ\\"\\nИНН: 9714053621\\n142181, Московская Область, г. Подольск, деревня Коледино, Территория Индустриальный парк Коледино, д. 6 стр. 1","productCard":"https://static-basket-01.wbbasket.ru/vol1/mobile_creative/lottery/mechtallion/productCard.png","productCode":102191,"productEngName":"102191","refundRulesUrl":"https://napi.wildberries.ru/api/services/vozvrat-denezhnyh-sredstv","rulesUrl":"https://www.wildberries.ru/services/pravila-loterei-mechtallion","saleRulesUrl":"https://napi.wildberries.ru/api/services/publichnaya-oferta"},"informerDrawLkV2":{"astroUrl":"https://www.wildberries.ru/astro/OctoberRaffle","broadcastButtonText":"Смотреть","chanceText":"Заберите товары — повысьте шансы на победу","deliveryButtonText":"К доставкам","drawUrl":"https://www.wildberries.ru/promo/rozygrysh-dr-wb","imgUrl":"https://static-basket-01.wbbasket.ru/vol1/mobile_content/bg-progressbar-state3.png","informerTextTaskMechanics":"Получите больше билетов за задания","panelPromoId":1010357,"promoFinishText":"Розыгрыш завершён, 13 ноября объявим победителей","promoResultsText":"Итоги подведены — победители известны!","promoTitle":"Выиграйте квартиру","purchasesText":"За покупками","resultButtonText":"К результатам","taskMechanicsAstroAnchorUrl":"","taskMechanicsWebAnchorUrl":"https://www.wildberries.ru/promo/rozygrysh-dr-wb#tasks"},"newConditionsForCallingPDObject":[{"from":["uz"],"to":"uz"},{"from":["ge"],"to":"ge"}],"detailingForLogisticVer3Range":[{"fromId":4159922,"toId":4159922},{"fromId":12064232,"toId":12064232},{"fromId":22665472,"toId":22665472},{"fromId":26506292,"toId":26506292},{"fromId":13899950,"toId":13899950},{"fromId":54477843,"toId":54477843},{"fromId":66193132,"toId":66193132},{"fromId":252529129,"toId":252529129}],"smartPVZRange":[{"fromId":11253735,"toId":11253735},{"fromId":125591935,"toId":125591935},{"fromId":13899950,"toId":13899950},{"fromId":22292451,"toId":22292451},{"fromId":22665472,"toId":22665472}],"genSessionTokenPercentage":{"blackList":[],"percentage":100,"salt":77,"type":"deviceId","whiteList":[]},"newRestrictionsOnImportedGoodsObjects":[{"count":3,"from":"cn","textGroup":"group1","to":"ru"},{"count":3,"from":"tr","textGroup":"group1","to":"ru"},{"count":2,"from":"ru","textGroup":"group1","to":"uz"},{"count":2,"from":"ru","textGroup":"group2","to":"ge"},{"count":3,"from":"ae","textGroup":"group1","to":"ru"},{"count":3,"from":"ge","textGroup":"group1","to":"ru"},{"count":3,"from":"uz","textGroup":"group1","to":"ru"}],"enableNewRangingDeferredRange":[{"fromId":1,"toId":1}],"directPosCreditParameters":{"maxAmount":30000000,"maxPeriod":36,"medianCommission":20,"minAmount":100000,"minPeriod":6,"noneSubjectIds":[8241],"range":[{"fromId":1,"toId":1}],"summForShowWidget":1000000},"subjIdForWbCard":[8605],"C2CSalesRange":[{"fromId":0,"toId":999999999}],"c2cAdvPriceRules":{"maxPrice":25000,"minPrice":50},"disableC2CChatRange":[{"fromId":40304057,"toId":40304057},{"fromId":26429046,"toId":26429046},{"fromId":37961360,"toId":37961360},{"fromId":7893706,"toId":7893706},{"fromId":73215975,"toId":73215975},{"fromId":1380141,"toId":1380141},{"fromId":21104001,"toId":21104001},{"fromId":37194491,"toId":37194491},{"fromId":120880309,"toId":120880309},{"fromId":25593884,"toId":25593884},{"fromId":1494624,"toId":1494624},{"fromId":37194491,"toId":37194491},{"fromId":26613577,"toId":26613577},{"fromId":148853967,"toId":148853967},{"fromId":155463439,"toId":155463439},{"fromId":32531553,"toId":32531553},{"fromId":7517329,"toId":7517329},{"fromId":54828159,"toId":54828159},{"fromId":1078408,"toId":1078408},{"fromId":28867005,"toId":28867005},{"fromId":17741752,"toId":17741752},{"fromId":10700396,"toId":10700396},{"fromId":1519703,"toId":1519703},{"fromId":47761671,"toId":47761671},{"fromId":20349452,"toId":20349452},{"fromId":32101574,"toId":32101574},{"fromId":1080620,"toId":1080620},{"fromId":1098572,"toId":1098572},{"fromId":129941584,"toId":129941584},{"fromId":104512966,"toId":104512966},{"fromId":1490043,"toId":1490043},{"fromId":1379880,"toId":1379880},{"fromId":1332358,"toId":1332358},{"fromId":1257506,"toId":1257506},{"fromId":66700,"toId":66700},{"fromId":3360009,"toId":3360009},{"fromId":15363694,"toId":15363694},{"fromId":87906761,"toId":87906761},{"fromId":320529,"toId":320529},{"fromId":3141227,"toId":3141227},{"fromId":18251274,"toId":18251274},{"fromId":6261653,"toId":6261653},{"fromId":8002700,"toId":8002700},{"fromId":1616927,"toId":1616927},{"fromId":2034690,"toId":2034690},{"fromId":14759750,"toId":14759750},{"fromId":131549457,"toId":131549457},{"fromId":61575749,"toId":61575749},{"fromId":54950821,"toId":54950821},{"fromId":14783148,"toId":14783148},{"fromId":29142457,"toId":29142457},{"fromId":1471710,"toId":1471710},{"fromId":1220891,"toId":1220891},{"fromId":1368518,"toId":1368518},{"fromId":2408169,"toId":2408169},{"fromId":4363067,"toId":4363067},{"fromId":23296673,"toId":23296673},{"fromId":69439850,"toId":69439850},{"fromId":16187311,"toId":16187311},{"fromId":133743853,"toId":133743853},{"fromId":25657779,"toId":25657779},{"fromId":29291130,"toId":29291130},{"fromId":22522449,"toId":22522449},{"fromId":90426844,"toId":90426844},{"fromId":256909092,"toId":256909092},{"fromId":250842853,"toId":250842853},{"fromId":97485818,"toId":97485818},{"fromId":250937921,"toId":250937921},{"fromId":25643461,"toId":25643461},{"fromId":256353731,"toId":256353731},{"fromId":251222035,"toId":251222035},{"fromId":94133885,"toId":94133885},{"fromId":11350916,"toId":11350916},{"fromId":131394539,"toId":131394539},{"fromId":41657567,"toId":41657567},{"fromId":32610431,"toId":32610431},{"fromId":36699403,"toId":36699403},{"fromId":11986248,"toId":11986248},{"fromId":42724927,"toId":42724927},{"fromId":12188445,"toId":12188445},{"fromId":8878478,"toId":8878478},{"fromId":20582428,"toId":20582428}],"chatC2CConditions":{"statusDeliveryScreen":[13,504],"statusPurchasesScreen":[14,16],"statusSiteDeliveryScreen":[0,10,12,60,100,300,501,503]},"variantsCardRange":[{"fromId":0,"toId":999999999}],"egroceryCatalogRange":[{"fromId":1,"toId":1}],"2FARange":[{"fromId":1,"toId":999999999}],"walletLimitDescription":{"account":{"kindName":"Максимальный","monthlyLimit":500000000,"monthlyLimitDiscount":100000000,"oneTimeLimit":100000000},"anonymous":{"kindName":"Минимальный","monthlyLimit":4000000,"oneTimeLimit":1500000},"verified":{"kindName":"Стандартный","monthlyLimit":20000000,"oneTimeLimit":10000000}},"courierTrackerMapStatuses":{"kgt":[600],"wb":[803]},"freeCourierWBClubRange":[{"fromId":1,"toId":1}],"controlRepudiationAllShKRange":[{"fromId":1,"toId":999999999},{"fromId":4159922,"toId":4159922},{"fromId":12064232,"toId":12064232},{"fromId":22665472,"toId":22665472},{"fromId":26506292,"toId":26506292}],"preselectionDateForDelivery":[2,7,17,18,20,23],"unitedWBCourierDeliveryRange":[{"fromId":0,"toId":999999999}],"UnclaimedPrice":{"AMD":860,"AZN":3.8,"BYN":7,"GEL":6,"KGS":186,"KZT":1080,"RUB":200,"TJS":24,"USD":2,"UZS":27600},"serviceFeeSwitcherParameters":{"preselected":false,"subtitle":"Особое внимание вашему заказу за %d ₽","title":"Приоритетный заказ","tooltipText":"В системах Wildberries ваш заказ будет обработан в приоритетном порядке"},"eaptekaIds":[4360105,250017431,250032443],"volStaticFeedbackForNewSharding":[{"host":"https://feedback-01.wbbasket.ru/","number":1},{"host":"https://feedback-02.wbbasket.ru/","number":2},{"host":"https://feedback-03.wbbasket.ru/","number":3},{"host":"https://feedback-04.wbbasket.ru/","number":4},{"host":"https://feedback-05.wbbasket.ru/","number":5},{"host":"https://feedback-06.wbbasket.ru/","number":6},{"host":"https://feedback-07.wbbasket.ru/","number":7},{"host":"https://feedback-08.wbbasket.ru/","number":8},{"host":"https://feedback-09.wbbasket.ru/","number":9}],"volStaticFeedback":[{"from":0,"host":"https://feedback01.wbbasket.ru/","to":431},{"from":432,"host":"https://feedback02.wbbasket.ru/","to":863},{"from":864,"host":"https://feedback03.wbbasket.ru/","to":1199},{"from":1200,"host":"https://feedback04.wbbasket.ru/","to":1535},{"from":1536,"host":"https://feedback05.wbbasket.ru/","to":1919},{"from":1920,"host":"https://feedback06.wbbasket.ru/","to":2303},{"from":2304,"host":"https://feedback07.wbbasket.ru/","to":2687},{"from":2688,"host":"https://feedback08.wbbasket.ru/","to":3071},{"from":3072,"host":"https://feedback09.wbbasket.ru/","to":3455},{"from":3456,"host":"https://feedback10.wbbasket.ru/","to":3839}],"enableChatsV3Range":[{"fromId":1,"toId":10000000}],"availableReasonsForGroceryClaim":[10,11,12,13,14,15,16],"availableReasonsForClaim":[10,11,12,13,14,15,16],"reasonDidntFitRange":[{"fromId":1,"toId":999999999}],"freeCourierWBClub":{"AmountFreeDeliveries":50000,"CountFreeDeliveries":2},"egroceryCategory":[{"id":128891,"name":"Алкоголь"},{"id":128327,"name":"Фрукты и ягоды"},{"id":128328,"name":"Овощи"},{"id":10305,"name":"Молочные продукты"},{"id":62466,"name":"Мясо и птица"},{"id":10558,"name":"Сладости и хлеб"},{"id":10297,"name":"Снеки"},{"id":128326,"name":"Заморозка"},{"id":10557,"name":"Напитки"},{"id":10411,"name":"Бакалея"},{"id":9510,"name":"Чай и кофе"},{"id":9511,"name":"Детское питание"},{"id":10299,"name":"Здоровое питание"},{"id":58757,"name":"Вкусные подарки"},{"id":15816,"name":"Наборы продуктов"}],"smartCalendarAvailableFor":[4,4294967300],"textVectorInRecInKtRange":[{"fromId":0,"toId":999999999}],"C2CSalesRangeExternal":[{"fromId":0,"toId":999999999}],"egrocerySellersIds":[250000099,250000659],"enableWBTrackProfileRange":[{"fromId":1,"toId":1}],"onePurchasePromo":{"dateFromUTC":1759266000,"dateToUTC":1761166799,"promoId":1010357},"enableSmartCalendarRange":[{"fromId":0,"toId":999999999}],"countriesForClubWeb":["ru","by","global","uz","kg","am","tj"],"enableWBTravelHotelsRange":[{"fromId":0,"toId":999999999}],"C2CResaleRangeForUpridWallet":[{"fromId":10,"toId":999999999}],"preselectionDateForDeliveryV4":[2,4,64,4294967297,4294967298,4294967304,4294967360,4294967300],"realtyRange":[{"fromId":0,"toId":999999999}],"C2COrderCancelReasons":["changedMind","notEnoughTime","noShippingBox","cannotPrintQr"],"C2CAdDeactivationReason":["changedMind","soldElseWhere","anotherReason","expiredPeriod"],"enableProfileEDORange":[{"fromId":1,"toId":500000000}],"enableProfileDocumentsRange":[{"fromId":1,"toId":500000000}],"reasonsInClaimsRedesignRange":[{"fromId":1,"toId":999999999}],"postPaymentCourierCallRange":[{"fromId":0,"toId":999999999}],"limitPricePostPaymentCourierCall":{"BYN":4200,"KZT":670000,"RUB":150000,"UZS":16000000},"localePostPaymentCourierCall":["ru","kz","by","uz"],"currencyPostPaymentCourierCall":["BYN","RUB","KZT","UZS"],"intervalsForBannersOn2SHK":{"int":172800,"startInt":1747774800},"chatWithCourierRange":[{"fromId":24953366,"toId":24953366},{"fromId":87368538,"toId":87368538},{"fromId":107846616,"toId":107846616}],"restaurantSellersIds":[250004996,250010091,250010318,250010579,250010920,250014398,250010985,250011071,250011081,250011103],"restaurantCategory":[{"id":131950,"name":"Роллы и суши"},{"id":131940,"name":"Готовые блюда"},{"id":131943,"name":"Лапша"},{"id":131942,"name":"Закуски"},{"id":131947,"name":"Супы"},{"id":131946,"name":"Салаты"},{"id":131949,"name":"Бургеры"},{"id":131945,"name":"Пицца"},{"id":131948,"name":"Хачапури"},{"id":131944,"name":"Напитки"},{"id":131941,"name":"Десерты"},{"id":131951,"name":"Соусы"},{"id":131952,"name":"Остальное"}],"enableCourierDeliveryFromOPPPartV2Range":[{"fromId":0,"toId":999999999}],"cashbackOfNNSZRange":[{"fromId":0,"toId":999999999}],"walletRedesignRange":[{"fromId":1,"toId":999999999}],"newFeedbacksPhotoShardsRange":[{"fromId":0,"toId":999900000},{"fromId":15579994,"toId":15579994},{"fromId":199537733,"toId":199537733},{"fromId":186442137,"toId":186442137},{"fromId":154825406,"toId":154825406},{"fromId":181130487,"toId":181130487},{"fromId":157608991,"toId":157608991},{"fromId":198217681,"toId":198217681},{"fromId":198217165,"toId":198217165},{"fromId":208258765,"toId":208258765},{"fromId":256511779,"toId":256511779},{"fromId":153135368,"toId":153135368}],"newMethodRelatedCZZRange":[{"fromId":1,"toId":999999999}],"clientAdditionalPhoneNumberRange":[{"fromId":0,"toId":999999999}],"egrocerySellersIdsCategory":[250000099,250000659],"groceryGoodsSubjects":[406,1054,1108,1110,1111,1379,1508,1600,1601,1602,1603,1604,2038,2474,2533,2638,2639,2640,2641,2642,2643,2644,2645,2646,2647,2880,2878,2879,2884,2886,2900,2927,2928,2933,2940,2941,2942,2948,2960,2961,2975,2977,2982,3010,3014,3052,3070,3071,3079,3082,3083,3100,3101,3102,3103,3106,3109,3110,3111,3131,3132,3133,3137,3149,3150,3175,3176,3196,3201,3212,3309,3310,3311,3323,3339,3360,3361,3362,3366,3374,3379,3381,3382,3383,3384,3385,3386,3387,3388,3389,3390,3391,3393,3394,3395,3396,3397,3398,3399,3400,3401,3402,3403,3404,3405,3406,3407,3408,3409,3410,3411,3412,3413,3414,3415,3416,3417,3418,3419,3420,3421,3422,3423,3424,3425,3426,3427,3428,3429,3430,3431,3432,3433,3434,3435,3436,3437,3438,3439,3440,3441,3442,3443,3444,3445,3446,3447,3448,3449,3450,3451,3452,3453,3459,3460,3461,3463,3464,3465,3466,3467,3486,3495,3496,3510,3511,3545,3546,3547,3551,3568,3569,3572,3624,3640,3643,3648,3649,3650,3651,3652,3653,3654,3678,3712,3713,3776,3781,3786,3804,3829,3846,3874,3889,3890,3891,3893,3915,3917,3939,3945,3961,3976,3977,3978,3983,3988,4006,4071,4076,4123,4140,4141,4142,4159,4178,4179,4180,4181,4182,4184,4196,4212,4213,4214,4215,4216,4220,4232,4236,4247,4258,4273,4280,4320,4318,4336,4401,4443,4466,4467,4494,4530,4564,4598,4754,4842,4863,4925,4926,4927,4962,4990,4991,5110,5113,5114,5130,5133,5134,5135,5136,5137,5138,5139,5140,5141,5142,5145,5160,5161,5162,5165,5186,5195,5236,5237,5259,5263,5266,5314,5362,5379,5380,5381,5622,5623,5676,5677,5678,5679,5680,5681,5682,5683,5684,5685,5687,5690,5691,5692,5693,5694,5695,5697,5698,5699,5700,5701,5702,5703,5704,5735,5837,5838,5846,5893,6042,6043,6044,6045,6102,6132,6133,6134,6135,6136,6137,6138,6139,6140,6141,6142,6143,6144,6145,6146,6147,6148,6149,6150,6151,6164,6166,6277,6335,6446,6493,6494,6506,6507,6508,6509,6510,6511,6512,6513,6514,6515,6516,6517,6537,6538,6539,6550,6551,6552,6553,6554,6555,6556,6557,6561,6597,6598,6600,6602,6603,6604,6605,6606,6607,6608,6609,6610,6611,6623,6628,6635,6638,6639,6640,6641,6642,6643,6644,6645,6646,6647,6648,6649,6650,6651,6652,6653,6654,6655,6656,6657,6658,6659,6660,6661,6662,6663,6664,6665,6666,6667,6668,6669,6670,6671,6672,6673,6676,6677,6678,6679,6680,6681,6682,6683,6699,6700,6704,6705,6706,6707,6708,6709,6712,6713,6714,6715,6723,6724,6725,6726,6727,6743,6747,6748,6749,6750,6751,6752,6753,6755,6756,6757,6758,6759,6760,6761,6762,6763,6764,6765,6766,6767,6772,6778,6796,6801,6802,6803,6823,6825,6827,6828,6829,6830,6831,6832,6833,6834,6835,6836,6837,6838,6839,6840,6841,6873,6876,6967,6968,6969,6971,6972,6973,6974,6975,6976,6977,6978,6979,6980,6981,6982,6983,6984,6985,6986,6987,6989,6990,6991,7030,7031,7032,7110,7111,7112,7114,7250,7251,7252,7253,7254,7255,7256,7257,7258,7259,7264,7265,7266,7267,7268,7269,7270,7271,7272,7291,7292,7293,7294,7296,7298,7299,7300,7463,7464,7465,7466,7468,7516,7517,7518,7519,7531,7534,7540,7549,7570,7625,7708,8108,8248,8506,8697],"refundableNoReturn":[71,72,74,75,76,89,90,131,132,133,165,166,212,213,214,218,252,409,420,434,478,497,550,551,552,553,757,1061,1123,1183,2048,2239,2414,2535,2600,2622,2623,2683,2684,2685,2686,2687,2688,2689,2690,2691,2692,2693,2768,3457,3807,3966,4469,4929,5575,5894,5922,6372,6531,6632,162,1935,173,1985,324,1501,309,4786,4568,4738,4670,4673,4737,4668,4739,4661,4724,5896,4736,5895,4734,4725,3128,2009,285,1158,1148,2103],"reduceDeliveryTimeForEDBS":{"ru":[{"reduceMinutes":45,"timesSummary":1},{"reduceMinutes":45,"timesSummary":2},{"reduceMinutes":60,"timesSummary":3},{"reduceMinutes":75,"timesSummary":4}]},"chatListTravelRange":[{"fromId":1,"toId":50000000}],"historyPriceWithDiscountRange":[{"fromId":0,"toId":10000000000000000}],"newDigitalProductsRange":[{"fromId":1,"toId":1}],"informerCourierExpressOverSnippetRange":[{"fromId":0,"toId":999999999}],"sellersChatCreateNotAvailable":[10743,32477,12399,45256,10210,10839,807494,114513,11035,1298825,42863,291470,2044,36824,98839,44067,525659,36453,36145,43482,231598,27488,13747,1234,23061,17887,4342446,575261,5887,4099167,49700,73817,4261375,4277411,209076,76676,279567,4348172,161921,250000337,291671,250000393,4381699,1185443],"enableDigitalLotteryRange":[{"fromId":1,"toId":999999999}],"realtyReservationRange":[{"fromId":48740828,"toId":48740828},{"fromId":53071400,"toId":53071400},{"fromId":20967561,"toId":20967561},{"fromId":28653626,"toId":28653626},{"fromId":215243561,"toId":215243561},{"fromId":34549115,"toId":34549115},{"fromId":17484441,"toId":17484441},{"fromId":89809964,"toId":89809964},{"fromId":45246414,"toId":45246414},{"fromId":15752212,"toId":15752212},{"fromId":120443359,"toId":120443359},{"fromId":44227958,"toId":44227958},{"fromId":252795849,"toId":252795849},{"fromId":50017490,"toId":50017490},{"fromId":54305852,"toId":54305852},{"fromId":55471123,"toId":55471123},{"fromId":137278945,"toId":137278945},{"fromId":95678021,"toId":95678021},{"fromId":137278945,"toId":137278945},{"fromId":23996987,"toId":23996987},{"fromId":9847013,"toId":9847013},{"fromId":95591924,"toId":95591924},{"fromId":17101026,"toId":17101026},{"fromId":20840157,"toId":20840157},{"fromId":46024920,"toId":46024920},{"fromId":181188503,"toId":181188503},{"fromId":23397453,"toId":23397453},{"fromId":89809964,"toId":89809964},{"fromId":21107723,"toId":21107723},{"fromId":11113818,"toId":11113818},{"fromId":86788215,"toId":86788215},{"fromId":12461152,"toId":12461152},{"fromId":32400409,"toId":32400409},{"fromId":255559224,"toId":255559224},{"fromId":19787372,"toId":19787372},{"fromId":17484441,"toId":17484441},{"fromId":37521517,"toId":37521517},{"fromId":11127255,"toId":11127255},{"fromId":29142457,"toId":29142457},{"fromId":95643396,"toId":95643396},{"fromId":45900994,"toId":45900994},{"fromId":53907253,"toId":53907253}],"recDuplicatesSorts":[{"key":"popular","sortId":1,"value":"Популярные"},{"key":"priceup","sortId":2,"value":"Сначала дешевле"}],"visualFiltersRange":[{"fromId":1,"toId":1}],"exceptionBrandIds":[398461,250031282,250031873],"cancelCourierDeliveryRange":[{"fromId":0,"toId":999999999}],"enablePaidInstallmentsCatalogWeb":[{"fromId":1,"toId":1}],"catchPriceDiffKtRange":[{"fromId":30000000,"toId":35000000}],"wbClubSumLimits":{"bannerOn1SHK":{"amd":48900,"byn":377,"kgs":11100,"kzt":66000,"rub":10000,"tjs":1254,"uzs":1611600},"bannerOnLostProfit":{"amd":48900,"byn":377,"kgs":11100,"kzt":66000,"rub":10000,"tjs":1254,"uzs":1611600}},"enableCryptoChangeSiteRange":[{"fromId":80000000,"toId":120000000},{"fromId":31621549,"toId":31621549},{"fromId":126752862,"toId":126752862},{"fromId":24538181,"toId":24538181},{"fromId":250662861,"toId":250662861},{"fromId":1616197,"toId":1616197},{"fromId":91430832,"toId":91430832},{"fromId":37848275,"toId":37848275},{"fromId":23996987,"toId":23996987},{"fromId":14170583,"toId":14170583}],"paidCancelStatusesList":[230,240,241,250,260,261,265,266,270,275,280,290,505,555,602,604,801,802,803,804,805,806,807,809],"countryWhForPaidCancel":[9,10,12],"newChargeableCancellation":[{"fromId":69061686,"toId":69061686},{"fromId":144085101,"toId":144085101},{"fromId":12087057,"toId":12087057},{"fromId":31312025,"toId":31312025},{"fromId":131621646,"toId":131621646},{"fromId":14211435,"toId":14211435},{"fromId":30135849,"toId":30135849},{"fromId":17965831,"toId":17965831},{"fromId":189522579,"toId":189522579},{"fromId":28509386,"toId":28509386},{"fromId":22468302,"toId":22468302},{"fromId":18748263,"toId":18748263}],"finalStatusesList":[210,235,260,402,407,509,555,805,811],"rangeTransfersC2CDesignV2":[{"fromId":1,"toId":1}],"transfersC2CAmountSuggestions":[1000,2000,5000],"transferC2COneTimeLimits":{"max":{"c2c":100000000,"me2me":3000000000},"uprid":{"c2c":10000000,"me2me":10000000}},"courierDeliveryDynamicRadiusRange":[{"fromId":1,"toId":1}],"chatListRealtyRange":[{"fromId":1,"toId":1}],"leaveAtTheDoorRange":[{"fromId":0,"toId":999999999}],"dictionaryLimitPriceLeaveAtTheDoor":{"AMD":5000000,"BYN":37000,"KZT":6800000,"RUB":2500000,"UZS":160000000},"leaveAtTheDoorCountries":["ru","by","kz","am","uz"],"hidingOrderCodeSellerId":[250017431,250032434],"userVectorQueryHeaderRange":[{"fromId":0,"toId":999999999}],"eaptekaOnboardingPercentage":{"blackList":[],"percentage":100,"salt":11,"type":"deviceId","whiteList":[]},"sellersIdForChangingStatusOnDeliveries":[4360105,250032443],"sortAndFiltersOn1ShKRange":[{"fromId":22665472,"toId":22665472},{"fromId":22700371,"toId":22700371},{"fromId":252255869,"toId":252255869},{"fromId":26506292,"toId":26506292}],"sellersDeliveryDescriptions":[{"dtype":[[1],[6]],"sellers":[4360105],"text":"Курьером"},{"dtype":[[9],[13]],"sellers":[250017431,250032434],"text":"Самовывозом из аптеки"},{"dtype":[[48]],"sellers":[250032443],"text":"В пункт выдачи"}],"GBReasonsTranslateOnFeedbacksRange":[{"fromId":0,"toId":600000000},{"fromId":4072187,"toId":4072187},{"fromId":199537733,"toId":199537733},{"fromId":256906688,"toId":256906688},{"fromId":64440475,"toId":64440475},{"fromId":153135368,"toId":153135368}],"activeReasonsLangs":["ru","ka","en","kk","uz"],"sellerIDsForbiddingCancellation":[250017431,250032434,4360105,250032443],"BNPLDirectCreditParameters":{"maxAmount":30000000,"minAmount":100000,"noneSubjectIds":[8241],"range":[{"fromId":18961085,"toId":18961085},{"fromId":4588222,"toId":4588222},{"fromId":13695868,"toId":13695868},{"fromId":184676677,"toId":184676677},{"fromId":257271427,"toId":257271427},{"fromId":256938136,"toId":256938136},{"fromId":22503388,"toId":22503388},{"fromId":48172787,"toId":48172787},{"fromId":257889298,"toId":257889298},{"fromId":16003556,"toId":16003556},{"fromId":210026137,"toId":210026137},{"fromId":192515967,"toId":192515967},{"fromId":258141507,"toId":258141507},{"fromId":58584317,"toId":58584317},{"fromId":20297516,"toId":20297516},{"fromId":215754183,"toId":215754183},{"fromId":256752377,"toId":256752377},{"fromId":61016941,"toId":61016941},{"fromId":7925009,"toId":7925009}]},"groupBySellerList":[{"name":"","sellers":[23266]}],"rivegaucheIds":[23266,250007822,4072575]},"numbers":{"retryForOrchestrator":100,"startTimeSlotSuperExpressWarehouseDeliveryWbNapi":28800,"endTimeSlotSuperExpressWarehouseDeliveryWbNapi":70200,"costSuperExpressWarehouseDeliveryWbNapi":9900,"costSuperExpressWarehouseDeliveryWb":9900,"valueForCalculatingEndTimeSlotSuperExpressWarehouseDeliveryWb":70200,"valueForCalculatingStartTimeSlotSuperExpressWarehouseDeliveryWb":28800,"timeSuperExpressWarehouseDeliveryWb":2,"transferDaysForB2BDBS":10,"enableGeAuthV3Percent":0,"positionLimitInCart":600,"enableReviewWibesFeedbacks":0,"limitCostGoodForLeaveAtTheDoorOn2SHK":1000000,"sessionTokenComplexity":8,"enableShowPromoForOPPOn2SHK":1,"limitOPP":500,"minCostForOPPOn1SHK":49,"enableEvaluationOnQuestionAnswers":1,"limitationOrderAmountSmartPVZ":5000000,"sessionTokenGenerationTimeLimit":5000,"sessionTokenTimeToLive":3300,"multiplicity":5,"basketStockAmount":9,"enableReverseTestOffersOnWeb":0,"paidInstallmentsOnboardingTooltipCounter":2,"enableMotivationInCartOn1ShK":0,"expirationPvzDays":12,"c2cFeeAmount":5,"basketMaxQt":255,"enableControlRepudiationAllShK":4,"limitPriceLeaveAtTheDoor":25000,"CountFreeDeliveries":2,"AmountFreeDeliveries":150000,"oppCommentSize":300,"favoritesLimitDefault":2000,"favoritesLimitWbClub":4000,"minC2CPhotos":3,"lowerRoundingThreshold":100000,"enablePDLSMSNotification":1,"statusDisplayPeriodRefused":7,"sellerShopsVersion":3,"interestsQuantity":5,"hidePriceHistoryFrom":2000000000,"daysForRefundSellerCheck":5,"refreshSmartCalendar":15,"numberC2CPurchasesBanner":0,"cancelCourierDeliveryTimeOut":10000,"enableRecForReplaceInPurchases":0,"C2CnumberDaysShipGoods":4,"prizePromoId":1010357,"refreshWHStatic":1440,"storageExtensionNnszMinVersion":734,"enablePDLFAQv2":0},"services":{"newOrchestrator":"https://orders-collector.wildberries.ru/orders-gateway/api/v1/order/save","drawsBtHost":"https://chances.wildberries.ru/chance-gateway/api/v1","CheckUserForWibes":"https://api.wibes.ru/","feedbackNewLogoHost":"https://static-basket-01.wbbasket.ru/vol0/constructor-api/shops/logo/public","manualSendingC2CHost":"https://www.wildberries.ru/services/resale","c2cTermsHost":"https://legal.wildberries.ru/oferta-o-predostavlenii-prava-ispolzovaniya-torgovoy-ploschadki-v-tselyakh-razmescheniya-obyavleniy-o-prodazhe-tovarov-i-priobreteniya-takikh-tovarov/country/ru/lang/ru/","resaleSubjectHost":"https://static-basket-01.wbbasket.ru/vol2/c2c-items/subjects.json","tariffOption":"https://static-basket-08.wbbasket.ru/vol157/infinity/tariff-by-id/","shopperUrl":"https://shopper-bt.wb.ru/shopper","eaptekaURL":"https://www.wildberries.ru/seller/250017431","whStaticURL":"https://delivery-bt.wildberries.ru/delivery/api/v1/warehouse/by/category","linkForInstallments":"https://static-basket-01.wbbasket.ru/vol0/docs/dogovor-oformlenia-rassrochki.pdf"}}}');const Zr={createPagerModel(e,t,n=100,r=window.location.href,s=!1){let i=Math.ceil(e/n);s&&(i=i<=t?t:t+1);let o=[];if(i<=8)o.push(...Zr.createRange(i,1));else{let e=5;if(t<7)o.push(...Zr.createRange(7,1)),o.push("");else if(t>=i-e)o.push(1),o.push(""),o.push(...Zr.createRange(7,i-7+1));else{o.push(1),o.push("");let e=t,n=t,r=!1,s=1;for(;s<7;)n<i&&r&&(n++,s++),e>1&&!1===r&&(e--,s++),r=!r;e=1===e?2:e,o.push(...Zr.createRange(n-e+1,e)),n<i-1&&o.push("")}}const a=new URL(r,window.location.origin);return{pageUrls:o.map(e=>(a.searchParams.set("page",String(e)),{value:e,href:""!==e?a.toString():null})),pagingInfo:{currentPage:t,totalPages:i,totalItems:e,hideTotal:s}}},createRange(e,t){return Array.from({length:e}).map((e,n)=>n+t)}};var es=Zr,ts=n(78127),ns=n(34113),rs=Object.defineProperty,ss=(e,t,n)=>((e,t,n)=>t in e?rs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);var is=class{constructor(e,t=!1){ss(this,"items"),ss(this,"isEmptyCache"),ss(this,"_favoritesSellersMap"),this.items=e,this.isEmptyCache=t,this._favoritesSellersMap=null}get count(){return this.items.length}get favoritesSellersMap(){return null!=this._favoritesSellersMap||(this._favoritesSellersMap=this.items.reduce((e,t)=>(e.set(t.seller_id,t),e),new Map)),this._favoritesSellersMap}},os=Object.defineProperty,as=(e,t,n)=>((e,t,n)=>t in e?os(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);const ls="user_favorite_sellers_{0}_v{1}";var cs=class{constructor(){as(this,"uid"),as(this,"cacheModel",null),this._bindEvents()}get cacheKey(){return ls.format(this.uid,1..toString())}get lastSyncCacheKey(){return"favorite_sellers_last_sync_dt_{0}_v{1}".format(this.uid,1..toString())}get tabsSyncCacheKey(){return"favorite_sellers_tabs_sync_v{0}".format(this.uid,1..toString())}setKey(e){this.uid=e,this._checkOldCache(),this.cacheModel=null}async getLastSyncDt(){var e;if(null==this.uid)return 0;try{const t=await this._openIDb(),n=await ns.i.getItem(t,this.lastSyncCacheKey,"sync_dt");return null!=(e=null==n?void 0:n.lastSyncDt)?e:0}catch(e){return this.getLastSyncDtFromLocalStorage()}}getLastSyncDtFromLocalStorage(){var e;if(null==this.uid)return 0;const t=null!=(e=localStorage.getItem(this.lastSyncCacheKey))?e:0;return parseInt(localStorage.hasItem(this.cacheKey)?t:"0",10)}async setLastSyncDt(e){if(!(await this.getLastSyncDt()>=e||null==this.uid))try{const t=await this._openIDb();await ns.i.setItem(t,this.lastSyncCacheKey,{name:"sync_dt",lastSyncDt:e})}catch(t){localStorage.setItem(this.lastSyncCacheKey,e.toString())}}async clearAllData(){try{await ns.i.removeDb(`wb_${this.cacheKey}`)}catch(e){console.error(e)}}async getFavoriteSellers(e=!1){if(null==this.uid&&(this.cacheModel=new is([],!0)),!this.cacheModel){let e=await this._fetchFromIDb();null==e&&(e=localStorage.getObject(this.cacheKey)),this.cacheModel=null==e?new is([],!0):new is(e)}return e?this.cacheModel:new is(this.cacheModel.items.filter(e=>!e.needSync||e.needSync&&"delete"!==e.syncType),this.cacheModel.isEmptyCache)}async setFavoriteSellers(e){if(null==this.uid)return;this.cacheModel=null==e?new is([],!0):new is(e);await this._saveToIDb(e)||localStorage.putObject(this.cacheKey,e),localStorage.setItem(this.tabsSyncCacheKey,`${Date.now()}`)}contains(e){if(null==this.cacheModel)return!1;const t=this.cacheModel.favoritesSellersMap.get(e);return null!=t&&!(t.needSync&&"delete"===t.syncType)}_checkOldCache(){for(let e=1;e<1;e++)localStorage.removeItem(ls.format(this.uid,e.toString()))}_bindEvents(){window.addEventListener("storage",e=>{null!=e.key&&e.key!==this.tabsSyncCacheKey||(this.cacheModel=null,this.getFavoriteSellers())})}async _fetchFromIDb(){try{const e=await this._openIDb(),t=await ns.i.getAll(e,this.cacheKey);return null!=t?t:[]}catch(e){return null}}async _saveToIDb(e){try{const t=await this._openIDb(),n=null==t?void 0:t.transaction([this.cacheKey],"readwrite"),r=null==n?void 0:n.objectStore(this.cacheKey);null==r||r.clear();for(const t of e)null==r||r.put(t);return!0}catch(e){return!1}}async _openIDb(){const e=await ns.i.openDb(`wb_${this.cacheKey}`,{onupgradeneeded:e=>{if(!e.objectStoreNames.contains(this.cacheKey)){e.createObjectStore(this.cacheKey,{keyPath:"seller_id"}).createIndex("timestamp","timestamp",{unique:!1})}e.objectStoreNames.contains(this.lastSyncCacheKey)||e.createObjectStore(this.lastSyncCacheKey,{keyPath:"name"})},version:1});if(!e)throw new Error("Failed to open the IndexedDB.");return e}},us=Object.defineProperty,ds=(e,t,n)=>((e,t,n)=>t in e?us(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class ps{constructor(e,t,n){ds(this,"op_type"),ds(this,"payload"),this.op_type=e,this.payload={seller_id:t,subscribed_at:n}}static fromCache(e){if("delete"===e.syncType)return new ps("delete",e.seller_id,0);const t=new ps("add",e.seller_id,e.timestamp);return t.payload.subscribed_at>1e12&&(t.payload.subscribed_at=Math.floor(t.payload.subscribed_at/1e3)),t}static convertFromSharedModelToCacheItem(e){return{seller_id:e.seller_id,timestamp:e.subscribed_at,syncType:e.is_deleted?"delete":"add"}}}var hs=ps,ms=Object.defineProperty,gs=(e,t,n)=>((e,t,n)=>t in e?ms(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);var fs=class{constructor(e,t){gs(this,"_cacheHelper"),gs(this,"_syncProcess",null),gs(this,"debounceSync"),gs(this,"$wbSpa"),this.$wbSpa=e,this._cacheHelper=t,this.debounceSync=wb.utils.debounce(this.sync.bind(this),3e3)}async _getOperationAsync(){return(await this._cacheHelper.getFavoriteSellers(!0)).items.filter(e=>e.needSync).map(e=>hs.fromCache(e))}async sync(e){var t,n;if(!(null==(t=this.$wbSpa.$auth)?void 0:t.isAuth))return!1;this._syncProcess=null!=(n=this._syncProcess)?n:this._sync(e);try{return await this._syncProcess}catch(e){return console.error(`[WB_FAVS_SYNC]: ${e}`),!1}finally{this._syncProcess=null}}async _sync(e){return await navigator.locks.request("lock-fav-sync",async()=>{var t;const n=await this._cacheHelper.getLastSyncDt(),r=await this._getOperationAsync(),s=null==(t=this.$wbSpa.$services)?void 0:t.sessionService.getSession();try{const t=await this._doSync({ts:n,sessionId:s,operations:r,timeout:e});if(0===t.state)return await this._updateSellersAsync(r,t);console.error(`[WB_FAVS_SELLERS_SYNC]: sync state:${t.state}`,{result:t,ts:n,deviceId:s,opLen:r.length,hasJwt:!0})}catch(e){console.error("[WB_FAVS_SYNC]: Error during sync",e)}return!1})}async _updateSellersAsync(e,t){const n=await this.mergeUpdatedAndCacheItems(e,t.results);return await this._cacheHelper.setFavoriteSellers(n),await this._cacheHelper.setLastSyncDt(t.change_ts),!0}async mergeUpdatedAndCacheItems(e,t){var n;const r=(null==(n=(await this._cacheHelper.getFavoriteSellers(!0)).items)?void 0:n.reduce((e,t)=>e.set(t.seller_id.toString(),t),new Map))||new Map;return null==e||e.forEach(e=>{if("delete"===e.op_type)r.delete(e.payload.seller_id.toString());else{const t=r.get(e.payload.seller_id.toString());t&&(delete t.needSync,delete t.syncType)}}),null==t||t.forEach(e=>{const t=r.get(e.seller_id.toString());(!(null==t?void 0:t.needSync)||e.is_deleted&&1!==t.op_type)&&(e.is_deleted?r.delete(e.seller_id.toString()):r.set(e.seller_id.toString(),hs.convertFromSharedModelToCacheItem(e)))}),Array.from(r.values()).sort((e,t)=>t.timestamp-e.timestamp)}async _doSync({ts:e,sessionId:t,operations:n,timeout:r=1e4}){const s=await this.$wbSpa.$httpClient.fetch(`${l.A.SELLERS_SYNCER_URL}/sync?ts=${e}&device_id=${t}`,{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json","Wb-AppType":"site"},timeout:r,withAuthz:!0,withJwtToken:!0}),i=s.ok?await s.json():{};return i.results||(i.results=[]),i}async clearAllData(){try{await this._cacheHelper.clearAllData()}catch(e){console.error(e)}}},bs=Object.defineProperty,ys=Object.defineProperties,vs=Object.getOwnPropertyDescriptors,ws=Object.getOwnPropertySymbols,Ss=Object.prototype.hasOwnProperty,_s=Object.prototype.propertyIsEnumerable,Is=(e,t,n)=>t in e?bs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Cs=(e,t,n)=>Is(e,"symbol"!=typeof t?t+"":t,n);class ks{constructor(){Cs(this,"_cacheHelper"),Cs(this,"_enrichedItems"),Cs(this,"dumpFav"),Cs(this,"_initialSyncInProgress"),Cs(this,"$wbSpa"),Cs(this,"onSellerClickWbaEvent",(e,t)=>{const n={supplier_id:e,index:t};(0,v.a)().sendEvent("Favorite_Suppliers_Supplier_T",n)}),Cs(this,"addSellerToFavsWbaEvent",e=>{const t={supplier_id:e};(0,v.a)().sendEvent("Supplier_AddFavorite_T",t)}),Cs(this,"sendWbaShowEvent",e=>{const t=(0,v.a)(),n={suppliers_list:e.join(",")};t.sendEvent("Favorite_Suppliers_V",n)}),this.$wbSpa=WbSpaModel.prototype,this._cacheHelper=new cs,this.setKey(),this.dumpFav=new fs(this.$wbSpa,this._cacheHelper),this._enrichedItems=new Map,this.bindEvents(),localStorage.clearStartsWith("_favs_sellers_synced_v3")}setKey(){this.$wbSpa.$auth.isAuth&&this._cacheHelper.setKey(this.$wbSpa.$auth.um.userUid||"")}get limit(){return 1e3}async syncFromServerAsync(){if(this._initialSyncInProgress)return;this._initialSyncInProgress=!0;const e=await this.loadRawSellersFromDumpAsync();return this._initialSyncInProgress=!1,e}async loadRawSellersFromDumpAsync(e,t){return t&&(await this.dumpFav.sync(e),this.updateSyncStatus(!0)),await this._cacheHelper.getFavoriteSellers()}async loadFavoriteSellersAsync(e,t){try{const n=await this.loadRawSellersFromDumpAsync(4e3,e);if(!n)return{isEmptyCache:!0,items:[]};if(n.isEmptyCache)return{isEmptyCache:!0,items:[]};const r=n.items;return r.length<1?{isEmptyCache:!1,items:[]}:this.enrichSellersAsync(r,null!=t?t:r.length)}catch(e){return console.error(e),wb.spa.logError(e,"[FAVS_SELLERS_SERVICE]: failed loadFavoriteSellersAsync"),null}}async enrichSellersAsync(e,t){const n=e.slice(0,t).filter(e=>!this._enrichedItems.has(e.seller_id)).map(e=>e.seller_id);try{let r=[];if(n.length>0){const e=await this.$wbSpa.$httpClient.fetch(l.A.SELLERS_ENRICH_URL,{method:"POST",body:JSON.stringify({seller_ids:n}),headers:{"Content-Type":"application/json","Wb-AppType":"site"},timeout:1e4,withAuthz:!0,withJwtToken:!0});r=await e.json()}return{isEmptyCache:!1,isAllEnriched:t>=e.length,items:e.reduce((e,t)=>{const n=r.find(e=>e.seller_id===t.seller_id),s=this._enrichedItems.get(t.seller_id);if(n){const r=((e,t)=>ys(e,vs(t)))(((e,t)=>{for(var n in t||(t={}))Ss.call(t,n)&&Is(e,n,t[n]);if(ws)for(var n of ws(t))_s.call(t,n)&&Is(e,n,t[n]);return e})({},t),{sellerName:n.seller_name,news:n.news,logo_url:n.logo_url});e.push(r),this._enrichedItems.set(t.seller_id,r)}else s&&e.push(s);return e},[])}}catch(e){return console.error(e),{isEmptyCache:!0,items:[]}}}updateSyncStatus(e){$.observable(this).setProperty({isSynced:e}),WbSpaModel.prototype.$eventBus.dispatchEvent(new CustomEvent("favouritesSynced"))}bindEvents(){this.$wbSpa.$eventBus.addEventListener("GeoUpdated",()=>this._enrichedItems.clear()),this.$wbSpa.$eventBus.addEventListener("onUserAuth",this.setKey.bind(this)),this.$wbSpa.$eventBus.addEventListener("onBeforeSignOut",this._clearBeforeSignOut.bind(this))}async _clearBeforeSignOut(){try{await this.dumpFav.clearAllData(),this._enrichedItems.clear(),localStorage.clearStartsWith("favorite_sellers_tabs_sync_")}catch(e){console.error(e)}}async addToFavs(e){var t;if(!this.$wbSpa.$auth.isAuth)return WbSpaModel.prototype.$auth.loginPopup(),!1;try{const n=await this._cacheHelper.getFavoriteSellers(),i=(0,s.sL)(),o=await i.loadModuleAsync("bottomNotificationPanel");if(n.count>=1e3)return o.showNotification(o.notificationsType.favsSellerOverlimit,r.R.t("favoriteSeller.limitReached",{count:n.count}),"action-notification--sellers-overlimit"),!1;o.showNotification(o.notificationsType.addToFavsSeller);const a=(await this._cacheHelper.getFavoriteSellers(!0)).items;let l=a.find(t=>t.seller_id==e);return l?l.timestamp=Math.ceil(Date.now()/1e3):(l={seller_id:e,timestamp:Math.ceil(Date.now()/1e3)},a.push(l)),l.needSync=!0,l.syncType="add",await this._cacheHelper.setFavoriteSellers(a),null==(t=this.dumpFav)||t.debounceSync(),this.addSellerToFavsWbaEvent(e),!0}catch(e){return!1}}async deleteFromFavs(e,t,r){const s=(await this._cacheHelper.getFavoriteSellers(!0)).items,i=s.find(t=>t.seller_id===e);i&&(i.needSync=!0,i.syncType="delete"),await this._cacheHelper.setFavoriteSellers(s);const o=async()=>{i&&(i.needSync=!1,i.syncType="add",await this._cacheHelper.setFavoriteSellers(s),null==t||t(!0))},a=await new Promise(async e=>{n.e(56467).then(n.t.bind(n,31573,23)).then(e=>e.ActionNotificationsFactory).then(t=>t.createRevokeNotification({text:"common.confirmDeletion.removeFavouritesSeller",callback:()=>{o(),e(!0)},timeoutCallback:()=>{var t;null==(t=this.dumpFav)||t.debounceSync(),e(!1)}}))});return this.removeSellerFromFavsWbaEvent(e,r,Boolean(a)),a}async deleteManyFromFavsAsync(e){var t;const n=(await this._cacheHelper.getFavoriteSellers(!0)).items;return e.forEach(e=>{const t=n.find(t=>t.seller_id===e);t&&(t.needSync=!0,t.syncType="delete")}),await this._cacheHelper.setFavoriteSellers(n),null==(t=this.dumpFav)||t.debounceSync(),n.every(e=>"delete"===e.syncType)}async getFavsSellersDataAsync(e=!1,t=50){return await this.loadFavoriteSellersAsync(e,t)}async isInFavs(e){return await this.loadRawSellersFromDumpAsync(4e3,!0),this._cacheHelper.contains(e)}removeSellerFromFavsWbaEvent(e,t,n){const r=(0,v.a)(),s={supplier_id:e,location:t};n?r.sendEvent("Supplier_RemoveFavorite_Cancel",{supplier_id:e}):r.sendEvent("Supplier_RemoveFavorite_T",s)}static richPrototype({prototype:e}){Object.setPrototypeOf(ks.prototype,e)}static factory(e){return e&&ks.richPrototype(e),new ks}}var Ps=Object.defineProperty,Es=(e,t,n)=>((e,t,n)=>t in e?Ps(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);const Ts="user-info-{0}";class Os{constructor(){Es(this,"timer"),Es(this,"lastUpdate"),Es(this,"userData"),Es(this,"balanceInfo"),Es(this,"loadRequesterPromise"),Es(this,"userInfoCacheKeyFormatted"),Es(this,"basicDataTask"),Es(this,"_masketInfo"),this.timer=null,this.lastUpdate=-1/0,this.userData=(0,Y.observify)({}),this.balanceInfo={},this.loadRequesterPromise=null}setKey(e,t){var n,r;if(!e)return;this.userInfoCacheKeyFormatted=Ts.format(t);const s=(0,y.c)();s.phone3||s.setPhone3(null==(r=null==(n=this.getMaskedInfo())?void 0:n.phone)?void 0:r.slice(0,3))}getMaskedInfo(){return this.getLocalUserInfo()}getLocalUserInfo(){var e;return null!=(e=this._masketInfo)?e:localStorage.getObject(this.userInfoCacheKeyFormatted)}clear(){this.lastUpdate=-1/0}clearLocalUserInfo(){this.userInfoCacheKeyFormatted&&localStorage.removeItem(this.userInfoCacheKeyFormatted)}async getUserDataAsync(e=!1){var t,n,r;this.basicDataTask=null!=(t=this.basicDataTask)?t:this.loadBasicDataInternal(e);const s=this.basicDataTask,[i]=await Promise.all([s]);if(this.basicDataTask=null,i.maskedInfo){i.maskedInfo.isEmp=i.isEmployeeSynced,this._masketInfo=i.maskedInfo;const e=(0,y.c)();e.phone3||e.setPhone3(null==(r=null==(n=i.maskedInfo)?void 0:n.phone)?void 0:r.slice(0,3));try{localStorage.putObject(this.userInfoCacheKeyFormatted,i.maskedInfo)}catch(e){}}return{userInfo:i}}async checkAccountsBinding(e,t){var n,r,i,o,a,l,c,u;const d=(0,y.c)(),p=(0,s.u4)(),h=(0,s.Z1)();if(!d.isAuth)return!1;const m=await h.userData.getUserDataAsync(t);let g=!1,f=!1,b=!1,v=!1;for(let t of(null==(n=null==m?void 0:m.userInfo)?void 0:n.contacts)||[])"esiaID"==(null==t?void 0:t.contact_type)&&e.esiaSignIn&&(g=!0),"sberID"==(null==t?void 0:t.contact_type)&&e.sberIdSignIn&&(f=!0),"oneID"==(null==t?void 0:t.contact_type)&&(b=!0),"dcbankID"==(null==t?void 0:t.contact_type)&&(v=!0);const w=null==(o=null==(i=null==(r=null==m?void 0:m.userInfo)?void 0:r.phone)?void 0:i.toString())?void 0:o.startsWith("79"),S=null==(c=null==(l=null==(a=null==m?void 0:m.userInfo)?void 0:a.phone)?void 0:l.toString())?void 0:c.startsWith("998"),_=p.getLocale(),I=wb.settings.currentLocale;let C=!1,k=!1,P=!1,E=!1;return(w&&(null==e?void 0:e.esiaSignIn)||g)&&(C=!0),(w&&(null==e?void 0:e.sberIdSignIn)||f)&&(k=!0),((S||"uz"===_||"uz"===I)&&((null==e?void 0:e.oneIdSignIn)||(null==e?void 0:e.enableOneidForEmployees)&&(null==(u=null==m?void 0:m.userInfo)?void 0:u.isActiveEmployee))||b)&&(P=!0),"tj"!==_&&"tj"!==I&&!v||"kg"===I||(E=!0),{showBoundAccountsBlock:!!(C||k||P||E),avaliableBindings:{showEsia:C,showSberId:k,showOneid:P,showDcb:E},activeBindings:{isEsiaBound:g,isSberidBound:f,isOneidBound:b,isDcbBound:v}}}async updateFioAsync(e,t,n,r=""){return(await this.loadRequetser()).updateFioAsync(e,t,n,r,this.userData)}async updateSexAsync(e){return(await this.loadRequetser()).updateSexAsync(e,this.userData)}async updateSettingsAsync(e,t){return(await this.loadRequetser()).updateUserSettingsAsync(e,t,this.userData)}async loadBasicDataInternal(e){if(Date.now()-this.lastUpdate<6e5&&!e)return this.userData;const t=await this.loadRequetser();return this.lastUpdate=Date.now(),t.loadBasicInfo(this.userData,this.getLocalUserInfo())}async loadRequetser(){return this.loadRequesterPromise||(this.loadRequesterPromise=n.e(34116).then(n.bind(n,67156)).then(e=>e.UserInfoRequester)),this.loadRequesterPromise}static richPrototype({prototype:e}){Object.setPrototypeOf(Os.prototype,e)}static factory(e){return e&&Os.richPrototype(e),new Os}}var xs=Os,Ms=Object.defineProperty,As=Object.defineProperties,Rs=Object.getOwnPropertyDescriptors,Ds=Object.getOwnPropertySymbols,Ls=Object.prototype.hasOwnProperty,Bs=Object.prototype.propertyIsEnumerable,$s=(e,t,n)=>t in e?Ms(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ns=(e,t,n)=>$s(e,"symbol"!=typeof t?t+"":t,n);const{WBX_BELL_URL:js}=l.A,Fs="_hasUnreadEvents",Us="wb_notification_cash",Ws="cash_store_object";class Hs extends Y.Observable{constructor(){super(),Ns(this,"eventsCount",0),Ns(this,"loading",!0)}}class Vs{constructor(){Ns(this,"getMoreUrl"),Ns(this,"eventsModel"),Ns(this,"timer"),Ns(this,"newTime"),this.getMoreUrl="/webapi/lk/newsfeed/events/spa/loadmore",this.eventsModel=new Hs,window.addEventListener("storage",e=>{e.key===Fs&&this.fireHasEvent(Number(e.newValue))})}init(){(0,s.u4)().getId()?this.delOldCashBell():this.delAllCashBellDb()}get baseUrl(){return js}canSendToBell(){var e,t,n;const r=(0,y.c)(),s=Number(null==(n=null==(t=null==(e=wb.global)?void 0:e.settings)?void 0:t.variables)?void 0:n.bellPercentage);return s>0&&r.jwtData.user%100<s}getBellNotifications(){return this.bellFetch("api/v3/notice/get?app_type=web",{method:"POST"}).then(e=>{var t;return(null==(t=e.payload)?void 0:t.length)&&this.syncCashBellAsync(e.payload),e}).catch(()=>this.getCashBellAsync())}getNotifications(e=0){return(0,C.getHttpClient)().fetchJSON(this.getMoreUrl,{method:"POST",body:new URLSearchParams({page:String(e)})},{useProccessResponse:!0})}delete(e){if(null==e?void 0:e.length)return this.delByUuidsCashBell(e),this.bellFetch("api/notice/delete",{method:"POST",body:JSON.stringify({notice_ids:e})})}fireHasEvent(e){const t=(0,I.J)();e&&t.dispatchEvent(new CustomEvent("HasUnreadEvents",{detail:{count:e}}))}async checkNotificationCountAsync(){var e,t;const n=(0,y.c)();if(this.clearTimer(),!n.isAuth)return this.eventsModel;let r=!1;try{const n=await this.bellFetch("api/v3/notice/unread?app_type=web",{method:"GET"});if($.observable(this.eventsModel).setProperty({eventsCount:(null==(e=null==n?void 0:n.payload)?void 0:e.count)||0}),this.eventsModel.eventsCount=(null==(t=null==n?void 0:n.payload)?void 0:t.count)||0,this.eventsModel.eventsCount>0){this.fireHasEvent(this.eventsModel.eventsCount);try{localStorage.setItem(Fs,this.eventsModel.eventsCount)}catch(e){}}r=!0}catch(e){console.error(e),$.observable(this.eventsModel).setProperty({isNetworkError:!0}),this.eventsModel.isNetworkError=!0}finally{return $.observable(this.eventsModel).setProperty({loading:!1}),this.eventsModel.loading=!1,this.startTimer(r),this.eventsModel}}async markNotificationRead(e){if(!(null==e?void 0:e.length))return;this.clearTimer();let t,n=!1;try{await this.bellFetch("api/notice/read",{method:"POST",body:JSON.stringify({notice_ids:e})}),$.observable(this.eventsModel).setProperty({eventsCount:Math.max(this.eventsModel.eventsCount-e.length,0)}),n=!0}catch(e){t=e,$.observable(this.eventsModel).setProperty({isNetworkError:!0})}finally{this.startTimer(n)}return{isSuccess:n,error:t}}clearTimer(){clearTimeout(this.timer)}startTimer(e){var t;const n=null!=(t=this.newTime)?t:9e4;this.timer=setTimeout(()=>this.checkNotificationCountAsync(),n)}setTimerInterval(e){this.newTime=e,this.checkNotificationCountAsync()}bellFetch(e,t={}){const n=(0,C.getHttpClient)(),r=t,{headers:s={}}=r,i=((e,t)=>{var n={};for(var r in e)Ls.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&Ds)for(var r of Ds(e))t.indexOf(r)<0&&Bs.call(e,r)&&(n[r]=e[r]);return n})(r,["headers"]),o=new Headers(s);return o.set("X-Request-ID",String(wb.helpers.generateGuid())),n.fetch(`${js}/shard-proxy/${e}`,((e,t)=>As(e,Rs(t)))(((e,t)=>{for(var n in t||(t={}))Ls.call(t,n)&&$s(e,n,t[n]);if(Ds)for(var n of Ds(t))Bs.call(t,n)&&$s(e,n,t[n]);return e})({headers:o},i),{withJwtToken:!0,withAuthz:!0})).then(async e=>204===e.status?Promise.resolve(null):e.ok?e.json():void 0)}openCashBellDb(){return(0,s.MH)().openDb(Us,{onupgradeneeded:e=>e.createObjectStore(Ws,{keyPath:"uuid"}),version:1})}getCashBellAsync(){const e=(0,s.MH)();return this.openCashBellDb().then(t=>e.getAll(t,Ws)).then(e=>({payload:e.filter(e=>!this.isOldMessage(e)&&e.user_id===WbSpaModel.prototype.$user.getId())}))}delAllCashBellDb(){indexedDB.deleteDatabase(Us)}delOldCashBell(){const e=(0,s.u4)();this.openCashBellDb().then(t=>{const n=t.transaction([Ws],"readwrite").objectStore(Ws),r=n.getAll(),s=e.getId();r.onsuccess=()=>{(r.result||[]).forEach(e=>{(this.isOldMessage(e.dt)||e.user_id!==s)&&n.delete(e.uuid)})}})}delByUuidsCashBell(e){this.openCashBellDb().then(t=>{const n=t.transaction([Ws],"readwrite").objectStore(Ws);e.forEach(e=>n.delete(e))})}isOldMessage(e){return e.dt/1e6+1728e5<Date.utcNow()}syncCashBellAsync(e){this.openCashBellDb().then(t=>{const n=t.transaction([Ws],"readwrite").objectStore(Ws);e.forEach(e=>{n.put(e)})})}static richPrototype({prototype:e}){Object.setPrototypeOf(Vs.prototype,e)}static factory(e){return e&&Vs.richPrototype(e),new Vs}}var zs=Vs,qs=Object.defineProperty,Ks=Object.getOwnPropertySymbols,Gs=Object.prototype.hasOwnProperty,Js=Object.prototype.propertyIsEnumerable,Ys=(e,t,n)=>t in e?qs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;class Qs{constructor(){this.maxQuantity=10,this.canBeOrdered=!0,this.includeInOrder=!0,this.id=0,this.characteristicId=0,this.cod1S=0,this.timestamp=Date.now()/1e3|0,this.quantity=1}static fromWbBasketProduct(e){var t,n,r,s;const i=new Qs,o=+e.quantity;i.characteristicId=i.id=+e.chrt_id,i.quantity=o>0?o:1,i.cod1S=e.cod_1s;try{i.meta=e.meta_json?JSON.parse(e.meta_json):null,i.analytics=e.analytics_json?JSON.parse(e.analytics_json):null,(null==(t=i.meta)?void 0:t.analitic)&&(i.analytics=i.meta.analitic,delete i.meta.analitic),(null==(n=i.analytics)?void 0:n.tail_object)&&(i.analytics.tailObject=i.analytics.tail_object,delete i.analytics.tail_object),(null==(r=i.analytics)?void 0:r.in_list_index)&&(i.analytics.inListIndex=Number(i.analytics.in_list_index),delete i.analytics.in_list_index)}catch(e){}return i.targetUrl=null==(s=e.target_url)?void 0:s.replace(/\x00/g,""),i.isDeleted=e.is_deleted,i.timestamp=e.client_ts,i._fromSync=!0,i.viewFlags=e.viewFlags,i}static fromCardModel(e,t,n){var r,s,i,o,a,l,u;const d=new Qs,p=+e.quantity,h=WbSpaModel.prototype.$analitic.analiticsInfoToListName(((e,t)=>{for(var n in t||(t={}))Gs.call(t,n)&&Ys(e,n,t[n]);if(Ks)for(var n of Ks(t))Js.call(t,n)&&Ys(e,n,t[n]);return e})({l:"AAA",lw:"IT"},e));e.meta||(e.meta={}),e.analytics||(e.analytics={});const m=e.analytics,g=(null==m?void 0:m.logs)||e.logs||(null==(s=null==(r=e.targetInfo)?void 0:r.analiticsInfo)?void 0:s.logs)||"";m&&g&&(m.logs=g),e.analytics=m;const f=WbSpaModel.prototype.$user.getUserGradeFromCache();if(d.characteristicId=d.id=+e.characteristicId,d.quantity=p>0?p:1,d.maxQuantity=(null==t?void 0:t.totalQuantity)||10,d.totalQuantity=null==t?void 0:t.totalQuantity,d.cod1S=e.cod1S,d.targetUrl=`EX|${e.iid||"1"}|${h}|${g}`,d.priceWithCoupon=d.priceWithCouponAndDiscount=d.priceWithCouponAndSpp=d.priceWithSale=d.price=e.priceWithCouponAndDiscount,d.paymentDiscountAmount=e.paymentDiscountAmount,d.subjectId=e.subjectId,d.subjectParentId=e.subjectParentId,d.supplierId=e.supplierId,d.supplierName=e.supplier,d.reviewRating=e.reviewRating,d.feedbacks=e.feedbacks||e.commentsCount,d.meta=e.meta,d.analytics=e.analytics,d.timestamp=Date.now()/1e3|0,d.viewFlags=(null==t?void 0:t.viewFlags)||e.viewFlags,t){if(d.brandName=t.brand,d.goodsName=t.name,d.colorName=t.colorName||t.color,d.promos=t.promotions,d.isUnrefusable=t.isUnrefusable,d.isPrepaid=t.isPrepaid,d.currency=t.currency,d.isUnreturnable=t.isUnreturnable,d.isVerificationReturn=t.isVerificationReturn,d.logisticsCost=t.logisticsCost,d.payloadV2=t.payloadV2,d.whDtype=null!=(i=t.whDtype)?i:t.dtype,d.catalogReturnCost=null!=(a=t.returnCost)?a:null==(o=t.catalogPrice)?void 0:o.return,d.saleConditions=t.saleConditions,t.panelPromoId&&(d.panelPromoId=t.panelPromoId),t.feedbacks&&(d.feedbacks=t.feedbacks),t.reviewRating&&(d.reviewRating=t.reviewRating),t.deliveryHours&&(d.deliveryHours=t.deliveryHours),t.catalogPrice?(d.price=d.priceWithCoupon=t.catalogPrice.basic/100,d.salePrice=d.priceWithSale=d.priceWithCouponAndDiscount=d.priceWithCouponAndSpp=t.catalogPrice.total/100,d.sale=t.catalogPrice.sale):(d.priceWithSale=t.salePrice,d.sale=t.sale),WbSpaModel.prototype.$useCatalogReturnCost()&&(d.returnCost=Math.round(d.catalogReturnCost/100),4===(null==f?void 0:f.version))){const e=wb.xnm.isDtypeFlagSet(d.whDtype,c.iA.isCargoDelivery)||wb.xnm.isDtypeFlagSet(d.whDtype,c.iA.ShouldApplyDuty)?1:f.return_fee;d.returnCost=Math.min(d.priceWithCouponAndDiscount,d.returnCost*e)}const e=null==(l=t.sizes)?void 0:l.find(e=>e.ch===d.id);if(e&&(d.sizeName=e.nm,d.stocks=e.stocks,e.deliveryHours&&(d.deliveryHours=e.deliveryHours),d.payloadV2=e.payloadV2,d.whDtype=null!=(u=e.whDtype)?u:e.dtype,e.returnCost&&(d.catalogReturnCost=e.returnCost),e.logisticsCost&&(d.logisticsCost=e.logisticsCost),e.saleConditions&&(d.saleConditions=e.saleConditions),e.catalogPrice?(d.price=d.priceWithCoupon=e.catalogPrice.basic/100,d.salePrice=d.priceWithSale=d.priceWithCouponAndDiscount=e.catalogPrice.total/100,d.sale=e.catalogPrice.sale):e.salePrice&&e.salePrice!=d.priceWithCouponAndDiscount&&(d.priceWithCoupon=d.priceWithCouponAndDiscount=d.priceWithCouponAndSpp=d.priceWithSale=d.price=e.salePrice),e.saleConditions&&wb.xnm.expandSaleConditions(d,e),WbSpaModel.prototype.$useCatalogReturnCost()&&e.returnCost&&(d.returnCost=Math.round(d.catalogReturnCost/100),4===(null==f?void 0:f.version)))){const e=wb.xnm.isDtypeFlagSet(d.whDtype,c.iA.isCargoDelivery)||wb.xnm.isDtypeFlagSet(d.whDtype,c.iA.ShouldApplyDuty)?1:f.return_fee;d.returnCost=Math.min(d.priceWithCouponAndDiscount,d.returnCost*e)}}return n&&(d.stocks=n),d.stocks&&(d.maxQuantity=d.stocks.sumBy(e=>e.qty)),d.canBeOrdered=d.maxQuantity>0,d}static fromBasketInputExtended(e){const t=Qs.fromCardModel(e,null,e.stocks);return t.price=e.price,t.colorName=e.colorName,t.goodsName=e.goodsName,t.sizeName=e.sizeName,t.viewFlags=e.viewFlags,t}static enrichCatalogGood(e,t={}){var n,r,s,i,o,a,l;if(!e)return;const u=null==(n=t.sizes)?void 0:n.find(t=>t.optionId===e.characteristicId),d=null!=(r=null==u?void 0:u.price)?r:t.price,p=d&&!(0,_r.RI)(d)&&null!=(i=null==(s=null==u?void 0:u.stocks)?void 0:s.some(e=>e.qty>0))&&i;if(e.brandName=t.brand,e.goodsName=t.name,e.colorName=null==(a=null==(o=t.colors)?void 0:o[0])?void 0:a.name,e.canBeOrdered=p,e.price=p?d.basic/100:0,e.priceWithSale=p?d.total/100:0,e.priceWithCoupon=p?d.basic/100:0,e.priceWithCouponAndDiscount=d.total/100,e.sale=p?d.sale:0,e.totalSale=p?d.sale:0,e.salePrice=p?d.total/100:0,e.sizeName=null!=(l=null==u?void 0:u.origName)?l:"",e.stocks=null==u?void 0:u.stocks,e.stocks&&(e.maxQuantity=e.stocks.sumBy(e=>e.qty)),e.subjectId=t.subjectId,e.subjectParentId=t.subjectParentId,e.supplierId=t.supplierId,e.supplierName=t.supplier,e.volume=t.volume,e.reviewRating=t.reviewRating,e.feedbacks=t.feedbacks||t.commentsCount,e.promos=t.promotions,e.isUnrefusable=t.isUnrefusable,e.isPrepaid=t.isPrepaid,e.isUnreturnable=t.isUnreturnable,e.isVerificationReturn=t.isVerificationReturn,e.priceWithCouponAndSpp=e.priceWithCouponAndDiscount,e.catalogReturnCost=d.return,WbSpaModel.prototype.$useCatalogReturnCost()){e.returnCost=Math.round(d.return/100);const t=WbSpaModel.prototype.$user.getUserGradeFromCache();if(4===(null==t?void 0:t.version)){const n=wb.xnm.isDtypeFlagSet(e.whDtype,c.iA.isCargoDelivery)||wb.xnm.isDtypeFlagSet(e.whDtype,c.iA.ShouldApplyDuty)?1:t.return_fee;e.returnCost=Math.min(e.priceWithCouponAndDiscount,e.returnCost*n)}}return e.logisticsCost=d.logistics||0,e.priceBasic=d.basic,e.priceTotal=d.total,e.whDtype=e.whDtypeV4=null==u?void 0:u.dtype,e.payloadV2=null==u?void 0:u.payload,e.saleConditions=null==u?void 0:u.saleConditions,e.viewFlags=t.viewFlags,t.panelPromoId&&(e.panelPromoId=t.panelPromoId),e}static enrichStaticGood(e,t={}){if(e)return e.goodsName=t.n||e.goodsName||r.R.t("basket.goodsInfo.untitled"),e.colorName=t.c||e.colorName,e.specs=t.specs||e.specs,e}}var Xs=Qs;const Zs=255;class ei{get maxItems(){var e;return"subscribed"===(null==(e=WbSpaModel.prototype.$user.getUserGradeFromCache())?void 0:e.wbClub)&&"ru"===wb.settings.currentLocale&&wb.global.settings.switches.enableWbLimitInCartOn1ShK?510:Zs}}var ti=n(78169),ni=Object.defineProperty,ri=(e,t,n)=>((e,t,n)=>t in e?ni(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);const si="wb_promo_basket",ii=`${si}_{0}`,oi="items";class ai extends ei{constructor(){super(),ri(this,"innerStorage"),this.innerStorage={}}_lastTs(e){var t,n;return null==(n=null==(t=this.innerStorage[e])?void 0:t[0])?void 0:n.timestamp}clearItems(e,t){if((null==t?void 0:t.length)>0){let n=this._syncFrom(e);n=n.filter(function(e){return-1===t.indexOf(e.characteristicId)}),this._syncTo(e,n)}}add(e,t){const n=this._syncFrom(e);if(n.length+1>this.maxItems)return{isSuccess:!1,error:r.R.t("basket.errors.limitDifferentInBasketWithCount",{count:this.maxItems}),notificationType:ti.I9.basketProductsLimit};const s=n.find(e=>e.characteristicId===t.characteristicId);if(s)s.timestamp>0&&(t.timestamp=s.timestamp,t.quantity=s.quantity);else{const r=this._lastTs(e);t.timestamp<=r&&(t.timestamp=r+1),t.includeInOrder=n.filter(e=>e.maxQuantity>0).every(e=>e.includeInOrder),n.unshift(t)}this._syncTo(e,n);return{isExist:!!s,isSuccess:!0,xnmDictTask:this._enrichProducts(e,n.map(e=>e.cod1S))}}refresh(e,t,n){var r;let s=this._syncFrom(e);if("remove"===n){const e=(null==(r=t.chrtIds)?void 0:r.length)>0?t.chrtIds[0]:t.chrtId;s=s.filter(function(t){return t.characteristicId!==e})}else if("recalc"===n&&t.quantity>0){const e=s.find(e=>e.characteristicId===t.chrtId);e&&(e.quantity=t.quantity)}t.includeInOrderMap&&s.forEach(e=>{t.includeInOrderMap.has(e.id)&&(e.includeInOrder=t.includeInOrderMap.get(e.id))}),this._syncTo(e,s)}updateIncludeInOrder(e,t){if(!t)return;const n=this._syncFrom(e);n.forEach(e=>{t.has(e.id)&&(e.includeInOrder=t.get(e.id))}),this._syncTo(e,n)}getItems(e){return this._syncFrom(e)}async sync(e){try{const t=await this._openIDb(e);this.innerStorage[e]=await ns.i.getAll(t,oi)}catch(e){console.log(`[PROMO_BASKET]: fetching from idb failed, reason=${e.message}`)}}async onBeforeSignOut(){this.innerStorage={};const e=await this._getAllDatabase();for(let t=0;t<e.length;t++){const n=e[t].slice(16);ns.i.removeDb(this._cacheKey(n))}}async _enrichProducts(e,t){if(0===t.length)return{};const[n,r]=await Promise.all([wb.xnm.getXnmProducts(t,!0,!0),wb.xnm.getProductColorsByNmIdsAsync(t)]),s=this._syncFrom(e);let i=!1;return s.forEach(e=>{n[e.cod1S]&&(Xs.enrichCatalogGood(e,n[e.cod1S]),i=!0),r[e.cod1S]&&(Xs.enrichStaticGood(e,r[e.cod1S]),i=!0)}),i&&this._syncTo(e,s),n}_syncFrom(e){return wb.helpers.deepClone(this.innerStorage[e]||[])}async _syncTo(e,t){1===(null==t?void 0:t.length)&&(t[0].includeInOrder=!0);const n=wb.helpers.deepClone(t);this.innerStorage[e]=n;try{const t=await this._openIDb(e),r=null==t?void 0:t.transaction([oi],"readwrite"),s=null==r?void 0:r.objectStore(oi);null==s||s.clear();for(const e of n)null==s||s.put(e)}catch(e){console.log(`[PROMO_BASKET]: saving to idb failed, reason=${e.message}`)}}async _getAllDatabase(){return(await indexedDB.databases()).filter(e=>{var t;return(null==(t=e.name)?void 0:t.startsWith(si))&&1===e.version}).map(e=>e.name)}async _openIDb(e){const t=await ns.i.openDb(this._cacheKey(e),{onupgradeneeded:e=>{if(!e.objectStoreNames.contains(oi)){e.createObjectStore(oi,{keyPath:"characteristicId"}).createIndex("timestamp","timestamp",{unique:!1})}},version:1});if(!t)throw new Error(`[PROMO_BASKET]: Failed to open the IndexedDB:${this._cacheKey(e)}`);return t}_cacheKey(e){return ii.format(e)}}var li=class{constructor(e,t){this.settings={},this.paymentTypes=[e?{userGrade:0,bankCards:[{id:"_newcardid",name:r.R.t("basket.payment.linkCard"),createNew:!0,system:"bindnew"}],isOnline:!0,isCreditCard:!0,codeLower:"crd",name:r.R.t("basket.payment.paymentCard"),id:"63",available:!0}:{isOnline:!0,isCreditCard:!0,codeLower:"crd",name:r.R.t("basket.payment.paymentCard"),id:"63",available:!0}],this.deliveryWay="self",this.basketItems=null!=t?t:[]}static calc(e){e.basketItems.forEach(e=>{e.stocks&&(e.maxQuantity=e.stocks.sumBy(e=>e.qty)),e.maxQuantity>0&&e.maxQuantity<e.quantity?e.partQuantity=e.maxQuantity:e.partQuantity=null,e._qnt=e.partQuantity||e.quantity,wb.global.settings.switches.dontIncludeSoldItemsInOrder&&!e.maxQuantity&&(e.includeInOrder=!1)});const t=e.basketItems.filter(e=>e.maxQuantity>0);return 1===t.length&&(t[0].includeInOrder=!0),e.totalQuantity=e.basketItems.sumBy(e=>e._qnt),e}};class ci{constructor(e,t,n,r,s){this.chrt_id=+t;const i=+n;this.quantity=i>0?i:1,this.cod_1s=r,this.client_ts=s||Date.now()/1e3|0,this.op_type=e||1}static fromLocalBasket(e,t){var n,r,s;const i=new ci(t,e.characteristicId,e.quantity,e.cod1S,e.timestamp),o=Number(null==(n=null==e?void 0:e.analytics)?void 0:n.inListIndex)||(null==(r=WbSpaModel.prototype.$analitic.getAnaliticsInfoFromTargetUrl((null==e?void 0:e.targetUrl)||""))?void 0:r.iid);if(i.client_ts>1e12&&(i.client_ts=i.client_ts/1e3|0),i.target_url=e.targetUrl,e.meta&&Object.keys(e.meta).length>0?i.meta_json=JSON.stringify(e.meta):i.meta_json=null,e.analytics){const{logs:t,tailObject:n}=e.analytics;i.analytics_json=JSON.stringify({logs:t||"",tail_object:n||{},in_list_index:o||1,counter_id:4})}e.priceWithCouponAndSpp&&(i.price=parseInt(100*e.priceWithCouponAndSpp)-(null!=(s=e.logisticsCost)?s:0)),e.subjectId&&(i.subject_id=e.subjectId);const a=wb.user.getCurrency();a&&(i.currency=a);const l=-(new Date).getTimezoneOffset();return l>=-720&&l<=840&&(i.timezonemin=l),i}static toUpdate(e){return ci.fromLocalBasket(e,2)}static toDelete(e){return new ci(3,e)}}var ui=ci;const di="wb___basketStorage",pi={ts:0,c_ts:0,operations:new Map};var hi=class{constructor(e){window.addEventListener("storage",e=>{e.key===this._basketKey&&this._pull()}),WbSpaModel.prototype.$eventBus.addEventListener("onUserAuth",this._pull.bind(this)),this.getLocalItems=e,this._data=pi}checkBug(){this._data.ts>10&&WbSpaModel.prototype.$auth.um.userUid&&!localStorage.hasItem(`wb_basket_${WbSpaModel.prototype.$auth.um.userUid}`)&&(wb.spa.logError(new Error(`[WB_BASKET_STORAGE]: key wb_basket_${WbSpaModel.prototype.$auth.um.userUid} notfound`),{ts:this.ts,opLen:this._data.operations.size,hasKey:localStorage.hasItem(this._basketKey)}),this._data.ts=10)}get _basketKey(){return`${di}_${WbSpaModel.prototype.$auth.um.userUid}`}get clientTs(){return this._data.c_ts}get ts(){return this._data.ts}hasOperations(){return!!this._data.operations.size}getOperations(){return this.ts||(this._data.operations.clear(),this.getLocalItems().forEach(e=>{this._data.operations.set(e.chrt_id,e)})),this._data.operations.toArray()}setTs(e){e&&(this._data.ts=e,this._push())}setClientTs(e){this._data.c_ts=e,this._push()}_mergeOp(e,t){return(null==e?void 0:e.chrt_id)===t.chrt_id&&(1===e.op_type&&2===t.op_type&&(t.op_type=1),2===e.op_type&&2===t.op_type&&(t.meta=t.meta||e.meta,t.analytics=t.analytics||e.analytics,t.quantity=t.quantity||e.quantity)),t}normalize(e,t){e.forEach(e=>{const t=this._data.operations.get(e.chrt_id);t.quantity===e.quantity&&t.client_ts===e.client_ts&&t.op_type===e.op_type&&this._data.operations.delete(e.chrt_id)});let n=[];return(null==t?void 0:t.length)>0&&(t.forEach(e=>{const t=this._data.operations.get(e.chrt_id);if(t){if(!e.is_deleted)return;if(1===t.op_type)return;this._data.operations.delete(e.chrt_id)}n.push(e)}),this._push()),n}update(e){if((null==e?void 0:e.length)>0){for(let t=0;t<e.length;t++){const n=e[t].chrt_id;this._data.operations.set(n,this._mergeOp(this._data.operations.get(n),e[t]))}this._push()}}clear(){localStorage.removeItem(di)}_pull(){const e=localStorage.getObject(this._basketKey)||localStorage.getObject(di);e&&(e.operations=Array.isArray(e.operations)?new Map(e.operations.map(e=>[e.chrt_id,e])):pi.operations),this._data=null!=e?e:pi}_push(){try{const e=this._data.operations.toArray();localStorage.putObject(this._basketKey,{ts:this._data.ts,c_ts:this._data.c_ts,operations:e}),localStorage.hasItem(di)&&localStorage.putObject(di,{ts:this._data.ts,c_ts:this._data.c_ts,operations:e})}catch(e){}}};const{CART_STORAGE_URL:mi}=l.A,gi=mi;var fi=class{constructor(e){this.localBasket=e,this.storage=new hi(()=>this.localBasket.getItems().map(e=>ui.fromLocalBasket(e))),this.debounceSync=this.$helper.debounce(this._sync.bind(this),3e3),this.debounceShortSync=this.$helper.debounce(this._sync.bind(this),1e3)}unAuth(){this.storage.clear()}onBeforeSignOut(){this.storage.hasOperations()&&this._sync(),Object.keys(localStorage).filter(e=>e.startsWith("user_subscription_offers")).forEach(e=>localStorage.removeItem(e))}addItem(e){e&&(this.storage.update([ui.fromLocalBasket(e)]),this.debounceShortSync())}addManyItems(e){e.length&&(this.storage.update(e.map(e=>ui.fromLocalBasket(e))),this.debounceShortSync())}clearItems(e){e.length&&(this.storage.update(e.map(e=>ui.toDelete(e))),this.debounceShortSync())}updateItem(e){if(!e)return;const t=this.localBasket.getItems().find(t=>t.characteristicId===e);t&&this.storage.update([ui.toUpdate(t)]),this.debounceSync()}refresh(e,t){var n,r,s,i;if("remove"===t){const t=null!=(i=null!=(s=null==(n=e.chrtIds)?void 0:n[0])?s:null==(r=e.items)?void 0:r[0].chrtId)?i:e.chrtId;t>0&&this.storage.update([ui.toDelete(t)])}else"recalc"===t&&this.updateItem(e.chrtId);this.debounceSync()}async sync(e,t){return await this._sync(e,t)}async _sync(e,t){return await navigator.locks.request("lock-basket-sync",async n=>{this.storage.checkBug(),this._migrateMetaAnalytics();const r=this.storage.getOperations();if(t&&!r.length&&this.storage.clientTs>(Date.now()/1e3|0))return!1;const s=this.$services.sessionService.getSession();try{const t=await this._doSync({sessionId:s,operations:r,signal:e});if(this._sendMetrics(t.state),0===t.state&&t.change_ts>0)return this._updateProducts(t,r);if(1===t.state){const e=this.localBasket.getItems().map(e=>ui.fromLocalBasket(e)),t=await this._doSync({sessionId:s,operations:e,rememberMe:!0});if(0===t.state&&t.change_ts>0)return this._updateProducts(t,r)}else t&&wb.spa.logError(new Error(`[WB_BASKET_SYNC]: sync state:${t.state}`),{result:t,ts:this.storage.ts,deviceId:s,opLen:r.length,hasJwt:this.$auth.isAuth})}catch(e){const t=!e.isCustomError&&e instanceof TypeError&&("Failed to fetch"===e.message||"NetworkError when attempting to fetch resource."===e.message||"Cancelled"===e.message);this._sendMetrics(t?"network":"error"),wb.spa.logError(new Error(`[WB_BASKET_SYNC]: ${e.message}`),{ts:this.storage.ts,deviceId:s,opLen:r.length,hasJwt:this.$auth.isAuth})}return!1})}_migrateMetaAnalytics(){const e=this.localBasket.getItems().reduce((e,t)=>{var n;if((null==(n=t.meta)?void 0:n.analitic)&&!t.analytics){const{tailObject:n,logs:r}=t.meta.analitic;t.analytics={tailObject:n,logs:r},e.push(ui.fromLocalBasket(t))}return e},[]);e.length>0&&(this.storage.update(e),this.localBasket.updateWbProducts(e))}_updateProducts(e,t){const n=this.storage.normalize(t,e.result_set);return this.localBasket.updateWbProducts(n),this.storage.setTs(e.change_ts),this.storage.setClientTs(235+(Date.now()/1e3|0)),e.change_ts>0}_doSync({sessionId:e,operations:t,rememberMe:n=!1,signal:r=null}){return this.$httpClient.fetch(`${gi}/sync?ts=${this.storage.ts}&device_id=${e}${n?"&remember_me=true":""}`,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json","Wb-AppType":"site"},signal:r,withJwtToken:!0,withAuthz:!0}).then(async e=>e.ok?e.json():{}).then(e=>(e.result_set&&(e.result_set=e.result_set[0]||[]),e))}_sendMetrics(e){if(!window._debug)try{this.$httpClient.fetch(`/webapi/logging/wbbasket/metrics?status=${e}`,{method:"POST"})}catch(e){}}};const bi=()=>{var e,t;const n=(0,s.u4)().getCurrency(),r=null==(t=null==(e=wb.global.settings.mobileAppVariables)?void 0:e.numbers)?void 0:t.costSuperExpressWarehouseDeliveryWb,i=r?r/100:500;return Bn._.priceFromRub(i,!0,n)};var yi=Object.defineProperty,vi=(e,t,n)=>((e,t,n)=>t in e?yi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);var wi=class{constructor(e){var t,n,r,s,i,o,a,l,c,u,d,p,h,m,g,f,b,y,v,w,S,_,I;vi(this,"addSrc"),vi(this,"brandName"),vi(this,"catalogReturnCost"),vi(this,"characteristicId"),vi(this,"cod1S"),vi(this,"colorName"),vi(this,"isVisible"),vi(this,"commentsCount"),vi(this,"customsFeeAmount"),vi(this,"dist"),vi(this,"dstOffice"),vi(this,"goodsName"),vi(this,"includeInOrder"),vi(this,"insuranceObjects"),vi(this,"isLargeItem"),vi(this,"isOnePurchasePromo"),vi(this,"leaveAtTheDoor"),vi(this,"logisticsCost"),vi(this,"maxQuantity"),vi(this,"payloadV2"),vi(this,"paymentSaleAmount"),vi(this,"personalDiscount"),vi(this,"premiumSaleAmount"),vi(this,"price"),vi(this,"priceAdjustmentAmount"),vi(this,"priceWithCoupon"),vi(this,"priceWithCouponAndDiscount"),vi(this,"priceWithCouponAndSpp"),vi(this,"priceWithSale"),vi(this,"quantity"),vi(this,"returnCost"),vi(this,"reviewRating"),vi(this,"sale"),vi(this,"saleConditions"),vi(this,"shadeModel"),vi(this,"sizeName"),vi(this,"stocks"),vi(this,"storeIds"),vi(this,"storeName"),vi(this,"subjectId"),vi(this,"subjectRoot"),vi(this,"supplierId"),vi(this,"supplierName"),vi(this,"targetUrl"),vi(this,"timestamp"),vi(this,"volume"),vi(this,"whDtype"),vi(this,"services"),this.characteristicId=+e.characteristicId;const C=+e.quantity;this.quantity=C>0?C:1,this.quantity>255&&(this.quantity=255),this.cod1S=null!=(t=e.cod1S)?t:0,this.customsFeeAmount=e.customCharges,this.targetUrl=null==(n=e.targetUrl)?void 0:n.replace(/\x00/g,""),this.includeInOrder=e.includeInOrder,this.dstOffice=e.dstOffice,this.storeName=e.storeName,this.isLargeItem=null!=(r=e.isLargeItem)&&r,this.goodsName=e.goodsName,this.colorName=e.colorName,this.sizeName=e.sizeName,this.brandName=e.brandName,this.sale=null!=(s=e.sale)?s:0,this.personalDiscount=null!=(i=e.personalDiscount)?i:0,this.returnCost=null!=(o=e.returnCost)?o:0,this.premiumSaleAmount=e.premiumSaleAmount?e.premiumSaleAmount:0,this.priceAdjustmentAmount=e.priceAdjustmentAmount?e.priceAdjustmentAmount:0,this.price=null!=(a=e.price)?a:0,this.priceWithSale=null!=(l=e.priceWithSale)?l:0,this.priceWithCoupon=null!=(c=e.priceWithCoupon)?c:0,this.priceWithCouponAndSpp=e.priceWithCouponAndSpp+this.premiumSaleAmount+this.priceAdjustmentAmount,this.priceWithCouponAndDiscount=e.priceWithCouponAndDiscount+this.premiumSaleAmount+this.priceAdjustmentAmount,this.paymentSaleAmount=e.paymentSaleAmount,this.subjectId=null!=(u=e.subjectId)?u:0,this.subjectRoot=null!=(d=e.subjectParentId)?d:0,this.reviewRating=null!=(p=e.reviewRating)?p:0,this.commentsCount=null!=(h=e.commentsCount||e.feedbacks)?h:0,this.payloadV2=e.payloadV2,this.logisticsCost=(null!=(m=isNaN(e.logisticsCostAdjustmentAmount)?e.logisticsCost:e.logisticsCost-e.logisticsCostAdjustmentAmount)?m:0).toFixedNumber(2),this.whDtype=null!=(g=e.whDtype)?g:0,this.supplierId=null!=(f=e.supplierId)?f:0,this.supplierName=e.supplierName,this.saleConditions=e.saleConditions,this.catalogReturnCost=null!=(b=e.catalogReturnCost)?b:0,this.maxQuantity=null!=(y=e.maxQuantity)?y:0,this.volume=e.volume,this.storeIds=(null==(w=null==(v=e.stocks)?void 0:v.filter(e=>e.qty>0))?void 0:w.map(e=>e.wh))||[],this.dist=e.dist,this.stocks=null==(S=e.stocks)?void 0:S.reduce((e,t)=>{var n,r;return e[t.wh]={wh:null!=(n=t.wh)?n:0,qty:t.qty||0,time1:t.time1,time2:t.time2,priority:null!=(r=t.priority)?r:0},e},{}),this.timestamp=e.timestamp,this.shadeModel=e.shadeModel,this.isVisible=e.isVisible,this.leaveAtTheDoor=e.leaveAtTheDoor,this.isOnePurchasePromo=wb.xnm.checkIsOnePurchasePromo(this.saleConditions),e.insuranceOffers&&(this.insuranceObjects=e.insuranceOffers.map(e=>e.payload));if(wb.global.settings.switches.enableSendAddSrcInOrder&&(null==(_=e.meta)?void 0:_.add_src)>-1&&(this.addSrc=null==(I=e.meta)?void 0:I.add_src),e.superExpress){const e=100*bi();this.services=[{srvType:"eds",price:e}]}}},Si=Object.defineProperty,_i=Object.defineProperties,Ii=Object.getOwnPropertyDescriptors,Ci=Object.getOwnPropertySymbols,ki=Object.prototype.hasOwnProperty,Pi=Object.prototype.propertyIsEnumerable,Ei=(e,t,n)=>t in e?Si(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ti=(e,t)=>{for(var n in t||(t={}))ki.call(t,n)&&Ei(e,n,t[n]);if(Ci)for(var n of Ci(t))Pi.call(t,n)&&Ei(e,n,t[n]);return e},Oi=(e,t)=>_i(e,Ii(t)),xi=(e,t,n)=>Ei(e,"symbol"!=typeof t?t+"":t,n);const{BASKET_RU_API_URL:Mi,BASKET_API_URL:Ai,BASKET_RU_INTERNAL_API_URL:Ri,PAYWB_API:Di}=l.A,Li=class extends ei{constructor(e,t,n){super(),this._isAuth=e,this.getUserUid=t,this.$eventBus=n,this.$eventBus.addEventListener("onUserAuth",this.clearMemory.bind(this))}get isAuth(){return this._isAuth()}get maxItems(){var e,t,n,r,s,i,o,a,l,c,u,d,p;return"subscribed"===(null==(e=WbSpaModel.prototype.$user.getUserGradeFromCache())?void 0:e.wbClub)&&wb.global.settings.switches.enableWbLimitInCartOn1ShK?(null==(r=null==(n=null==(t=wb.global.settings)?void 0:t.mobileAppVariables)?void 0:n.numbers)?void 0:r.basketMaxQt)?2*(null==(o=null==(i=null==(s=wb.global.settings)?void 0:s.mobileAppVariables)?void 0:i.numbers)?void 0:o.basketMaxQt):510:(null==(c=null==(l=null==(a=wb.global.settings)?void 0:a.mobileAppVariables)?void 0:l.numbers)?void 0:c.basketMaxQt)?null==(p=null==(d=null==(u=wb.global.settings)?void 0:u.mobileAppVariables)?void 0:d.numbers)?void 0:p.basketMaxQt:Zs}clearMemory(){this.innerStorage=new li(this.isAuth,[])}migrate(){if(localStorage.hasItem("_basket")){const e=this._getGuestBasket();return e.basketItems&&e.basketItems.reverse(),this.addManyItems(e.basketItems,!0),this._detGuestBasket(),e.basketItems}return[]}addManyItems(e,t){if(!(null==e?void 0:e.length))return{isSuccess:!1,error:"[basket] Неизвестная ошибка"};const n=this._syncFrom();if(!t&&n.basketItems.length+e.length>this.maxItems)return{isSuccess:!1,error:r.R.t("basket.errors.limitDifferentInBasketWithCount",{count:this.maxItems}),notificationType:ti.I9.basketProductsLimit};let s=!0;const i=n.basketItems.filter(e=>e.maxQuantity>0).every(e=>e.includeInOrder);for(let t=0;t<e.length;t++){const r=n.basketItems.findIndex(n=>n.characteristicId===e[t].characteristicId);-1===r?(s=!1,e[t].timestamp<=this.lastTs&&(e[t].timestamp=this.lastTs+1),e[t].includeInOrder=i,n.basketItems.unshift(e[t])):n.basketItems[r].timestamp>0&&(e[t].timestamp=n.basketItems[r].timestamp,e[t].quantity=n.basketItems[r].quantity)}this._syncTo();return{isExist:s,isSuccess:!0,xnmDictTask:this._enrichProducts(n.basketItems.map(e=>e.cod1S))}}clearItems(e){if((null==e?void 0:e.length)>0){const t=this._syncFrom();t.basketItems=t.basketItems.filter(function(t){return-1===e.indexOf(t.characteristicId)&&-1===e.indexOf(t.cod1S)}),this._syncTo()}}get lastTs(){var e,t;return null==(t=null==(e=this.innerStorage.basketItems)?void 0:e[0])?void 0:t.timestamp}add(e){const t=this._syncFrom();if(t.basketItems.length+1>this.maxItems)return{isSuccess:!1,error:r.R.t("basket.errors.limitDifferentInBasketWithCount",{count:this.maxItems}),notificationType:ti.I9.basketProductsLimit};const n=t.basketItems.find(t=>t.characteristicId===e.characteristicId);n?n.timestamp>0&&(e.timestamp=n.timestamp,e.quantity=n.quantity):(e.timestamp<=this.lastTs&&(e.timestamp=this.lastTs+1),e.includeInOrder=t.basketItems.filter(e=>e.maxQuantity>0).every(e=>e.includeInOrder),t.basketItems.unshift(e)),this._syncTo();return{isExist:!!n,isSuccess:!0,xnmDictTask:this._enrichProducts(t.basketItems.map(e=>e.cod1S))}}updateMeta(e,t){if(!e||!t)return!1;const n=this._syncFrom().basketItems.find(t=>t.characteristicId===e);return!!n&&(n.meta=WbSpaModel.prototype.$helper.deepMerge(n.meta||{},t),this._syncTo(),!0)}refresh(e,t){var n,r,s,i,o,a,l;const c=this._syncFrom();if("remove"===t){const t=(null==(n=e.chrtIds)?void 0:n.length)>0?e.chrtIds[0]:e.chrtId;c.basketItems=c.basketItems.filter(function(e){return e.characteristicId!==t})}else if("recalc"===t&&e.quantity>0){const t=c.basketItems.find(t=>t.characteristicId===e.chrtId||t.cod1S===e.chrtId);t&&(t.quantity=e.quantity)}else if("insurance"===t){const t=c.basketItems.find(t=>t.characteristicId===e.chrtId);t&&(t.insuranceOffers=e.insuranceOffers)}if(e.includeInOrderMap&&c.basketItems.forEach(t=>{e.includeInOrderMap.has(t.id)&&(t.includeInOrder=e.includeInOrderMap.get(t.id))}),e.leaveAtTheDoorMap&&c.basketItems.forEach(t=>{e.leaveAtTheDoorMap.has(t.id)&&(t.leaveAtTheDoor=e.leaveAtTheDoorMap.get(t.id))}),e.superExpressMap&&c.basketItems.forEach(t=>{e.superExpressMap.has(t.id)&&(t.superExpress=e.superExpressMap.get(t.id))}),"booking"!==e.deliveryWay){c.deliveryWay=e.deliveryWay;let t=WbSpaModel.prototype.$services.userAddressService.get(e.addressId,e.deliveryWay);t&&(null==(r=c.deliveryPoint)?void 0:r.addressId)!==t.addressId&&(c.deliveryPoint=t,c.deliveryPriceModel=null)}"war"!==e.paymentTypeId&&(e.paymentTypeId&&e.paymentTypeId!==(null==(s=c.paymentType)?void 0:s.id)&&(c.paymentType=c.paymentTypes.find(t=>t.id===e.paymentTypeId&&t.available)),["crd","mpm"].includes(null==(i=c.paymentType)?void 0:i.codeLower)&&e.bankCardId&&e.bankCardId!==(null==(o=c.paymentType)?void 0:o.bankCardId)&&(c.paymentType.bankCardId=e.bankCardId,c.paymentType.selectedBankCard=null==(l=null==(a=c.paymentTypes.find(e=>["crd","mpm"].includes(e.codeLower)))?void 0:a.bankCards)?void 0:l.find(t=>t.id===e.bankCardId))),this._syncTo()}deleteCards(e){var t;if(!e)return;const n=null==(t=this._syncFrom().paymentTypes)?void 0:t.find(e=>e.isCreditCard);n&&(n.bankCards=(n.bankCards||[]).filter(t=>-1===e.indexOf(t.id))),this._syncTo()}setCardDefault(e){this.getBankCards().forEach(t=>{t.default=t.id===e}),this._syncTo()}setAddress(e,t){var n;const r=this._syncFrom();let s=WbSpaModel.prototype.$services.userAddressService.get(e,t);s&&(null==(n=r.deliveryPoint)?void 0:n.addressId)!==s.addressId&&(r.deliveryWay=t,r.deliveryPoint=s,r.deliveryPriceModel=null,this._syncTo())}getBankCards(){var e,t;return(null==(t=null==(e=this._syncFrom().paymentTypes)?void 0:e.find(e=>e.isCreditCard))?void 0:t.bankCards)||[]}get count(){const e=this._syncFrom();return this.$eventBus.dispatchEvent(new CustomEvent("LocalBasketUpdateCount",{detail:{count:e.totalQuantity}})),e.totalQuantity}save(e){const t=this._syncFrom(),n=JSON.parse(JSON.stringify(e,(e,t)=>"basketItems"===e?void 0:t));n.basketItems=e.basketItems.reduce((e,t)=>(e.get(t.id)&&e.set(t.id,wb.helpers.deepClone(t)),e),t.basketItems.toMap(e=>e.id,e=>e)).toArray(),this._syncTo(n)}updateIncludeInOrder(e){if(!e)return;this._syncFrom().basketItems.forEach(t=>{e.has(t.id)&&(t.includeInOrder=e.get(t.id))}),this._syncTo()}get(){return this._syncFrom()}getItems(){const e=this._syncFrom();return e.basketItems.forEach(e=>{var t,n,r,s;(null==(s=null==(r=null==(n=null==(t=null==e?void 0:e.meta)?void 0:t.analitic)?void 0:n.tailObject)?void 0:r.terms)?void 0:s.terms)&&delete e.meta.analitic.tailObject.terms.terms}),e.basketItems}getDeliveryPoint(){return this._syncFrom().deliveryPoint}enrichProductsIfNeedAsync({force:e}={}){const t=this._syncFrom();return t.basketItems.length>0&&t.basketItems.some(e=>!e.hasOwnProperty("priceWithCouponAndDiscount")&&!e.hasOwnProperty("price"))||e?this._enrichProducts(t.basketItems.map(e=>e.cod1S)):Promise.resolve([])}get basketKey(){return this.isAuth?`wb_basket_${this.getUserUid()}`:"_basket"}_getGuestBasket(){const e=localStorage.getObject("_basket");return e||new li(!1)}_detGuestBasket(){localStorage.removeItem("_basket")}_syncFrom(){var e,t,n;try{const n=this.basketKey,r=localStorage.getObject(n);return r?(this.innerStorage=r,this.innerStorage?this.innerStorage.basketItems||(this.innerStorage.basketItems=[]):this.innerStorage=new li(this.isAuth,[])):(null==(t=null==(e=this.innerStorage)?void 0:e.basketItems)?void 0:t.length)||(this.innerStorage=new li(this.isAuth,[])),this.isAuth&&(localStorage.clearStartsWith("wb_basket_",n),localStorage.clearStartsWith("wb___basketStorage_",`wb___basketStorage_${this.getUserUid()}`)),1===this.innerStorage.basketItems.length&&(this.innerStorage.basketItems[0].includeInOrder=!0),this.innerStorage}catch(e){return console.error(e),wb.spa.logError(e,"cartService syncfrom"),null!=(n=this.innerStorage)?n:new li(this.isAuth)}}_syncTo(e){var t;e&&(this.innerStorage=e),li.calc(this.innerStorage);try{localStorage.putObject(this.basketKey,this.innerStorage)}catch(e){}this.$eventBus.dispatchEvent(new CustomEvent("LocalBasketUpdateCount",{detail:{count:null==(t=this.innerStorage)?void 0:t.totalQuantity}}))}async _enrichProducts(e){if(0===e.length)return{};const[t,n]=await Promise.all([wb.xnm.getXnmProducts(e,!0,!0),wb.xnm.getProductColorsByNmIdsAsync(e)]),r=this._syncFrom();let s=!1;return r.basketItems.forEach(e=>{t[e.cod1S]&&(Xs.enrichCatalogGood(e,t[e.cod1S]),s=!0),n[e.cod1S]&&(Xs.enrichStaticGood(e,n[e.cod1S]),s=!0)}),r.currency=WbSpaModel.prototype.$user.getCurrency(),s&&this._syncTo(r),t}updateWbProducts(e){const t=this._syncFrom();localStorage.hasItem(this.basketKey)||this._syncTo(),(null==e?void 0:e.length)&&(t.basketItems=[...t.basketItems,...e.map(e=>Xs.fromWbBasketProduct(e))].reduce((e,t)=>{const n=e.findIndex(e=>e.id===t.id);return-1!==n||t.isDeleted?-1!==n&&(e[n].timestamp=Math.max(e[n].timestamp,t.timestamp),e[n].quantity=t.quantity,e[n].targetUrl=t.targetUrl,e[n].isDeleted=t.isDeleted,e[n].meta=t.meta,e[n].analytics=t.analytics):(t._fromSync&&(t.includeInOrder=e.filter(e=>e.maxQuantity>0).every(e=>e.includeInOrder),delete t._fromSync),e.push(JSON.parse(JSON.stringify(t)))),e},[]).filter(e=>!e.isDeleted).sort((e,t)=>t.timestamp-e.timestamp),this._syncTo())}},Bi=Xs;class $i{constructor(){xi(this,"userID"),xi(this,"currency"),xi(this,"localBasket"),xi(this,"promoBasket"),xi(this,"wbBasket"),xi(this,"srv"),xi(this,"fraudVerify"),xi(this,"isGeLocale"),xi(this,"isTjLocale"),xi(this,"syncPromoProcess"),xi(this,"syncProcess"),xi(this,"backgroundController")}get BasketItemSharedModel(){return wi}init(){const e=(0,s.u4)(),t=(0,I.J)(),n=(0,J.w)(),r=(0,s.dU)(),i=(0,y.c)(),o=(0,s.cI)();Object.setPrototypeOf(fi.prototype,WbSpaModel.prototype),this.getBankCards=r.lockPromise(this.getBankCards),this.userID=e.getId(),this.currency=e.getCurrency(),this.localBasket=new Li(()=>i.isAuth,()=>this.getUserUid(),t),this.promoBasket=new ai,this.wbBasket=new fi(this.localBasket),this.srv=this.wbBasket,this.isGeLocale="ge"===wb.settings.currentLocale,this.isTjLocale="tj"===wb.settings.currentLocale,t.addEventListener("onUserAuth",this.sync.bind(this)),t.addEventListener("onUserUnAuth",this.wbBasket.unAuth.bind(this.wbBasket)),t.addEventListener("onBeforeSignOut",this.wbBasket.onBeforeSignOut.bind(this.wbBasket)),t.addEventListener("onBeforeSignOut",this.promoBasket.onBeforeSignOut.bind(this.promoBasket)),$.observe(n,"activeContainer","isReady",(e,t)=>{"SpaPersonalCabinetEntrypoint"!==o.currentRoute.name?"SpaMyFeedbacksEntrypoint"!==o.currentRoute.name&&document.body.classList.toggle("body-gray",2===e.target.activeContainer&&e.target.isReady):document.body.classList.add("body-gray")}),"hidden"in document&&"visibilityState"in document&&document.addEventListener("visibilitychange",e=>{"visible"===document.visibilityState&&this.sync("interval")})}get publicBasketApiUrl(){return"ru"===(e=wb.settings.currentDomain)||"kz"===e||"ge"===e||"global"===e?"ru"===wb.settings.currentLocale&&wb.global.settings.switches.enableInternalBasketApiUrl?Ri:Mi:Ai+e;var e}deliveryWays(e=""){var t,n;const i=(0,s.u4)();let o=[{id:2,code:"self",name:r.R.t("basket.delivery.pickupPoint"),calendars:[]},{id:1,code:"courier",name:r.R.t("basket.goodsInfo.deliveryByCourier"),calendars:[]}];return(!1===(null==(n=null==(t=wb.global.settings)?void 0:t.switches)?void 0:n.enableCourierDelivery)||this.isGeLocale&&"refund"!==e||"tj"===i.getLocale()&&"refund"!==e)&&(o=o.filter(e=>"courier"!==e.code)),o}async sync(e){var t,n;const r=(0,y.c)();if(e.syncPromo)return this.syncPromoProcess=null!=(t=this.syncPromoProcess)?t:this.promoBasket.sync(e.syncPromo),this.syncPromoProcess.finally(()=>{this.syncProcess=null});if(r.isAuth){let t=new AbortController;return t._dt=(new Date).getTime()+6e4,(null==e?void 0:e.timeout)?(this.backgroundController&&this.backgroundController._dt<(new Date).getTime()?(this.backgroundController.abort(),this.backgroundController=null):this.backgroundController&&(t=this.backgroundController),setTimeout(()=>t.abort(),e.timeout)):this.backgroundController=t,this.syncProcess=null!=(n=this.syncProcess)?n:this.srv.sync(t.signal,"interval"===e),this.syncProcess.catch(e=>{}).finally(()=>{r.isAuth&&(this.migrate(),this.localBasket.enrichProductsIfNeedAsync()),this.syncProcess=null,this.backgroundController=null})}}updateMeta(e,t){t&&this.localBasket.updateMeta(e,t)&&this.srv.updateItem(e)}addItem({model:e,product:t,stores:n,promoId:r}){const i=(0,y.c)(),o=(0,s.Z1)(),a=Bi.fromCardModel(e,t,n);a.meta=Oi(Ti({},a.meta),{originalPrice:{price:a.priceWithCouponAndDiscount-a.paymentDiscountAmount,currency:a.currency}});if(wb.global.settings.switches.enableTariffOptionForBrandOn1ShK&&o.brandsBySuppliers.refreshSupplierBrandsIfMissing(a.supplierId),r)return this.promoBasket.add(r,a);const l=this.localBasket.add(a);return i.isAuth&&l.isSuccess&&!l.isExist&&this.srv.addItem(a),l}addManyItems(e,t){const n=(0,s.u4)(),r=(0,y.c)(),i=(0,s.Z1)();if(!(null==e?void 0:e.length))return;const o=wb.global.settings.switches.enableTariffOptionForBrandOn1ShK,a=e.map(e=>{if(Bi.prototype.isPrototypeOf(e))return e.meta=Oi(Ti({},e.meta),{originalPrice:{price:e.priceWithCouponAndDiscount-e.paymentDiscountAmount,currency:e.currency}}),e;const t=Bi.fromBasketInputExtended(e);return t.meta=Oi(Ti({},t.meta),{originalPrice:{price:t.priceWithCouponAndDiscount,currency:n.getCurrency()}}),o&&i.brandsBySuppliers.refreshSupplierBrandsIfMissing(e.supplierId),t}),l=this.localBasket.addManyItems(a,t);return r.isAuth&&l.isSuccess&&!l.isExist&&this.srv.addManyItems(a),l}refresh({data:e,type:t,queryParams:n=null}){const r=(0,y.c)();(null==n?void 0:n.promoId)?this.promoBasket.refresh(n.promoId,e,t):(this.localBasket.refresh(e,t),r.isAuth&&t&&this.srv.refresh(e,t))}clearItems(e,t){const n=(0,y.c)();(null==e?void 0:e.length)&&(t?this.promoBasket.clearItems(t,e):(this.localBasket.clearItems(e),n.isAuth&&this.srv.clearItems(e)))}getItems(e){return(null==e?void 0:e.promoId)?this.promoBasket.getItems(e.promoId).map(e=>new wi(e)):this.filterItemsByParams(this.localBasket.getItems(),e).filteredItems.map(e=>new wi(e))}enrichItemsLocalInfo(e,t){if(!(null==t?void 0:t.length))return;const n=this.get(e).basketItems.toMap(e=>e.id,e=>e);t.forEach(e=>{const t=n.get(e.id);e.meta=null==t?void 0:t.meta,e.analytics=null==t?void 0:t.analytics,e.specs=null==t?void 0:t.specs,e.insuranceOffers=null==t?void 0:t.insuranceOffers,(null==t?void 0:t.goodsName)&&(e.goodsName=null==t?void 0:t.goodsName),(null==t?void 0:t.storeIdMinOrder)&&(e.storeIdMinOrder=t.storeIdMinOrder)})}updateIncludeInOrder(e,t){(null==e?void 0:e.promoId)?this.promoBasket.updateIncludeInOrder(e.promoId,t):this.localBasket.updateIncludeInOrder(t)}getCommonHeaders(){const e=(0,s.u4)();return{"Wb-AppVersion":"debug"===WbSpaModel.appVersion?1:WbSpaModel.appVersion.replace(/\./g,""),"Wb-AppType":"site","Site-Locale":wb.settings.currentLocale,"X-Request-Country":wb.settings.currentLocale,"X-Request-Currency":$.views.converters.isoCode(this.currency),"X-Request-Userid":this.userID,"X-Request-Delivery-Country":e.getLocale(),"Content-Type":"application/json"}}async registerCard(e){var t,n,r,i;const o=(0,C.getHttpClient)(),a=(0,s.Z1)().cartService.getCommonHeaders();try{const r=await o.fetchJSON(`${Di}/mobile_api/v1/merchants/1/cards/add`,{method:"POST",credentials:"omit",withJwtToken:!0,body:JSON.stringify(e),headers:a},{keepRespData:!0,throwErr:!0}),s=null==(t=null==r?void 0:r.result)?void 0:t.redirectUrl;return{redirectUrl:s,wbpayID:null==(n=null==r?void 0:r.result)?void 0:n.wbpayID}}catch(e){if(e.isNotFound)throw new Error("Карта не найдена в системе.");throw new Error(null!=(i=null==(r=e.data)?void 0:r.error_description)?i:"Произошла ошибка при добавлении карты")}}async getCardStatus(e){var t;const n=(0,C.getHttpClient)(),r=await n.fetchJSON(`${Di}/mobile_api/v1/merchants/1/cards/status/${e}`,{method:"GET",credentials:"omit",withJwtToken:!0,headers:this.getCommonHeaders()});return null==(t=null==r?void 0:r.result)?void 0:t.card}async cacheCard(e,t){const n=(0,s.u4)(),r=n.getCurrency(),i=(0,C.getHttpClient)(),o=wb.settings.currentLocale,a=n.getLocale();try{return await i.fetchJSON(`${this.publicBasketApiUrl}/webapi/lk/account/spa/addcardtocache?currency=${r}&country=${o}&deliveryCountry=${a}`,{method:"POST",credentials:"include",body:JSON.stringify({CardId:t.ID,ExpirationMonth:e.expireMonth,ExpirationYear:e.expireYear,PaymentSystemStr:t.paymentSystem,CardMask:t.mask}),headers:{"Content-Type":"application/json"}})}catch(e){console.warn("Failed to cache card:",e)}}getFraudVerify(){return this.fraudVerify}async getBankCards(e=6e3,t="",n=!1){var r,i,o;const a=(0,y.c)(),l=(0,I.J)(),c=(0,s.u4)(),u=(0,C.getHttpClient)(),d=(0,s.dU)(),p=null==(r=null==a?void 0:a.phone3)?void 0:r.startsWith("79");try{t||(t=c.getCurrency());const r=c.getLocale(),s=await c.getUserGrade(t),a=await u.fetchJSON(`${this.publicBasketApiUrl}/webapi/lk/bankcards`,{method:"POST",credentials:"include",body:d.objectSerializer({currency:t,locale:r,currentLocale:wb.settings.currentLocale,userGradeSigned:s,bypassCache:n},new URLSearchParams,!0,!0)},{timeout:e,useProccessResponse:!0});this.fraudVerify=null==a?void 0:a.fraudVerification,null==(i=null==a?void 0:a.maskedCards)||i.forEach(e=>{e.isSbp||(e.icon=e.system,"mir"!==e.system||p&&!this.isGeLocale||(e.icon="none",e.name=e.nameNotPaySystem))});const h=null!=(o=null==a?void 0:a.maskedCards)?o:[];return l.dispatchEvent(new CustomEvent("BankCardsUpdated",{detail:h})),h}catch(e){}}setCardDefault(e){var t,n;const r=(0,s.u4)(),i=(0,C.getHttpClient)();this.localBasket.setCardDefault(e);const o=null!=(t=r.getCurrency())?t:"",a=null!=(n=r.getLocale())?n:"";return i.fetchJSON(`${this.publicBasketApiUrl}/webapi/lk/account/spa/setasdefault`,{method:"POST",credentials:"include",body:new URLSearchParams({cardId:e,paymentCode:"crd",currency:o,locale:a,currentLocale:wb.settings.currentLocale})},{useProccessResponse:!0}).catch(e=>wb.popup.renderModalError(e))}async getPaymentsForDeliveries(e){var t,n;const r=(0,s.u4)(),i=(0,C.getHttpClient)(),o=(0,s.Z1)(),a=wb.settings.currentLocale,l=null!=(t=r.getLocale())?t:"",{payments:c}=await i.fetchJSON(`${o.cartService.publicBasketApiUrl}/payment/list/fordeliveriesv2`,{method:"POST",credentials:"include",body:new URLSearchParams({currency:e,currentLocale:a,deliveryCountry:l})},{useProccessResponse:!0})||{};return null==(n=null==c?void 0:c.find(e=>e.isCreditCard))||n.bankCards.forEach(e=>{e.isSbp||(e.icon=e.system),this.isGeLocale&&"mir"===e.system&&(e.icon="none",e.nameNotPaySystem&&(e.name=e.nameNotPaySystem))}),(this.isGeLocale||this.isTjLocale)&&(null==c||c.forEach(e=>{"wlt"!==e.codeLower&&"ebl"!==e.codeLower||(e.hideForGe=!0,e.hideForTj=!0)})),c}async getShopsBooking(e){const t=(0,C.getHttpClient)();return await t.fetchStatic(`shopdata/${e}/shops.json`)}async getShopsDbsp(e){const t=(0,C.getHttpClient)();return await t.fetchStatic(`shopdata/${e}/shopsbystore.json`)}get localCount(){return this.localBasket.count}get currentDeliveryType(){return this.localBasket.getDeliveryPoint()}save(e,t){this.getUserUid()===t&&this.localBasket.save(e)}getUserUid(){const e=(0,y.c)(),t=(0,s.Z1)();return e.isAuth?e.um.userUid:t.sessionService.getSession()}get(e){const t=(0,y.c)();let n=this.localBasket.get(e);const r=!!(null==e?void 0:e.promoId);r&&(n=wb.helpers.deepClone(n),n.basketItems=this.promoBasket.getItems(e.promoId));const{filtered:s,filteredItems:i}=this.filterItemsByParams(n.basketItems,e);if(s||r){const e=new li(t.isAuth,i);return e.isBuyItNowMode=!0,e.settings=n.settings,e.deliveryWay=n.deliveryWay,e.deliveryPoint=n.deliveryPoint,e.paymentTypes=n.paymentTypes,e.paymentType=n.paymentType,e.paymentType&&(e.paymentType.bankCardId=n.paymentType.bankCardId,e.paymentType.selectedBankCard=n.paymentType.selectedBankCard),li.calc(e),e}return n}filterItemsByParams(e,{sellerId:t=null,storeId:n=null,includeInOrderStr:r=null,digitalProducts:s=null,minOrder:i=null,groupBySeller:o=null}={}){if(t||r||s){const a=e.filter(e=>{var a;if(!(null==(a=e.stocks)?void 0:a.length))return;const l=s?s.split(",").map(e=>Number(e)):[];if(s)return l.includes(e.characteristicId);if(t&&r&&i){const s=r.split(";").map(e=>String(e.trim()));return e.supplierId==t&&e.stocks.some(e=>e.wh==n)&&s.includes(String(e.characteristicId))}if(t&&r&&o){return r.split(";").map(e=>String(e.trim())).includes(String(e.characteristicId))}if(t&&r){const n=r.split(";").map(e=>String(e.trim()));return e.supplierId==t&&n.includes(String(e.characteristicId))}return!!r&&e.characteristicId==r});return 1===a.length&&(a[0].includeInOrder=!0),{filtered:!0,filteredItems:a}}return{filtered:!1,filteredItems:e}}async loadStaticSupplierBrandOptions(e,t={}){var n,r;const s=(0,C.getHttpClient)();return await s.fetchStatic(`${null==(r=null==(n=wb.global.settings.mobileAppVariables)?void 0:n.services)?void 0:r.tariffOption}${e}.json`,t)}migrate(){const e=this.localBasket.migrate();0!==e.length&&this.srv.addManyItems(e)}async getBanner(e){var t;const n=(0,C.getHttpClient)();try{const r=await n.fetchJSON(`/webapi/lk/payment/marketing/banner?pan=${e}`,{method:"POST"});return null==(t=null==r?void 0:r.result)?void 0:t.banner}catch(e){console.log(e.error)}}static richPrototype({prototype:e}){Object.setPrototypeOf($i.prototype,e)}static factory(e){return e&&$i.richPrototype({prototype:e}),new $i}}var Ni=$i,ji=n(14326);const Fi="Склад продавца";var Ui={0:Fi,507:"Коледино WB",686:"Новосибирск WB",1193:"Хабаровск WB",1733:"Екатеринбург WB",2737:"Уткина Заводь WB",117442:"Калуга WB",117501:"Подольск WB",117866:"Тамбов WB",117986:"Казань WB",120762:"Электросталь WB",121709:"Электросталь WB",130744:"Краснодар WB",159402:"Шушары WB",161812:"Санкт-Петербург WB",172430:"Барнаул WB",204615:"Томск WB",204939:"Астана WB",205104:"Ульяновск WB",205205:"Киров WB",205228:"Белая дача WB",206236:"Белые Столбы WB",206348:"Алексин WB",206708:"Новокузнецк WB",206844:"Калининград WB",206968:"Новосёлки WB",208277:"Невинномысск WB",208941:"Домодедово WB",209513:"Домодедово WB",210001:"Новосёлки-2 WB",210515:"Вёшки WB",208768:Fi+" Абакан",209649:Fi+" Алексин",208769:Fi+" Алматы",212038:Fi+" Алматы-2",209902:Fi+" Артём",214110:Fi+" Архангельск",122495:Fi+" Астана",204492:Fi+" Астрахань",204493:Fi+" Барнаул",206239:Fi+" Белая Дача (Москва)",213892:Fi+" Белгород",214112:Fi+" Белогорск",209112:Fi+" Белые Столбы",208814:Fi+" Бишкек",204494:Fi+" Брянск",204495:Fi+" Владикавказ",117392:Fi+" Владимир",152588:Fi+" Волгоград",204496:Fi+" Вологда",211895:Fi+" Воронеж",209111:Fi+" Гольяново (Москва)",208771:Fi+" Гомель (Беларусь)",210967:Fi+" Домодедово",208815:Fi+" Екатеринбург",211790:Fi+" Екатеринбург-2",208816:Fi+" Ереван",208772:Fi+" Иваново",172073:Fi+" Ижевск",131643:Fi+" Иркутск",208817:Fi+" Казань",208761:Fi+" Калининград",144046:Fi+" Калуга",208773:Fi+" Киров",119261:Fi+" Коледино",209109:Fi+" Комсомольский (Москва)",208818:Fi+" Краснодар",118365:Fi+" Красноярск",208774:Fi+" Крыловская (Краснодар)",172075:Fi+" Курск",209108:Fi+" Курьяновская (Москва)",208776:Fi+" Липецк",168826:Fi+" Лобня (Москва)",121700:Fi+" Минск",211672:Fi+" Минск-2",212032:Fi+" Вешки",211730:Fi+" Внуково",117673:Fi+" Москва",122259:Fi+" Москва",208777:Fi+" Мурманск",208778:Fi+" Набережные Челны",209107:Fi+" Нахабино (Москва)",209601:Fi+" Невинномысск",118535:Fi+" Нижний Новгород",213651:Fi+" Нижний Тагил",208789:Fi+" Новокузнецк",117419:Fi+" Новосибирск",209591:Fi+" Омск",208780:Fi+" Оренбург",157848:Fi+" Пенза",209592:Fi+" Пермь",208781:Fi+" Печатники",214111:Fi+" Псков",208782:Fi+" Пушкино (Москва)",204497:Fi+" Пятигорск",118019:Fi+" Ростов-на-Дону",152594:Fi+" Рязань",146666:Fi+" Самара",132043:Fi+" Санкт-Петербург",117414:Fi+" Санкт-Петербург (Уткина Заводь)",208819:Fi+" Санкт-Петербург (Шушары)",158929:Fi+" Саратов",204498:Fi+" Серов",144154:Fi+" Симферополь",208783:Fi+" Смоленск",204212:Fi+" Солнцево",158448:Fi+" Ставрополь",208784:Fi+" Сургут",115651:Fi+" Тамбов",152610:Fi+" Тверь",208785:Fi+" Темрюк (Краснодарский край)",208786:Fi+" Томск",146725:Fi+" Тюмень",209950:Fi+" Ульяновск",152700:Fi+" Уфа",208820:Fi+" Хабаровск",210815:Fi+" Хоргос",204499:Fi+" Чебоксары",152611:Fi+" Челябинск",209113:Fi+" Черная грязь (Москва)",209106:Fi+" Чертановский (Москва)",208787:Fi+" Чита",209510:Fi+" Электросталь",209110:Fi+" Южные ворота (Москва)",152612:Fi+" Ярославль"};const Wi=["ru","by","kg","kz","am","uz","tj","ge"];var Hi=class{isMp(e){return e?this.checkStoreFlag(e,2,"type"):null}isCargoStore(e){return e?this.checkStoreFlag(e,4,"type"):null}isDbs(e){return e?this.checkStoreFlag(e,8,"type"):null}isRu(e){var t;return!!e&&"RU"===(null==(t=this[e])?void 0:t.country)}isForeign(e){return e?this.checkStoreFlag(e,16,"type"):null}isWbGo(e){return e?this.checkStoreFlag(e,32,"type"):null}isExpress(e){return e?this.checkStoreFlag(e,64,"type"):null}isBooking(e){return e?this.checkStoreFlag(e,128,"type"):null}isTransit(e,t){return!!t&&this.checkStoreFlag(t,1<<this.localeBit(e),"transit")}needVerification(e,t){return!!t&&this.checkStoreFlag(t,1<<this.localeBit(e),"import")}getStoreCountry(e){var t,n,r;return e&&null!=(r=null==(n=null==(t=this[e])?void 0:t.country)?void 0:n.toLowerCase())?r:null}checkStoreFlag(e,t,n){var r;return void 0!==(null==(r=this[e])?void 0:r[n])&&(this[e][n]&t)===t}localeBit(e){const t=Wi.indexOf(e);return Math.max(t,0)}},Vi=Object.defineProperty,zi=(e,t,n)=>((e,t,n)=>t in e?Vi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);const qi="wb__cargo_data_dt",Ki=9e5,Gi="cargo-stores",Ji="stores-data";class Yi{constructor(){zi(this,"_cargoStores"),zi(this,"stores"),zi(this,"storeNames"),zi(this,"storesLoaded"),this.storeNames=Ui,this.stores=new Hi,this._cargoStores=[],this.getStoresData().then(e=>{if(e){for(let{id:t,name:n,type:r,intervals:s,workingHours:i,import:o,isWb:a,transit:l,country:c}of e)this.storeNames[t]=n,!(1&~r)&&this.cargoStores.push(t),this.stores[t]={name:n,type:r,intervals:s,workingHours:i,import:o,isWb:a,transit:l,country:c};this.storesLoaded=!0}this.startJobSync()})}get cargoStores(){return this._cargoStores||[]}get names(){return this.storeNames}get storesMap(){return this.stores}openDb(){return(0,s.MH)().openDb("all-stores",{onupgradeneeded:e=>{e.objectStoreNames.contains(Gi)||e.createObjectStore(Gi,{keyPath:"id"}),e.objectStoreNames.contains(Ji)||e.createObjectStore(Ji,{keyPath:"id"})},version:2})}setStoresAsync(e){const t=(0,s.MH)();this.openDb().then(n=>{e instanceof Array&&t.addItems(n,Ji,e,500)})}async getStoresData(){const e=(0,s.MH)();return this.openDb().then(t=>e.getAll(t,Ji))}startJobSync(){(!this.storesLoaded||Number(localStorage.getItem(qi))<Date.now())&&this.syncStores(),setInterval(this.syncStores.bind(this),Ki)}async syncStores(){const e=(0,C.getHttpClient)(),t=await e.fetchStatic("stores-data.json");if(t instanceof Array){this.storesLoaded=!0,this._cargoStores=[];for(let{id:e,name:n,type:r,intervals:s=null,workingHours:i=null,import:o,isWb:a,transit:l,country:c}of t)this.storeNames[e]=n,!(1&~r)&&this._cargoStores.push(e),this.stores[e]={name:n,type:r,intervals:s,workingHours:i,import:o,isWb:a,transit:l,country:c};localStorage.setItem(qi,String(Date.now()+Ki))}this.setStoresAsync(t)}static richPrototype({prototype:e}){Object.setPrototypeOf(Yi.prototype,e)}static factory(e){return e&&Yi.richPrototype(e),new Yi}}var Qi=Yi,Xi=n(41752),Zi=n(77215),eo=Object.defineProperty,to=Object.defineProperties,no=Object.getOwnPropertyDescriptors,ro=Object.getOwnPropertySymbols,so=Object.prototype.hasOwnProperty,io=Object.prototype.propertyIsEnumerable,oo=(e,t,n)=>t in e?eo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ao=(e,t)=>{for(var n in t||(t={}))so.call(t,n)&&oo(e,n,t[n]);if(ro)for(var n of ro(t))io.call(t,n)&&oo(e,n,t[n]);return e},lo=(e,t)=>to(e,no(t));const co=[5352,2255],uo=[1,2,3,4,6,200,204,1327,1465,1513,1616,2273,3497,4607,4735],po=[213,1542,2605,2693,4733,4737,212,380,733,1675,2687,4738,4827,4932,214,2616,218,757,53,61,63,305,946,1161,1422,1439,1475,1487,2318,2379,2747,2920,3489,3490,3579,3766,4200,4256,4537,5154,5220,5222,5273,5094,5096,1339,836,5131,1542,5095,4021,4022,1338,2564],ho=[786,1107],mo=[1524,1525],go=[1,2,4,200,204,239,1513,5038],fo="stashed_catalog_product";class bo{constructor(){var e;oo(this,"symbol"!=typeof(e="stashedCatalogProductInner")?e+"":e,null)}stashCatalogProduct(e){e&&(this.stashedCatalogProductInner=e,localStorage.putObject(fo,e))}get stashedCatalogProduct(){var e;return null!=(e=this.stashedCatalogProductInner)?e:localStorage.getObject(fo)}async loadProductCardAsync(e,t,n=!1){try{const r=this.stashedCatalogProduct;if((null==r?void 0:r.nmId)===e&&!n&&r.currency===WbSpaModel.prototype.$user.getCurrency())return this.fromCatalogProduct(r,t);const s=await this.loadStaticProductAsync(e,{timeout:2e3});return this.loadDynamicProductAsync(e,t,s)}catch(e){return null}}async loadStaticProductAsync(e,t){const n=(0,C.getHttpClient)(),r=async r=>{const s=await n.fetchStatic(String(e),t,wb.helpers.url.urlProductStatic,void 0,r);return s&&(s.lang=r),404===(null==s?void 0:s.status)?null:s},s=wb.currentLanguage;if(["ka","kk","uz"].includes(s)){let e=await r(s);return e||(e=await r("ru"),e.lang="default",e)}return r("ru")}async loadDynamicProductAsync(e,t,n){var s,i;if(!e||isNaN(e))throw new TypeError("[ProductCardService] nmId must be an integer at loadDynamicProductAsync");t&&isNaN(t)&&(console.warn("[ProductCardService] chrtId is not an integer at loadDynamicProductAsync"),t=null),n=null!=n?n:await this.loadStaticProductAsync(e,{timeout:2e3});const o=new Map;let a=null!=(s=null==n?void 0:n.colors)?s:[e];n&&(n.colors=this.colorLimiter(e,a),a=n.colors,o.set(n.nm_id,n));const l="SubscriptionPageEntrypoint"===WbSpaModel.prototype.$router.targetRoute?null==(i=this.stashedCatalogProductInner)?void 0:i.currency:void 0,c=await wb.xnm.getXnmProducts(a,!0,!0,void 0,l).catch(()=>null),u=e.toString();if(!c)return null;const d=c[u];if(!d)return null;const p=await this.getMetaCardInfo(d,n),h=this.fillBaseProductCardFromX(n,d,!!p),m=lo(ao({},h),{metacard:p});(null==p?void 0:p.enabled)&&!(null==p?void 0:p.options)&&(a=[e]),a.forEach(e=>{const t=o.get(e),n=null==c?void 0:c[e];if(n&&n.pics>0){const r=this.fillNomenclature(e,t,n);r.groupedAddedOptions=m.groupedAddedOptions,r.miniAddedOptions=m.miniAddedOptions,r.verifiedCertificate=this.setVerifiedCertificate(t),"SubscriptionPageEntrypoint"===WbSpaModel.prototype.$router.targetRoute&&(null==n?void 0:n.currency)&&(r.currency=n.currency),m.nomenclatures.push(r)}}),m.nomenclatures=m.nomenclatures.sort((t,n)=>t.nmId===e?-1:n.nmId===e?1:n.sort-t.sort);const g=m.nomenclatures.find(t=>t.nmId===e);if(null==g||null==g.sizes)return null;const f=Object.assign({},g);this.fillSelectedNomenclature(f,t);const b=this.fillProductCardMetaTags(m);return f.goodsName||(m.goodsName=r.R.t("productCard.noNameSpecified")),this.checkGroupedAddedOptionsExist(f.groupedAddedOptions)||(f.groupedAddedOptions=[]),{metaTags:b,product:m,selectedNomenclature:f}}async loadNomenclature(e){var t,n,s,i,o,a,l,u,d,p,h,m,g,f,b,y,v,w,S,_,I;let C=null;if(!e.isDataLoaded)try{C=await this.loadStaticProductAsync(e.nmId,{timeout:2e3})}catch(e){C=null}if(C){if(e.goodsName=null!=(t=null==C?void 0:C.imt_name)?t:e.goodsName,e.brandName=null!=(s=null==(n=null==C?void 0:C.selling)?void 0:n.brand_name)?s:e.brandName,e.colorName=C.nm_colors_names,e.hasVideo=wb.xnm.isViewFlagSet(e.viewFlags,c._q.hasVideo),e.isBestQualityVideo=null!=(o=null==(i=null==C?void 0:C.media)?void 0:i.is_best_quality_video)&&o,e.bestQualityPics=null!=(l=null==(a=C.media)?void 0:a.best_qualities_photos)?l:[],e.hasRich=null!=(u=null==C?void 0:C.has_rich)&&u,e.hasSellerRec=null!=(d=null==C?void 0:C.has_seller_recommendations)&&d,e.hasImageTags=null!=(p=(null==C?void 0:C.enable_tags)&&(null==C?void 0:C.has_photo_tags))&&p,e.consist=null!=(b=null!=(f=null==(h=null==C?void 0:C.compositions)?void 0:h.map(e=>e.value?`${e.name} ${e.value}%`:e.name).join(", "))?f:null==(g=null==(m=null==C?void 0:C.options)?void 0:m.find(e=>"Состав"===e.name))?void 0:g.value)?b:"",e.isPrescription=null!=(y=C.is_prescription)&&y,C.sizes_table&&C.sizes_table.details_props){e.sizeTable=[];const t=C.sizes_table.details_props.indexOf("RU"),n={row:[]};t>=0&&(n.row[0]=r.R.t("common.russianSize")),n.row[1]=r.R.t("common.manufactureSize");let s=2;for(let e=2;e<C.sizes_table.details_props.length;e++){const t=C.sizes_table.details_props[e];n.row[s++]=""!==t?t:"-"}if(e.sizeTable.push(n),C.sizes_table.values.forEach(n=>{var r,s;const i={chrtId:null!=(r=n.chrt_id)?r:0,row:[]};if(t>=0&&(i.row[0]=n.details[t]),i.row[1]=n.tech_size,n.details.length>2)for(let e=2;e<n.details.length;e++)i.row[e]=""!==n.details[e]?n.details[e]:"-";null==(s=e.sizeTable)||s.push(i)}),e.sizes)for(const t of e.sizes){const e=C.sizes_table.values.find(e=>e.chrt_id===t.characteristicId);if(e&&C.sizes_table.details_props.length===e.details.length)for(let n=2;n<C.sizes_table.details_props.length;n++){const r={name:C.sizes_table.details_props[n],value:""!==e.details[n]?e.details[n]:"-"};t.dimensions&&t.dimensions.push(r)}}}const k=wb.global.settings.switches.enableWholesaleKt&&Boolean(null==(v=C.wholesale)?void 0:v.quantum),P=this.fillGroupedAddedOptions(C,k);e.groupedAddedOptions=P,e.miniAddedOptions=this.fillMiniGroupedAddedOptions(P,6),e.specs=wb.xnm.convertOptionsToSpecs(null==C?void 0:C.options),e.subjectName=null!=(w=null==C?void 0:C.subj_name)?w:"",e.subjectParent=null!=(S=null==C?void 0:C.subj_root_name)?S:"",e.verifiedCertificate=this.setVerifiedCertificate(C),e.description=C.description,e.markdownDescription=null!=(_=C.markdown_description)&&_,e.isAutoplayingVideo=null==(I=C.media)?void 0:I.is_autoplaying_video,e.isDataLoaded=!0,this.fillIsChooseColor(C,e)}const k=Object.assign({},e);return this.fillSelectedNomenclature(k),k}async getMetaCardInfo(e,t){var n,r,s,i,o;const a=await WbSpaModel.prototype.isMetaCharacteristicEnabled(),[l]=await Promise.all([(async()=>{const n="nmId"in e?e.nmId:e.id;return null!=t?t:this.loadStaticProductAsync(n,{timeout:2e3})})(),WbSpaModel.prototype.$moduleLoader.loadServiceAsync("metaCardService")]);if(!l)return null;const c=null==e?void 0:e.rcId,u=null==t?void 0:t.imt_id,d=null==e?void 0:e.dest;let p;if(p=e.id?e.id:e.nmId,!p)return null;const h=await WbSpaModel.prototype.$services.metaCardService;if((null==(n=wb.global.settings.switches)?void 0:n.multicardV2Enable)&&c&&(2===(null==(r=l.rc)?void 0:r.type)||(null==(s=l.rc)?void 0:s.id)===c))return await h.getMetaInfo(p,c,null,l);if(u&&(null!=(o=null==(i=null==e?void 0:e.sizes)?void 0:i.length)?o:0)<2&&e.sizes&&a){return this.checkBaseChooseColor(l.options,e.sizes)?null:await h.getMetaInfo(p,null,d,l)}return null}async loadMiniCardData(e,t){var n,r,s,i;const o=await wb.xnm.getMiniProductCard(e);if(!o)return null;let a=null,l=null;if(t&&!isNaN(t)&&(null==(n=o.sizes)?void 0:n.some(e=>e.ch==t)))a=t,l=null!=(s=null==(r=o.sizes.find(e=>e.ch==t))?void 0:r.nm)?s:null;else if(1==(null==(i=o.sizes)?void 0:i.length)){const e=o.sizes[0];a=e.ch,l=null==e?void 0:e.nm}return lo(ao({},o),{characteristicId:a,sizeName:l,isOnlyColor:!0})}async loadPriceHistory(e){const t=await WbSpaModel.prototype.$httpClient.fetchStatic(String(e),{logOff:!0},u.urlPriceHistoryStatic);return null!=t?t:null}async loadSizeTable(e){const t=await this.loadStaticProductAsync(e,{timeout:2e3});return this.fillSizeTable(t)}setChooseColorInBasket(e,t){var n,r,s;for(let i=0;i<e.length;i++)if((null==(r=null==(n=e[i].meta)?void 0:n.shade)?void 0:r.colorHex)&&t.sizes){if(e[i].characteristicId===(null==(s=t.sizes[0])?void 0:s.characteristicId)){$.observable(t).setProperty({chooseColorInBasket:!0});break}}else $.observable(t).setProperty({chooseColorInBasket:!1})}updateAnalyticsForProductRedirect(e){var t,n,r;const s=wb.analitics.getState(),i={catalog_type:null==e?void 0:e.xcatalogShard,catalog_value:null==e?void 0:e.xcatalogQuery,rmi:null==e?void 0:e.rmi,rs:null==e?void 0:e.rs,normquery:null!=(t=null==e?void 0:e.normQuery)?t:e.search,article:1,meta_preset_id:"",filters_entry_point:"",filters:"",filters_data:{}};if(wb.analitics.updateTailObjectData(i),"SNT"===s.l||"SNH"===s.l){const t={t1:null!=(n=null==e?void 0:e.xcatalogQuery)?n:"",t2:null!=(r=null==e?void 0:e.xcatalogShard)?r:""};wb.analitics.updateState(t)}}fromCatalogProduct(e,t){var n,r,s,i,o,a,l,u,d,p;const h={},m={imtId:e.imtId,nomenclatures:[],supplierDeliveryInfo:{time1:e.time1||null,time2:e.time2||null,storeId:e.fastestStore||null},rcId:e.rcId},g=e.pics,f=20624===e.brandId||30624===e.siteBrandId,b={adult:e.adult,brandId:e.brandCod,brandName:e.brand,canFit:this.setCanFit(e.subjectId,e.subjectParentId,e.isC2C),colorName:null,consist:"",deliveryHours:e.deliveryHours,description:null,markdownDescription:!1,dest:e.dest,fastestStore:e.fastestStore,feedbacks:e.feedbacks,goodsName:e.name,isAlcohol:null!=(n=e.isAlcohol)&&n,isPostpaidBooking:null!=(r=e.isPostpaidBooking)&&r,isBooking:null!=(s=e.isBooking)&&s,isActivationKey:-1!==co.indexOf(e.subjectId),isDataLoaded:!1,isDetailsLoaded:!1,isDigital:e.isDigitalGood,isInsurance:e.isInsurance,abInsuranceKt:(0,Zi.R8)(!!e.isInsurance),isOnePurchasePromo:null!=(i=e.isOnePurchasePromo)&&i,isPreorder:5772===e.brandCod&&wb.settings.preOrderList.includes(e.nmId),isPreorderProduct:(0,Xi.$Q)(null==e?void 0:e.viewFlags),isPrepaid:e.isPrepaid,isVideo:5105===e.subjectId,hasVideo:wb.xnm.isViewFlagSet(e.viewFlags,c._q.hasVideo),isBestQualityVideo:!1,hasRich:!1,hasImageTags:!1,kindId:null!=(o=e.kindId)?o:0,nmId:e.nmId,nonRefundable:e.isUnrefusable,panelPromoId:e.panelPromoId,picsCount:g,bestQualityPics:[],promotions:null,saleConditions:e.saleConditions,subjectId:e.subjectId,subjectName:"",subjectParent:"",subjectParentId:e.subjectParentId,sizes:null==(a=e.sizes)?void 0:a.map(t=>{var n,r;const s=t.catalogPrice;return{characteristicId:t.ch,sizeName:t.nm,sizeNameRus:t.rusNm,quantity:t.unavailable||e.soldOut?0:1,stocks:t.stocks,storeIds:null==(n=t.stocks)?void 0:n.map(e=>e.wh),isSoldOut:t.unavailable||e.soldOut,deliveryHours:e.deliveryHours,payloadV2:t.payloadV2,saleConditions:t.saleConditions,whDtype:t.whDtype,price:s?{price:s.basic?s.basic/100:0,salePrice:s.priceToShow?s.priceToShow/100:0,sale:s.sale,logisticsCost:s.logisticsToShow,returnCost:s.return,paymentDiscountAmount:s.paymentDiscountAmount,productPrice:s.product/100,premiumSaleAmount:null!=(r=s.premiumSaleAmount)?r:0}:null,dimensions:[]}}),sizeTable:null,showMinDetails:!go.includes(e.subjectParentId),reviewRating:e.reviewRating,star:e.star,urlForReccomendations:`/recommendation/catalog?type=visuallysimilar&forproduct=${e.nmId}`,supplier:$.views.helpers.supplierFineName("Wildberries"===e.supplier?"WILDBERRIES":$.views.converters.trimSupplierName(e.supplier,$.views.helpers.suppliersOrgForms),e.brandId),supplierId:e.supplierId,supplierRating:e.supplierRating,viewFlags:e.viewFlags,shouldShowOriginalMark:!f&&wb.xnm.isViewFlagSet(e.viewFlags,c._q.isOriginal),miniAddedOptions:[],groupedAddedOptions:[],showThermometer:e.showThermometer,quantity:e.totalQuantity,whDtype:e.whDtype,cashbackPercent:null==e?void 0:e.cashbackPercent,expandedRichContent:wb.xnm.isSupplierFlagSet(null==e?void 0:e.supplierFlags,c.Fu.unlimitedRichContent)};e.supplierFlags&&(b.hideMultipleSellers=wb.xnm.isSupplierFlagSet(e.supplierFlags,c.Fu.disableSimilar)&&!!(null==(l=wb.global)?void 0:l.settings.switches.hideMultipleSellersLever)),b.allSizesSoldOut=null!=(d=null==(u=b.sizes)?void 0:u.every(e=>e.isSoldOut))&&d;const y=!b.allSizesSoldOut&&(null==(p=e.catalogPrice)?void 0:p.total)>0;return b.price={price:y?e.catalogPrice.basic/100:0,salePrice:y&&e.catalogPrice.priceToShow?e.catalogPrice.priceToShow/100:0,sale:y&&e.catalogPrice.sale?e.catalogPrice.sale:0,priceDiff:!!y&&e.priceDiff,logisticsCost:e.catalogPrice.logisticsToShow,returnCost:e.catalogPrice.return,soldOut:b.allSizesSoldOut,productPrice:e.catalogPrice.product/100,paymentDiscountAmount:e.catalogPrice.paymentDiscountAmount},this.setOnePurchasePromo(b),b.sort=0,b.sizes&&b.sizes.length>0&&(1===b.sizes.length?b.sort=b.sizes[0].quantity>0?1:0:b.sizes.reduce((e,t)=>b.sort+=+(t.quantity>0),{})),m.nomenclatures.push(b),this.fillSelectedNomenclature(b,t),Object.assign(h,{product:m,selectedNomenclature:b}),h.metaTags=this.fillProductCardMetaTags(m),h}fillSelectedNomenclature(e,t){var n,r,i,o,a;const l=(0,s.MA)();wb.xnm.fillFeedbacksPayment([e]),(wb.xnm.isRedPrice(e.panelPromoId)||e.isOnePurchasePromo)&&(e.showRedPrice=!0),wb.settings.b2bMode&&(e.isVatRefundable=wb.xnm.isVatRefundable(e.viewFlags),e.vatPercent=wb.xnm.getVatPercent(e.viewFlags));let c=!0;e.sizes&&(c=e.sizes.length<=2&&(null==(n=e.sizes)?void 0:n.every(e=>"0"===e.sizeName)),c||1===e.sizes.length?e.selectedSize=e.sizes.find(e=>!e.isSoldOut)||e.sizes[0]:null!=t&&(e.selectedSize=e.sizes.find(e=>e.characteristicId===t)),e.sizes.sort((e,t)=>{const n=e.stocks&&e.stocks.length>0,r=t.stocks&&t.stocks.length>0;return n&&!r?-1:!n&&r?1:0})),this.setSelectedPrice(e),wb.global.settings.switches.enableCashback&&this._setCashbackAmount(e),this.setButtons(e),e.showSize=!c,e.isDigitalEnabled=l.isSupportDigital(),e.deliveryInfoEnable=!e.isDigital&&!((null==(r=e.selectedSize)?void 0:r.isSoldOut)||e.allSizesSoldOut),e.isVehicle=8242==e.subjectParentId,e.saleConditions=null==(o=null==(i=e.sizes)?void 0:i.find(e=>{var t;return null==(t=e.stocks)?void 0:t.length}))?void 0:o.saleConditions,e.colorGroupBaseType&&e.selectedSize&&(e.isShowChooseColorBtn=!0),e.isC2C=!!e.viewFlags&&wb.xnm.isC2CProduct(e.viewFlags),e.isWholesale=!!e.viewFlags&&wb.xnm.isWholesale(e.viewFlags),e.enablePaidCargoDelivery=this.isPaidCargoDelivery((null==(a=e.price)?void 0:a.logisticsCost)||0)}fillNomenclature(e,t,n){var r,s,i,o,a,l,u,d,p,h,m,g,f,b,y,v,w,S,_,I,C,k,P,E,T,O,x,M,A,R,D,L,B,N,j,F,U,W,H,V,z,q,K,G,J,Y,Q,X;const Z=null!=(i=null!=(s=null==(r=null==t?void 0:t.data)?void 0:r.subject_id)?s:null==n?void 0:n.subjectId)?i:0,ee=null!=(l=null!=(a=null==(o=null==t?void 0:t.data)?void 0:o.subject_root_id)?a:null==n?void 0:n.subjectParentId)?l:0,te=null!=(u=null==t?void 0:t.subj_name)?u:"",ne=null!=(d=null==t?void 0:t.subj_root_name)?d:"",re=null!=(m=null!=(h=null==n?void 0:n.pics)?h:null==(p=null==t?void 0:t.media)?void 0:p.photo_count)?m:0,se=null!=(f=null==(g=null==t?void 0:t.media)?void 0:g.best_qualities_photos)?f:[],ie=20624===(null==n?void 0:n.brandId)||30624===(null==n?void 0:n.siteBrandId),oe=WbSpaModel.prototype.$services.storeService.storesMap,ae=(null==n?void 0:n.wh)?oe[n.wh]:null,le=!(8&~(null==ae?void 0:ae.type)),ce=null!=(null==n?void 0:n.dtype)&&(BigInt(n.dtype)&BigInt("1")<<BigInt("13"))!==BigInt("0"),ue=null!=(b=(null==t?void 0:t.has_rich)&&!wb.xnm.isViewFlagSet(n.viewFlags,c._q.hidePhoto))&&b,de={adult:null!=(y=null==n?void 0:n.isAdult)&&y,attachments:null==t?void 0:t.attachments,brandId:null!=(v=null==n?void 0:n.brandId)?v:0,brandName:null!=(_=null!=(S=null==(w=null==t?void 0:t.selling)?void 0:w.brand_name)?S:null==n?void 0:n.brand)?_:"",canFit:this.setCanFit(Z,ee,null==n?void 0:n.isC2C),colorName:-1!==ho.indexOf(null==n?void 0:n.subjectId)?null:null!=(k=null!=(C=null==t?void 0:t.nm_colors_names)?C:null==(I=null==n?void 0:n.colors)?void 0:I.map(e=>e.name).join(", "))?k:"",consist:null!=(x=null!=(O=null==(P=null==t?void 0:t.compositions)?void 0:P.map(e=>e.value?`${e.name} ${e.value}%`:e.name).join(", "))?O:null==(T=null==(E=null==t?void 0:t.options)?void 0:E.find(e=>"Состав"===e.name))?void 0:T.value)?x:"",deliveryHours:((null==n?void 0:n.time1)||0)+((null==n?void 0:n.time2)||0),intervals:null==ae?void 0:ae.intervals,workingHours:null==ae?void 0:ae.workingHours,isDbs:le,description:null==t?void 0:t.description,markdownDescription:null!=(M=null==t?void 0:t.markdown_description)&&M,dest:null==n?void 0:n.dest,fastestStore:null==n?void 0:n.wh,feedbacks:null!=(A=null==n?void 0:n.feedbacks)?A:0,specs:wb.xnm.convertOptionsToSpecs(null==t?void 0:t.options),goodsName:null!=(D=null!=(R=null==t?void 0:t.imt_name)?R:null==n?void 0:n.name)?D:"",isActivationKey:-1!==co.indexOf(Z),isAlcohol:null!=(L=null==n?void 0:n.isAlcohol)&&L,isBooking:wb.xnm.isDtypeFlagSet(null==n?void 0:n.dtype,c.iA.CC),isAutoplayingVideo:null!=(N=null==(B=null==t?void 0:t.media)?void 0:B.is_autoplaying_video)&&N,isDataLoaded:null!=t,isDetailsLoaded:!0,isDigital:null!=(j=null==n?void 0:n.isDigital)&&j,isInsurance:null!=(F=null==n?void 0:n.isInsurance)&&F,abInsuranceKt:(0,Zi.R8)(!!(null==n?void 0:n.isInsurance)),isOnePurchasePromo:null!=(U=null==n?void 0:n.isOnePurchasePromo)&&U,isPostpaidBooking:null!=(W=null==n?void 0:n.isPostpaidBooking)&&W,isPreorder:5772===(null==n?void 0:n.brandId)&&wb.settings.preOrderList.includes(e),isPrepaid:null==n?void 0:n.isPrepaid,isPrescription:(null==t?void 0:t.is_prescription)&&wb.global.settings.switches.enablePrescriptionLever,isVideo:5105===Z,hasVideo:wb.xnm.isViewFlagSet(n.viewFlags,c._q.hasVideo),isBestQualityVideo:null!=(V=null==(H=null==t?void 0:t.media)?void 0:H.is_best_quality_video)&&V,hasRich:ue,hasSellerRec:null!=(z=null==t?void 0:t.has_seller_recommendations)&&z,hasImageTags:null!=(q=(null==t?void 0:t.enable_tags)&&(null==t?void 0:t.has_photo_tags))&&q,kindId:null!=(K=null==n?void 0:n.kindId)?K:0,nmId:e,nonRefundable:null==n?void 0:n.isUnrefusable,panelPromoId:null==n?void 0:n.panelPromoId,picsCount:re,bestQualityPics:se,promotions:null==n?void 0:n.promotions,subjectId:Z,subjectName:te,subjectParent:ne,subjectParentId:ee,sizes:this.fillSizes(n,t),sizeTable:t?this.fillSizeTable(t):null,showMinDetails:!go.includes(ee),reviewRating:null==n?void 0:n.reviewRating,star:null!=(G=null==n?void 0:n.rating)?G:0,urlForReccomendations:`/recommendation/catalog?type=visuallysimilar&forproduct=${e}`,supplier:$.views.helpers.supplierFineName(null==n?void 0:n.supplier,null==n?void 0:n.brandId),supplierId:null==n?void 0:n.supplierId,supplierRating:null==n?void 0:n.supplierRating,supplierFlags:null==n?void 0:n.supplierFlags,premiumSale:null==n?void 0:n.premiumSale,premiumSalePercent:null==n?void 0:n.premiumSalePercent,showRedPrice:wb.xnm.isRedPrice(null==n?void 0:n.panelPromoId)||(null==n?void 0:n.isOnePurchasePromo),whDtype:null==n?void 0:n.dtype,expandedRichContent:wb.xnm.isSupplierFlagSet(null==n?void 0:n.supplierFlags,c.Fu.unlimitedRichContent),is2025LogisticCost:n.is2025LogisticCost,cashbackPercent:null==n?void 0:n.cashbackPercent,priceAdjustmentPercent:null==n?void 0:n.priceAdjustmentPercent,isC2C:n.isC2C,isPickupFromStore:ce,isPreorderProduct:(0,Xi.$Q)(null==n?void 0:n.viewFlags),isWholesale:n.isWholesale,originNm:null==t?void 0:t.origin_nm,isNeedToBlurPrice:null==n?void 0:n.isNeedToBlurPrice};n&&wb.settings.b2bMode&&(de.isVatRefundable=wb.xnm.isVatRefundable(n.viewFlags),de.vatPercent=wb.xnm.getVatPercent(n.viewFlags)),de.allSizesSoldOut=null!=(Y=null==(J=de.sizes)?void 0:J.every(e=>e.isSoldOut))&&Y;const pe=null==n?void 0:n.price,he=!de.allSizesSoldOut&&(null==pe?void 0:pe.total)>0;return this.fillIsChooseColor(t,de),de.price={price:he&&(null==pe?void 0:pe.basic)?pe.basic/100:0,salePrice:he&&(null==pe?void 0:pe.total)?pe.priceToShow/100:0,priceForBasket:he&&(null==pe?void 0:pe.priceForBasket)?pe.priceForBasket/100:0,sale:he?null==pe?void 0:pe.sale:0,priceDiff:!!he&&(null==n?void 0:n.diffPrice),logisticsCost:null==pe?void 0:pe.logisticsToShow,returnCost:null==pe?void 0:pe.return,soldOut:de.allSizesSoldOut,paymentDiscountAmount:null==pe?void 0:pe.paymentDiscountAmount,productPrice:(null==pe?void 0:pe.product)/100,premiumSaleAmount:null==pe?void 0:pe.premiumSaleAmount},de.sort=0,de.quantity=0,de.sizes&&(null==(Q=de.sizes)?void 0:Q.length)>0&&(1===de.sizes.length?(de.quantity=de.sizes[0].quantity,de.sort=de.quantity>0?1:0):de.sizes.reduce((e,t)=>{de.quantity+=t.quantity,de.sort+=+(t.quantity>0)},{})),de.supplierDeliveryInfo={time1:null==n?void 0:n.time1,time2:null==n?void 0:n.time2,storeId:null==n?void 0:n.wh},n&&(de.viewFlags=n.viewFlags,de.shouldShowOriginalMark=!ie&&wb.xnm.isViewFlagSet(n.viewFlags,c._q.isOriginal),de.hideMultipleSellers=wb.xnm.isSupplierFlagSet(n.supplierFlags,c.Fu.disableSimilar)&&!!(null==(X=wb.global)?void 0:X.settings.switches.hideMultipleSellersLever)),this.setOnePurchasePromo(de),(null==n?void 0:n.panelPromoId)&&this.setCanShowThermometer(n.panelPromoId,de),de}fillBaseProductCardFromX(e,t,n){var r,s,i,o,a,l,c,u;const d=wb.global.settings.switches.enableWholesaleKt&&t.isWholesale,p=this.fillGroupedAddedOptions(e,d);return{imtId:null!=(s=null!=(r=null==e?void 0:e.imt_id)?r:null==t?void 0:t.root)?s:0,groupedAddedOptions:p,miniAddedOptions:this.fillMiniGroupedAddedOptions(p,n||t.sizes.length>1?4:6),nomenclatures:[],promoTemplateUfu:null!=(a=null==(o=null==(i=null==e?void 0:e.media)?void 0:i.promo_url)?void 0:o.replace(/^\/+|\/+$/g,""))?a:null,supplierDeliveryInfo:{time1:null!=(l=null==t?void 0:t.time1)?l:null,time2:null!=(c=null==t?void 0:t.time2)?c:null,storeId:null!=(u=null==t?void 0:t.wh)?u:null}}}fillSizes(e,t){var n;return e&&e.sizes?e.sizes.sort((e,t)=>e.rank-t.rank).map(n=>{var r,s,i,o,a,l,u;const d=[],p=null==(s=null==(r=null==t?void 0:t.sizes_table)?void 0:r.values)?void 0:s.find(e=>e.chrt_id===n.optionId);if((null==p?void 0:p.details)&&(null==(i=null==t?void 0:t.sizes_table.details_props)?void 0:i.length)===p.details.length)for(let e=0;e<t.sizes_table.details_props.length;e++){if("RU"===t.sizes_table.details_props[e]||"EU"===t.sizes_table.details_props[e])continue;const n={name:null==t?void 0:t.sizes_table.details_props[e],value:""!==p.details[e]?p.details[e]:"-"};d.push(n)}const h=null==e?void 0:e.price,m=null!=(a=null==(o=n.price)?void 0:o.total)?a:h.total;let g=0;m>0&&n.stocks&&n.stocks.length>0&&(1===n.stocks.length?g=n.stocks[0].qty:n.stocks.reduce((e,t)=>g+=t.qty,0));const f=g>0?null==(l=n.stocks)?void 0:l.map(e=>e.wh):null,b={characteristicId:n.optionId,sizeName:n.origName,sizeNameRus:n.name,dimensions:d,quantity:g,stocks:n.stocks,storeIds:f,isSoldOut:!!n.stocks&&n.stocks.length<=0,lowQuantity:g<3&&g>0,deliveryHours:(n.time1||0)+(n.time2||0),isC2C:e.isC2C,fastestStore:n.wh,payloadV2:n.payload,saleConditions:n.saleConditions,whDtype:n.dtype,isForeign:wb.xnm.isDtypeFlagSet(n.dtype,c.iA.ShouldApplyDuty)};return g>0&&n.price&&(b.price={price:n.price.basic?n.price.basic/100:0,salePrice:n.price.total?n.price.priceToShow/100:0,priceForBasket:n.price.priceForBasket?n.price.priceForBasket/100:0,sale:n.price.sale,logisticsCost:n.price.logisticsToShow,returnCost:n.price.return,paymentDiscountAmount:n.price.paymentDiscountAmount,productPrice:n.price.product/100,premiumSaleAmount:null!=(u=n.price.premiumSaleAmount)?u:0},e.panelPromoId&&this.setCanShowThermometer(e.panelPromoId,b)),b}):(null==(n=null==t?void 0:t.data)?void 0:n.chrt_ids)?t.data.chrt_ids.map(e=>{var n,r,s;const i=null==(n=null==t?void 0:t.sizes_table)?void 0:n.values.find(t=>t.chrt_id===e),o=[];if(i){const e=null==(r=null==t?void 0:t.sizes_table)?void 0:r.values.find(e=>e.chrt_id===i.optionId);if((null==e?void 0:e.details)&&(null==(s=t.sizes_table.details_props)?void 0:s.length)===e.details.length)for(let n=0;n<t.sizes_table.details_props.length;n++){if("RU"===t.sizes_table.details_props[n]||"EU"===t.sizes_table.details_props[n])continue;const r={name:t.sizes_table.details_props[n],value:""!==e.details[n]?e.details[n]:"-"};o.push(r)}}return{characteristicId:e,sizeName:"0",sizeNameRus:"",dimensions:o,quantity:0,isSoldOut:!0}}):null}fillSizeTable(e){var t;const n=[];if((null==e?void 0:e.sizes_table)&&(null==(t=e.sizes_table)?void 0:t.details_props)){const t=e.sizes_table.details_props.indexOf("RU"),s=e.sizes_table.details_props.indexOf("EU"),i={row:[]};let o=0;t>=0&&(i.row[o++]=r.R.t("common.russianSize")),i.row[o++]=r.R.t("common.manufactureSize");for(let n=0;n<e.sizes_table.details_props.length;n++){if(n===t||n===s)continue;const r=e.sizes_table.details_props[n];i.row[o++]=""!==r?r:"-"}n.push(i),e.sizes_table.values.forEach(e=>{var r;let i=0;const o={chrtId:null!=(r=e.chrt_id)?r:0,row:[]};t>=0&&(o.row[i++]=e.details[t]),o.row[i++]=e.tech_size;const a=(-1!==t?1:0)+(-1!==s?1:0);if(e.details.length>a)for(let n=0;n<e.details.length;n++)n!==t&&n!==s&&(o.row[i++]=""!==e.details[n]?e.details[n]:"-");n.push(o)})}return n}fillGroupedAddedOptions(e,t=!1){var n,s,i,o,a,l,c,u;const d=null!=(s=null==(n=null==e?void 0:e.grouped_options)?void 0:n.map(e=>{var t;return{categoryName:e.group_name,addedOptions:null==(t=e.options)?void 0:t.map(e=>({property:e.name,subProperty:e.value}))}}))?s:[];let p=null==d?void 0:d.find(e=>"Основная информация"===(null==e?void 0:e.categoryName));p&&(null==p?void 0:p.addedOptions)||(p={categoryName:r.R.t("productCard.generalInfo"),addedOptions:[]},d.unshift(p)),t&&(null==(i=null==e?void 0:e.wholesale)?void 0:i.quantum)&&p.addedOptions.unshift({property:r.R.t("productCard.wholesaleQuantum"),subProperty:e.wholesale.quantum.toString()});let h=null==d?void 0:d.find(e=>"Дополнительная информация"===(null==e?void 0:e.categoryName));return h&&(null==h?void 0:h.addedOptions)||(h={categoryName:r.R.t("productCard.additionalInfo"),addedOptions:[]},d.push(h)),"ru"!==wb.currentLanguage||(null==(o=null==e?void 0:e.options)?void 0:o.find(e=>"Состав"===e.name))||null==(null==e?void 0:e.compositions)||h.addedOptions.unshift({property:r.R.t("productCard.structure"),subProperty:null==(a=null==e?void 0:e.compositions)?void 0:a.map(e=>e.value?`${e.name} ${e.value}%`:e.name).join("; ")}),"ru"!==wb.currentLanguage||(null==(l=null==e?void 0:e.options)?void 0:l.find(e=>"Комплектация"===e.name))||null==(null==e?void 0:e.contents)||h.addedOptions.push({property:r.R.t("productCard.equipment"),subProperty:e.contents}),"ru"!==wb.currentLanguage||(null==(c=null==e?void 0:e.options)?void 0:c.find(e=>"Пол"===e.name))||null==(null==e?void 0:e.kinds)||h.addedOptions.push({property:r.R.t("productCard.gender"),subProperty:e.kinds.join(", ")}),"ru"===wb.currentLanguage&&!(null==(u=null==e?void 0:e.options)?void 0:u.find(e=>"Сезон"===e.name))&&(null==e?void 0:e.season)&&h.addedOptions.push({property:r.R.t("productCard.season"),subProperty:e.season}),d.filter(e=>e.addedOptions.length>0)}fillIsChooseColor(e,t){var n;if(!e||!t||!t.sizes)return;const r=this.checkBaseChooseColor(null==e?void 0:e.options,t.sizes);if("number"!=typeof r||!t.sizes)return;if(!t.sizes.map(e=>wb.xnm.expandSaleConditions({currency:t.currency},e)).some(e=>e.isUnrefusable&&e.isPrepaid&&(e.isUnreturnable||e.isVerificationReturn)))return;const s=null==(n=null==e?void 0:e.options[r])?void 0:n.value.toLowerCase(),i=["a","1","bw"],o=["c","3","bc","d"];s&&(t.colorBaseType=s.toUpperCase(),i.includes(s)?t.colorGroupBaseType="A":o.includes(s)&&(t.colorGroupBaseType="C"));const a=WbSpaModel.prototype.$services.cartService.get().basketItems;this.setChooseColorInBasket(a,t)}checkBaseChooseColor(e,t){var n,r;if(!e||!t)return!1;const s=e.findIndex(e=>{var t;return"база для колеровки"===(null==(t=e.name)?void 0:t.toLowerCase())&&e.value}),i=e.find(e=>{var t,n;return"есть колеровка"===(null==(t=e.name)?void 0:t.toLowerCase())&&"да"===(null==(n=e.value)?void 0:n.toLowerCase())}),o=e.find(e=>{var t,n;return"каталог цветов"===(null==(t=e.name)?void 0:t.toLowerCase())&&(null==(n=e.value)?void 0:n.toLowerCase().split(/[; ]+/).includes("ncs"))}),a=null==(r=null==(n=(t=null!=t?t:[])[0])?void 0:n.stocks)?void 0:r.every(e=>wb.xnm.isDtypeFlagSet(e.dtype,c.iA.FBS)||wb.xnm.isDtypeFlagSet(e.dtype,c.iA.DBS)||wb.xnm.isDtypeFlagSet(e.dtype,c.iA.WBGO));return!!(s&&s>0&&i&&o&&a)&&s}fillProductCardMetaTags(e){const t={};return e.nomenclatures.map(e=>{const n=`${e.goodsName} ${e.brandName} ${e.nmId}`;t[e.nmId]={title:r.R.t("lk.cardMetaTags.title",{title:n}),description:r.R.t("lk.cardMetaTags.desc",{title:n})}}),t}fillMiniGroupedAddedOptions(e,t=4){const n=[];if(!e)return[];for(let r=0;r<e.length;r++){const s=e[r].addedOptions.slice(0,t).filter(e=>"Цвет"!==e.property);if(n.push(...s),(t-=s.length)<1)break}return n}checkGroupedAddedOptionsExist(e){return(null==e?void 0:e.length)>0&&e.some(e=>{var t;return(null==(t=e.addedOptions)?void 0:t.length)>0})}colorLimiter(e,t){if(null===t||t.length<60)return t;if(t.indexOf(e)<60)return t.slice(0,60);const n=[e];return n.push(...t.slice(0,59)),n}setCanFit(e,t,n){return-1!==uo.indexOf(t)&&-1===po.indexOf(e)&&!n}setVerifiedCertificate(e){var t,n;return(null==(t=null==e?void 0:e.certificate)?void 0:t.verified)?(null==(n=e.data)?void 0:n.subject_id)&&mo.indexOf(e.data.subject_id)>=0?2:1:0}setSelectedPrice(e){var t;e.selectedPrice=(null==(t=e.selectedSize)?void 0:t.price)?e.selectedSize.price:e.price}_setCashbackAmount(e){var t,n,r,s,i,o;if(void 0!==(null==e?void 0:e.cashbackPercent)&&(null==e?void 0:e.cashbackPercent)>0&&void 0!==(null==(t=e.selectedPrice)?void 0:t.salePrice)&&(null==(n=e.selectedPrice)?void 0:n.salePrice)>0){const t=WbSpaModel.prototype.$user.getCurrency(),n=(null!=(r=null==e?void 0:e.premiumSale)?r:0)>0&&(null==(s=WbSpaModel.prototype.$user.getUserGradeFromCache())?void 0:s.isPremium)?wb.priceHelper.calculateDiscount((null==(i=e.selectedPrice)?void 0:i.productPrice)||0,e.premiumSale,t):0;e.cashbackAmount=wb.priceHelper.calculateDiscount((null==(o=e.selectedPrice)?void 0:o.productPrice)-n,e.cashbackPercent,t)}}setButtons(e){var t,n,r;e.addToBasketEnable=!((null==(t=e.selectedSize)?void 0:t.isSoldOut)||e.allSizesSoldOut),e.addToPonedEnable=!((null==(n=e.selectedSize)?void 0:n.isSoldOut)||e.allSizesSoldOut),e.addToWaitingListEnable=(null==(r=e.selectedSize)?void 0:r.isSoldOut)||e.allSizesSoldOut,e.addedToBasket=!1,e.addedToWl=!1}setCanShowThermometer(e,t){!WbSpaModel.prototype.$auth.isAuth||!t.quantity||t.quantity>$n.wT||WbSpaModel.prototype.$promotionsHelper.isThermometerNeeded(e)&&(t.showThermometer=!0)}isPaidCargoDelivery(e){var t;const n=null==(t=WbSpaModel.prototype.$user.getUserGradeFromCache())?void 0:t.return_fee;return wb.global.settings.switches.enablePaidCargoDeliveryKt&&n>0&&e>0||!1}setOnePurchasePromo(e){var t;if(!e.nmId)return;const n=WbSpaModel.prototype.$services.onePurchasePromoService;e.onePurchasePromoWasBought=!!(null==(t=null==n?void 0:n.getNmList())?void 0:t.includes(e.nmId))}static richPrototype({prototype:e}){Object.setPrototypeOf(bo.prototype,e)}static factory(e){return e&&bo.richPrototype(e),new bo}}var yo=n(62145),vo=Object.defineProperty,wo=(e,t,n)=>((e,t,n)=>t in e?vo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);const So="mobile-main-banner",_o="video-main-banner",Io="static-main-banner",Co="mobile-trend-banner",ko="video-trend-banner",Po="static-trend-banner";class Eo{constructor(e,t){var n,r,s,i,o,a,l,c,u,d,p,h,m,g,f,b,y,v,w,S,_,I,C,k,P,E,T,O,x,M,A,R,D,L,B,$,N,j,F,U,W,H,V,z,q,K,G,J;wo(this,"id"),wo(this,"href"),wo(this,"applicationType"),wo(this,"locationType"),wo(this,"placementOptions"),wo(this,"src"),wo(this,"alt"),wo(this,"noFollow"),wo(this,"noIndex"),wo(this,"target"),wo(this,"ordBannerMark"),wo(this,"bannerSelections"),wo(this,"promoText"),wo(this,"promoTextLines"),wo(this,"owner"),wo(this,"statisticFields"),wo(this,"absoluteUrl"),wo(this,"absoluteUrlPb"),wo(this,"link"),wo(this,"pixelSrc"),wo(this,"htmlSrc"),wo(this,"htmlData"),wo(this,"isVideo",!1),wo(this,"isHtml5",!1),wo(this,"bannerClass"),wo(this,"loadTime"),wo(this,"iframeId"),wo(this,"line"),wo(this,"type"),wo(this,"urlParams"),wo(this,"logs"),this.id=null!=(s=null!=(r=null!=(n=e.UID)?n:e.uID)?r:e.uid)?s:"",this.href=null!=(o=null!=(i=e.Href)?i:e.href)?o:"",this.applicationType=null!=(l=null!=(a=e.ApplicationType)?a:e.applicationType)?l:0,this.locationType=null!=(u=null!=(c=e.LocationType)?c:e.locationType)?u:0,this.placementOptions={sort:null!=(m=null!=(h=null==(d=e.PlacementOptions)?void 0:d.Sort)?h:null==(p=e.placementOptions)?void 0:p.sort)?m:0,menuID:null!=(y=null!=(b=null==(g=e.PlacementOptions)?void 0:g.MenuID)?b:null==(f=e.placementOptions)?void 0:f.menuID)?y:0},this.src=null!=(w=null!=(v=e.Src)?v:e.src)?w:"",this.alt=null!=(_=null!=(S=e.Alt)?S:e.alt)?_:"",this.noFollow=null==(C=null!=(I=e.NoFollow)?I:e.noFollow)||C,this.noIndex=null==(P=null!=(k=e.NoIndex)?k:e.noIndex)||P,this.ordBannerMark=null!=(T=null!=(E=e.OrdBannerMark)?E:e.ordBannerMark)?T:"";const Y=null!=(O=e.AdditionalSections)?O:e.additionalSections,Q=e.Type&&"external_link"!==e.Type?"_self":"";this.target=null!=(A=null!=(M=null!=(x=e.Target)?x:e.target)?M:Q)?A:"",this.bannerSelections=null!=(R=null==Y?void 0:Y.map(e=>new To(e)))?R:[],this.promoText=null!=(L=null!=(D=e.PromoText)?D:e.promoText)?L:"",this.promoTextLines=null!=($=null!=(B=e.PromoTextLines)?B:e.promoTextLines)?$:[],this.owner=null!=(j=null!=(N=e.Provider)?N:e.provider)?j:0,this.statisticFields=new Oo(e),this.absoluteUrl=this.getAbsoluteUrl(!1),this.absoluteUrlPb=this.getAbsoluteUrl(!0),this.link=this.getLink(),this.pixelSrc=null!=(U=null!=(F=e.PixelSrc)?F:e.pixelSrc)?U:"",this.bannerClass=this._getMainBannerClass(e)||this._getTrendBannerClass(e),this.loadTime=t,this.line=null!=(W=e.Line)?W:0,this.type=null!=(H=e.Type)?H:"",this.urlParams=null!=(V=null==e?void 0:e.URLParams)?V:{},this.logs=null!=(z=null==e?void 0:e.logs)?z:"";const X=null!=(K=null!=(q=e.HtmlSrc)?q:e.htmlSrc)?K:null,Z=null!=(J=null!=(G=e.HtmlData)?G:e.htmlData)?J:null;X&&Z&&(this.isVideo=!!Z.xml,this.isHtml5=!this.isVideo,this.htmlSrc=X,this.htmlData=Z)}getLink(){if(0===this.href.indexOf("https:"))return new URL(this.href).href;const e=new URL(this.href,window.location.toString());return e.searchParams.append("bid",this.id),`${e.pathname}${e.search}`}getAbsoluteUrl(e){return-1!==this.src.toLowerCase().indexOf("wildberries")?this.src:(0,u.urlStaticBasket)(`crm-bnrs${this.src}`,1,e)}_getMainBannerClass(e){if(this.locationType===yo.i.locationType.newMainBanners)return this.applicationType===yo.i.appType.mobile?So:void 0!==e.htmlSrc&&e.htmlData&&e.htmlData.xml?_o:Io}_getTrendBannerClass(e){if(this.locationType===yo.i.locationType.trendBanners)return this.applicationType===yo.i.appType.mobile?Co:void 0!==e.htmlSrc&&e.htmlData&&e.htmlData.xml?ko:Po}}class To{constructor(e){var t,n,r,s,i,o,a,l,c,u;wo(this,"href"),wo(this,"relativeXPos"),wo(this,"relativeYPos"),wo(this,"relativeHeight"),wo(this,"relativeWidth"),this.href=null!=(n=null!=(t=e.Href)?t:e.href)?n:"",this.relativeXPos=null!=(s=null!=(r=e.RelativeXPos)?r:e.relativeXPos)?s:1,this.relativeYPos=null!=(o=null!=(i=e.RelativeYPos)?i:e.relativeYPos)?o:1,this.relativeHeight=null!=(l=null!=(a=e.RelativeHeight)?a:e.relativeHeight)?l:1,this.relativeWidth=null!=(u=null!=(c=e.RelativeWidth)?c:e.relativeWidth)?u:1}}class Oo{constructor(e){var t,n,r,s,i,o,a,l,c,u;wo(this,"urlType"),wo(this,"displayType"),wo(this,"locationType"),wo(this,"sort"),this.urlType=null!=(n=null!=(t=e.URLType)?t:e.uRLType)?n:0,this.displayType=null!=(s=null!=(r=e.DisplayType)?r:e.displayType)?s:0,this.locationType=null!=(o=null!=(i=e.LocationType)?i:e.locationType)?o:0,this.sort=null!=(u=null!=(c=null==(a=e.PlacementOptions)?void 0:a.Sort)?c:null==(l=e.placementOptions)?void 0:l.sort)?u:0}}const xo="360x200",Mo="532x300",Ao="736x300",Ro="360x150",Do="1600x150",Lo="480x169",Bo="360x200",$o="736x300";class No{static createAdvPlaceholder(e,t,n){const r=(new Date).format("yyyy-MM-dd HH:mm:ss"),s=new Eo({applicationType:e?yo.i.appType.mobile:yo.i.appType.desktop,locationType:t,href:"/promotions",target:"_self"},r);return s.absoluteUrl=(0,u.urlSiteStatic)(`i/placeholderBanners/banner_${n}.webp`),t===yo.i.locationType.trendBanners&&(s.link=""),s}static createHomePlaceholder(e){const t="mobile"===e,n="video"===e,r=(new Date).format("yyyy-MM-dd HH:mm:ss"),s=new Eo({applicationType:"mobile"===e?yo.i.appType.mobile:yo.i.appType.desktop,locationType:yo.i.locationType.newMainBanners,href:"/promotions",target:"_self",htmlSrc:n?"":void 0,htmlData:n?{xml:"xml"}:void 0},r),i=t?xo:n?Mo:Ao;return s.absoluteUrl=(0,u.urlSiteStatic)(`i/placeholderBanners/banner_${i}.webp`),s}}var jo=Object.defineProperty,Fo=(e,t,n)=>((e,t,n)=>t in e?jo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);const{BANNERS_URL:Uo}=l.A;var Wo=class{constructor(e){Fo(this,"publicUrlStage"),Fo(this,"searchBannersUrl"),Fo(this,"publicUrl"),Fo(this,"helper"),this.publicUrlStage="http://banners-ingress-controller.banners.k8s.stage-dm/public/v2/banners",this.searchBannersUrl="https://banners.wb.ru/banners/search",this.publicUrl=Uo,this.helper=e}async getBannersFromApi(e){var t;const n=null!=(t=e.appType)?t:this.getAppType();let r=await this._getBannersFromApi(e.urlType,n,e.menuId,e.brandId,e.useStage,e.query,e.scale);const s=(new Date).format("yyyy-MM-dd HH:mm:ss");return r=r.filter(e=>null!=e).map(e=>this.helper.convertToBannerItem(e,s)),r.sort((e,t)=>{var n,r;return(null!=(n=e.placementOptions.sort)?n:0)-(null!=(r=t.placementOptions.sort)?r:0)}),r}async _getBannersFromApi(e,t,n,r,s,i,o){var a,l,c;let u=await WbSpaModel.prototype.$user.getLocationData();const d=WbSpaModel.prototype.$user.getUserInfo(),p=this.getDisplayType(d),h=this.getCountry(),m=Bn._.getLangForServices(),g=yo.i.langs[m]||m,f=new URLSearchParams({urltype:e,apptype:t,displaytype:p,longitude:u.longitude,latitude:u.latitude,country:h,culture:g});WbSpaModel.prototype.$analitic.appendSplitInfoV2(f,"banner"),n&&f.append("menuid",String(n)),r&&f.append("brandId",String(r)),o&&f.append("scale",o),i&&f.append("query",i);const b=`${s?this.publicUrlStage:i?this.searchBannersUrl:this.publicUrl}?${new URLSearchParams(f)}`;let y=await WbSpaModel.prototype.$httpClient.fetchJSON(b,{},{timeout:1e4,nullOnError:!0,addAuthHeader:!0});if(y&&(null==(a=y.data)?void 0:a.banners)&&(null==(c=null==(l=y.data)?void 0:l.banners)?void 0:c.length)&&(y=y.data.banners),y&&(null==y?void 0:y.length)||(y=await this.getDefaultBannersFromStatic(e,t,n)),y&&WbSpaModel.prototype.$apiSupport.webpImage)for(const e of y)e.Src&&(e.Src=e.Src.replace(".jpg",".webp")),e.src&&(e.src=e.src.replace(".jpg",".webp"));return(null==y?void 0:y.length)>0?y:[]}async getDefaultBannersFromStatic(e,t,n){const r=this.getBannersTypeForStatic(e);if(!r)return null;const s="global"===wb.settings.currentLocale?"ru":wb.settings.currentLocale,i=n?`banners-${r}-${s}-${n}-v1.json`:`banners-${r}-${s}-v1.json`;try{let n=await WbSpaModel.prototype.$httpClient.fetchStatic(i,{timeout:3e3});return t===yo.i.appType.desktop?n=null==n?void 0:n.filter(e=>e.applicationType===yo.i.appType.desktop||225===e.applicationType||227===e.applicationType):t===yo.i.appType.mobile&&(n=null==n?void 0:n.filter(e=>e.applicationType===yo.i.appType.mobile||227===e.applicationType)),e===yo.i.urlType.promotion&&t===yo.i.appType.desktop&&(null==n||n.forEach(e=>{e.src=this.helper.createBannerPathByResolution(e.src,"c660x210")})),n}catch(e){return null}}getBannersTypeForStatic(e){switch(e){case yo.i.urlType.main:return"main";case yo.i.urlType.promotion:return"promo";case yo.i.urlType.cataloger:return"catalog"}}getAppType(){return"d"===wb.settings.displayMode?yo.i.appType.desktop:yo.i.appType.mobile}getDisplayType(e){return e.isAuth?yo.i.bannerDisplayType.forAuth:yo.i.bannerDisplayType.forNotAuth}getCountry(){var e;return 1<<(null!=(e=yo.i.country[WbSpaModel.prototype.$user.getLocale()])?e:0)-1}},Ho=Object.defineProperty,Vo=(e,t,n)=>((e,t,n)=>t in e?Ho(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class zo{constructor(e,t,n,r,s,i,o){Vo(this,"urlType"),Vo(this,"appType"),Vo(this,"menuId"),Vo(this,"brandId"),Vo(this,"useStage"),Vo(this,"query"),Vo(this,"scale"),this.urlType=e,this.menuId=n,this.brandId=r,this.appType=t,this.useStage=s,this.query=i,this.scale=o}}var qo=class{constructor(e){Vo(this,"helper"),Vo(this,"api"),Vo(this,"menuIdEnum"),this.helper=e,this.api=new Wo(this.helper)}async getBannersForHomePageAsync(){const e=await this.api.getBannersFromApi(new zo(yo.i.urlType.main,yo.i.appType.desktopAndMobile)),t=[yo.i.locationType._215x168,yo.i.locationType._705x394,yo.i.locationType._460x394,yo.i.locationType._364x668],n=[],r=[];let s=[],i=[];const o=[],a=[],l=[],c=[];let u=[];if(null==e||e.forEach(e=>{if("wb travel"===e.alt){if(!WbSpaModel.prototype.$isTravelEnabled())return}e.locationType===yo.i.locationType._1440x168?e.applicationType===yo.i.appType.desktop?n.push(e):e.applicationType===yo.i.appType.mobile&&s.push(e):e.locationType===yo.i.locationType.newMainBanners?e.applicationType===yo.i.appType.desktop?r.push(e):e.applicationType===yo.i.appType.mobile&&i.push(e):e.locationType===yo.i.locationType.mainInfo?e.applicationType===yo.i.appType.desktop?a.push(e):e.applicationType===yo.i.appType.mobile&&l.push(e):-1!==t.indexOf(e.locationType)?o.push(e):e.locationType===yo.i.locationType.footerSocial&&(e.applicationType===yo.i.appType.desktop?c.push(e):e.applicationType===yo.i.appType.mobile&&u.push(e))}),s.length||(s=n),i.length){const e=No.createHomePlaceholder("mobile");for(;i.length<3;)i.push(e)}if(r.length){const e=No.createHomePlaceholder("static");for(;r.length<3;)r.push(e)}return u.length||(u=c),{mainBanners:n,newMainBanners:r,mainMobileBanners:s,newMainMobileBanners:i,contentBanners:o,mainInfoBanners:a,mainInfoMobileBanners:l,footerBanners:c,footerMobileBanners:u}}getPromoBanners(){return this.getPromotionBanners()}async getPromotionBanners(){const e=(await this.api.getBannersFromApi(new zo(yo.i.urlType.promotion,yo.i.appType.desktop))).filter(e=>e.locationType===yo.i.locationType._770x245);return this.helper.dividePromotionBanners(e)}async getPromoCatalogBanners(e,t=!1){return(await this.api.getBannersFromApi(new zo(yo.i.urlType.promotionCatalog,t?yo.i.appType.mobile:yo.i.appType.desktop,e))).filter(e=>e.locationType===yo.i.locationType.promo_strip)}async getPromotionSpecialBanners(){const e=await this.api.getBannersFromApi(new zo(yo.i.urlType.promotionCatalog,yo.i.appType.desktopAndMobile)),t={mobileBanners:[],desktopBanners:[]},n={mobileBanners:[],desktopBanners:[]},r={mobileBanners:[],desktopBanners:[]},s={mobileBanners:[],desktopBanners:[]};return e.forEach(e=>{e.locationType===yo.i.locationType.promo_strip?e.applicationType===yo.i.appType.desktop?t.desktopBanners.push(e):e.applicationType===yo.i.appType.mobile&&t.mobileBanners.push(e):e.locationType===yo.i.locationType.special_promo?e.applicationType===yo.i.appType.desktop?n.desktopBanners.push(e):e.applicationType===yo.i.appType.mobile&&n.mobileBanners.push(e):e.locationType===yo.i.locationType.newPromoBanners?e.applicationType===yo.i.appType.desktop?r.desktopBanners.push(e):e.applicationType===yo.i.appType.mobile&&r.mobileBanners.push(e):e.locationType===yo.i.locationType.newBottomPromoBanners&&(e.applicationType===yo.i.appType.desktop?s.desktopBanners.push(e):e.applicationType===yo.i.appType.mobile&&s.mobileBanners.push(e))}),[r,s].forEach(({mobileBanners:e,desktopBanners:t})=>{if(e.length){const t=No.createAdvPlaceholder(!0,e[0].locationType,Ro);for(;e.length<3;)e.push(t)}if(t.length){const e=No.createAdvPlaceholder(!1,t[0].locationType,Do);for(;t.length<3;)t.push(e)}}),{topBannersList:t,bottomBannersList:n,newTopBannersList:r,newBottomBannersList:s}}async getPromotionLandingBanners(e){const t=e?await this.api.getBannersFromApi(new zo(yo.i.urlType.promotionLanding,yo.i.appType.desktopAndMobile,void 0,void 0,e)):await this.api.getBannersFromApi(new zo(yo.i.urlType.promotionLanding,yo.i.appType.desktopAndMobile)),n=[],r=[],s=[];if(t.forEach(e=>{e.locationType===yo.i.locationType.promo_landing_92&&n.push(e),e.locationType===yo.i.locationType.promo_landing_93&&r.push(e),e.locationType===yo.i.locationType.promo_landing_94&&s.push(e)}),3===r.length){const e=No.createAdvPlaceholder(!1,yo.i.locationType.promo_landing_93,Lo);r.push(e)}return{topBannersList:n,middleBannersList:r,bottomBannersList:s}}async getAdvBanners(){const e=await this.api.getBannersFromApi(new zo(yo.i.urlType.advBanner,yo.i.appType.desktopAndMobile)),t={mobileBanners:[],desktopBanners:[]},n={mobileBanners:[],desktopBanners:[]},r={mobileBanners:[],desktopBanners:[]},s={mobileBanners:[],desktopBanners:[]};return e.forEach(e=>{e.locationType===yo.i.locationType.searchBanners?e.applicationType===yo.i.appType.mobile?t.mobileBanners.push(e):e.applicationType===yo.i.appType.desktop&&t.desktopBanners.push(e):e.locationType===yo.i.locationType.lkBanners?e.applicationType===yo.i.appType.mobile?n.mobileBanners.push(e):e.applicationType===yo.i.appType.desktop&&n.desktopBanners.push(e):e.locationType===yo.i.locationType.deliveryBanners?e.applicationType===yo.i.appType.mobile?r.mobileBanners.push(e):e.applicationType===yo.i.appType.desktop&&r.desktopBanners.push(e):e.locationType===yo.i.locationType.thxForOrderBanners&&(e.applicationType===yo.i.appType.mobile?s.mobileBanners.push(e):e.applicationType===yo.i.appType.desktop&&s.desktopBanners.push(e))}),[t,n,r,s].forEach(({mobileBanners:e,desktopBanners:t})=>{if(e.length){const t=No.createAdvPlaceholder(!0,e[0].locationType,Ro);for(;e.length<3;)e.push(t)}if(t.length){const e=No.createAdvPlaceholder(!1,t[0].locationType,Do);for(;t.length<3;)t.push(e)}}),{searchBanners:t,lkBanners:n,deliveryBanners:r,thxForOrderBanners:s}}async getTopMenuBanners(){const e=await this.api.getBannersFromApi(new zo(yo.i.urlType.default,yo.i.appType.desktop)),t=this.menuSingleBanners(e),n=await this.getMenuPromotionBanners(),r=t;return(null==n?void 0:n.length)>0&&(r[2192]=n),r}menuSingleBanners(e){return e.reduce((e,t)=>{var n;if(t.locationType!==yo.i.locationType.menu_banners)return e;const r=null!=(n=t.placementOptions.menuID)?n:0;return e.hasOwnProperty(r)||(e[r]=[]),e[r].push(t),e},{})}async getMenuPromotionBanners(){const e=await this.getPromotionBanners(),t=e.leftBanners.slice(0,5).concat(e.rightBanners.slice(0,5));return null==t||t.forEach(e=>{e.src=this.helper.createBannerPathByResolution(e.src,"t305x245q"),e.absoluteUrl=e.getAbsoluteUrl(),e.absoluteUrlPb=e.getAbsoluteUrl(!0)}),t}async getCatalogBanners(e,t,n=!1){var r,s;this.menuIdEnum||(this.menuIdEnum=t);const i=await this.api.getBannersFromApi(new zo(yo.i.urlType.cataloger,yo.i.appType.desktop,e)),o=this.getBannersForCatalog(i,e);let a=o.firstCarousel,l=o.secondCarousel;if(n){const t=await this.api.getBannersFromApi(new zo(yo.i.urlType.cataloger,yo.i.appType.mobile,e)),n=this.getCatalogBigBanners(t);a=(null==(r=n.firstCarousel)?void 0:r.length)>0?n.firstCarousel:o.firstCarousel,l=(null==(s=n.secondCarousel)?void 0:s.length)>0?n.secondCarousel:o.secondCarousel}return{mainBannersFirst:a,mainBannersSecond:l,verticalBanners:o.verticalBanners,smallBanners:o.commonBanners,seasonBanners:o.seasonBanners}}getBannersForCatalog(e,t){if(!e)return[];const{firstCarousel:n,secondCarousel:r}=this.getCatalogBigBanners(e),s=this.getCatalogVerticalBanners(e),i=e.filter(e=>e.locationType===yo.i.locationType.small);return{firstCarousel:n,secondCarousel:r,verticalBanners:s,commonBanners:this.getCommonBanners(i,t),seasonBanners:this.getSeasonBanners(i,t)}}getCommonBanners(e,t){const n=this.getCatalogBannersSortParams(t,!0);return this.helper.getBannersBySort(e,n).reduce((e,t)=>{const n=t.placementOptions.sort;return e[n]=[...e[n]||[],t],e},{})}getSeasonBanners(e,t){const n=this.getCatalogBannersSortParams(t);return this.helper.getBannersBySort(e,n)}getCatalogVerticalBanners(e){const t=e.filter(e=>e.locationType===yo.i.locationType.vertical);return t.reduce((e,t)=>{const n=t.placementOptions.sort;return e[n]=[...e[n]||[],t],e},{})}getCatalogBigBanners(e){const t=e.filter(e=>e.locationType===yo.i.locationType.big),n=[],r=[];return t.forEach(e=>{e.placementOptions.sort<100&&n.push(e),e.placementOptions.sort>100&&e.placementOptions.sort<110&&r.push(e)}),{firstCarousel:n,secondCarousel:r}}getCatalogBannersSortParams(e,t){const n={onlyMarketingSortStart:null,onlyMarketingSortEnd:null,suppliersSortStart:null,suppliersSortCount:null},r=[this.menuIdEnum.sport,this.menuIdEnum.monocity];return t?-1!==r.indexOf(e)?(n.suppliersSortStart=0,n.suppliersSortCount=3):(n.onlyMarketingSortStart=0,n.onlyMarketingSortEnd=100,n.suppliersSortStart=100,n.suppliersSortCount=3):(n.onlyMarketingSortStart=50,n.onlyMarketingSortEnd=99),n}async getSearchCatalogBanners(e,t){const n="phone"===wb.settings.displayType?yo.i.appType.mobile:yo.i.appType.desktop,r=await this.api.getBannersFromApi(new zo(null,n,null,null,null,e,t));for(let e=0;e<r.length;e++)r[e].line=r[e].line+1+e;return{searchCatalogBanners:r}}async getTrendBanners(){const e=await this.api.getBannersFromApi(new zo(yo.i.urlType.trendBanners,yo.i.appType.desktopAndMobile)),t={mobileBanners:[],desktopBanners:[]};if(e.forEach(e=>{e.locationType===yo.i.locationType.trendBanners&&(e.link+="&isTrend=true",e.applicationType===yo.i.appType.mobile?t.mobileBanners.push(e):e.applicationType===yo.i.appType.desktop&&t.desktopBanners.push(e))}),t.mobileBanners.length){const e=No.createAdvPlaceholder(!0,yo.i.locationType.trendBanners,Bo);for(;t.mobileBanners.length<3;)t.mobileBanners.push(e)}if(t.desktopBanners.length){const e=No.createAdvPlaceholder(!1,yo.i.locationType.trendBanners,$o);for(;t.desktopBanners.length<3;)t.desktopBanners.push(e)}return{trendBanners:t}}},Ko=Object.defineProperty,Go=(e,t,n)=>((e,t,n)=>t in e?Ko(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);var Jo=class{constructor(){Go(this,"fillingGapsSortStart"),this.fillingGapsSortStart=300}convertToBannerItem(e,t){return new Eo(e,t)}createBannerPathByResolution(e,t){const n=t,r=e.split("/").slice(-1),s=Bn._.getLangForServices();return`/poster/${yo.i.langs[s]||s}/action2/${n}/${r}`}dividePromotionBanners(e){const t=this.getBannersSoldToSuppliers(e,100,20),n=null==e?void 0:e.filter(e=>e.owner===yo.i.ownerType.marketing),r=n.filter(e=>e.placementOptions.sort<100);let{leftBanners:s=[],rightBanners:i=[]}=this.createTwoSidesWithTheSameSize(n,r,t);return s=s.map(e=>e),i=i.map(e=>e),{leftBanners:s,rightBanners:i}}getBannersBySort(e,t){const n=e.filter(e=>e.owner===yo.i.ownerType.marketing&&e.placementOptions.sort>t.onlyMarketingSortStart&&e.placementOptions.sort<t.onlyMarketingSortEnd),r=this.getBannersSoldToSuppliers(e,t.suppliersSortStart,t.suppliersSortCount);return n.concat(r)}getBannersSoldToSuppliers(e,t,n){if(!WbSpaModel.prototype.$helper.isNumber(t)||!n)return[];const r=e.filter(e=>e.owner===yo.i.ownerType.supplier),s=e.filter(e=>e.owner===yo.i.ownerType.marketing&&e.placementOptions.sort>200&&e.placementOptions.sort<this.fillingGapsSortStart).reduce((e,t)=>{const n=t.placementOptions.sort;return e.set(n,[...e.get(n)||[],t])},new Map),i=r.reduce((e,t)=>e.add(t.placementOptions.sort),new Set);for(let e=1;e<=n;e++){const n=t+e;if(!i.has(n)){const t=s.get(200+e);if((null==t?void 0:t.length)>0){const e=t[0];e.placementOptions.sort=n,r.push(e)}}}return r}createTwoSidesWithTheSameSize(e,t,n){const r=e.filter(e=>e.placementOptions.sort>=this.fillingGapsSortStart);if(0===r.length)return n;const s=Math.max(t.length,n.length);return this.fillGapsIfNeeded(t,s,r),this.fillGapsIfNeeded(n,s,r),{leftBanners:t,rightBanners:n}}fillGapsIfNeeded(e,t,n){let r=t-e.length;for(;r>0&&n.length>0;){{const t=n[0];n.splice(0,1),e.push(t)}r--}e.sort((e,t)=>e.placementOptions.sort-t.placementOptions.sort)}},Yo=Object.defineProperty,Qo=(e,t,n)=>((e,t,n)=>t in e?Yo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);const Xo="home-banners-cache-new",Zo="menu-banners-cache-v2",ea="main-catalog-banners-cache",ta="promotions-banners-cache",na="footer-banners-cache",ra="promotion-special-banners-cache",sa="promotion-landing-banners-cache",ia=3e5;var oa=class{constructor(){Qo(this,"cacheVers"),WbSpaModel.prototype.$eventBus.addEventListener("GeoUpdated",()=>this.refreshCache()),this.cacheVers=5}get bannersCacheType(){return{main:1,menu:2,catalog:3,promotion:4,promotionCatalog:5,footer:6,promotionSpecial:7,promotionLanding:8,advBanners:9,trendBanners:10}}async getCachedResultsWithCacheInfo(e,t,n,r){return await this.getCachedResults(e,t,n,r,!0)}async getCachedResults(e,t,n,r,s,i=""){const o=WbSpaModel.prototype.$user.getUserInfo().uid,a=this.getCacheKey(e,i);if(!a)return Promise.resolve(null);r||(r=1);const l=await this.getCachedResultsWithLock(e,this.addLocaleToCacheKey(a),t,o,n,r);return s?l:null==l?void 0:l.result}async getCachedResultsWithLock(e,t,n,r,s,i){const o=this.tryGetCachedData(t,r),a=this.getResultsFromCachedData(o,s,i);return a?{result:a,fromCache:!0}:navigator.locks.request(`lock-${t}`,async e=>{const o=this.tryGetCachedData(t,r),a=this.getResultsFromCachedData(o,s,i);if(a)return{result:a,fromCache:!0};const l=await n();if(!l)return null;if(this.checkBannersExist(l)){const e=this.toCacheResult(r,s,i,o,l);localStorage.putObject(t,e)}return{result:l,fromCache:!1}})}tryGetCachedData(e,t){const n=localStorage.getObject(e);return n&&this.cacheVers===n.version&&n.userId===t?n:null}getResultsFromCachedData(e,t,n){var r;const s=this.getDisplayName(t),i=null==(r=null==e?void 0:e[s])?void 0:r[n];return!i||Date.now()-i.updateTs>ia?null:i.data}toCacheResult(e,t,n,r,s){r||(r={}),r.version=this.cacheVers,r.userId=e,r.desktop=this.getCleanedCachedData(r.desktop),r.mobile=this.getCleanedCachedData(r.mobile);return r[this.getDisplayName(t)][n]={updateTs:Date.now(),data:s},r}checkBannersExist(e){let t=!1;if(Array.isArray(e))return!0;for(let n in e){const r=e[n];if(r&&(Array.isArray(r)?t=r.length>0:"object"==typeof r&&(t=this.checkBannersExist(r)),t))break}return t}getCleanedCachedData(e){const t={};for(let n in null!=e?e:{})!n||Date.now()-e[n].updateTs>ia||(t[n]=e[n]);return t}getDisplayName(e){return e?"mobile":"desktop"}addLocaleToCacheKey(e){return"ru"===wb.currentLanguage?e:`${e}-${wb.currentLanguage}`}getCacheKey(e,t=""){switch(e){case this.bannersCacheType.main:return Xo;case this.bannersCacheType.menu:return Zo;case this.bannersCacheType.catalog:return ea;case this.bannersCacheType.promotion:return ta;case this.bannersCacheType.promotionCatalog:return"promotions-catalog-banners-cache";case this.bannersCacheType.footer:return na;case this.bannersCacheType.promotionSpecial:return ra;case this.bannersCacheType.promotionLanding:return sa;case this.bannersCacheType.advBanners:return"adv-banners-cache";case this.bannersCacheType.trendBanners:return"trend-banners-cache";case this.bannersCacheType.searchCatalog:return this.getSearchCatalogCacheKey(t);default:return null}}getSearchCatalogCacheKey(e){return`search-catalog-banners-cache-${e}`}refreshCache(){[Xo,Zo,ea,ta,na,ra,sa].forEach(e=>{localStorage.removeItem(this.addLocaleToCacheKey(e))})}},aa=Object.defineProperty,la=(e,t,n)=>((e,t,n)=>t in e?aa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class ca{constructor(){la(this,"cache"),la(this,"service"),la(this,"menuIdEnum");const e=new Jo;this.service=new qo(e),this.cache=new oa}async getBannersForHomePageAsync(){return(await this.cache.getCachedResultsWithCacheInfo(this.cache.bannersCacheType.main,()=>this.service.getBannersForHomePageAsync())).result}async getBannersForFooterAsync(){var e,t;const n=await this.getBannersForHomePageAsync(),r=null!=(e=null==n?void 0:n.footerBanners)?e:[];return{desktopBanners:r,mobileBanners:(null==(t=null==n?void 0:n.footerMobileBanners)?void 0:t.length)?null==n?void 0:n.footerMobileBanners:r}}async getMenuBanners(){return await this.cache.getCachedResults(this.cache.bannersCacheType.menu,()=>this.service.getTopMenuBanners())}async getCatalogBanners(e,t){this.menuIdEnum||(this.menuIdEnum=t);const n="m"===wb.settings.displayMode;return await this.cache.getCachedResults(this.cache.bannersCacheType.catalog,()=>this.service.getCatalogBanners(e,this.menuIdEnum,n),n,e)}async getPromoBanners(){return await this.cache.getCachedResults(this.cache.bannersCacheType.promotion,()=>this.service.getPromoBanners())}async getTrendBanners(){return await this.cache.getCachedResults(this.cache.bannersCacheType.trendBanners,()=>this.service.getTrendBanners())}async getPromoCatalogBanners(e,t){return await this.cache.getCachedResults(this.cache.bannersCacheType.promotionCatalog,()=>this.service.getPromoCatalogBanners(t,e),e,t)}async getPromotionSpecialBanners(){return await this.cache.getCachedResults(this.cache.bannersCacheType.promotionSpecial,()=>this.service.getPromotionSpecialBanners())}async getPromotionLandingBanners(e){return await this.cache.getCachedResults(this.cache.bannersCacheType.promotionLanding,()=>this.service.getPromotionLandingBanners(e))}async getAdvBanners(e){const t=await this.cache.getCachedResults(this.cache.bannersCacheType.advBanners,()=>this.service.getAdvBanners());switch(e){case yo.i.locationType.searchBanners:return t.searchBanners;case yo.i.locationType.lkBanners:return t.lkBanners;case yo.i.locationType.deliveryBanners:return t.deliveryBanners;case yo.i.locationType.thxForOrderBanners:return t.thxForOrderBanners;default:return null}}async getSearchCatalogBanners(e,t){const n="phone"===wb.settings.displayType?"mobile-"+e:"desktop-"+e;return await this.cache.getCachedResults(this.cache.bannersCacheType.searchCatalog,()=>this.service.getSearchCatalogBanners(e,t),null,null,null,n)}static richPrototype({prototype:e}){Object.setPrototypeOf(ca.prototype,e)}static factory(e){return e&&ca.richPrototype(e),new ca}}var ua=ca,da=Object.defineProperty,pa=Object.defineProperties,ha=Object.getOwnPropertyDescriptors,ma=Object.getOwnPropertySymbols,ga=Object.prototype.hasOwnProperty,fa=Object.prototype.propertyIsEnumerable,ba=(e,t,n)=>t in e?da(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ya=(e,t)=>{for(var n in t||(t={}))ga.call(t,n)&&ba(e,n,t[n]);if(ma)for(var n of ma(t))fa.call(t,n)&&ba(e,n,t[n]);return e},va=(e,t,n)=>ba(e,"symbol"!=typeof t?t+"":t,n);const wa=24,Sa=50,_a=37,Ia=0,Ca=-1,ka="route-mapping",Pa="user-storage-01.wb.ru",Ea={1:Pa};class Ta{constructor(){va(this,"auth"),va(this,"routeMapping");const e=(0,y.c)();this.auth=e;const t=this.getRouteMapping();this.isExpiredRouteMapping(null==t?void 0:t.timestamp)&&this.getRouteMappingAsync().then(e=>{e===Ea||this.setRouteMapping(e)})}async fetch(e,t,n){const r=(0,C.getHttpClient)(),s=n||await this.userStorageHost(this.auth.shard);return r.fetch(`${s}${e}`,ya({withJwtToken:!0,withAuthz:!0},t)).then(e=>e.json())}async get(e,t,n,r){var s,i;try{const i=await this.fetch(e,t,r);if(i.state===Ia)return i.body;if(i.state===Ca&&i.reason===wa)return[];if(i.state===Ca&&i.reason===Sa)return(null==n?void 0:n.replaceBroken)&&(null==(s=t.paths)?void 0:s.length)?t.paths.map(e=>({path:e.path,file:"W10="})):[];if(i.state===Ca&&i.reason===_a){this.updateRouteMapping(i.location);const n=await this.fetch(e,t);if(n.state===Ia)return n.body;if(n.state===Ca&&n.reason===wa)return[]}return null}catch(s){if(!r){this.resetTimestamp();const r=await this.userStorageHost(this.auth.shard);if(!(null==(i=null==t?void 0:t.signal)?void 0:i.aborted))return await this.get(e,t,n,r);t.signal=null}return null}}getList(e,t){const n={method:"POST",body:JSON.stringify({path:e}),signal:null==t?void 0:t.signal,timeout:null==t?void 0:t.timeout};return this.get("/api/v2/list",n,t)}getData(e,t){if(!e||0===e.length)return null;const n={method:"POST",body:JSON.stringify(e),signal:null==t?void 0:t.signal,paths:e};return this.get("/api/v2/data/get",n,t)}async setData(e){try{const t={method:"POST",body:JSON.stringify(e)},n=await this.fetch("/api/v2/data/set",t);if(n.state===Ia)return{success:!0};if(n.state===Ca&&n.reason===_a){this.updateRouteMapping(n.location);const e=await this.fetch("/api/v2/data/set",t);return e.state===Ia?{success:!0}:{success:!1,error:new Error(`error - ${e}`)}}return{success:!1,error:new Error(`error - ${n}`)}}catch(e){return{success:!1,error:e}}}getRouteMapping(){try{const e=localStorage.getItem(ka);return e?JSON.parse(e):this.routeMapping?this.routeMapping:Ea}catch(e){return Ea}}resetTimestamp(){const e=this.getRouteMapping();e.timestamp=null,localStorage.setItem(ka,JSON.stringify(e))}updateRouteMapping(e){const t=this.getRouteMapping(),n=((e,t)=>pa(e,ha(t)))(ya({},t),{[this.auth.shard]:e});this.setRouteMapping(n)}setRouteMapping(e){this.routeMapping=e,this.routeMapping.timestamp=Date.now(),localStorage.setItem(ka,JSON.stringify(e))}async userStorageHost(e){return`https://${(await this.getRouteMappingAsync())[e]||Pa}`}async getRouteMappingAsync(){const e=this.getRouteMapping(),t=(0,C.getHttpClient)();if(!this.isExpiredRouteMapping(null==e?void 0:e.timestamp))return e;const n=`https://${Pa}`;try{const e=await t.fetch(`${n}/api/v3/routes`),{payload:r}=await e.json();return this.setRouteMapping(r),r}catch(e){return console.log("Could not get routeMappin from api/v3/routes"),Ea}}isExpiredRouteMapping(e){if(!e)return!0;return Date.now()-e>=864e5}static richPrototype({prototype:e}){Object.setPrototypeOf(Ta.prototype,e)}static factory(e){return e&&Ta.richPrototype(e),new Ta}}var Oa=Ta,xa=Object.defineProperty,Ma=(e,t,n)=>((e,t,n)=>t in e?xa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);const Aa="wbx__sessionID";class Ra{constructor(){Ma(this,"session"),this.session=localStorage.getItem(Aa),window.addEventListener("storage",e=>{e.key===Aa&&(this.session=localStorage.getItem(Aa),this.syncSentryTag())}),this.syncSentryTag()}syncSentryTag(){const e=this.getSession();k.s.setTag("device_id",e)}getSession(){return this.session||(this.session=localStorage.getItem(Aa),this.session||(this.session=`site_${wb.helpers.generateGuid()}`,localStorage.setItem(Aa,this.session))),this.session}static richPrototype({prototype:e}){Object.setPrototypeOf(Ra.prototype,e)}static factory(e){return e&&Ra.richPrototype(e),new Ra}}var Da=Ra,La=Object.defineProperty,Ba=(e,t,n)=>((e,t,n)=>t in e?La(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);const $a="[RETRY FETCH SERVICE]";class Na{constructor(){Ba(this,"sendQueue"),Ba(this,"storage"),Ba(this,"dbPromise");const e=(0,s.MH)();this.sendQueue="queue",this.storage=e,this.storage.supportIndexedDb()?setInterval(()=>this.sendJobChecker.call(this),1e4):this.dbPromise=Promise.reject()}saveRequest(e,t,{tryTill:n,timeout:r}={}){try{delete t.signal;const s={url:e,options:t,retryCount:1,retryTime:Date.now()};n>0&&(s.tryTill=n),r>0&&(s.timeout=r),this.openDb().then(e=>e.transaction(this.sendQueue,"readwrite").objectStore(this.sendQueue).add(s))}catch(e){wb.spa.logError(e,`${$a}: failed to save table=${this.sendQueue}`,!0)}}openDb(){return this.dbPromise||(this.dbPromise=this.storage.openDb("send-queue",{onupgradeneeded:e=>{if(!e.objectStoreNames.contains(this.sendQueue)){e.createObjectStore(this.sendQueue,{autoIncrement:!0}).createIndex("retryTime","retryTime",{unique:!1})}e.objectStoreNames.contains(this.storage.metadataTableName(this.sendQueue))||e.createObjectStore(this.storage.metadataTableName(this.sendQueue),{keyPath:"name"})},version:2})),this.dbPromise}log(e){window._debug&&console.debug(`%c${$a}: ${e}`,"color:#4B6F44")}sendJobChecker(){const e=(0,C.getHttpClient)(),t="job_in_progress",n=this.storage.metadataTableName(this.sendQueue);wb.settings.isOffline||this.openDb().then(async r=>{let s=!1;try{const i=await this.storage.get(r,n,t);i&&Date.now()>i.value&&await this.storage.removeItem(r,n,t).then(()=>this.log("lock cleared")),s=await this.storage.addItem(r,n,{name:t,value:Date.now()+3e5},!0);try{await this.storage.withCursor(r,this.sendQueue,"retryTime",async(t,n,s)=>{var i;const o=Date.now();if(this.log(`checking ${s.primaryKey} url: ${n.url}, retryCount: ${n.retryCount}, retryTime: ${n.retryTime}`),n.retryCount>10&&0<n.tryTill&&n.tryTill>o&&(n.retryCount=Math.max(2,8),n.retryTime=o-1e3),n.retryCount>10)this.storage.removeItem(r,this.sendQueue,s.primaryKey).then(()=>this.log(`cleared url: ${n.url}`));else if(n.retryTime<o){const t=s.primaryKey;try{this.log(`executing ${t} url: ${n.url}, retryCount: ${n.retryCount}, retryTime: ${n.retryTime}`);const s={timeout:n.timeout};if(await e.fetchText(n.url,wb.helpers.deepClone(n.options),s),null==(i=s.modified)?void 0:i.timeout)throw this.log(`timeout for ${t} url: ${n.url}`),new Error("service timeout");this.storage.removeItem(r,this.sendQueue,t).then(()=>this.log(`cleared ${t} url: ${n.url}`))}catch(e){n.retryTime=Date.now()+2**n.retryCount*1e3,n.retryCount++,delete n.options.signal,this.storage.updateItem(r,this.sendQueue,n,t).then(()=>this.log(`extended ${t} url: ${n.url}, retryCount: ${n.retryCount}, retryTime: ${n.retryTime}`))}}})}catch(e){console.log(e)}}catch(e){}finally{s&&this.storage.removeItem(r,n,t)}})}static richPrototype({prototype:e}){Object.setPrototypeOf(Na.prototype,e)}static factory(e){return e&&Na.richPrototype(e),new Na}}var ja=Na,Fa=Object.defineProperty,Ua=Object.getOwnPropertySymbols,Wa=Object.prototype.hasOwnProperty,Ha=Object.prototype.propertyIsEnumerable,Va=(e,t,n)=>t in e?Fa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,za=(e,t,n)=>Va(e,"symbol"!=typeof t?t+"":t,n);const qa=36e5,Ka="splitInfoV2",Ga={splitId:"no_test",title:"no_test"},Ja={default:[{key:"ab_testing",value:!1}]};class Ya{constructor(){var e;za(this,"splitInfo",Ja),za(this,"retryAttempt",0),za(this,"timerId",null),za(this,"retryTimerId",null),za(this,"isSplitterRequestSuccess",!0),za(this,"authService"),za(this,"eventBus"),za(this,"analitic"),za(this,"httpClient"),this._setSplitInfo=this._setSplitInfo.bind(this),this.authService=(0,y.c)(),this.eventBus=(0,I.J)(),this.analitic=(0,v.a)(),this.httpClient=(0,C.getHttpClient)(),this.eventBus.addEventListener("onUserAuth",()=>{this._setSplitInfo(!0)}),this.eventBus.addEventListener("onUserUnAuth",()=>{this.updateOnUnAuthorizedSplitInfoCache()});const t=this.getSplitInfoFromCache();this.splitInfo=null!=(e=null==t?void 0:t.splitInfo)?e:Ja}init(){!this.authService.isAuth&&this._setSplitInfo()}removeCountInFilters(){var e;return"no_filters_count"===(null==(e=this.splitInfo)?void 0:e.title)}getSplitInfo(){return Ga}getSplitInfoV2(e){return this.splitInfo[e]||Ja.default}appendSplitInfoV2(e,t){const n=this.getSplitInfoV2(t);n&&Array.isArray(n)&&n.forEach(t=>e.append(t.key,String(t.value)))}updSplitInfo(){null!==this.timerId&&clearTimeout(this.timerId),this.timerId=setTimeout(this._setSplitInfo,qa)}async _setSplitInfo(e){var t;const n=this.getSplitInfoFromCache();if(this.splitInfo=null!=(t=null==n?void 0:n.splitInfo)?t:Ja,!(null==n?void 0:n.skipSplitRequest)||e&&!(null==n?void 0:n.authed)){const e=await this.getSplitInfoFromService()||structuredClone(Ja);this.setSplitInfoToCache(e),this.splitInfo=e}this.isSplitterRequestSuccess?this.retryAttempt=0:this.retrySetSplitInfo(),this.analitic.sendEvent("AB_Test_Splitter_Request",this.splitInfo),this.updSplitInfo()}retrySetSplitInfo(){if(this.retryTimerId&&clearTimeout(this.retryTimerId),this.retryAttempt>7)return void(this.retryAttempt=0);this.retryAttempt++;const e=1e3*Math.pow(2,this.retryAttempt);this.retryTimerId=setTimeout(()=>{this._setSplitInfo()},e)}async getSplitInfoFromService(){var e,t;const n=wb.cookieHelper.getCookie("_wbauid");if(!n)return null;const r=null==(t=null==(e=this.authService)?void 0:e.um)?void 0:t.userUid;try{const e="https://splitter.wb.ru/v2/result",t=((e,t)=>{for(var n in t||(t={}))Wa.call(t,n)&&Va(e,n,t[n]);if(Ua)for(var n of Ua(t))Ha.call(t,n)&&Va(e,n,t[n]);return e})({"X-API-KEY":"c8ab0248-284e-4fad-a8a2-d4dd258cbd6c","X-USER-ID":n,"Site-Locale":wb.settings.currentLocale},r?{"X-CLIENT-ID":r}:{});let s=await this.httpClient.fetchJSON(e,{credentials:"omit",headers:t},{timeout:3e3,nullOnError:!0,throwErr:!0});return s&&204!==s.status?(this.isSplitterRequestSuccess=!0,this.convertToAssociativeArray(s)):(this.isSplitterRequestSuccess=!0,null)}catch(e){return this.isSplitterRequestSuccess=!1,null}}convertToAssociativeArray(e){let t={};return Array.isArray(e)&&(t=e.reduce((e,t)=>(e[t.type]=t.properties,e),{})),t}getSplitInfoFromCache(){var e;let t=localStorage.getObject(Ka);return t?(t.t=null!=(e=t.t)?e:0,Date.now()>t.t+72e5?null:{splitInfo:t.splitInfo,skipSplitRequest:!!this.isSplitterRequestSuccess&&Date.now()<=t.t+qa,authed:t.authed}):null}setSplitInfoToCache(e){Boolean(e)&&localStorage.putObject(Ka,{splitInfo:e,t:Date.now(),authed:this.authService.isAuth})}updateOnUnAuthorizedSplitInfoCache(){var e;const t=localStorage.getObject(Ka),n=null==t?void 0:t.splitInfo;Boolean(n)&&localStorage.putObject(Ka,{splitInfo:n,t:null!=(e=t.t)?e:0,authed:this.authService.isAuth})}static richPrototype({prototype:e}){Object.setPrototypeOf(Ya.prototype,e)}static factory(e){return e&&Ya.richPrototype(e),new Ya}}var Qa=Ya,Xa=Object.defineProperty,Za=(e,t,n)=>((e,t,n)=>t in e?Xa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);const{STIMULUS_API_URL:el}=l.A,tl="stimulus_list";class nl{constructor(){Za(this,"stimuliList",[]),Za(this,"_enableStimulus"),this._enableStimulus=null}init(){WbSpaModel.prototype.$eventBus.addEventListener("onUserAuth",this.loadStimuli.bind(this))}get enableStimulus(){var e,t;return!!WbSpaModel.prototype.$auth.isAuth&&(null!==this._enableStimulus||(this._enableStimulus=(null==(t=null==(e=wb.global.settings)?void 0:e.switches)?void 0:t.enableRedesignStimulusOn1ShK)||!1),this._enableStimulus)}loadStimuli(){this.stimuliList=this.getStimuliFromConfig()}getStimuliFromConfig(){var e,t,n;if(!this.enableStimulus)return[];const r=(null==(n=null==(t=null==(e=wb.global.settings)?void 0:e.mobileAppVariables)?void 0:t.objects)?void 0:n.motivationText)||{},s=[r.s1||"cashback",r.s2||"rublesPerReview",r.s3||"wholesale"],i=["s4","s5","s6","s7","s8","s9"],o=i.map(e=>r[e]||e);this._shuffleArray(o);const a=[...s,...o],l={s1:s[0],s2:s[1],s3:s[2]};i.forEach((e,t)=>{l[e]=o[t]});const c=Date.now();return localStorage.setItem(tl,JSON.stringify({stimuliMap:l,timestamp:c})),a}_shuffleArray(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}}async getStimulusFromBackend(){if(!this.enableStimulus)return[];if(this._isValidCache())return this._getStimulusFromCache();try{const e=await WbSpaModel.prototype.$httpClient.fetchJSON(el,{method:"POST",body:JSON.stringify({split_id:1})},{addContentTypeHeader:!0,addAuthHeader:!0});if((null==e?void 0:e.stimuli)&&e.stimuli.length)return this._saveToCache(e.stimuli),e.stimuli;if(null==e?void 0:e.error)return this._getStimulusFromCache()}catch(e){return wb.spa.logError(e,"[STIMULUS_SERVICE]: stimulus exception"),this._getStimulusFromCache()}return[]}_saveToCache(e){const t=Date.now(),n=`1|${e.join(",")}|${t}`;localStorage.setItem(tl,n)}_getStimulusFromCache(){const e=localStorage.getItem(tl);if(!e)return[];const[,t]=e.split("|");return t?t.split(","):[]}_isValidCache(){const e=localStorage.getItem(tl);if(!e)return!1;const[,,t]=e.split("|");return!!t&&Date.now()-Number(t)<864e5}static richPrototype({prototype:e}){Object.setPrototypeOf(nl.prototype,e)}static factory(e){return e&&nl.richPrototype(e),new nl}}var rl=nl,sl=Object.defineProperty,il=Object.getOwnPropertySymbols,ol=Object.prototype.hasOwnProperty,al=Object.prototype.propertyIsEnumerable,ll=(e,t,n)=>t in e?sl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cl=(e,t)=>{for(var n in t||(t={}))ol.call(t,n)&&ll(e,n,t[n]);if(il)for(var n of il(t))al.call(t,n)&&ll(e,n,t[n]);return e};const ul="supplier_brands",dl=864e5;class pl{get now(){return Date.now()}getSupplierBrandsMap(){try{const e=localStorage.getObject(ul);return e?this._getFreshSupplierBrandsMap(e):{}}catch(e){return{}}}_getFreshSupplierBrandsMap(e){const t={};for(const n in e)this.now-e[n].ts<dl&&(t[+n]=e[n]);return t}getBrandsFromCache(e){var t;return null==(t=this.getSupplierBrandsMap()[e])?void 0:t.brands}_shouldShowBrand(e){const t=Date.parse(e.activatedAt||"");if(isNaN(t))return!1;const n=e.deactivatedAt?Date.parse(e.deactivatedAt):null;return this.now>=t&&(null===n||this.now<n)}_updateSupplierBrandsMap(e,t){try{return e.forEach(({supplierId:e,brands:n})=>{t[e]={brands:n,ts:this.now}}),localStorage.putObject(ul,t),t}catch(e){return{}}}async getBrandsWithCachePriority(e){const t=this.getSupplierBrandsMap(),n={},r=[];if(e.forEach(e=>{t[e]?n[e]=t[e]:r.push(e)}),!r.length)return n;const s=await this._fetchSupplierBrands(r,t);return cl(cl({},n),s)}async refreshSupplierBrandsIfMissing(e){var t,n,r;const s=this.getSupplierBrandsMap();if(!(s[e]&&this.now-s[e].ts<dl))try{const i=await WbSpaModel.prototype.$services.cartService.loadStaticSupplierBrandOptions(e,{throwErr:!0}),o=null==(n=null==(t=null==i?void 0:i.options)?void 0:t.brandPromotion)?void 0:n.params,a=(null!=(r=null==o?void 0:o.flatMap(e=>e.brands||[]))?r:[]).filter(e=>this._shouldShowBrand(e));if(0===a.length)return;this._updateSupplierBrandsMap([{supplierId:e,brands:a}],s)}catch(t){t instanceof C.NotFoundError&&this._updateSupplierBrandsMap([{supplierId:e,brands:[]}],s)}}async _fetchSupplierBrands(e,t){const n=e.map(e=>WbSpaModel.prototype.$services.cartService.loadStaticSupplierBrandOptions(e,{throwErr:!0}).then(t=>{var n,r,s;const i=null==(r=null==(n=null==t?void 0:t.options)?void 0:n.brandPromotion)?void 0:r.params,o=(null!=(s=null==i?void 0:i.flatMap(e=>e.brands||[]))?s:[]).filter(e=>this._shouldShowBrand(e));return 0===o.length?null:{supplierId:e,brands:o}}).catch(t=>t instanceof C.NotFoundError?{supplierId:e,brands:[]}:null)),r=(await Promise.all(n)).filter(e=>null!==e);return r.length?this._updateSupplierBrandsMap(r,t):{}}static richPrototype({prototype:e}){Object.setPrototypeOf(pl.prototype,e)}static factory(e){return e&&pl.richPrototype(e),new pl}}var hl=pl;const{WB_COURIER_TIME_SLOTS_URL:ml}=l.A;class gl{async getWbCourierSlots(e,t,n){const r=function(e,t){return`${t}_${e.format("yyyy-MM-dd")}`}(t,e);if(null==n?void 0:n[r])return n[r];const s={office_id:e,sm_id:5,delivery_day:t.format("yyyy-MM-dd")},i={method:"POST",body:JSON.stringify(s)},o={addContentTypeHeader:!0,addAuthHeader:!0,noProcessResponse:!0,timeout:1e4};try{const e=await WbSpaModel.prototype.$httpClient.fetchJSON(ml,i,o),t=null==e?void 0:e.delivery_time_slots;return(null==t?void 0:t.length)?(n[r]=t,t):null}catch(e){return wb.spa.logError("Error getting WB timeslots:",e),null}}isSlotAvailable(e,t){if(0===Object.keys(t).length)return!1;const n=new Map;for(const t of e){const e=t.day,r=t.time_slots.map(e=>{const t=new Date(e.from),n=new Date(e.to);return`${60*t.getHours()+t.getMinutes()}-${60*n.getHours()+n.getMinutes()}`});n.set(e,new Set(r))}for(const e in t){const r=t[e];if(!r.dt)return!1;const s=new Date(r.dt).format("yyyy-MM-dd"),i=`${r.start}-${r.end}`;if(!n.has(s)||!n.get(s).has(i))return!1}return!0}static richPrototype({prototype:e}){Object.setPrototypeOf(gl.prototype,e)}static factory(e){return e&&gl.richPrototype(e),new gl}}var fl=gl,bl=Object.defineProperty,yl=(e,t,n)=>((e,t,n)=>t in e?bl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);const{SMART_CALENDAR_DAYS_URL:vl}=l.A,wl="basket_calendar_intervals",Sl="smart_calendar_days";class _l{constructor(){yl(this,"smartCalendarStore",null),yl(this,"cacheLifeTime",36e5),yl(this,"$storageHelper"),yl(this,"storageHelper"),yl(this,"db"),yl(this,"_dbSupport",Boolean(window.indexedDB)),this._dbSupport?(this.$storageHelper=WbSpaModel.prototype.$storageHelper,this.initDb()):wb.spa.logError("[SmartCalendarDaysService]: IndexedDB not supported")}isDataValid(e,t){return!(!(null==t?void 0:t.updatedDate)||(null==t?void 0:t.addressId)!==e)&&Date.now()-t.updatedDate<this.cacheLifeTime}async initDb(){try{this.storageHelper=this.$storageHelper.createStorageHelperItem(wl,()=>{},1);const e=this.$storageHelper.openDb(wl,{version:1,onupgradeneeded:e=>{e.objectStoreNames.contains(Sl)||(e.createObjectStore(Sl,{keyPath:"addressId"}),console.log(`[SmartCalendarDaysService]: Store "${Sl}" created`))}});this.db=await Promise.race([e,WbSpaModel.prototype.$helper.delay(2e3,()=>{console.log(`idb open ${wl} timeout - 2000`)})]),this.db&&console.log("[SmartCalendarDaysService]: IDB initialized successfully")}catch(e){wb.spa.logError("[SmartCalendarDaysService]: Failed to init IndexedDB",e),this._dbSupport=!1}}async loadSmartCalendar(e,t){var n,r;if(!e||!t)return;this.cacheLifeTime=60*(null!=(r=null==(n=wb.global.settings.mobileAppVariables.numbers)?void 0:n.refreshSmartCalendar)?r:60)*1e3;const s=this.smartCalendarStore;if(s&&this.isDataValid(e,s))return;const i=await this.getSmartCalendarAvailableDays(e,t);i&&(this.smartCalendarStore=i)}getSmartCalendarDays(e){var t,n;const r=null==(n=null==(t=this.smartCalendarStore)?void 0:t.data)?void 0:n[e];return r&&0!==r.length?r:null}async getSmartCalendarAvailableDays(e,t){if(this.smartCalendarStore&&this.isDataValid(e,this.smartCalendarStore))return this.smartCalendarStore;let n=null;try{const t=await this.$storageHelper.openDb(wl);if(n=await this.$storageHelper.getItem(t,Sl,e),n&&this.isDataValid(e,n))return n}catch(e){wb.spa.logError("[SmartCalendarDaysService]: Error reading IndexedDB(smart_calendar_days):",e)}try{const n=await this.getDaysFromApi(e,t);if(n){const t={addressId:e,data:n,updatedDate:Date.now()};return this.saveToIdb(e,n),t}}catch(e){wb.spa.logError("[SmartCalendarDaysService]: Error getting smart calendar days from API:",e)}return null!=n?n:null}async saveToIdb(e,t){try{const n=await this.$storageHelper.openDb(wl);await WbSpaModel.prototype.$storageHelper.setItem(n,Sl,{addressId:e,data:t,updatedDate:Date.now(),__expiredAt__:Date.now()+864e5})}catch(e){wb.spa.logError("[SmartCalendarDaysService]: Failed to save in IDB",e)}}async getDaysFromApi(e,t){const n=[{id:String(e),dest:String(t)}],r={method:"POST",credentials:"include",body:JSON.stringify(n)},s={addContentTypeHeader:!0,noProcessResponse:!0,timeout:5e3};try{const e=await WbSpaModel.prototype.$httpClient.fetchJSON(vl,r,s),t=this.transformApiResponse(e);return null!=t?t:null}catch(e){throw e}}transformApiResponse(e){const t=Object.values(e.points)[0],n=this.getTimestamp(new Date),r={};for(const e of t)r[e.wh_id]=e.availability_info.filter(e=>{const t=this.getTimestamp(e.date);return e.is_available&&t>=n}).map(e=>e.date);return r}getTimestamp(e){const t="string"==typeof e?new Date(e.split(".").reverse().join("-")):new Date(e);return t.setHours(0,0,0,0),t.getTime()}static richPrototype({prototype:e}){Object.setPrototypeOf(_l.prototype,e)}static factory(e){return e&&_l.richPrototype(e),new _l}}var Il=_l,Cl=n(1568),kl=Object.defineProperty,Pl=(e,t,n)=>((e,t,n)=>t in e?kl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class El{constructor(){Pl(this,"onlyAdultClass","for-adults"),Pl(this,"isOpen",!1),Pl(this,"state",(0,Y.observify)({isConfirmed:!1})),Pl(this,"isConfirmed"),Pl(this,"getState",()=>this.state),Pl(this,"setisConfirmed",e=>{this.isConfirmed=e,this.state.isConfirmed=e;try{localStorage.putObject("__ac",{dtExp:Date.utcNow()+36e5,state:e})}catch(e){console.error(e)}}),Pl(this,"proceedIfAdultConfirmed",async(e,t,r,...s)=>{if(e&&!this.isConfirmed){if(!this.isOpen){const{showAdultConfirmModal:e}=await Promise.all([n.e(25020),n.e(5521),n.e(43685),n.e(62609),n.e(48078)]).then(n.bind(n,1823)),i=()=>{null==t||t.apply(r,s),this.removeAdultClass(),this.sendConfirmWbaEvent(!0),this.setisConfirmed(!0)};e({setIsModalClosed:this.setIsModalClosed,confirm:i}),this.isOpen=!0,this.sendShowWbaEvent()}}else null==t||t.apply(r,s)}),Pl(this,"setIsModalClosed",()=>{this.sendConfirmWbaEvent(!1),this.isOpen=!1}),Pl(this,"removeAdultClass",()=>{Array.from(document.getElementsByClassName(this.onlyAdultClass)).forEach(e=>e.classList.remove(this.onlyAdultClass))}),Pl(this,"sendShowWbaEvent",()=>{const e=(0,v.a)();this.checkRoute()&&e.sendEvent("Alert_Adult_Confirmation_S")}),Pl(this,"sendConfirmWbaEvent",e=>{const t=(0,v.a)();this.checkRoute()&&t.sendEvent(e?"Alert_Adult_Confirmation_Yes":"Alert_Adult_Confirmation_No")}),Pl(this,"checkRoute",()=>{var e;switch(null==(e=(0,s.cI)().currentRoute)?void 0:e.name){case"SpaCatalogEntrypoint":case"SpaBrandsEntrypoint":case"SpaPromotionCatalogEntrypoint":case"SpaRecentCatalogEntrypoint":case"SpaRecommendationsCatalogEntrypoint":case"SpaRecommendationsSearchCatalogEntrypoint":case"SpaSearchByImageEntrypoint":case"SpaSearchEntrypoint":case"SpaSellerCatalogEntrypoint":return!0;default:return!1}});const e=localStorage.getObject("__ac");e&&e.dtExp>Date.utcNow()?(this.isConfirmed=e.state,this.state.isConfirmed=e.state):(this.isConfirmed=!1,this.state.isConfirmed=!1)}static richPrototype({prototype:e}){Object.setPrototypeOf(El.prototype,e)}static factory(e){return e&&El.richPrototype(e),new El}}var Tl=El,Ol=Object.defineProperty,xl=(e,t,n)=>((e,t,n)=>t in e?Ol(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class Ml{getVerticalObserver(e,t,n){return new Al(e,t,n)}getCarouselBannersObserver(e,t,n){const r=Object.assign({keepObserve:!0,sendOutEvent:!0},null!=n?n:{});return new Al(e,t,r)}getSimpleObserver(e,t,n){if(WbSpaModel.prototype.$apiSupport.intersectionObserver){let r=function(){d.forEach(e=>p.unobserve(e)),d=[]},s=function(){null==p||p.disconnect()},i=function(e){r(),d=e,d.forEach(e=>p.observe(e))},o=function(e){p.unobserve(e)};const a={threshold:.5},l=Object.assign(a,null!=t?t:{}),c={keepObserve:!1},u=Object.assign(c,null!=n?n:{});let d=[];const p=new IntersectionObserver((t,n)=>{t.forEach(t=>{t.isIntersecting?(e(t.target,d.indexOf(t.target)+1),u.keepObserve||n.unobserve(t.target)):!t.isIntersecting&&(null==u?void 0:u.sendOutEvent)&&e(t.target,d.indexOf(t.target)+1,!0)})},l);return{observe:i,destroy:s,unobserveItem:o}}return{observe:t=>t.forEach(n=>e(n,t.indexOf(n)+1)),destroy:()=>{},unobserveItem:()=>{}}}static richPrototype({prototype:e}){Object.setPrototypeOf(Ml.prototype,e)}static factory(e){return e&&Ml.richPrototype(e),new Ml}}class Al{constructor(e,t,n){xl(this,"intersectionObserverEnable"),xl(this,"items"),xl(this,"settings"),xl(this,"observer"),xl(this,"options"),xl(this,"elementInViewportEventName"),xl(this,"elementOutOfViewportEventName"),this.intersectionObserverEnable=WbSpaModel.prototype.$apiSupport.intersectionObserver,e=null!=e?e:[],this.items=(Array.isArray(e)?e:[e]).toHashSet(),this.options=null!=t?t:{};this.settings=Object.assign({keepObserve:!1,sendOutEvent:!1},null!=n?n:{}),this.observer=null,this.elementInViewportEventName="elementInViewportEvent",this.elementOutOfViewportEventName="elementOutOfViewportEvent"}_observe(e){var t,n;const r={bubbles:!0};(null==(t=this.settings)?void 0:t.eventDetails)&&(r.detail=this.settings.eventDetails);let s=new CustomEvent(this.elementInViewportEventName,r),i=new CustomEvent(this.elementOutOfViewportEventName,r);this.intersectionObserverEnable?(this.observer=null!=(n=this.observer)?n:new IntersectionObserver((e,t)=>{e.forEach(e=>{var n,r;e.isIntersecting?(e.target.dispatchEvent(s),(null==(n=this.settings)?void 0:n.keepObserve)||(this.items.delete(e.target),t.unobserve(e.target))):!e.isIntersecting&&(null==(r=this.settings)?void 0:r.sendOutEvent)&&e.target.dispatchEvent(i)})},this.options),e.forEach(e=>{var t;e&&(null==(t=this.observer)||t.observe(e))})):e.forEach(e=>{e.dispatchEvent(s),this.items.delete(e)})}observe(){return this._observe(this.items),this}update(e){let t;if(Array.isArray(e))t=e;else if(e instanceof HTMLElement)t=[e];else{if(!("toArray"in e))return;t=e.toArray()}this._observe(t)}unobserve(e){var t;e&&this.intersectionObserverEnable&&(null==(t=this.observer)||t.unobserve(e))}unobserveAll(){this.items.forEach(e=>{var t;return null==(t=this.observer)?void 0:t.unobserve(e)}),this.items.clear()}destroy(){var e;this.items.clear(),null==(e=this.observer)||e.disconnect()}}var Rl=Ml,Dl=Object.defineProperty,Ll=(e,t,n)=>((e,t,n)=>t in e?Dl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class Bl{constructor(){Ll(this,"allModules"),Ll(this,"allServices"),Ll(this,"modulesDict"),Ll(this,"servicesDict"),Ll(this,"loadingServices"),this.allModules={},this.modulesDict={},this.allServices={},this.servicesDict={},this.loadingServices={}}init(){return window.__spaModuleManager__={register:(e,t)=>{this._enrichProto(t),this.modulesDict[e]=t},getModule:(e,t)=>{if(null!=this.modulesDict[e]||t)return this.modulesDict[e];throw new Error("Module "+e+" has not been loaded yet")}},window.__spaServiceManager__={register:(e,t)=>{this._enrichProto(t),this.servicesDict[e]=t},getService:(e,t)=>{if(null!=this.servicesDict[e]||t)return this.servicesDict[e];throw new Error("Service "+e+" has not been loaded yet")}},this}setModules(e){this.allModules=e}setServices(e){this.allServices=e}async loadServiceAsync(e){const{physicalPath:t}=this.allServices[e]||{};if(null==t)throw new Error(e+" service doesnt exist");const n=await this.loadServicePrivateAsync(e,t),r=null!=n?new n:null;(0,s.DQ)(e,r)}async loadServiceAsSingletonAsync(e){const{physicalPath:t}=this.allServices[e]||{};if(null==t)throw new Error(e+" service doesnt exist");return this.loadingServices[e]||(this.loadingServices[e]=this.loadServicePrivateAsync(e,t).then(t=>{const n=null!=t?new t:null;return(0,s.DQ)(e,n),n})),this.loadingServices[e]}async loadModuleAsync(e,t=!1){"pooMapModule"===e&&(wb.global.settings.switches.wbTilesMap||wb.settings.secondHost)&&(e="pooWbMapModule");let{physicalPath:n,dataPath:r,hasTmpl:s,tmpls:i=[],templateId:o,isDynamic:a=!1,httpMethod:l="GET",cssPaths:c,jsPaths:u,apiName:d}=this.allModules[e]||{};if(null==n)throw new Error(e+" module doesnt exist");const p=i.map(e=>this.loadTemplateAsync(e)),h=this.loadTemplateAsync(s?e:null,o),m=this.loadDataPrivateAsync(e,r,a,l,d),g=null==c?[Promise.resolve(null)]:c.map(e=>WbSpaModel.prototype.$helper.loadCssAsync(e)),f=null==u?[Promise.resolve(null)]:u.map(e=>WbSpaModel.prototype.$helper.loadJsAsync(e)),[b,y,v]=await Promise.all([this.loadModule(e,n,t),m,h,...p,...g,...f]);return null!=b&&(b.data=y,b.template=v),b}async execModule(e="",t="",n=[]){try{(await this.loadModuleAsync(e))[t](...n)}catch(e){console.error(e)}}async loadModule(e,t,n){if(null==e||null==t)throw new Error("path and name are required to load module");return await WbSpaModel.prototype.$helper.loadJsAsync(t),window.__spaModuleManager__.getModule(e,n)}async loadServicePrivateAsync(e,t){if(null==e||null==t)throw new Error("path and name are required to load service");return await WbSpaModel.prototype.$helper.loadJsAsync(t),window.__spaServiceManager__.getService(e)}async loadDataPrivateAsync(e,t,n,r,i){if(null==t)return null;const o=this.modulesDict[e];if(!n&&null!=o&&(0,_r.rI)(o)){const e=new o;if(!e.isNetworkError)return e.data}return"basket"===i&&(t=`${(0,s.cQ)("cartService").publicBasketApiUrl}${t}`),await WbSpaModel.prototype.$httpClient.fetchJSON(t,{method:r||"GET",credentials:"include"},{defaultValue:{isNetworkError:!0},useProccessResponse:!0})}async loadTemplateAsync(e,t,n){return null==e&&null==t?Promise.resolve(null):t?$.views.loadWebApiTemplateAsync(t,n):null!=e?$.views.loadTemplateAsync(e,n):Promise.resolve(null)}_enrichProto(e){if(!e.prototype)return;let t=e.prototype,n=null;for(;(n=Object.getPrototypeOf(t))&&n!=Object.prototype;)t=n;t!=WbSpaModel.prototype&&Object.setPrototypeOf(t,WbSpaModel.prototype)}static richPrototype({prototype:e}){Object.setPrototypeOf(Bl.prototype,e)}static factory(e){return e&&Bl.richPrototype(e),new Bl}}var $l=Bl,Nl=Object.defineProperty,jl=(e,t,n)=>((e,t,n)=>t in e?Nl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class Fl{constructor(){jl(this,"items"),jl(this,"requestUrl"),jl(this,"defaultTitle"),this.items=[],this.requestUrl=""}generateMetaTags(e){var t,n,r,s;const i=[{tagName:"title",hTMLContent:null!=(t=e.title)?t:"Интернет‑магазин Wildberries: широкий ассортимент товаров - скидки каждый день!"},{tagName:"meta",attributesDictionary:{name:"og:url",content:window.location.pathname}},{tagName:"meta",attributesDictionary:{name:"og:title",content:null!=(n=e.title)?n:"Интернет‑магазин Wildberries: широкий ассортимент товаров - скидки каждый день!"}},{tagName:"meta",attributesDictionary:{name:"og:image",content:"//static-basket-01.wbbasket.ru/vol0/i/wb-og-win.jpg"}},{tagName:"meta",attributesDictionary:{name:"og:description",content:null!=(r=e.description)?r:"Коллекции женской, мужской и детской одежды, обуви, а также товары для дома и спорта. Информация о доставке и оплате. Таблицы размеров, советы по уходу за вещами."}},{tagName:"meta",attributesDictionary:{name:"description",content:null!=(s=e.description)?s:"Коллекции женской, мужской и детской одежды, обуви, а также товары для дома и спорта. Информация о доставке и оплате. Таблицы размеров, советы по уходу за вещами."}}];e.noIndex&&i.push({tagName:"meta",attributesDictionary:{name:"robots",content:"noindex, follow"}}),this.render(i)}init(){this.defaultTitle=r.R.t("common.metaInfo.title");const e=[{tagName:"title",htmlContent:r.R.t("common.metaInfo.title")}];this.items=e.map(e=>{var t;try{const n=Object.keys(null!=(t=e.attributesDictionary)?t:{}).map(t=>{return`[${t}='${n=e.attributesDictionary?e.attributesDictionary[t]:"",n.replace(/[\n\r]/g,"").replace(/["']/g,"\\$&")}']`;var n});return document.querySelector(`${e.tagName}${n.join("")}`)}catch(e){return console.error(e.message),null}})}async update(e,t=null){return this._loadMetaTags(null!=t?t:this.requestUrl,e).then(e=>{if(this.delete(),(null!=e?e:[]).length>0)return this._renderMetatags(e),e;this._renderDefaultTitle()}).catch(()=>{})}render(e){this.delete(),(null!=e?e:[]).length>0?this._renderMetatags(e):this._renderDefaultTitle()}async loadMetaTags(e,t){if(e.metaTags)return this.render(e.metaTags);const n=await this.update(window.location.pathname,WbSpaModel.prototype.$router.currentRoute.metaTagsUrl);if(!n)return;const r=n.find(e=>"H1"===e.tagName);if(r&&window.requestAnimationFrame(()=>$.observable(e).setProperty({title:r.hTMLContent})),t){const t=n.find(e=>"bottomText"===e.tagName);t&&window.requestAnimationFrame(()=>$.observable(e).setProperty({bottomText:t.hTMLContent}))}}delete(){this.items.forEach(e=>null==e?void 0:e.remove()),this.items.length=0}_loadMetaTags(e,t){var n,r,s;if(!e)return Promise.resolve();const i=new URLSearchParams(WbSpaModel.prototype.$router.queryParams);let o;return i.append("targetUrl",encodeURIComponent(("/"===t[0]?"":"/")+t)),e.indexOf("{*category}")>-1&&(e=e.replace("{*category}",null!=(n=WbSpaModel.prototype.$router.routeParameters.category)?n:"")),e.indexOf("{brandBasePath}")>-1&&"/"===(e=e.replace("{brandBasePath}",null!=(r=WbSpaModel.prototype.$router.routeParameters.brandBasePath)?r:""))[e.length-1]&&(e=e.slice(0,-1)),e.indexOf("{promoBasePath}")>-1&&"/"===(e=e.replace("{promoBasePath}",null!=(s=WbSpaModel.prototype.$router.routeParameters.promoBasePath)?s:""))[e.length-1]&&(e=e.slice(0,-1)),o=e,WbSpaModel.prototype.$httpClient.fetchJSON(o+"?"+i,{},{useProccessResponse:!0}).then(e=>Promise.resolve(null==e?void 0:e.metaTags)).catch(n=>(n.isCancelled||""===n.message||(console.error(n.message),console.error(`Error loading meta tags for path ${t} by requesting ${e}`)),Promise.resolve()))}_renderMetatags(e){const t=document.createDocumentFragment();e.forEach(e=>{var n;if("H1"===e.tagName)return;if("bottomText"===e.tagName)return;const r=document.createElement(e.tagName);Object.keys(null!=(n=e.attributesDictionary)?n:{}).forEach(t=>r.setAttribute(t,e.attributesDictionary?e.attributesDictionary[t]:""));const s=e.hTMLContent||e.htmlContent;s&&(r.innerHTML=s),this.items.push(r),t.appendChild(r)}),document.head.appendChild(t)}_renderDefaultTitle(){const e=document.createElement("title");e.innerHTML=this.defaultTitle||"",this.items.push(e),document.head.appendChild(e)}static richPrototype({prototype:e}){Object.setPrototypeOf(Fl.prototype,e)}static factory(e){return e&&Fl.richPrototype(e),new Fl}}var Ul=Object.defineProperty,Wl=(e,t,n)=>((e,t,n)=>t in e?Ul(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class Hl{constructor(){Wl(this,"nativeLazyImage"),Wl(this,"intersectionObserver"),Wl(this,"webpImage"),this.nativeLazyImage="loading"in HTMLImageElement.prototype,this.intersectionObserver="IntersectionObserver"in window,this.webpImage=!1,this.checkWebpImageSupport()}checkWebpImageSupport(){if(0===document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp"))this.webpImage=!0;else try{const e=new Image;e.onload=()=>{e.width>0&&e.height>0&&(this.webpImage=!0)},e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA"}catch(e){}}static factory(){return new Hl}}var Vl=Hl;const zl=()=>window||globalThis||{},ql=e=>{const t=`instancer_${e}`;return Symbol.for(t)},Kl="astroClientsManager";var Gl=Object.defineProperty,Jl=(e,t,n)=>((e,t,n)=>t in e?Gl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class Yl{constructor(){Jl(this,"location"),Jl(this,"dpPopup"),Jl(this,"map");(0,I.J)().addEventListener("CurrencyChanged",this.onChangeCurrency.bind(this))}async initPreferredLocation(){await this.updateLocation();document.querySelectorAll(".j-geocity-link").forEach(e=>{e.addEventListener("click",this.doOnGeoBtnClick.bind(this))})}async updateLocation(){const e=(0,s.u4)();this.location=await e.getLocationData(),this.setCityName(this.location.address)}setCityName(e){const t=document.querySelectorAll(".j-geocity-link"),n=decodeURI(e||"");t.forEach(e=>{e.textContent!==n&&(e.textContent=n)})}doOnGeoBtnClick(e){const t=e.currentTarget;e.preventDefault(),t.classList.contains("_click")||(t.classList.add("_click"),this.openDeliveryPointsPopup().then(e=>t.classList.remove("_click")))}findCurrentAddress(e,t=!1){return this.location?null==e?void 0:e.find(e=>e.lat==this.location.latitude&&e.lon==this.location.longitude&&(e.address==this.location.address||!t)):null}async openDeliveryPointsPopup(e){const t=(0,s.sL)(),n=(0,s.Z1)(),r=await t.loadModuleAsync("deliveryPointsChoosePopup");this.dpPopup||(this.dpPopup=new r),await this.dpPopup.init({source:"geo",selectAddress:(e,t,r,s)=>{const i=r||n.userAddressService.get(t,e);this.submitGeo(i,s)},updateSelectedAddresses:t=>{const n=this.findCurrentAddress(t.courier.list,!0),r=this.findCurrentAddress(t.self.list);t.courier.selected=null==n?void 0:n.addressId,t.self.selected=null==r?void 0:r.addressId,t.preferred="courier"===e||"self"===e?e:n?"courier":"self"},beforeSelectDw:(e,r)=>{if("self"==$.view(e.target).ctxPrm("selectedDeliveryWay"))return;if(this.dpPopup.deliveryWays.length<2)return;"self"===$.view(e.target).data.code&&t.loadModuleAsync("basketProductModel").then(r=>{var s;const i=(null==(s=n.cartService.get().basketItems)?void 0:s.map(e=>new r(e))).filter(e=>{var t;const n=!wb.xnm.isViewFlagSet(e.viewFlags,c._q.isB2B)||(null==(t=wb.settings.selectedCompany)?void 0:t.supplierIds.find(t=>t===e.supplierId)),r=e.onlyCourier&&e.isDbs&&!n,s=e.onlyCourier&&!e.isWholesaleProduct;return wb.settings.b2bMode?r:s})||[];i.length>0&&(e.preventDefault(),t.loadModuleAsync("productCourierOnlyPopup").then(e=>{var t;e.show(e.template,i,null==(t=this.dpPopup.selectedAddresses)?void 0:t.preferred,this.openDeliveryPointsPopup.bind(this))}),this.dpPopup.close())})}}),this.dpPopup.show()}onChangeCurrency(){var e;const t=(0,s.Z1)();"SpaBasketEntrypoint"!==(null==(e=(0,s.cI)().currentRoute)?void 0:e.name)&&t.cartService.localBasket.enrichProductsIfNeedAsync({force:!0})}submitGeo(e,t){var n;const r=(0,I.J)(),i=(0,s.u4)();let o,a=this.map;if(((null==e?void 0:e.id)||(null==e?void 0:e.addressId))&&(o=e),o||(o=(null==a?void 0:a.selectedPointId)?("courier"===a.deliveryType?a.courierList:a.visiblePoints).find(e=>e.id===a.selectedPointId):a.selectedPoint),!o)return;const l=o.id||o.addressId||(null==a?void 0:a.selectedPointId);this.saveLastAddressAsync(l,o.deliveryType,e.address,t,null!=(n=o.officeId)?n:o.addressId),i.setGeo(o).then(()=>{r.dispatchEvent(new CustomEvent("ExternalSelectAddress",{detail:{selectedAddressId:l,dWay:o.deliveryType}}))}),this.dpPopup.close()}async saveLastAddressAsync(e,t,n,r,i){const o=(0,v.a)(),a=(0,s.dU)(),l=(0,C.getHttpClient)(),c=(0,y.c)(),u=(0,s.Z1)();u.cartService.localBasket.setAddress(e,t,n,r),c.isAuth&&l.fetchJSON(u.cartService.publicBasketApiUrl+"/spa/address/select",{credentials:"include",method:"POST",body:a.objectSerializer({addressId:e,deliveryWay:t})},{useProccessResponse:!0}),o.setCurrentAddress(t,i),o.sendAddressSelection({source:"Header",deliveryType:t,addressId:e,address:n,isChanged:r})}static richPrototype({prototype:e}){Object.setPrototypeOf(Yl.prototype,e)}static factory(e){return e&&Yl.richPrototype(e),new Yl}}var Ql=Object.defineProperty;const Xl=class e{static isWalletDiscountRounderForNNSZEnabled(){return!!(0,y.c)().isAuth&&Boolean(wb.global.settings.switches.enableWalletDiscountRounderNNSZ)}static isEnableWalletDiscountRounder(){return!!(0,y.c)().isAuth&&(null===this.isEnableWalletDiscountRounderCache&&(this.isEnableWalletDiscountRounderCache=Boolean(wb.global.settings.switches.enableWalletDiscountRounder||wb.analitics.checkDataInSplitterServiceV2("common","ab_discount_rounder","enable"))),this.isEnableWalletDiscountRounderCache)}static canShowWalletDiscount(e=0,t=0,n="",r=0,s=0,i=0){var o,a,l,c,u,d,p,h;if(1048576&r||0===s||536870912&r)return!1;if(wb.settings.walletRidLimit){if(-1===wb.settings.walletRidLimit)return"RUB"===n&&"ge"!==wb.settings.currentLocale;if(wb.settings.walletRidLimit<t)return!1}return(i||(wb.settings.walletTypeCode>1?(null==(c=null==(l=null==(a=null==(o=wb.global.settings.mobileAppVariables)?void 0:o.objects)?void 0:a.walletLimitDescription)?void 0:l.verified)?void 0:c.oneTimeLimit)/100:(null==(h=null==(p=null==(d=null==(u=wb.global.settings.mobileAppVariables)?void 0:u.objects)?void 0:d.walletLimitDescription)?void 0:p.anonymous)?void 0:h.oneTimeLimit)/100))>=e&&"RUB"===n&&!["ge","tj"].includes(wb.settings.currentLocale)}static calcWalletDiscount(t=0,n=0,r="",s=0,i=0,o=0){var a,l;const c=!0===(null==(a=wb.global.settings.switches)?void 0:a.enableDiscountValueForAll)||!0===(null==(l=wb.global.settings.switches)?void 0:l.enableV6Ug)?wb.settings.walletDiscountValue||0:i||(wb.settings.walletTypeCode>1?wb.settings.wlt2DiscountPercent:wb.settings.wlt1DiscountPercent),u=wb.global.settings.variables.discountRounding,d=(null==u?void 0:u.multiplicity)||0,p=(null==u?void 0:u.lowerRoundingThreshold)?u.lowerRoundingThreshold/100:null;if(c>0){let i=0;if(this.isEnableWalletDiscountRounder()&&null!==p&&t>p&&d>0&&(i=e.calculateDiscountWithRounding({price:t,walletDiscountPercent:c,multiplicity:d,currency:r})),i<=0&&(i=e.calculateDiscount(t,c,r)),e.canShowWalletDiscount(t-i,n,r,s,c,o))return i}return 0}static calcPaymentSaleAmount(e,t){return e*(t/100)}static calcRemainder(e,t){return e%t}static calculateDiscountWithRounding({price:e=0,walletDiscountPercent:t=0,multiplicity:n=0,currency:r="",floor:s=!0}){if(!e||!t||!n)return 0;const i=this.calcPaymentSaleAmount(e,t),o=this.calcRemainder(i,n);if(0===o)return 0;const a=i-o;return a<=0?0:this.toLocalPrice(a,r,s)}static calculateDiscount(e=0,t=0,n="",r=!1){if(!e||!t)return 0;const s=this.calcPaymentSaleAmount(e,t);return this.toLocalPrice(s,n,r)}static calculateCommission(e,t,n=""){return this.calculateDiscount(e,t,n,!0)}static calculateAdjustedDiscount(e=0,t=0,n=0,r=""){if(!t||!n)return 0;let s=e/t*n;return this.toLocalPrice(s,r)}static toLocalPrice(e=0,t="",n=!1){if(0!==e){const r=$.views.helpers.minFiscalPriceInCurrency(t);e=e<r?r:Math[n?"floor":"ceil"](e/r)*r}return e}static calculateCustomCharges(e,t,n){var r,s;const i=100*e;if(!n)return 0;if(i<n.dutyFreelimit)return 0;const o=((null==(s=null==(r=wb.global.settings)?void 0:r.switches)?void 0:s.enableNewDutyCalculation)?i:i-n.dutyFreelimit)*(n.duty/100)+n.fixedAmount;return $.views.helpers.toLocalPrice(o/100,t)}static getReturnableVatPercent(e){return!!e&&(!!wb.xnm.isVatRefundable(e)&&wb.xnm.getVatPercent(e))}static verificationRequired({userInfo:e,signedBalance:t,storesMap:n,storeId:r,addressLocale:s}){return(null==e?void 0:e.isAuthenticated)&&n.needVerification(s,r)&&!(!(1&~e.verificationLevel)||"active"==(null==t?void 0:t.walletStatus)&&"verified"==(null==t?void 0:t.walletType))}};var Zl;((e,t,n)=>{t in e?Ql(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(Xl,"symbol"!=typeof(Zl="isEnableWalletDiscountRounderCache")?Zl+"":Zl,null);let ec=Xl;wb.priceHelper=ec;var tc=Object.defineProperty,nc=Object.getOwnPropertySymbols,rc=Object.prototype.hasOwnProperty,sc=Object.prototype.propertyIsEnumerable,ic=(e,t,n)=>t in e?tc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,oc=(e,t)=>{for(var n in t||(t={}))rc.call(t,n)&&ic(e,n,t[n]);if(nc)for(var n of nc(t))sc.call(t,n)&&ic(e,n,t[n]);return e};class ac{static getCookie(e){const t=document.cookie.split(";").find(t=>{const[n]=t.trim().split("=");return n==e});return t?decodeURIComponent(t.trim().split("=")[1]):null}static setCookie(e,t,n={}){n=oc({path:"/","max-age":31536e3},n);let r=encodeURIComponent(e)+"="+encodeURIComponent(t);Object.keys(n).forEach(e=>{r+=`; ${e}`,1!=n[e]&&(r+=`=${n[e]}`)}),document.cookie=r}static deleteCookie(e,t={}){ac.setCookie(e,"",oc({"max-age":-1},t))}}wb.cookieHelper=ac;var lc=n(47184),cc={updateVerificationToken(e){const t=document.querySelector("input[name=__RequestVerificationToken]");t&&(t.value=e)}};class uc{get $userEnv(){return(0,s.xR)()}get $jsViews(){return(0,J.w)()}get $containers(){return(0,s.uL)()}get $router(){return(0,s.cI)()}get $helper(){return(0,s.dU)()}get $moduleLoader(){return(0,s.sL)()}get $verificationTokenHelper(){return cc}async menuLk(e){const t=(0,s.MA)();return await t.menuLk(e)}get $httpClient(){return(0,C.getHttpClient)()}get $auth(){return(0,y.c)()}get $observable(){return $.observable(this)}asObservable(e){return $.observable(e)}toggleProperty(e){this.asObservable(this).setProperty(e,!this[e])}get $storageHelper(){return(0,s.MH)()}get $seoHelper(){return(0,s.sp)()}get $stat(){return wb.stat}get $user(){return(0,s.u4)()}get $geoLocation(){return(0,s.BN)()}get $adult(){return(0,S.z)()}get $observerHelper(){return(0,s.MA)().observerHelper}get $analitic(){return(0,v.a)()}get $productCardPopup(){return(0,s.wm)().getSingltone()}get $isDesktop(){return(0,s.MA)().isDesktop()}get $eventBus(){return(0,I.J)()}get $services(){return(0,s.Z1)()}get $apiSupport(){return(0,s.CM)()}get $promotionsHelper(){return(0,s.MA)().promotionsHelper}async isMetaCharacteristicEnabled(){var e,t,n,r,s,i,o;const a=WbSpaModel.prototype.$analitic.checkDataInSplitterServiceV2("common","ab_siropFilter","yes");let l=0;(null==(e=this.$auth.jwtData)?void 0:e.user)&&(l=parseInt(null==(n=null==(t=this.$auth)?void 0:t.jwtData)?void 0:n.user));return((null==(r=wb.global.settings.switches)?void 0:r.metaCharacteristicEnable)||!(null==(s=wb.global.settings.switches)?void 0:s.metaCharacteristicEnable)&&a)&&this.checkMobileRange(l,(null==(o=null==(i=wb.global.settings.mobileAppVariables)?void 0:i.objects)?void 0:o.variantsCardRange)||[])}$moveToAnchor(...e){this.$helper.moveToAnchor(...e)}$void(){}$getCurrentXInfoAsync(){return this.$user.getXinfo()}$getCurrentXInfoWithClustersAsync(){return(0,s.MA)().getCurrentXInfoWithClustersAsync()}async $getUserGender(){const e=(0,s.MA)();return await e.getUserGender()}$generateGuid(){return(0,s.MA)().generateGuid()}$isWbxOrderEnabled(e){var t,n,r;return!!(null==(t=this.$auth.jwtData)?void 0:t.user)&&("ru"!==wb.settings.currentLocale||(!!e.isWbxOrderEnabled||!!(null==(r=null==(n=wb.global.settings)?void 0:n.variables)?void 0:r.wbxOrderUsersRange)&&this._checkByRange(wb.global.settings.variables.wbxOrderUsersRange)))}$isSupportBooking(){return(0,s.MA)().isSupportBooking()}$isSupportDigital(){return(0,s.MA)().isSupportDigital()}$isSupportDbsp(){return"RUB"===wb.user.getCurrency()&&!wb.settings.b2bMode&&wb.global.settings.switches.enableDBSPInBasket}$isSupportSpecialDelivery(){return"ru"===wb.settings.currentLocale&&"ru"==(0,s.u4)().getLocale()&&!wb.settings.b2bMode&&(wb.global.settings.switches.enableSpecialOrderToAllPosts||wb.global.settings.switches.enableSpecialOrderByCourier)}$isUserPremiumEnabled(){return(0,s.MA)().isUserPremiumEnabled()}$isTravelEnabled(){return(0,s.MA)().isTravelEnabled()}$isTravelEnabledMenu(){return(0,s.MA)().isTravelEnabledMenu()}$isLotteryMenuEnabled(){return(0,s.MA)().isLotteryMenuEnabled()}$isTravelHotelsEnabled(){return(0,s.MA)().isTravelHotelsEnabled()}$isTravelToursEnabled(){return(0,s.MA)().isTravelToursEnabled()}$isTrendEnabledMenu(){return(0,s.MA)().isTrendEnabledMenu()}$isRealtyEnableMenu(){return(0,s.MA)().isRealtyEnableMenu()}isEnabledLogisticCostV3(){var e,t;return!wb.global.settings.switches.enableDetailingForLogisticVer3&&wb.analitics.checkDataInSplitterServiceV2("common","ab_enableDetailingForLogisticVer3","enable")||wb.global.settings.switches.enableDetailingForLogisticVer3&&this.checkMobileRange(Number(this.$user.getId()),(null==(t=null==(e=wb.global.settings.mobileAppVariables)?void 0:e.objects)?void 0:t.detailingForLogisticVer3Range)||[])}isResaleEnabled({isSeller:e=!1}){return(0,s.MA)().isResaleEnabled({isSeller:e})}isWBTrackProfileEnabled(){return(0,s.MA)().isWBTrackProfileEnabled()}isB2bDocumentsEnabled(){return(0,s.MA)().isB2bDocumentsEnabled()}isB2bEdoLkEnabled(){return(0,s.MA)().isB2bEdoLkEnabled()}isFeedbacksResaleEmployeeEnabled({isSeller:e=!1}){return(0,s.MA)().isFeedbacksResaleEmployeeEnabled({isSeller:e})}isQuestionsResaleEmployeeEnabled({isSeller:e=!1}){return(0,s.MA)().isQuestionsResaleEmployeeEnabled({isSeller:e})}isResaleSupplierLKQuestionsEnabled(){return(0,s.MA)().isResaleSupplierLKQuestionsEnabled()}isResaleOrderCancelEnabled(){return(0,s.MA)().isResaleOrderCancelEnabled()}isResaleSupplierLKFeedbacksEnabled(){return(0,s.MA)().isResaleSupplierLKFeedbacksEnabled()}checkMobileRange(e,t){return(0,s.MA)().checkMobileRange(e,t)}_checkByRange(e){return(0,s.MA)().checkByRange(e)}$isRangeEnabledFor(e){return(0,s.MA)().isRangeEnabledFor(e)}$percentageRollout(e){return(0,s.MA)().percentageRollout(e)}$useCatalogReturnCost(){return(0,s.MA)().useCatalogReturnCost()}$isReceiptsFromAstroEnabled(){var e,t,n;return!!(null==(e=this.$auth.jwtData)?void 0:e.user)&&(null==(n=null==(t=wb.global.settings)?void 0:t.switches)?void 0:n.enableAstroReceipts)}getConfigForCustomCharges(e,t){var n,r;const s={from:e,to:t,textGroup:"default",count:0},i=null==(r=null==(n=wb.global.settings.mobileAppVariables)?void 0:n.objects)?void 0:r.newRestrictionsOnImportedGoodsObjects;if(!(null==i?void 0:i.length))return s;const o=i.filter(n=>n.from===e&&n.to===t);return 0===o.length?null:o.length>1?s:o[0]}$getService(e){const{getService:t}=(0,s.DR)();return t(e)}$getServiceOf(e){const{getServiceOf:t}=(0,s.DR)();return t(e)}$loadModule(e,...t){const{loadModule:n}=(0,s.DR)();return n(e,...t)}static richPrototype(e){Object.setPrototypeOf(e,uc.prototype)}}Object.defineProperties(window,{WbSpaModel:{value:uc}});var dc=uc,pc=n(48254),hc=Object.defineProperty,mc=(e,t,n)=>((e,t,n)=>t in e?hc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);const{CATALOG_URL:gc}=l.A;var fc=class{constructor(){mc(this,"isInited"),mc(this,"menuById"),mc(this,"menuByUrl"),mc(this,"menuIdEnum"),mc(this,"fullMenu"),mc(this,"menuItems"),this.fullMenu=null,this.menuByUrl=new Map,this.menuById=new Map,this.isInited=!1,this.menuIdEnum=this._menuIdEnum(),this.menuItems={wbrands:{id:1235,name:r.R.t("brands.brands"),url:wb.global.settings.switches.enableWbrands?"/wbrands":"/promotions/trend"},travel:{id:1236,name:"Travel",url:"https://www.wildberries.ru/travel",target:"_blank"},realty:{id:16108,name:r.R.t("catalog.menuItems.newBuildings"),url:"/realty?entryPoint=Catalog"},certificates:{id:1234,name:r.R.t("promotions.certificates"),url:"/gift/certificates"},promotion:{id:1111,name:"РАСПРОДАЖА",url:"/promotions/dr-wb"},resale:{id:st.z,name:r.R.t("pageTitles.c2c"),url:"/catalog/reseyl",shard:"c2c",query:"vflags=8388608"},wholesale:{id:131953,name:r.R.t("common.wholesaleMenu"),url:"/catalog/tovary-optom",shard:"wholesale",query:"vflags=268435456"},rubForFeedbacks:{id:1239,name:"Рубли за отзыв",url:"/promotions/rubli-za-otzyvy"},charity:{id:1240,name:"RWB Участие",url:"https://esg.rwb.ru/charity",target:"_blank"},whBy:{id:1241,name:"Товары со склада: Беларусь",url:"/promotions/tovary-s-mestnogo-sklada-belarus"},whKz:{id:1242,name:"Товары со склада: Казахстан",url:"/promotions/tovary-s-mestnogo-sklada-kazahstan"},whKg:{id:1243,name:"Товары со склада: Кыргызстан",url:"/promotions/tovary-s-mestnogo-sklada-kyrgyzstan"},whAm:{id:1244,name:"Товары со склада: Армения",url:"/promotions/tovary-s-mestnogo-sklada-armeniya"},whUz:{id:1245,name:"Товары со склада: Узбекистан",url:"/promotions/tovary-s-mestnogo-sklada-uzbekistan"},eApteka:{id:1246,name:"Еаптека",url:"/seller/eapteka-ru"},riveGauche:{id:1247,name:"РИВ ГОШ",url:"/seller/rivegauche"}}}async initMenu(){var e;const t=WbSpaModel.prototype.$user.getLocale(),n=`main-menu-${t}-${"ru"===t?wb.currentLanguage:$.views.helpers.getLangForServices()}-v3.json`;if(this.fullMenu=await WbSpaModel.prototype.$httpClient.fetchStatic(n,{timeout:1e4}),this.fullMenu){wb.global.settings.switches.enableMainPromotionInMenu&&"ru"===wb.settings.currentLocale&&"ru"==t&&this.fullMenu.splice(0,0,this.menuItems.promotion);const n=null==(e=WbSpaModel.prototype.$user.getUserGradeFromCache())?void 0:e.wbClub,s=this.fullMenu.findIndex(e=>1234===e.id);"ru"!==wb.settings.currentLocale&&s>=0&&this.fullMenu.splice(s,1);const i=this.fullMenu.findIndex(e=>1111===e.id);if(!wb.settings.b2bMode&&WbSpaModel.prototype.$isUserPremiumEnabled()&&WbSpaModel.prototype.$auth.isAuth){const e={id:1122,name:r.R.t("wbClub.discounts"),url:n&&"subscribed"===n?"/promotions/klubnye-skidki":"/subscription",locked:!n||"subscribed"!==n};n&&"subscribed"===n||(e.target="_blank"),this.fullMenu.splice(s>=0?s:i+1,0,e)}if(WbSpaModel.prototype.$isRealtyEnableMenu()){const e=1237,t=this.fullMenu.findIndex(t=>t.id===e);this.fullMenu.splice(t+1,0,this.menuItems.realty)}if(WbSpaModel.prototype.$isTrendEnabledMenu()){const e=this.fullMenu.findIndex(e=>e.id===this.menuItems.certificates.id),t=this.fullMenu.findIndex(e=>e.id===this.menuItems.promotion.id),n=-1!==e?e+1:-1!==t?t+1:0;this.fullMenu.splice(n,0,this.menuItems.wbrands)}if(wb.global.settings.switches.enableEaptekaInMenu&&"ru"===wb.settings.currentLocale&&"ru"==t){const e=this.fullMenu.findIndex(e=>e.id===this.menuItems.wbrands.id);this.fullMenu.splice(e,0,this.menuItems.eApteka)}if("ru"===wb.settings.currentLocale&&"ru"==t){const e=this.fullMenu.findIndex(e=>e.id===this.menuItems.eApteka.id);this.fullMenu.splice(e+1,0,this.menuItems.riveGauche)}if(WbSpaModel.prototype.$isTravelEnabledMenu()){this.fullMenu.splice(this.fullMenu.findIndex(e=>e.id===this.menuItems.wbrands.id)+1,0,this.menuItems.travel);const e=this.fullMenu.findIndex(e=>61037===e.id);-1!==e&&this.fullMenu.splice(e,1)}if(!WbSpaModel.prototype.isResaleEnabled({isSeller:!1})){const e=this.fullMenu.findIndex(e=>e.id===st.z);-1!==e&&this.fullMenu.splice(e,1)}if("ru"===wb.settings.currentLocale&&wb.global.settings.switches.enableWholesaleMenu&&-1===this.fullMenu.findIndex(e=>e.id===this.menuItems.wholesale.id)){const e=this.fullMenu.findIndex(e=>131111===e.id);this.fullMenu.splice(e,0,this.menuItems.wholesale)}if(wb.global.settings.switches.enableRubForFeedbacksInMenu&&"ru"==t&&"RUB"===wb.user.getCurrency()){const e=this.fullMenu.findIndex(e=>2192===e.id);this.fullMenu.splice(e,0,this.menuItems.rubForFeedbacks)}if(WbSpaModel.prototype.$isLotteryMenuEnabled()&&this.fullMenu.splice(this.fullMenu.findIndex(e=>1237===e.id)+1,0,{id:1238,name:r.R.t("mechtallionLottery.lottery"),url:"/mechtallionlottery",target:"_blank"}),"ge"!==wb.settings.currentLocale&&wb.global.settings.switches.enableCharityInMenu){const e=this.fullMenu.findIndex(e=>306===e.id);this.fullMenu.splice(e,0,this.menuItems.charity)}if(wb.global.settings.switches.enableWhLocalInMenu){const e=this.fullMenu.findIndex(e=>306===e.id);switch(t){case"by":this.fullMenu.splice(e,0,this.menuItems.whBy);break;case"kz":this.fullMenu.splice(e,0,this.menuItems.whKz);break;case"kg":this.fullMenu.splice(e,0,this.menuItems.whKg);break;case"am":this.fullMenu.splice(e,0,this.menuItems.whAm);break;case"uz":this.fullMenu.splice(e,0,this.menuItems.whUz)}}this._createMenuMap();const o=this.fullMenu.filter(e=>e.dynamic).map(e=>this.loadDynamicBranch(e));await Promise.all(o),this.isInited=!0}return this}setEntryPointWBClub(){window.localStorage.setItem("entryPointWBClub","Catalog")}async loadDynamicBranch(e){const t=(0,s.u4)(),n=(0,C.getHttpClient)(),r=t.getDestinations();if(r&&e.dest&&e.dest.length>0&&r.some(t=>{var n;return null==(n=e.dest)?void 0:n.includes(t)})){const t=null==r?void 0:r.last(),s=$.views.helpers.getLangForServices(),i=`${gc}menu/v12/api?appType=1&dest=${t}&id=${e.id}&lang=${s}&locale=${WbSpaModel.prototype.$user.getLocale()}`,o=await n.fetchJSON(i,{withPowToken:!0},{timeout:1e4,nullOnError:!0,addAuthHeader:!0,throwErr404:!1});if(null==o?void 0:o.data){const n=this._fromDynamicMenu(o.data,e);return n.forEach(t=>this._setNode(t,e.id)),e.childs=n,e.isDenyLink=!0,void(e.loadedForDest=t)}}e.dest=[0]}getCurrentMenuItem(e){var t;if(!e)return null;const n=e.pathname.replace("catalogdata","catalog");return null!=(t=this.menuByUrl.get(n))?t:null}getSitePathItems(e){var t;if(!e)return null;const n=[];n.push({id:e.id,name:e.name,pageUrl:e.url,analytic:["CCC",null,null,e.id]});let r=null==(t=this.menuById.get(e.id))?void 0:t.parentId;for(;null!=r;){const e=this.menuById.get(r);if(!e)return n.reverse();n.push({id:r,name:e.name,pageUrl:e.url,analytic:["CCC",null,null,r]}),r=e.parentId}return n.reverse()}getCatalogDenyMenu(e,t){var n,r,s,i,o,a,l;if(!e)return;if(e.landing||1===t.length)return{current:{name:e.name,link:e.url,isTop:e.isTop,lastSelected:!1},sideMenu:[],parent:{},parents:[],tagsMenu:null!=(r=null==(n=e.childs)?void 0:n.map(e=>({name:e.name,link:e.url})))?r:[]};const c=t[t.length-2],u=t.slice(1).map(e=>({name:e.name,link:e.pageUrl}));u[u.length-1].lastSelected=!0;const d=null!=(i=null==(s=e.childs)?void 0:s.map(e=>({name:e.name,link:e.url,anc:!0})))?i:[];if((null!=(o=e.childs)?o:[]).length>0)return{current:{name:e.name,link:e.url,isTop:e.isTop,lastSelected:!1},sideMenu:[...u,...d],parent:{name:c.name,link:c.pageUrl},parents:this.getParentsForDeny(e.id),tagsMenu:null!=d?d:[]};const p=this.menuByUrl.get(c.pageUrl);return{current:{name:e.name,link:e.url,isTop:e.isTop,lastSelected:!0},sideMenu:u,parent:{name:c.name,link:c.pageUrl},parents:this.getParentsForDeny(e.id),tagsMenu:null!=(l=null==(a=null==p?void 0:p.childs)?void 0:a.map(e=>({name:e.name,link:e.url})))?l:[]}}getRootNode(e){let t=e;for(;null!=t.parentId;)t=this.menuById.get(t.parentId);return t}hasItem(e){return!!e&&this.menuById.has(e)}getCatalogLink(e){var t;return null==(t=this.menuById.get(e))?void 0:t.url}getParents(e){var t;const n=[];let r=null==(t=this.menuById.get(e))?void 0:t.parentId;for(;null!=r;){const e=this.menuById.get(r);if(!e)return n.reverse();n.push(e.name),r=e.parentId}return n.reverse()}getParentsForDeny(e){var t;const n=[];let r=null==(t=this.menuById.get(e))?void 0:t.parentId;for(;null!=r;){const e=this.menuById.get(r);n.push({name:null==e?void 0:e.name,link:null==e?void 0:e.url}),r=null==e?void 0:e.parentId}return n.reverse()}_menuIdEnum(){return{sport:784,monocity:61042,forAdults:62057,promotion:2192}}_createMenuMap(){var e;null==(e=this.fullMenu)||e.forEach(e=>this._setNode(e,null))}_setNode(e,t){var n;t&&(e.parentId=t),this.menuByUrl.has(e.url)&&!e.shard||(this.menuByUrl.set(e.url,e),this.menuById.set(e.id,e)),null==(n=e.childs)||n.forEach(t=>this._setNode(t,e.id))}_fromDynamicMenu(e,t){return e.map(e=>n(e,t.id,t));function n(e,t,r){const s={id:1e6*r.id+e.id,parent:null!=t?t:1e6*r.id+t,name:e.name,url:r.url+e.url.replace("/catalog",""),shard:e.shardKey,query:e.query,isDenyLink:e.childrenOnly||"blackhole"==e.shardKey};return e.nodes&&(s.childs=e.nodes.map(e=>n(e,s.id,r))),s}}},bc=n(43185);n(37324);$.observable.Object.prototype.setAllProperty=function(e,t){$.each(e,(e,n)=>{let r=e;t&&(r=`${t}.${r}`),$.isPlainObject(n)?this.setAllProperty(n,r):!$.isArray(n)&&this.setProperty(r,n)})},$.observable.Array.prototype.refreshArray=function(e){for(let t=0;t<e.length;t++)this._data.length===t?this.insert(e[t]):$.observable(this._data[t]).setProperty(e[t]);for(;e.length<this._data.length;)this.remove(this._data.length-1)};const yc={};$.views.helpers({filterTooltipText:function(e){switch(e){case"foriginal":return`${r.R.t("catalog.originalTip")} <span class="icon-original-check"></span>`;case"fpremiumuser":return r.R.t("catalog.goodsWithDiscount");case"ffeedbackpoints":return r.R.t("catalog.moneyForReview");case"fc2c":return r.R.t("catalog.resaleGoods");case"fpremium":return r.R.t("catalog.premiumQualityGoods");case"fwholesale":return`${r.R.t("common.wholesaleTitle")}.<br>${r.R.t("catalog.wholesaleDescription")}`;case"fcashback":return r.R.t("catalog.cashbackTip");default:return""}},loadTemplateAsync:async function(e,t=""){var n;if($.templates[e])return $.templates[e];if(!yc[e]){let r;const{$router:s,$httpClient:i}=WbSpaModel.prototype;if(window._debug)r=`${e}.json`;else{const t=`${e}.json`,i=null==(n=s.resourseLoader.tmplHashes)?void 0:n[t];r=t.replace(".json",`.${i}.json`)}yc[e]=t?i.fetchStatic(`${t}${r}`):i.fetchStatic(r,{},wb.helpers.url.urlForJsTmpl)}try{const t=await yc[e],n=Object.keys(t);return 1===n.length?($.templates(e,t[n[0]]),yc[e]=null,$.templates[e]):($.templates(t),yc[e])}catch(t){throw yc[e]=null,t}},copyText:function(e,t=15,n=""){var r;t=Number(t),(null==(r=navigator.clipboard)?void 0:r.writeText)?navigator.clipboard.writeText(e):$.views.helpers.copyTextFallback(e),this.$moduleLoader.execModule("bottomNotificationPanel","showNotification",[t,null,n])},copyTextFallback:function(e){const t=document.createElement("textarea");return t.value=e,t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.opacity="0",document.body.appendChild(t),t.focus(),t.select(),document.execCommand("copy"),document.body.removeChild(t),Promise.resolve()},loadWebApiTemplateAsync:async function(e){const t=`webapi_tmpl_${e}`,n=WbSpaModel.prototype;if($.templates[t])return $.templates[t];yc[t]||(yc[t]=n.$httpClient.fetchText(`/webapi/htmltemplate/${e}`));try{const e=await yc[t];try{const t=JSON.parse(e);$.templates(t)}catch(n){$.templates(t,e)}return yc[t]=null,$.templates[t]}catch(e){throw yc[t]=null,e}},suppliersOrgForms:Bn._.suppliersOrgForms,isDefaultSupplier:u.isDefaultSupplier,supplierFineName:Bn._.supplierFineName,ImageUrl:u.ImageUrl,ImageUrlPb:u.ImageUrlPb,urlFeedbackPhoto:wb.helpers.url.urlFeedbackPhoto,urlProductVideo:wb.helpers.url.urlVideoProduct,urlFeedbackVideo:wb.helpers.url.urlFeedbackVideo,productCardUrl:Bn._.productCardUrl,forBrandLogoFromId:Bn._.forBrandLogoFromId,forSellerLogo:u.forSellerLogo,forSellerLogoPb:u.forSellerLogoPb,forSellerLogoNew:Bn._.forSellerLogoNew,forSellerLogoNewPb:Bn._.forSellerLogoNewPb,isEmptyObject:Bn._.isEmptyObject,Declension:Bn._.Declension,pluralize:Bn._.pluralize,debug:Bn._.debug,dateFormat:u.formatDate,toDateFormat:Bn._.toDateFormat,formatDate:u.formatDate,toJson:Bn._.toJson,fromJson:Bn._.fromJson,encode:Bn._.encode,isLazyImgInCarousel:Bn._.isLazyImgInCarousel,timeLeft:Bn._.timeLeft,parseFromDotNet:Bn._.parseFromDotNet,timeLeftSpa:Bn._.timeLeftSpa,isPriceEqual:Bn._.isPriceEqual,isNullOrWhiteSpace:Bn._.isNullOrWhiteSpace,HasFlag:Bn._.HasFlag,blurAdult:Bn._.blurAdult,nonBreakingSpaceFormatted:u.nonBreakingSpaceFormatted,createPickupTabletWorkTime:Bn._.createPickupTabletWorkTime,pickupType:Bn._.pickupType,pickupPhotos:Bn._.pickupPhotos,priceFromRub:Bn._.priceFromRub,priceToRub:Bn._.priceToRub,toLocalPrice:Bn._.toLocalPrice,max:Bn._.max,abs:Bn._.abs,trimWord:u.trimWord,trimSupplierName:Bn._.trimSupplierName,brandUrl:u.brandUrl,brandUrlById:Bn._.brandUrlById,formatPrice:u.formatPrice,isDateToday:Bn._.isDateToday,isClosedByUser:Bn._.isClosedByUser,getCurrentCurrency:Bn._.getCurrentCurrency,fillFeedbackPhotosAndVideo:Bn._.fillFeedbackPhotosAndVideo,fillFeedbackPhotos:Bn._.fillFeedbackPhotos,fillFeedbackVideos:Bn._.fillFeedbackVideos,stripHtml:Bn._.stripHtml,isIosDevice:Bn._.isIosDevice,isHuaweiDevice:Bn._.isHuaweiDevice,sumBy:Bn._.sumBy,minFiscalPriceInCurrency:u.minFiscalPriceInCurrency,stopPropagation:Bn._.stopPropagation,subtract:Bn._.subtract,addLogisticsCost:Bn._.addLogisticsCost,isExpressDeliveryToday:Bn._.isExpressDeliveryToday,formatNumberWithDot:u.formatNumberWithDot,getVatAmount:Bn._.getVatAmount,onPreventDefault:Bn._.onPreventDefault,checkProductOpenSameWindowAb:Bn._.checkProductOpenSameWindowAb,applyConverter:Bn._.applyConverter,getMenuItems:Bn._.getMenuItems,getFilteredAllowedServicePages:Bn._.getFilteredAllowedServicePages,getAvailableLangs:Bn._.getAvailableLangs,getLangForServices:Bn._.getLangForServices,escapeHtmlSpecialChars:Bn._.escapeHtmlSpecialChars,allPhotosHaveKeys:Bn._.allPhotosHaveKeys,getFromMap:Bn._.getFromMap,getProductsMaxQuantity:Bn._.getProductsMaxQuantity}),$.views.converters({not:Bn.m.not,formatPhone:Bn.m.formatPhone,toOrdinalDigitByFemaleGender:Bn.m.toOrdinalDigitByFemaleGender,spaceFormatted:u.spaceFormatted,convertQuantity:u.convertQuantity,plusMinus:Bn.m.plusMinus,toInt:Bn.m.toInt,toFixed:Bn.m.toFixed,leadZero:Bn.m.leadZero,basketDeliveryDate:u.basketDeliveryDate,priceWithPrecision:Bn.m.priceWithPrecision,priceWithCoins:Bn.m.priceWithCoins,priceWithCurrencyOld:Bn.m.priceWithCurrencyOld,priceWithCurrencyV2:function(e,t,n,r){var s,i;return u.priceWithCurrencyV2.call(this,e,{showEmpty:t,currency:n,iso:null==(i=null==(s=this.tagCtx)?void 0:s.props)?void 0:i.iso,omitZeroCents:r})},getCurrencySign:function(e){return $.views.converters.currencySign(e)},urlForGood:u.urlForGood,urlSiteStatic:u.urlSiteStatic,urlSiteStaticPb:u.urlSiteStaticPb,urlStaticBasket:u.urlStaticBasket,toLower:Bn.m.toLower,dateFromTimestamp:u.dateFromTimestamp,formatDate:Bn.m.formatDate,humanDate:u.humanDate,humanTime:function(e){var t,n,r,s,i,o;const a=null==(n=null==(t=this.tagCtx)?void 0:t.props)?void 0:n.genitive,l=null==(s=null==(r=this.tagCtx)?void 0:r.props)?void 0:s.withDays,c=null==(o=null==(i=this.tagCtx)?void 0:i.props)?void 0:o.withSeconds;return Bn.m.humanTime(e,a,l,c)},differenceDatesInSeconds:Bn.m.differenceDatesInSeconds,humanTimerFormat:Bn.m.humanTimerFormat,humanTimerFormatSimple:Bn.m.humanTimerFormatSimple,humanTimerFormatSaleTimer:u.humanTimerFormatSaleTimer,getDaysFromOrder:Bn.m.getDaysFromOrder,dateStringToFormat:Bn.m.dateStringToFormat,localize:Bn.m.localize,pluralize:Bn.m.pluralize,customDateTimeFormat:Bn.m.customDateTimeFormat,divideNumberBySeparator:u.divideNumberBySeparator,trimWord:u.trimWord,trimSupplierName:Bn.m.trimSupplierName,join:Bn.m.join,humanBytes:Bn.m.humanBytes,deliveryDateTxt:u.deliveryDateTxt,fastDeliveryText:u.fastDeliveryText,minutesToTime:u.minutesToTime,formatTimeStr:Bn.m.formatTimeStr,dayNameFromDate:u.dayNameFromDate,getWorkSchedule:Bn.m.getWorkSchedule,deliveryType:Bn.m.deliveryType,formatString:Bn.m.formatString,trim:Bn.m.trim,imgForPromoCategory:Bn.m.imgForPromoCategory,fileName:Bn.m.fileName,convertToText:Bn.m.convertToText,onlyDigits:Bn.m.onlyDigits,toWebp:Bn.m.toWebp,useWebp:Bn.m.useWebp,toNumber:Bn.m.toNumber,fixHtml:Bn.m.fixHtml,legalRedirectUrl:Bn.m.legalRedirectUrl,fromPayment:e=>e?e.id:"",escapeHtml:Bn.m.escapeHtml}),$.views.tags({range:{boundProps:["start","end"],baseTag:"for",render:function(e){let t=e;const n=this.tagCtx,r=n.props.start||0;let s=n.props.end;const i=n.params.props;if(r||s)if(n.args.length)$.isArray(t)&&(t=t.slice(r,s));else{t=[],s=s||0;for(let e=r;e<=s;e++)t.push(e)}return arguments.length||i&&(i.start||i.end)?this.base&&this.base(t):this.base&&this.base()},onArrayChange:function(e,t){this.refresh()}},calendarV2:{dataBoundOnly:!0,onUpdate:!1,bindTo:["selected","limitTo","limitFrom"],linkedCtxParam:["selected","limitTo","limitFrom"],format:"dd.MM.yyyy",init:function(e){(null==e?void 0:e.props.format)&&(this.format=e.props.format),(null==e?void 0:e.props.appendTo)&&(this.appendTo=e.props.appendTo)},onBind:function(e){const t={x:0,y:1};e.props.offsetX&&(t.x=e.props.offsetX),this.datePicker=$(e.props.target).glDatePicker({selectedDate:this.ctxPrm("selected")?this.ctxPrm("selected"):e.props.limitTo,customWidth:e.props.width,zIndex:e.props.zIndex,appendTo:this.appendTo,overlay:"m"===wb.settings.displayMode,useClick:!0,calendarOffset:t,onClick:(t,n,r)=>{this.ctxPrm("selected",r),"function"==typeof e.props.onSelect&&e.props.onSelect(r.format(this.format))}}).glDatePicker(!0)},onAfterLink:function(e){const t={from:e.props.defaultFrom?e.props.defaultFrom:new Date(2001,1,1),to:new Date},n=[];e.props.limitFrom&&(t.from=e.props.limitFrom),e.props.limitTo&&(t.to=e.props.limitTo),this.datePicker.options.selectableDateRange=[t];for(let e=t.from.getFullYear();e<=t.to.getFullYear();e++)n.push(e);this.datePicker.options.selectableYears=n,this.datePicker.render()}},swiper:{dataBoundOnly:!0,mainElement:".custom-slider",boundProps:["total","needRefresh","activeSlide"],template:'\n                <div class="custom-slider{{if ~tag.sliderClass}} {{: ~tag.sliderClass}}{{/if}}">\n                    <div class="custom-slider__list"  data-lk-header-wba="All">\n                        {{include tmpl=#content/}}\n                    </div>\n                    {{if ~tag.showArrows}}\n                    <button type="button" aria-label="{{:~t(\'common.goBack\')}}" class="custom-slider__arrow custom-slider__arrow--prev" data-link="{on ~tag.scroll \'left\'}disabled{:~leftArrowDisabled}" data-lk-header-wba="See_more"></button>\n                    <button type="button" aria-label="{{:~t(\'common.goForward\')}}" class="custom-slider__arrow custom-slider__arrow--next" data-link="{on ~tag.scroll \'right\'}disabled{:~rightArrowDisabled}" data-lk-header-wba="See_more"></button>\n                    {{/if}}\n                    {{if ~tag.showArrows && ~tag.showFade}}\n                    <div class="custom-slider__fade custom-slider__fade--prev" data-link="disabled{:~leftArrowDisabled}"></div>\n                    <div class="custom-slider__fade custom-slider__fade--next" data-link="disabled{:~rightArrowDisabled}"></div>\n                    {{/if}}\n                </div>\n            ',init:function(){var e,t,n,r,s;const i=this.tagCtx.props.slidesPerView;this.slidesPerView="auto"===i||"number"==typeof i?i:1,this.showArrows=null!=(e=this.tagCtx.props.showArrows)&&e,this.showFade=null!=(t=this.tagCtx.props.showFade)&&t,this.sliderClass=null!=(n=this.tagCtx.props.sliderClass)&&n,this.slideSelector=null!=(r=this.tagCtx.props.slideSelector)?r:".custom-slider__item",this.arrowStopPropagation=null!=(s=this.tagCtx.props.arrowStopPropagation)&&s,this.checkArrows=this.checkArrows.bind(this),this.doOnScroll=WbSpaModel.prototype.$helper.throttle(this.doOnScroll.bind(this),300),this.scrollToSlide=this.scrollToSlide.bind(this)},onAfterLink:function(){this.checkArrows();const e=this.tagCtx.props.activeSlide;void 0!==e&&this.scrollToSlide(e)},onBind:function(){var e;this.containerList=this.mainElem[0].querySelector(".custom-slider__list"),null==(e=this.containerList)||e.addEventListener("scroll",this.doOnScroll)},onUpdate:function(e,t){return"propertyChange"===e.type&&"needRefresh"===t.path&&(this.containerList.scrollLeft=0,this.checkArrows()),!1},scroll:function(e,t){var n;this.arrowStopPropagation&&t.stopPropagation();const r=Number(null==(n=this.containerList.querySelector(this.slideSelector))?void 0:n.clientWidth)+parseInt(getComputedStyle(this.containerList).gap);let s=this.slidesPerView;if("auto"===this.slidesPerView){const e=this.mainElem[0].getBoundingClientRect();s=Math.floor(e.width/r)}const i=r*Number(s),o=Math.round(this.containerList.scrollLeft)+("left"===e?-i:i);this.containerList.scrollLeft=Math.round(o/r)*r},scrollToSlide:function(e){var t;const n=e*(Number(null==(t=this.containerList.querySelector(this.slideSelector))?void 0:t.clientWidth)+parseInt(getComputedStyle(this.containerList).gap));this.containerList.scrollLeft=n},doOnScroll:async function(e){this.checkArrows()},checkArrows:async function(){window.requestAnimationFrame(()=>{const e=this.containerList.querySelectorAll(this.slideSelector);if(e.length>0){const t=this.mainElem[0].getBoundingClientRect(),n=e[e.length-1].getBoundingClientRect();this.ctxPrm("leftArrowDisabled",this.containerList.scrollLeft<=0),this.ctxPrm("rightArrowDisabled",t.right+5>=n.right)}else this.ctxPrm("leftArrowDisabled",!0),this.ctxPrm("rightArrowDisabled",!0)})}},btnAdvertising:{template:"\n            {{if ordBannerMark}}\n                <button \n                    type=\"button\" \n                    class=\"btn-advertising\" \n                    title=\"\"\n                    data-link=\"{on ~onPreventDefault}\n                    {tooltip classes='tooltip-advertising j-tooltip-advertising tooltip--dark' pos='alignright bottom' trigger='hover' distance=0 tmplName='advertisingTooltipTmpl' tmplData=ordBannerMark}\">\n                    <span>{{:~t('promo.advertisement')}}</span>\n                </button>\n            {{/if}}\n        "},infiniteScroll:{mainElement:"div",template:'<div class="scroll-loader"></div>',onAfterLink(){this.scrollObserver=new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting&&this.tagCtx.props.callback()})},{threshold:0,rootMargin:"0px 0px 50% 0px"}),this.scrollObserver.observe(this.mainElem[0])},onDispose(){this.scrollObserver.disconnect()}},onSwipe:{init:function(e){var t;this.threshold=10,1==(null==(t=null==e?void 0:e.args)?void 0:t.length)&&"function"==typeof e.args[0]&&(this.onSwiped=e.args[0]),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this)},onBind:function(){var e,t,n;this.onSwiped&&(null==(e=this.linkCtx)||e.elem.addEventListener("touchstart",this.onTouchStart,!1),null==(t=this.linkCtx)||t.elem.addEventListener("touchmove",this.onTouchMove,!1),null==(n=this.linkCtx)||n.elem.addEventListener("touchend",this.onTouchEnd,!1))},onUnbind:function(){var e,t,n;null==(e=this.linkCtx)||e.elem.removeEventListener("touchstart",this.onTouchStart,!1),null==(t=this.linkCtx)||t.elem.removeEventListener("touchmove",this.onTouchMove,!1),null==(n=this.linkCtx)||n.elem.removeEventListener("touchend",this.onTouchEnd,!1)},onTouchStart:function(e){const t=e.changedTouches[0];this.startX=t.pageX,this.startY=t.pageY,e.cancelable&&e.preventDefault()},onTouchMove:function(e){const t=e.changedTouches[0];this.deltaX=t.pageX-this.startX,this.deltaY=t.pageY-this.startY,e.cancelable&&e.preventDefault()},onTouchEnd:function(e){const t=Math.atan2(-this.deltaY,-this.deltaX),n=3*Math.PI/4,r=Math.PI/4;let s;s=r<=t&&t<=n?"up":-n<=t&&t<=-r?"down":-n<t&&t<n?"left":"right",(Math.abs(this.deltaX)>=this.threshold||Math.abs(this.deltaY)>=this.threshold)&&this.onSwiped(s),e.cancelable&&e.preventDefault()}}});var vc=Object.defineProperty,wc=Object.defineProperties,Sc=Object.getOwnPropertyDescriptors,_c=Object.getOwnPropertySymbols,Ic=Object.prototype.hasOwnProperty,Cc=Object.prototype.propertyIsEnumerable,kc=(e,t,n)=>t in e?vc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Pc=(e,t,n)=>kc(e,"symbol"!=typeof t?t+"":t,n);const{CARD_URL:Ec,CARD_PROXY_URL:Tc,CARD_UNREG_URL:Oc,CARD_UNREG_PROXY_URL:xc}=l.A;wb.xnm=function(){let e=[],t=null;const n=864e5,s="adultSubjectIds",i=36e5,o=36e5,a="product_colors",l="return-days",u=[7031,7032,3382,3392,8332,5020,8411,7018,8251,6217,7019,6296,6304,6302,5783,5519,5948,5814,5784,5789,5813,5553,7015,5779,5780,5292,5293,5294,5297,5478,8588,5132,5129,5150,5121,5126,8590,5361,5127,5128,5158,5193,5194,5159,5019,5186,5021,5023,5119,5122,5125,5156,5065,5050,5084,5025,5037,5026,5086,5040,5043,5045,5046,5052,5064,5066,5068,5070,5073,5076,5085,5087,5088,5091,8589,5051,5090,7014,5117,5118,7025,7733,5069,5071,5120,4256,3489,5075,5080,5197,5534,5482,5288,53,5289,5039,2909,5273,2603,2604,2606,2611,3490,2610,2612,7710,2616,2609,2613,2618,5360,2602,2605,5630,7540,5074,5067,2617,2607,7571,6998,5116,5042,5668,2608,5083,2614,5082,5047,8145,5044,7016,5328,7731,8256,5332,5925,5340,5355,7666,7655,5576,7106,5593,5356,7020,5812,400,5049,7755,8110,7012,5072,5048,3517,2615,5325,6303,5153,5359,7770,8111,6315,8248,5326,6246,880,5324,5513,5624,5295,8243,2596,5296,5327,1354,7017,5354,5406,6062,6976,7013,7438,5497,5353,5041,5298,7732,5880,6412,5484,5357,3415,3452,3451,3410,6975,6986,6939,6972,6980,6990,7030,6981,6989,6974,6977,6983,6979,6984,6978,6987,6982,6973,6985,5089,5772],d=[6967],p=(e,t)=>e.rank>t.rank?1:e.rank===t.rank?0:-1;async function h(){if(e.length>0)return Promise.resolve();const t=JSON.parse(localStorage.getItem(s));if((null==t?void 0:t.expired)>Date.now()-n)return e=t.info,Promise.resolve();try{const t="adult-subjects.json",r=await WbSpaModel.prototype.$httpClient.fetchStatic(t,{timeout:5e3});return r&&0!==r.length?(e=r,null==localStorage||localStorage.putObject(s,{info:r,expired:Date.now()+n}),Promise.resolve()):(console.warn("Getting adult subjects has failed"),Promise.reject())}catch(e){return console.warn("Getting adult subjects has failed"),console.error(e.message),Promise.resolve()}}function m(e){var n,r,s;return(!t||t.expired<Date.now()-o)&&f(),null!=(s=null==(r=null==(n=null==t?void 0:t.info)?void 0:n.returnDaysData)?void 0:r.subjects[e])?s:null}async function g(e){await navigator.locks.request("lock-return-subjects",async()=>{const n=await WbSpaModel.prototype.$httpClient.fetchStatic(`subjects-return-days-${e}.json`);if(n){const r={info:{locale:e,returnDaysData:n},expired:Date.now()+i};localStorage.setItem(l,JSON.stringify(r)),t=r}})}async function f(){var e;try{localStorage.removeItem("no-return-subjects.json"),t||window.addEventListener("storage",e=>{e.key===l&&e.newValue&&(t=JSON.parse(e.newValue))});const n=null!=(e=WbSpaModel.prototype.$user.getLocale())?e:wb.settings.currentLocale,r=localStorage.getItem(l);if(r){const e=JSON.parse(r);if(e.info.locale!==n)g(n);else if(e.expired>Date.now()-o)t=e;else{await WbSpaModel.prototype.$httpClient.fetchStatic("subjects-return-days-front.json.hash")===e.info.returnDaysData.hash?(localStorage.setItem(l,JSON.stringify({info:e.info,expired:Date.now()+i})),t=((e,t)=>wc(e,Sc(t)))(((e,t)=>{for(var n in t||(t={}))Ic.call(t,n)&&kc(e,n,t[n]);if(_c)for(var n of _c(t))Cc.call(t,n)&&kc(e,n,t[n]);return e})({},e),{expired:Date.now()+i})):g(n)}}else g(n)}catch(e){console.warn("Initializing return-days has failed"),console.error(e.message)}}function b(t,n){const r=e.length>0?e:u;return-1!==r.indexOf(t)||!!n&&-1!==r.indexOf(n)}function w(e,t){const n=d;return-1!==n.indexOf(e)||!!t&&-1!==n.indexOf(t)}class S{constructor(e){Pc(this,"width",0),Pc(this,"weight",0),Pc(this,"length",0),Pc(this,"depth",0),Pc(this,"v"),Pc(this,"sum3d"),null==e||e.forEach(e=>{"Вес с упаковкой (кг)"===e.name&&(this.weight=parseFloat(e.value)||0),"Ширина упаковки (мм)"===e.name&&(this.width=parseInt(e.value,10)||0),"Длина упаковки (мм)"===e.name&&(this.length=parseInt(e.value,10)||0),"Высота упаковки (мм)"===e.name&&(this.depth=parseInt(e.value,10)||0)}),this.v=this.width/1e3*(this.length/1e3)*(this.depth/1e3),this.sum3d=this.width+this.length+this.depth}}const _=(e,t)=>{if(e){if(!wb.currencies.localeWithCoins.includes(String(t)))return e.toString().slice(0,-2);const n=e.toString();return`${n.slice(0,-2)||"0"}.${n.slice(-2)}`}return""};function I(e,t=!1){if(t&&e.pics>0)return!0;if((0,y.c)().isAuth&&!e.price)return!1;if(0===e.pics||!e.sizes||0===e.sizes.length)return!1;for(let t=0;t<e.sizes.length;t++){const n=e.sizes[t];if(n.stocks&&n.stocks.length>0)return!0}return!1}function C(e,t=!1){return!!(t&&e.pics>0)||!(0===e.pics||(0,y.c)().isAuth&&!e.price||!e.sizes||0===e.sizes.length)}function k(e,t){return!t||!e.isAdult}function P(){var e,t;return wb.global.settings.switches.enableNewRangingDeferred?WbSpaModel.prototype.checkMobileRange(Number(WbSpaModel.prototype.$user.getId()),(null==(t=null==(e=wb.global.settings.mobileAppVariables)?void 0:e.objects)?void 0:t.enableNewRangingDeferredRange)||[]):WbSpaModel.prototype.$analitic.checkDataInSplitterServiceV2("common","ab_adv_waiting_wish_u_see","yes")}function E(e,t,n,r){const s=new URLSearchParams(e);return t&&s.set("dest",t.toString()),n&&s.set("curr",n.toLowerCase()),r&&s.delete("hide_dtype"),WbSpaModel.prototype.$analitic.appendSplitInfoV2(s,"catalog"),s.set("lang",wb.currentLanguage),s}function T(e,t,n,r){return`${(e=>{const t=wb.global.settings.switches.enableCatalogUnregHost&&!(0,y.c)().isAuth;return`${"ru"===wb.settings.currentLocale&&(wb.global.settings.switches.enableCatalogProxy||(0,v.a)().checkDataInSplitterServiceV2("common","ab_enableAntiDtest","yes"))?t?xc:Tc:t?Oc:Ec}${e?"cards/v4/detail":"cards/v4/list"}`})(n)}?${e}&nm=${t.join(";")}${!n&&r?"&ignore_stocks=true":""}`}async function O(e,t,n){return WbSpaModel.prototype.$httpClient.fetchJSON(e,{xhrFields:{withCredentials:!1},dataType:"json",withPowToken:!0,signal:n},{timeout:t,addAuthHeader:!0,retry:2,nullOnError:!0})}function x(e,t=!1,n=!1,s=null,i=null,o=!1,a){return new Promise((l,u)=>{const d=(0,y.c)();Promise.all([wb.user.getXinfo(),h()]).then(([p])=>{var h,m;const g=[];let f=[];const y=E(p,s,i,o);e.forEach(e=>{100===f.length&&(g.push(O(T(y,f,t,n),void 0,a)),f=[]),f.push(e)}),f.length>0&&g.push(O(T(y,f,t,n),void 0,a));const v={},S=y.get("curr").toUpperCase(),_=Number(y.get("spp")),I=Number(y.get("dest")),C=!(null!=(m=null==(h=wb.global.settings.variables.withLogisticsCountries)?void 0:h.includes(WbSpaModel.prototype.$user.getLocale()))&&m),k=wb.xnm.show2025Logistics();Promise.all(g).then(e=>{e.forEach(e=>{var t;(t=e)&&t.products&&t.products.forEach(e=>{var t,n,s,i;e.name=(null==(t=e.name)?void 0:t.length)>0?e.name:r.R.t("productCard.noNameSpecified"),e.isAdult=e.isAdult||b(e.subjectId,e.subjectParentId),e.isAlcohol=e.isAlcohol||w(e.subjectId,e.subjectParentId),e.currency=S,e.spp=_,e.dest=I,A(e),M(e,C,k),(d.isAuth&&!e.price.priceToShow||!d.isAuth&&e.sizes.every(e=>{var t;return!((null==(t=e.stocks)?void 0:t.length)>0||e.wh)}))&&(e.soldOut=!0);const o=H(e.viewFlags);e.is2025LogisticCost=e.price.logisticsToShow>0&&(k||wb.global.settings.switches.enableC2COriginalCostKT&&o),e.isC2C=o,e.isWholesale=z(e.viewFlags),e.isNeedToBlurPrice=q(),"by"===wb.settings.currentLocale&&(null==(i=null==(s=null==(n=wb.global.settings.mobileAppVariables.objects)?void 0:n.hidePhotoAdultSubjects)?void 0:s.includes)?void 0:i.call(s,e.subjectId))&&(e.viewFlags=Number((BigInt(e.viewFlags)|c._q.hidePhoto)&~c._q.hasVideo),e.pics=1),e.isDigital=J(e.dtype),v[e.id]=e})}),l(v)}).catch(e=>{console.log(`${e.statusText} ${e.responseText}`),u()})})})}function M(e,t=!0,n=!1){var r,s;if(!e||!e.sizes)return;let i,o=!1;const a=WbSpaModel.prototype.$user.getUserGradeFromCache(),l=e.premiumSale>0&&((null==a?void 0:a.isPremium)||(null==e?void 0:e.showPremium)),u=null!=(r=null==a?void 0:a.priceAdjustmentPercent)?r:0,d=wb.settings.b2bMode||e.isPriceAdjustmentDisabled?0:u,p=Math.abs(d),h=(0,y.c)().isAuth,m=q();e.priceAdjustmentPercent=V(e.dtype,c.iA.CC)||V(e.dtype,c.iA.C2C)||0===d?0:d,e.premiumSalePercent=WbSpaModel.prototype.$auth.isAuth&&null!=(s=e.premiumSale)?s:0,l||(e.premiumSale=0),e.sizes.forEach(r=>{var s;if(!r.price)return;!r.price.product&&h&&delete r.stocks,m&&(r.price={hidden:!0}),r.price.total=r.price.product+r.price.logistics;let u=t?r.price.total:r.price.product;r.price.priceForBasket=r.price.total;let d=0;const g=null!=(s=e.priceAdjustmentPercent)?s:0;if(r.price.premiumSaleAmount=0,wb.global.settings.switches.enableNewCalculationOfLogistic&&!t&&a&&(!wb.xnm.isDtypeFlagSet(null==r?void 0:r.dtype,c.iA.ShouldForceLogistics)||a.return_fee>1)?r.price.logisticsToShow=function(e,t,n){if(0===n||0===e.logistics)return 0;return 100*wb.priceHelper.calculateDiscount(e.logistics/100,100*n,t,!0)}(r.price,e.currency,a.return_fee):r.price.logisticsToShow=r.price.logistics,0!==e.priceAdjustmentPercent&&(d=100*wb.priceHelper.calculateDiscount(r.price.product/100,p,e.currency),u-=g>0?d:-d),l){const t=wb.priceHelper.calculateDiscount((r.price.product-(g>0?d:-d))/100,e.premiumSale,e.currency);u-=100*t,r.price.premiumSaleAmount=t}const f=t?u:u+r.price.logistics;r.price.paymentDiscountAmount=wb.settings.b2bMode?0:wb.priceHelper.calcWalletDiscount(u/100,f/100,e.currency,r.saleConditions,0,wb.settings.walletRidLimit),(n||wb.global.settings.switches.enableC2COriginalCostKT&&H(e.viewFlags))&&(u+=r.price.logisticsToShow);const b=~~(100*(r.price.basic-u)/r.price.basic);var y;r.price.sale=b>0?b:0,r.price.priceToShow=u,(r.price.basic<u||r.price.basic===u&&Number(r.sale)>0||r.price.sale<=wb.global.settings.variables.pricesDeltaToShowSale)&&(r.price.basic=u,r.price.sale=0),i||(i=r),i.price.priceToShow!==r.price.priceToShow&&(o=!0),(i.price.priceToShow>r.price.priceToShow||i.price.priceToShow==r.price.priceToShow&&r.time1+r.time2<i.time1+i.time2)&&(i=r),r.supplierPromoSale=(y=r.supplierPromo,wb.global.settings.switches.enableSupplierPromos&&!wb.analitics.checkDataInSplitterServiceV2("common","ab_supplier_promo","no")&&(null==y?void 0:y.discount)&&y.discount>0?null==y?void 0:y.discount:0)}),i?(e.price=i.price,e.time1=i.time1,e.time2=i.time2,e.supplierPromoSale=i.supplierPromoSale):e.price={hidden:m},o&&(e.diffPrice=!0)}function A(e,t,n){var r,s,i,o,a;return e?(t||(t=null!=(a=null!=(o=null==(s=null==(r=e.sizes)?void 0:r.filter(e=>e.payload))?void 0:s[0])?o:null==(i=e.sizes)?void 0:i[0])?a:e),t&&t.saleConditions?(e.isOnePurchasePromo=F(t.saleConditions),1&t.saleConditions&&(e.isUnrefusable=!0),2&t.saleConditions&&(e[1===n?"needPrepay":"isPrepaid"]=!0),4&t.saleConditions&&(e.isUnreturnable=!0),8&t.saleConditions&&(e.isVerificationReturn=!0),t.saleConditions>>9&1&&(e.isInsurance=!0),128&t.saleConditions&&(e.isWbInstCompliant=!0),1048576&t.saleConditions&&(e.wltSaleBan=!0),536870912&t.saleConditions&&(e.isPostpaidBooking=!0),t.saleConditions>=4096&&wb.global.settings.switches.enableCashback&&"ru"==WbSpaModel.prototype.$user.getLocale()&&"ru"===wb.settings.currentLocale&&"RUB"==e.currency?e.cashbackPercent=t.saleConditions>>13&31:e.cashbackPercent=0,e.premiumSale=t.saleConditions>>22&31,e.isPriceAdjustmentDisabled=!!(t.saleConditions>>30&1),e):e):e}function R(){try{return localStorage.getObject(a)||{}}catch(e){return console.warn("[ProductColorsCache]: failed to read from local storage",e),{}}}function D(e){var t;const n={isOnlyColor:!1,value:""},r=(e||[]).map(e=>{var t;if(e.is_variable){const n=/^[\d.,]+$/,r=null==(t=e.variable_values)?void 0:t.filter(e=>!n.test(e)&&Boolean(e)).join(", ");if(!(4!==e.charc_type&&5!==e.charc_type||n.test(e.value)))return{value:e.value,name:e.name};if(r)return{value:r,name:e.name}}return null}).filter(e=>Boolean(e)).splice(0,3);return 1==(null==r?void 0:r.length)&&"Цвет"==(null==(t=r[0])?void 0:t.name)?(n.isOnlyColor=!0,n.value=null==r?void 0:r.map(e=>e.value).toString(),n):(null==r?void 0:r.length)>=1?(n.isOnlyColor=!1,n.value=null==r?void 0:r.map(e=>e.value).join(" · "),n):null}function L(e,t=!1,n=!1){var r,s,i,o,a,l,u,d,p,h,m,g,f,y,v;const S=!(null!=(s=null==(r=wb.global.settings.variables.withLogisticsCountries)?void 0:r.includes(WbSpaModel.prototype.$user.getLocale()))&&s),I=wb.xnm.show2025Logistics(),C=null!=(l=null==(o=null==(i=e.sizes)?void 0:i.filter(e=>e.payload))?void 0:o[0])?l:null==(a=e.sizes)?void 0:a[0];A(e,C),M(e,S,I);const k=null!=(u=e.price)?u:{},P=20624===e.brandId||30624===e.siteBrandId,E=0!==e.priceAdjustmentPercent?wb.priceHelper.calculateDiscount(k.product/100,Math.abs(null!=(d=e.priceAdjustmentPercent)?d:0),e.currency):0,T=e.premiumSale>0&&((null==(p=WbSpaModel.prototype.$user.getUserGradeFromCache())?void 0:p.isPremium)||(null==e?void 0:e.showPremium))?wb.priceHelper.calculateDiscount(k.product/100-((null!=(h=e.priceAdjustmentPercent)?h:0)>0?E:-E),e.premiumSale,e.currency):0,O=wb.global.settings.switches.enableCashback&&e.cashbackPercent>0&&!e.soldOut?wb.priceHelper.calculateDiscount(k.product/100-T,e.cashbackPercent,e.currency):0,x=_(k.priceToShow,e.currency),R=_(k.product,e.currency),D=V(null==C?void 0:C.dtype,c.iA.DBS)||V(null==C?void 0:C.dtype,c.iA.EDBS)||!1,L=!e.soldOut&&"RUB"==e.currency&&"ru"==WbSpaModel.prototype.$user.getLocale(),F=H(e.viewFlags),K={rcId:e.rcId,nmId:e.id,cod1S:e.id,imtId:e.root,name:e.name,pics:e.pics,subjectId:e.subjectId,subjectParentId:e.subjectParentId,kindId:e.kindId,brand:e.brand,brandId:e.siteBrandId,brandCod:e.brandId,price:_(k.basic,e.currency),salePrice:x,productSalePrice:R,priceForBasket:_(k.priceForBasket,e.currency),logisticsCost:k.logisticsToShow,colorCodes:e.colors.map(e=>e.id),sale:k.sale,priceDiff:e.diffPrice,star:e.rating,reviewRating:e.reviewRating,feedbacks:e.feedbacks,feedbackPoints:L?e.feedbackPoints:void 0,adult:e.isAdult||b(e.subjectId,e.subjectParentId)||!1,isPostpaidBooking:e.isPostpaidBooking||!1,isBooking:V(null==C?void 0:C.dtype,c.iA.CC),isAlcohol:e.isAlcohol||w(e.subjectId,e.subjectParentId)||!1,isDigitalGood:e.isDigital||!1,isInsurance:e.isInsurance||!1,sizes:B(e.sizes,t,n,e.currency),panelPromoId:e.panelPromoId,color:e.colors.map(e=>e.name).join(","),woSize:1===(null==(m=e.sizes)?void 0:m.length)&&""===C.name,canQuickOrder:!e.isDigital,soldOut:e.soldOut||!1,deliveryHours:(e.time1||0)+(e.time2||0),fastestStore:e.wh,isPreorder:5772===e.brandId&&wb.settings.preOrderList.includes(e.id),currency:e.currency,spp:e.spp,dest:e.dest,saleConditions:null==C?void 0:C.saleConditions,isUnrefusable:e.isUnrefusable,isPrepaid:e.isPrepaid,isUnreturnable:e.isUnreturnable,isVerificationReturn:e.isVerificationReturn,dist:e.dist,time1:e.time1,time2:e.time2,totalQuantity:e.totalQuantity,payloadV2:null==C?void 0:C.payload,optionId:null==C?void 0:C.optionId,whDtype:null==C?void 0:C.dtype,logs:e.logs,supplierId:e.supplierId,supplier:$.views.helpers.supplierFineName(e.supplier,e.brandId),supplierRating:e.supplierRating,sort:e.sort||0,viewFlags:e.viewFlags,shouldShowOriginalMark:!P&&wb.xnm.isViewFlagSet(e.viewFlags,c._q.isOriginal),shouldShowSizeOnResaleSnippet:wb.global.settings.switches.enableC2CCatalogSnippetShowSize&&F,paymentDiscountAmount:k.paymentDiscountAmount,premiumSaleAmount:k.premiumSaleAmount,catalogPrice:k,supplierFlags:e.supplierFlags,normQuery:e.normQuery,rs:e.rs,isAdv:N(e),isDbs:D,extraAnaliticsCode:e.extraAnaliticsCode,preset_type:e.preset_type,premiumSale:e.premiumSale,premiumSalePercent:e.premiumSalePercent,isAccentSnippet:wb.global.settings.switches.enablePremiumSellerAccent&&G(e.supplierFlags,c.Fu.enablePremiumBackground),isPremiumSeller:G(e.supplierFlags,c.Fu.isPremium),cashbackPercent:e.cashbackPercent,cashbackAmount:O,hideMultipleSellers:G(e.supplierFlags,c.Fu.disableSimilar)&&Boolean(wb.global.settings.switches.hideMultipleSellersLever),priceWithCouponAndDiscount:String(x),productPriceWithCouponAndDiscount:R,is2025LogisticCost:k.logisticsToShow>0&&(I||wb.global.settings.switches.enableC2COriginalCostKT&&F),isWbInstCompliant:e.isWbInstCompliant||!1,siteBrandId:e.siteBrandId,wbaMeta:e.meta,isC2C:F,isWholesale:z(e.viewFlags),isNeedToBlurPrice:q(),catalog_type:e.catalog_type,catalog_value:e.catalog_value,recid:e.recid,nmFeedbacks:e.nmFeedbacks,nmReviewRating:e.nmReviewRating,isOnePurchasePromo:e.isOnePurchasePromo,supplierPromoSale:e.supplierPromoSale,priceAdjustmentPercent:null!=(g=e.priceAdjustmentPercent)?g:0,promotions:e.promotions};return"by"===wb.settings.currentLocale&&(null==(v=null==(y=null==(f=wb.global.settings.mobileAppVariables.objects)?void 0:f.hidePhotoAdultSubjects)?void 0:y.includes)?void 0:v.call(y,K.subjectId))&&(K.viewFlags=Number((BigInt(K.viewFlags)|c._q.hidePhoto)&~c._q.hasVideo),K.pics=1),wb.settings.b2bMode&&U(K.viewFlags)&&(K.isVatRefundable=!0,K.vatPercent=W(K.viewFlags)),j(K.panelPromoId)&&(K.showRedPrice=!0),K.isC2C&&(K.paymentDiscountAmount=0,K.brand="",K.brandId=0,K.showRedPrice=!1,K.priceDiff=!1,K.sale=0,K.panelPromoId=0,K.supplierPromoSale=0),function(e){if(!WbSpaModel.prototype.$auth.isAuth||!e.totalQuantity||e.totalQuantity>$n.wT)return;WbSpaModel.prototype.$promotionsHelper.isThermometerNeeded(Number(e.panelPromoId))&&(e.showThermometer=!0)}(K),K}const B=(e,t=!1,n=!1,r=null)=>{if(null==e)return;e.sort((e,t)=>{const n=e.stocks&&e.stocks.length>0;return n===(t.stocks&&t.stocks.length>0)?e.rank-t.rank:n?-1:1});let s=e;return t&&(s=e.filter(e=>e.stocks&&e.stocks.length>0)),s.map(e=>{var t;const s={ch:e.optionId,s:1,nm:e.origName,rusNm:e.name,stocks:null!=(t=e.stocks)?t:[{wh:e.wh,dtype:e.dtype,qty:1,priority:1,time1:e.time1,time2:e.time2}],unavailable:!!e.stocks&&e.stocks.length<=0,payloadV2:e.payload,saleConditions:e.saleConditions,whDtype:e.dtype,deliveryHours:(e.time1||0)+(e.time2||0),wh:e.wh,supplierPromoSale:e.supplierPromoSale};return n&&e.price&&r&&(s.price=_(e.price.basic,r),s.salePrice=_(e.price.priceToShow,r),s.priceForBasket=_(e.price.priceForBasket,r),s.catalogPrice=e.price,s.returnCost=e.price.return,s.logisticsCost=e.price.logisticsToShow),s})};function N(e){return e&&K(e.viewFlags,c._q.isAdvert)}function j(e){return Boolean(WbSpaModel.prototype.$promotionsHelper.isRedPriceNeeded(Number(e)))}function F(e){return Boolean(wb.global.settings.switches.enableOnePurchasePromo&&wb.global.settings.mobileAppVariables.objects.onePurchasePromo&&Date.now()>=1e3*wb.global.settings.mobileAppVariables.objects.onePurchasePromo.dateFromUTC&&Date.now()<=1e3*wb.global.settings.mobileAppVariables.objects.onePurchasePromo.dateToUTC)&&Boolean(e>>10&1)}function U(e){return K(e,c._q.isB2B_NDS_refund)}function W(e){switch(Number(e)>>18&15){case 0:case 1:case 6:return null;case 2:return 5;case 3:return 7;case 4:return 10;case 5:return 20;default:return}}function H(e){return K(e,c._q.isC2C)}function V(e,t){return!!e&&(BigInt(e)&t)!==BigInt("0")}function z(e){return wb.global.settings.switches.enableWholesaleKt&&wb.xnm.isViewFlagSet(e,c._q.isWholesale)}function q(){const e=(0,y.c)();return wb.global.settings.switches.enableCatalogAuthForPrice&&!e.isAuth}function K(e,t){return!!e&&(BigInt(e)&t)!==BigInt("0")}function G(e,t){return!!e&&(BigInt(e)&t)!==BigInt("0")}function J(e){return V(e,c.iA.WBD)}return{getGoodsForRecommendAndCatalog:function(e,t,n,r){return new Promise((s,i)=>{const o=[];if(!e)return void s(o);const a=r;x(e,a,t).then(i=>{e.forEach(e=>{if(i[e]){const s=i[e];if(a){if(s&&I(s,t)&&k(s,n)){const e=L(s,!r,!0);o.push(e)}}else if(s&&C(s,t)&&k(s,n)){const e=L(s,!1,!0);o.push(e)}}}),s(o)}).catch(()=>{e.forEach(e=>{o.push({nmId:e,cod1S:e,isFail:!0})}),s(o)})})},getXnmProducts:x,getInfoForWbaStat:async function(e,t){try{const n=e.map(e=>e.nmId),r=t?await t:await x(n);return e.reduce((e,t)=>{var n,s,i;const{nmId:o,size:a}=t;let l=null;if(null==r?void 0:r.hasOwnProperty(t.nmId)){const e=r[o],t=null==(s=null==(n=e.sizes.find(e=>e.optionId===a))?void 0:n.price)?void 0:s.total,c=a?e.sizes.find(e=>e.optionId===a):null==(i=B(e.sizes))?void 0:i.filter(e=>{var t;return(null==(t=e.stocks)?void 0:t.length)>0})[0];l={salePrice:Number(t)/100,stores:null==c?void 0:c.stocks}}return e.set(o,l),e},new Map)}catch(e){return console.error(e),new Map}},getCatalogCards:function(e,t,n,r=!1){return new Promise((s,i)=>{const o={};e.forEach(e=>{o[e]={}});const a=r;x(e,a,n).then(e=>{Object.values(e).forEach(e=>{const r=o[e.id];a?r&&I(e,n)&&k(e,t)&&(e.sizes&&e.sizes.length>0&&e.sizes.sort(p),o[e.id]=e):r&&C(e,n)&&k(e,t)&&(e.sizes.sort(p),o[e.id]=e)})}).then(()=>s(o),()=>i())})},convertXProductToSpaCatalogProduct:L,getProductNamesMap:R,getProductColorsByNmIdsAsync:function(e){return new Promise((t,n)=>{let r=R(),s={},i=[];const o=wb.currentLanguage;if(e.forEach(e=>{const t=r[e];!t||!t.dims||"default"!==t.lang&&(t.lang||"ru")!==o?i.push(e):s[e]=t}),!i.length)return void t(s);const l=i.map(e=>WbSpaModel.prototype.$services.productCard.loadStaticProductAsync(e).then(t=>t?Promise.resolve({lang:t.lang,options:t.options,nmId:t.nm_id,color:t.nm_colors_names,name:t.imt_name,dims:new S(t.options),specs:D(t.options)}):Promise.resolve({nmId:e,color:""})).catch(()=>Promise.resolve({nmId:e,color:""})));return Promise.all(l).then(e=>{!function(e,t){try{const n=255;t=null!=t?t:R(),e.forEach(e=>{t[e.nmId]={nmId:e.nmId,c:e.color,n:e.name,lang:e.lang,dims:e.dims,specs:e.specs,ts:Date.now()}});let r=Object.values(t);return r.length>n&&(r.sort((e,t)=>t.ts-e.ts),r.splice(n),t=r.reduce((e,t)=>(e[t.nmId]=t,e),{})),localStorage.putObject(a,t),t}catch(e){return console.warn("[ProductColorsCache]: failed to update colors map",e),{}}}(e,r),t(r)})})},getMiniProductCard:async function(e){if(isNaN(e))throw new TypeError("nmId at getMiniProductCard is not a number");const t=await x([e],!0);return t[e]?L(t[e],!1,!0):null},proceedPrices:M,initializeReturnDays:f,isNoReturnProduct:function(e){return!m(e)},getReturnDaysBySubject:m,expandSaleConditions:A,fillFeedbacksPayment:async function(e){if(!wb.global.settings.switches.enableFeedbacksForPoints||!(null==e?void 0:e.length))return null;await WbSpaModel.prototype.$moduleLoader.loadServiceAsync("feedbacksPaymentService"),await WbSpaModel.prototype.$services.feedbacksPaymentService.fillFeedbacksPayments(e)},fillFeedbacksPaymentByUser:async function(e){if(!wb.global.settings.switches.enableFeedbacksForPoints||!(null==e?void 0:e.length))return null;await WbSpaModel.prototype.$moduleLoader.loadServiceAsync("feedbacksPaymentService"),await WbSpaModel.prototype.$services.feedbacksPaymentService.fillFeedbacksPaymentsByUser(e)},getFeedbacksPaymentByUser:async function(){return wb.global.settings.switches.enableFeedbacksForPoints?(await WbSpaModel.prototype.$moduleLoader.loadServiceAsync("feedbacksPaymentService"),await WbSpaModel.prototype.$services.feedbacksPaymentService.getFeedbacksPaymentByUser()):null},getFeedbacksPaymentByNms:async function(e){return wb.global.settings.switches.enableFeedbacksForPoints?(await WbSpaModel.prototype.$moduleLoader.loadServiceAsync("feedbacksPaymentService"),await WbSpaModel.prototype.$services.feedbacksPaymentService.getFeedbacksPaymentByNms(e)):null},convertOptionsToSpecs:D,isRedPrice:j,isAdvert:N,checkIsOnePurchasePromo:F,isRuSeller:function(e){return!!e&&(BigInt(e)>>BigInt("6")&BigInt("0b11111111"))===BigInt("191")},isEmptySellerCountry:function(e){return!e||(BigInt(e)>>BigInt("6")&BigInt("0b11111111"))===BigInt("0")},isVatRefundable:U,getVatPercent:W,show2025Logistics:function(){var e,t,n,r;return null!=(t=null==(e=wb.global.settings.variables.withLogisticsCountries)?void 0:e.includes(WbSpaModel.prototype.$user.getLocale()))&&t&&(!wb.global.settings.switches.enableDetailingForLogisticVer3&&wb.analitics.checkDataInSplitterServiceV2("common","ab_enableDetailingForLogisticVer3","enable")||wb.global.settings.switches.enableDetailingForLogisticVer3&&WbSpaModel.prototype.checkMobileRange(Number(WbSpaModel.prototype.$user.getId()),(null==(r=null==(n=wb.global.settings.mobileAppVariables)?void 0:n.objects)?void 0:r.detailingForLogisticVer3Range)||[]))},isAlcohol:w,isC2C:function(e){return V(e,c.iA.C2C)},isC2CProduct:H,isWholesale:z,isPreorderProduct:function(e){if(!e)return!1;const t=K(e,c._q.isPreorderFirstBit),n=K(e,c._q.isPreorderSecondBit);return t&&!n},isDbspProduct:function(e){return V(e,c.iA.DBSP)&&wb.global.settings.switches.enableDBSPInBasket},isDigitalProduct:J,getSMergerXnmProducts:function(e,t=null,n=null,r=!1){const s=e.distinct().slice(0,100);return new Promise((e,i)=>{if(!P()||!s.length)return e([]);Promise.all([wb.user.getXinfo(),h()]).then(([i])=>{O(function(e,t){const n=wb.global.settings.switches.enableCatalogUnregHost&&!(0,y.c)().isAuth;return`${"ru"===wb.settings.currentLocale&&(wb.global.settings.switches.enableCatalogProxy||(0,v.a)().checkDataInSplitterServiceV2("common","ab_enableAntiDtest","yes"))?n?xc:Tc:n?Oc:Ec}smerger/v2/slist?${e}&nm=${t.join(";")}`}(E(i,t,n,r),s),2e3).then(t=>{e(t.products)}).catch(t=>{console.log(`${t.statusText} ${t.responseText}`),e([])})})})},useSMerger:P,isDigital:function(e){return V(e,c.iA.WBD)},isDtypeFlagSet:V,isViewFlagSet:K,isSupplierFlagSet:G,isAdult:b,modifyViewFlagsIfAdult:function(e,t){var n,r,s;return"by"===wb.settings.currentLocale&&(null==(s=null==(r=null==(n=wb.global.settings.mobileAppVariables.objects)?void 0:n.hidePhotoAdultSubjects)?void 0:r.includes)?void 0:s.call(r,t))&&(e=Number((BigInt(e)|c._q.hidePhoto)&~c._q.hasVideo)),e},isSpecialDelivery:function(e){return!!e&&(V(e,c.iA.isSpecialDelivery)&&(wb.global.settings.switches.enableSpecialOrderToAllPosts||wb.global.settings.switches.enableSpecialOrderByCourier))}}}();n(85483);let Mc=null;const Ac="body>div.popup, .cascade-popup",Rc=new class{constructor(){this.body=document.body,this.scrollY=0}enable(){this.body&&(this.scrollY=window.scrollY,this.addStyles())}disable(){this.body&&(this.removeStyles(),window.scrollTo(0,this.scrollY))}addStyles(){this.body&&(this.body.style.position="fixed",this.body.style.top=-1*this.scrollY+"px",this.body.style.right="0px",this.body.style.bottom="0px",this.body.style.left="0px")}removeStyles(){this.body&&(this.body.style.removeProperty("position"),this.body.style.removeProperty("top"),this.body.style.removeProperty("right"),this.body.style.removeProperty("bottom"),this.body.style.removeProperty("left"))}};function Dc(e,t=0){return()=>{e.style.top=Math.max(document.documentElement.clientHeight/2+window.scrollY-e.clientHeight/2+t,window.scrollY+t)+"px",e.style.left=Math.max(document.documentElement.clientWidth/2-e.clientWidth/2,0)+"px"}}function Lc(e){const t=document.createElement("div");return t.classList.addMany(e),t}function Bc(e,t){const n=document.createElement("a");n.href="#",t.push("close"),n.classList.addMany(t),e.appendChild(n)}function $c(e,t,n,r,s,i){const o=document.createElement("div");if(null!=r&&Array.isArray(r)&&o.classList.addMany(r),n)o.innerHTML=t;else if(i){let t=document.querySelector(i),n=document.createElement("span");n.id="popup_pc",t.parentElement.insertBefore(n,t),e.placeholder=document.getElementById(n.id),o.appendChild(t)}else o.textContent=t;null!=s&&Object.entries(s).forEach(([e,t])=>o.setAttribute(e,t)),e.appendChild(o)}function Nc(e,t,n,r,s,i){const o=document.createElement("div");if(null!=r&&Array.isArray(r)&&o.classList.addMany(r),n)o.innerHTML=t;else if(i){let t=document.querySelector(i),n=document.createElement("span");n.id="popup_pc",t.parentElement.insertBefore(n,t),e.placeholder=document.getElementById(n.id),o.appendChild(t)}else o.textContent=t;null!=s&&Object.entries(s).forEach(([e,t])=>o.setAttribute(e,t)),e.appendChild(o)}function jc(e,t,n){const r=document.createElement("button");r.classList.addMany(n||[]),r.textContent=t,e.appendChild(r)}function Fc(e){if(!e)return 0;const t=document.querySelectorAll(".j-custom-overlay, .mo-modal__overlay");let n=0;return t.forEach(e=>{const t=window.getComputedStyle(e).getPropertyValue("z-index");n=Math.max(n,""!==e.style.zIndex?e.style.zIndex:t)}),n}function Uc(e,t,n,r){var s,i,o;let a;const l=e=>{var n;e instanceof Event&&e.preventDefault(),(null==(n=r.onBeforeHide)?void 0:n.call(r))||(t.classList.remove("shown"),!r.keepOpenOnTransition&&window.removeEventListener("spaTransition",a),window.removeEventListener("keydown",c,!0),Promise.resolve().then(()=>{var t;null==(t=r.onHide)||t.call(r,e)}))};a=()=>{l()},!r.keepOpenOnTransition&&window.addEventListener("spaTransition",a);const c=e=>{27==e.keyCode&&(l(e),window.removeEventListener("keydown",c,!0))};(r.modal||null==r.modal)&&(window.addEventListener("keydown",c,!0),setTimeout(()=>null==n?void 0:n.addEventListener("click",l))),(null==(s=r.closeSelector)?void 0:s.length)>0&&t.addEventListener("click",this.$helper.delegator(r.closeSelector,l)),null!=Mc&&(Mc.close(),Mc=null);const u=Fc(n);n&&(n.style.zIndex=u+306),t.style.zIndex=u+311,e.appendChild(t),n&&e.appendChild(n),null==(i=r.onBeforeShow)||i.call(r,t),document.body.insertBefore(e,document.body.firstChild),null==(o=r.onShow)||o.call(r,t);const d={popup:t,overlay:n,close:e=>l(e),centered:r.centeredFunction};return r.onlyOne&&(Mc=d),d}function Wc(e,t,n,s=!0,i=!1,o=""){e instanceof Error?e=e.isCustomError&&!e.isCancelled&&e.message?e.message:r.R.t("common.errors.serverError"):e||(e=r.R.t("common.errors.serverError"));const a=document.createDocumentFragment();let l=["popup","popup-alert","shown"];t&&(Array.isArray(t)?l=l.concat(t):l.push(t));const c=Lc(l);a.appendChild(c),i&&Bc(c,["popup__close"]),o&&Nc(c,o,!1,["title"]),$c(c,e,!0),null!==n&&jc(c,n||r.R.t("common.close"),["popup__btn-main","popup-alert__close"]);const u=document.createElement("div");u.classList.addMany(["overlay","initially-hidden","j-custom-overlay"]);const d=Dc(c);window.addEventListener("resize",d),Uc.call(this,a,c,u,{onlyOne:!0,closeSelector:".popup-alert__close, .popup__close",modal:s,onShow:function(){c.style.display="block",d()},onHide:function(){window.removeEventListener("resize",d),c.remove(),u.remove()}})}function Hc(e,t={}){const n={msg:e,lockScroll:!0,modal:!1,showCloseBtn:!0,useHtml:!0,contentClasses:["content"],popupClassesList:["shown","tooltip","tooltip--mobile",...(null==t?void 0:t.classes)||[]],useCenteredFunction:!0,onShow:e=>e.classList.remove("popup")};return wb.popup.showCustomPopup(n)}function Vc(e,t,n,r){const s=document.createDocumentFragment(),i=Lc(t);Bc(i,["j-close"]),$c(i,e,!0,["content","quick-order-popup-content","j-sizepicker-content"],null);const o=document.createElement("div");o.classList.addMany(["overlay","initially-hidden","j-custom-overlay"]),i.id="size-picker-popup",i.style.opacity="0";const a=Dc(i);window.addEventListener("resize",a),Uc.call(this,s,i,o,{closeSelector:".j-close",onHide:function(){window.removeEventListener("resize",a),i.remove(),o.remove(),null==r||r()},onShow:function(){i.style.display="block",a(),i.style.opacity="1",null==n||n(i)}})}function zc(e){const t=this.$helper.deepMerge({},{overlay:!0,showCross:!0,useHtml:!1,popupClassesList:[],contentClasses:[],overlayClasses:[],contentAttributeDictionary:{},msg:"",closeClass:["j-close","popup__close"],modal:!0,closeSelector:".j-close",useCenteredFunction:!1,lockScroll:!1,lockScrollMobile:!1,lockScrollPreviewProduct:!1,onlyOne:!1,hasAnimation:!1},e),n=document.createDocumentFragment(),s=Lc(["popup"].concat(t.popupClassesList));s.dataset.lockScroll=t.lockScroll?"true":"false";const i=document.querySelector(".j-fixed-block"),o=document.querySelector(".j-header"),a=document.querySelector(".j-wrapper");t.showCross&&Bc(s,t.closeClass),$c(s,t.msg,t.useHtml,t.contentClasses,t.contentAttributeDictionary,t.srcElem),t.showCloseBtn&&function(e,t){const n=document.createElement("button");n.innerText=r.R.t("common.close"),!t.length&&t.push("close"),n.classList.addMany(t),e.appendChild(n)}(s,t.closeClass);const l=t.overlay?document.createElement("div"):null;if(l){const e=["overlay","initially-hidden","j-custom-overlay"].concat(t.overlayClasses);l.classList.addMany(e)}let c,u;if(t.useCenteredFunction){const e=t.hasAnimation?40:0;c=Dc(s,e),window.addEventListener("resize",c),u=this.createBodyResizeObserver(c,s)}return Uc.call(this,n,s,l,{onBeforeHide:()=>{var e;return null==(e=t.onBeforeHide)?void 0:e.call(t)},onHide:function(e,n){var r,d,p,h,m;if(null==(r=t.onBeforeHide)?void 0:r.call(t))return;!t.lockScroll||(null==n?void 0:n.keepLockScroll)||t.keepLockScroll||(document.body.classList.remove("body--overflow"),a&&(a.style.paddingRight=""),i&&(i.style.marginRight=""),o&&(o.style.paddingRight="",o.style.marginRight="")),t.lockScrollPreviewProduct&&document.body.classList.remove("body--overflow-preview-kt"),!t.lockScrollMobile||(null==n?void 0:n.keepLockScroll)||t.keepLockScroll||(document.body.classList.remove("body--overflow-mobile"),WbSpaModel.prototype.$isDesktop||Rc.disable()),t.useCenteredFunction&&(window.removeEventListener("resize",c),null==u||u.disconnect()),t.srcElem&&(null==(p=null==(d=s.placeholder)?void 0:d.parentElement)||p.insertBefore(document.querySelector(t.srcElem),s.placeholder),null==(h=s.placeholder)||h.remove());const g=27==(null==e?void 0:e.keyCode);if(t.hasAnimation&&!t.onlyOne&&!g){document.querySelectorAll(".overlay").length>1&&document.body.classList.add("body--overflow")}if(t.hasAnimation){s.classList.add("popup--disappear");const n=Fc(l);s.style.zIndex=n+1;const r=document.querySelectorAll(Ac);return void setTimeout(()=>{var n;null==(n=t.onHide)||n.call(t,s,e),s.remove(),null==l||l.remove(),document.querySelector("body").classList.remove("no-scroll"),!t.onlyOne&&r[1]&&(r[1].style.visibility="visible",r[1].classList.contains("cascade-popup")||r[1].classList.add("popup--appear"))},400)}if(null==(m=t.onHide)||m.call(t,s,e),s.remove(),null==l||l.remove(),t.hasAnimation&&!t.onlyOne){const e=document.querySelectorAll(Ac);e[0]&&(e[0].style.visibility="visible")}},onShow:()=>{var e;if(document.activeElement.blur(),t.lockScroll&&!document.body.classList.contains("body--overflow")){const e=Math.abs(window.innerWidth-document.documentElement.clientWidth);document.body.classList.add("body--overflow"),a&&(a.style.paddingRight=`${e}px`),i&&(i.style.marginRight=`${e}px`),o&&(o.style.paddingRight=`${e}px`,o.style.marginRight=`-${e}px`)}t.lockScrollPreviewProduct&&!document.body.classList.contains("body--overflow-preview-kt")&&document.body.classList.add("body--overflow-preview-kt"),t.lockScrollMobile&&!document.body.classList.contains("body--overflow-mobile")&&(document.body.classList.add("body--overflow-mobile"),WbSpaModel.prototype.$isDesktop||Rc.enable());const n=()=>{s.style.opacity=1,t.useCenteredFunction&&c(),t.hasAnimation&&s.classList.add("popup--appear")},r=this.$helper.nextTick().then(()=>(n(),Promise.resolve()));if(Object.defineProperty(s,"contentEl",{get(){return s.querySelector(".popup__content")}}),t.onShowAsync?t.onShowAsync(s).then(n):null==(e=t.onShow)||e.call(t,s,r),t.hasAnimation&&!t.onlyOne){[...document.querySelectorAll(Ac)].slice(1).forEach(e=>{e.style.visibility="hidden",e.classList.remove("popup--appear")})}},onBeforeShow:function(){var e;s.style.opacity=0,s.style.display="block",null==(e=t.onBeforeShow)||e.call(t,s)},modal:t.modal,closeSelector:t.closeSelector,centeredFunction:c,onlyOne:t.onlyOne,keepOpenOnTransition:t.keepOpenOnTransition})}function qc(e,t){let n;const r=this.$helper,s=wb.popup.showCustomPopup({useHtml:!0,popupClassesList:["popup-video","shown"],contentClasses:["content"],useCenteredFunction:!0,msg:$.templates('<h2 class="popup__header">{{>title}}</h2><div class="video"><video id="videoPlayer" class="video-js vjs-default-skin vjs-big-play-centered vjs-waiting" width="855" controls autoplay preload></video></div>')({title:t}),onBeforeShow:e=>{e.style.opacity=0,e.style.display="block"},onShow:t=>{n=videojs("videoPlayer",{html5:{nativeAudioTracks:!1,nativeVideoTracks:!1,hls:{overrideNative:!0}}}),n.ready(function(){this.src({src:e,type:"application/x-mpegURL",withCredentials:!0})}),r.nextTick().then(()=>{t.style.opacity=1,s.centered()})},onHide:()=>{n.isDisposed()||(n.isInPictureInPicture()&&n.exitPictureInPicture(),n.dispose())}})}function Kc(e,t={}){return new Promise(n=>{var s,i,o,a;document.activeElement.blur();let l=null!=(s=t.hasAnimation)&&s;const c=document.createDocumentFragment();let u=["popup","popup-confirm","shown"];t.classList&&(u=u.concat(t.classList));let d=["popup__btn-main","j-yes"],p=["popup__btn-base","j-no"];t.yesBtnClassList&&(d=t.yesBtnClassList),t.noBtnClassList&&(p=t.noBtnClassList);const h=Lc(u);h.style.display="block",l&&(h.style.opacity="0"),t.title&&(t.titleClassList=t.titleClassList||[],t.titleClassList.push("popup__msg-title"),Nc(h,t.title,!0,t.titleClassList)),t.contentClasses=t.contentClasses||[],t.contentClasses.push("popup__msg"),$c(h,e,!0,t.contentClasses);let m=document.createElement("div");m.classList.add("popup__btn","btn-block"),h.appendChild(m);const g=[];if((null==(i=t.showYesBtn)||i)&&g.push(()=>jc(m,t.yes||r.R.t("common.yes"),d)),(null==(o=t.showNoBtn)||o)&&g.push(()=>jc(m,t.no||r.R.t("common.no"),p)),t.inverseBtns&&g.reverse(),g.forEach(e=>e()),t.showCross&&Bc(h,["popup__close"]),t.lockScroll&&!document.body.classList.contains("body--overflow")){const e=Math.abs(window.innerWidth-document.documentElement.clientWidth);document.body.classList.add("body--overflow"),document.body.style.paddingRight=`${e}px`}const f=document.createElement("div");let b;if(f.classList.addMany(["overlay","initially-hidden","j-custom-overlay"]),t.useCenteredFunction){b=Dc(h,l?40:0),window.addEventListener("resize",b)}const y=Uc.call(this,c,h,f,{onHide:function(){if(l){h.classList.add("popup--disappear");const e=Fc(f);h.style.zIndex=e+1,null==f||f.remove();const t=document.querySelectorAll(Ac);setTimeout(()=>{h.remove(),document.querySelector("body").classList.remove("no-scroll");const e=Array.from(t).slice(1).find(e=>!e.classList.contains("popup--disappear"));e&&(e.style.visibility="visible",e.classList.add("popup--appear")),n(!1)},400)}else h.remove(),f.remove(),n(!1);if(t.lockScroll&&(document.body.classList.remove("body--overflow"),document.body.style.paddingRight=""),t.useCenteredFunction&&window.removeEventListener("resize",b),l&&!t.onlyOne){document.querySelectorAll(".overlay").length>1&&document.body.classList.add("body--overflow")}},onShow:function(){var e;const r=h.querySelector(".popup__back");if(Dc(h)(),l){h.style.opacity="1",h.classList.add("popup--appear");[...document.querySelectorAll(Ac)].slice(1).forEach(e=>{e.style.visibility="hidden",e.classList.remove("popup--appear")})}h.querySelector(d.map(e=>"."+e).join("")).addEventListener("click",e=>{n(!0),y.close()}),null==(e=h.querySelector(p.map(e=>"."+e).join("")))||e.addEventListener("click",e=>{n(!1),y.close()}),r&&r.addEventListener("click",()=>{t.backBtnCallback(),y.close()})},modal:null!=(a=t.modal)&&a,closeSelector:t.showCross?".popup__close":null,onlyOne:t.onlyOne,hasAnimation:l})})}function Gc(e,{width:t=600,height:n=500}={}){const r=[`top=${Math.floor((window.screenY||window.screenTop||0)+(window.outerHeight-n)/2)||0}`,`left=${Math.floor((window.screenX||window.screenLeft||0)+(window.outerWidth-t)/2)||0}`,`width=${t}`,`height=${n}`,"status=0","toolbar=0"];return null!=window.open(e,"",r.join(","))}function Jc(e,t){let n,r=!0;if(window.ResizeObserver){const s=this.$helper.throttle(n=>{var r;if(!(null==(r=n[0])?void 0:r.target))return;document.documentElement.scrollHeight<window.innerHeight+document.documentElement.scrollTop&&(t.style.display="none",requestAnimationFrame(()=>{t.style.display="block",e()}))},500);n=new ResizeObserver(e=>{r?r=!1:s(e)});const i=document.querySelector(".j-wrapper");i&&n.observe(i)}return n}class Yc extends WbSpaModel{renderModalError(){return Wc.apply(this,arguments)}renderModalAdaptive(){return Hc.apply(this,arguments)}showCustomPopup(){return zc.apply(this,arguments)}confirm(){return Kc.apply(this,arguments)}videoPlayer(){return qc.apply(this,arguments)}showSizePickerPopup(){return Vc.apply(this,arguments)}browserPopup(){return Gc.apply(this,arguments)}async showFeedbackError(e){if(this.feedbackErrorShowing)return Promise.resolve();this.feedbackErrorShowing=!0;let t=null;e?e.isCancelled?t=null:("string"==typeof e.message||e.message instanceof String)&&(t=e.message):t=null;try{const e=await $.views.loadTemplateAsync("popupErrorUnbuy");return wb.popup.showCustomPopup({useHtml:!0,lockScroll:!0,lockScrollMobile:!0,msg:e.render({errorMessage:t}),popupClassesList:["popup-error-unbuy","shown"],contentClasses:["popup__content"],useCenteredFunction:!0,modal:!0,onHide:()=>{this.feedbackErrorShowing=!1}})}catch(e){throw this.feedbackErrorShowing=!1,e}}createBodyResizeObserver(){return Jc.apply(this,arguments)}}wb.popup=new Yc;var Qc=Object.defineProperty,Xc=(e,t,n)=>((e,t,n)=>t in e?Qc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class Zc{constructor(){Xc(this,"isReady",!0),Xc(this,"loadingTemplate"),Xc(this,"routesDictionary"),Xc(this,"clientRenderInited",!1),Xc(this,"activeContainer",0)}setData(e){this.routesDictionary=e}getAppliedEntries(){var e;const t=document&&(null==(e=document.currentScript)?void 0:e.src);let n;return n="currentScript"in document?t.substring(t.indexOf("/j/")):this.routesDictionary[this.loadingTemplate].requiredModel,Object.keys(this.routesDictionary).filter(e=>this.routesDictionary[e].requiredModel===n)}static factory(){return new Zc}}n(22351),n(75158);var eu=n(13203),tu=Object.defineProperty,nu=(e,t,n)=>((e,t,n)=>t in e?tu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class ru{static async loadGlobal(){const e=Object.keys(this.polyfills).filter(e=>!this.polyfills[e].pageSpecific);return this.load(e)}static async load(e){const t={needed:!1,loaded:[],failed:[]},n=e?e.filter(e=>e in this.polyfills):Object.keys(this.polyfills);return await Promise.all(n.map(async e=>{const n=this.polyfills[e];if(!n.test()||this.loaded.has(e))return;const r=n.load().then(()=>{this.loaded.add(e),t.loaded.push(e)}).catch(()=>{t.failed.push(e)});await r})),t.needed=t.loaded.length>0||t.failed.length>0,t}}nu(ru,"loaded",new Set),nu(ru,"polyfills",{abortController:{test:()=>!("AbortController"in window),load:()=>n.e(63043).then(n.bind(n,20272))},formData:{test:()=>!("FormData"in window)||!("get"in FormData.prototype),load:()=>n.e(11025).then(n.bind(n,24984))},webLocks:{test:()=>"undefined"!=typeof navigator&&!navigator.locks,load:()=>n.e(96977).then(n.bind(n,51731))},svgClassList:{test:()=>"undefined"!=typeof SVGElement&&!("classList"in SVGElement.prototype),load:()=>n.e(62045).then(n.bind(n,17956)).then(e=>e.applySVGClassListPolyfill()),pageSpecific:!0},arrayFindLast:{test:()=>!("findLast"in Array.prototype),load:()=>n.e(54130).then(n.bind(n,1727)).then(e=>e.applyFindLastPolyfill())},stringReplaceAll:{test:()=>!("replaceAll"in String.prototype),load:()=>n.e(49916).then(n.bind(n,19547)).then(e=>e.applyReplaceAllPolyfill())},arrayFlatMap:{test:()=>!("flatMap"in Array.prototype),load:()=>n.e(74212).then(n.bind(n,38567)).then(e=>e.applyFlatMapPolyfill())}});var su=Object.defineProperty,iu=(e,t,n)=>((e,t,n)=>t in e?su(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);const{PDL_PROXY_URL:ou}=l.A;var au=n(65607);var lu=Object.defineProperty,cu=Object.getOwnPropertySymbols,uu=Object.prototype.hasOwnProperty,du=Object.prototype.propertyIsEnumerable,pu=(e,t,n)=>t in e?lu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hu=(e,t)=>{for(var n in t||(t={}))uu.call(t,n)&&pu(e,n,t[n]);if(cu)for(var n of cu(t))du.call(t,n)&&pu(e,n,t[n]);return e},mu=(e,t,n)=>pu(e,"symbol"!=typeof t?t+"":t,n);class gu{constructor(){mu(this,"data",[]),mu(this,"time",0),mu(this,"updateInProgress",!1),mu(this,"interval",864e5),Object.assign(this,hu(hu({},{data:[],time:0}),localStorage.getObject(gu.storageKey))),window.addEventListener("storage",this.onSync.bind(this))}getNmList(){return this.checkNeedUpdateData(),this.data}clearCache(){this.time=0,this.checkNeedUpdateData()}fillFromOrderNNSZ(e){const t=null==e?void 0:e.filter(e=>wb.xnm.checkIsOnePurchasePromo(e.sale_conditions)).map(e=>e.nm_id);(null==t?void 0:t.length)>0&&this.data.push(...t)}fillFromOrderOrdo(e){const t=null==e?void 0:e.filter(e=>wb.xnm.checkIsOnePurchasePromo(e.saleConditions)).map(e=>e.cod1S);(null==t?void 0:t.length)>0&&this.data.push(...t)}checkNeedUpdateData(){if(null!=this.time&&this.time>=Date.now()||this.updateInProgress)return;this.updateInProgress=!0;const e=gu.storageKey;navigator.locks.request(`lock-${e}`,async t=>{const n=(0,y.c)().isAuth,r=n?await this.fetchArchiveData():[],s=n?await this.fetchDeliveriesData():[];if(r){const t={time:Date.now()+this.interval,data:r.concat(s)};localStorage.putObject(e,t),Object.assign(this,t)}else this.time=Date.now()-this.interval+6e4;this.updateInProgress=!1})}async fetchArchiveData(){if(!wb.global.settings.mobileAppVariables.objects.onePurchasePromo)return[];const e={status:8736,offset:0,from:new Date(1e3*wb.global.settings.mobileAppVariables.objects.onePurchasePromo.dateFromUTC).format("yyyy-MM-dd"),to:new Date(1e3*wb.global.settings.mobileAppVariables.objects.onePurchasePromo.dateToUTC).format("yyyy-MM-dd")},t=(0,C.getHttpClient)(),n=new URLSearchParams(e);try{const e=await t.fetchJSON("/webapi/lk/myorders/archive/get",{method:"POST",body:n},{timeout:1e4,useProccessResponse:!0});return(null==e?void 0:e.archive)?e.archive.filter(e=>!!(1024&e.saleConditions)).map(e=>e.code1S):[]}catch(e){}return null}async fetchDeliveriesData(){if(!wb.global.settings.mobileAppVariables.objects.onePurchasePromo)return[];const e=await(0,s.DR)().getServiceOf("groupedDeliveriesService"),t=await e.getStorageModel({fromCache:!0,caller:["OnePurchasePromoService.fetchDeliveriesData"]}),n=new Date(1e3*wb.global.settings.mobileAppVariables.objects.onePurchasePromo.dateFromUTC),r=new Date(1e3*wb.global.settings.mobileAppVariables.objects.onePurchasePromo.dateToUTC);return t.positions.filter(e=>e.saleConditions&&!!(1024&e.saleConditions)&&e.orderDate>n&&e.orderDate<r).map(e=>e.code1S)}onSync(e){const{key:t,newValue:n}=e;if(t===gu.storageKey){const e=JSON.parse(n);Object.assign(this,e)}}static get storageKey(){return`one-purchase-nms-${Cl.A._getUserUid()}`}static richPrototype({prototype:e}){Object.setPrototypeOf(gu.prototype,e)}static factory(e){return e&&gu.richPrototype(e),new gu}}var fu=Object.defineProperty,bu=Object.defineProperties,yu=Object.getOwnPropertyDescriptors,vu=Object.getOwnPropertySymbols,wu=Object.prototype.hasOwnProperty,Su=Object.prototype.propertyIsEnumerable,_u=(e,t,n)=>t in e?fu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Iu=(e,t,n)=>_u(e,"symbol"!=typeof t?t+"":t,n);class Cu{constructor(){Iu(this,"hasAbCounter",!1),Iu(this,"productsInBasket",new Map),Iu(this,"productsQtyInBasket",new Map),Iu(this,"productsQtyInBasketChrtId",new Map),Iu(this,"handleBasketEvent",()=>{var e;const t=null==(e=(0,s.Z1)().cartService.localBasket)?void 0:e.getItems(),n=new Map(t.map(e=>[e.characteristicId,e]));if(this.areBasketItemsEqual(n,this.productsInBasket))return;const r=new Map,i=new Map;t.forEach(e=>{const t=r.get(e.cod1S)||0;r.set(e.cod1S,t+e.quantity),i.set(e.characteristicId,e.quantity)}),this.productsInBasket=n,this.productsQtyInBasket=r,this.productsQtyInBasketChrtId=i,(0,I.J)().dispatchEvent(new CustomEvent("CounterProductsUpdate"))})}async init(){if(await(0,s.dU)().nextTick(),this.hasAbCounter=wb.global.settings.switches.enableAddQuantityCounter||wb.analitics.checkDataInSplitterServiceV2("common","ab_enableAddQuantityCounter","yes"),!this.hasAbCounter)return;(0,I.J)().addEventListener("LocalBasketUpdateCount",this.handleBasketEvent)}getProductsQtyInBasket(){return this.productsQtyInBasket}getProductsQtyInBasketChrtId(){return this.productsQtyInBasketChrtId}getBasketProduct(e){return this.productsInBasket.get(e)}getProductsMaxQuantity(e){const t=this.productsInBasket.get(e);return t?t.isOnePurchasePromo?1:Number.isInteger(t.maxQuantity)?Math.min(t.maxQuantity,Zs):Zs:Zs}getQuantity(e){var t;return(null==(t=this.productsInBasket.get(e))?void 0:t.quantity)||0}isHasAbCounter(){return this.hasAbCounter}isWoSizeCounter(e){return"newly-arrived-item"===e}updateAddedToBasketJsViews(e){e&&e.forEach(e=>{const t=this.productsInBasket.has(e.nmId);e.addedToBasket!==t&&$.observable(e).setProperty({addedToBasket:t})})}updateAddedToBasketReact(e){return(null==e?void 0:e.length)?e.map(e=>((e,t)=>bu(e,yu(t)))(((e,t)=>{for(var n in t||(t={}))wu.call(t,n)&&_u(e,n,t[n]);if(vu)for(var n of vu(t))Su.call(t,n)&&_u(e,n,t[n]);return e})({},e),{addedToBasket:this.productsInBasket.has(e.nmId)})):[]}updateProductsInBasketJsViews(e){$.observable(e).setProperty({productsInBasket:this.productsQtyInBasket})}areBasketItemsEqual(e,t){if(e.size!==t.size)return!1;for(const[n,r]of e){const e=t.get(n);if(!e||r.cod1S!==e.cod1S||r.characteristicId!==e.characteristicId||r.maxQuantity!==e.maxQuantity||r.quantity!==e.quantity)return!1}return!0}static richPrototype({prototype:e}){Object.setPrototypeOf(Cu.prototype,e)}static factory(e){return e&&Cu.richPrototype(e),new Cu}}var ku=Cu;var Pu=n(80781),Eu=n(53527),Tu=Object.defineProperty,Ou=(e,t,n)=>((e,t,n)=>t in e?Tu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class xu{constructor(e,t,n,r=1,s=15){this.scryptParams=e,this.created=t,this.deviceId=n,this.counter=r,this.limit=s,Ou(this,"worker",null)}async createWorker(){try{return this.worker||(this.worker=new Eu.K(new Worker("/w/index.worker.js"))),this.worker}catch(e){return null}}terminate(){var e;null==(e=this.worker)||e.terminate()}async compute(){const e=this.scryptParams.seed?`${this.scryptParams.n},${this.scryptParams.r},${this.scryptParams.p},${this.scryptParams.target},${this.scryptParams.seed},${this.scryptParams.session_id},${this.scryptParams.exp},${this.scryptParams.service},${this.scryptParams.payload},${this.scryptParams.signature}`:`${this.scryptParams.n},${this.scryptParams.r},${this.scryptParams.p},${this.scryptParams.target}`;try{const t=await this.createWorker(),n=await(null==t?void 0:t.postMessage({action:"compute",data:{deviceId:this.deviceId,created:this.created,challenge:e,limit:this.limit}}));return"string"==typeof n?{ok:!0,data:{header:n,counter:this.counter}}:{ok:!1,error:"Неожиданный формат ответа от воркера"}}catch(e){return{ok:!1,error:e instanceof Error?e.message:String(e)}}}}var Mu=Object.defineProperty,Au=(e,t,n)=>((e,t,n)=>t in e?Mu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);const Ru="session-pow-token",Du="session-pow-token-attempts",Lu=2147483647e3;class Bu{constructor(){Au(this,"currentHashcash",null),Au(this,"expirationTimer",null),Au(this,"deviceId"),Au(this,"challengeQueue",[]),Au(this,"challengeTimeout",null),this.deviceId=""}init(){var e,t,n;(null==(n=null==(t=null==(e=null==wb?void 0:wb.global)?void 0:e.settings)?void 0:t.switches)?void 0:n.enablePowLimitResetOnRestart)&&this.saveFailedAttempts(0)}getDeviceId(){var e;if(!this.deviceId)try{const t=(0,s.Z1)();this.deviceId=null!=(e=t.sessionService.getSession())?e:""}catch(e){this.deviceId=""}return this.deviceId}getPowParams(){var e,t,n;const r=null==(e=null==wb?void 0:wb.global)?void 0:e.settings,s=null==(n=null==(t=null==r?void 0:r.mobileAppVariables)?void 0:t.objects)?void 0:n.sessionTokenV2Params;if(!((null==s?void 0:s.N)&&(null==s?void 0:s.r)&&(null==s?void 0:s.p)&&(null==s?void 0:s.target)))throw new Error("Отсутствуют обязательные параметры POW в конфиге");const i=BigInt(s.target).toString(16);return{n:s.N,r:s.r,p:s.p,target:i}}validateChallengeParams(e){try{const{n:t,r:n,p:r,target:s}=e;if(!Number.isInteger(t)||t<=0||t>=15)return!1;if(!Number.isInteger(n)||n<=0||n>=20)return!1;if(!Number.isInteger(r)||r<=0||r>=10)return!1;if(!s||"string"!=typeof s||!/^[0-9a-fA-F]+$/.test(s))return!1;try{if(BigInt("0x"+s)<=BigInt("0"))return!1}catch(e){return!1}return!0}catch(e){return!1}}getFailedAttempts(){const e=localStorage.getItem(Du);return e?JSON.parse(e):{count:0,lastAttemptTime:0}}saveFailedAttempts(e){const t={count:e,lastAttemptTime:Date.now()};localStorage.setItem(Du,JSON.stringify(t))}hasExpiredToken(e){return!e||Date.now()>e.expiresAt}isTokenExpiringSoon(e){if(!e)return!0;return e.expiresAt-Date.now()<=6e4}async initializeTokenGeneration(e,t="ok"){var n,r,s;const i=null==(n=null==wb?void 0:wb.global)?void 0:n.settings;if(!i||!this.isFeatureEnabled())return;const{numbers:o}=null==i?void 0:i.mobileAppVariables,a=null==o?void 0:o.sessionTokenTimeToLive,l="invalid"===t||e?Lu:a?1e3*a:3e5,{count:c}=this.getFailedAttempts();if((null==(r=null==i?void 0:i.switches)?void 0:r.enableGenSessionTokenFailsLimit)&&c>=5)return void this.saveToken("",l);const u=null!=(s=null==o?void 0:o.sessionTokenGenerationTimeLimit)?s:1500,d=Boolean(e);this.shouldGenerate(d,t)&&navigator.locks.request("lock-pow-token",async n=>{if(this.shouldGenerate(d,t))try{const t=e||this.getPowParams(),n=await this.generateToken(u,t);n?(this.saveFailedAttempts(0),this.saveToken(n,l,t,!d)):this.saveFailedAttempts(this.getFailedAttempts().count+1)}catch(e){this.saveFailedAttempts(this.getFailedAttempts().count+1),this.saveToken("",l)}})}shouldGenerate(e,t){var n,r,s;const i=this.getTokenData(),o=this.isTokenExpiringSoon(i),a=this.hasExpiredToken(i),l=!!(null==i?void 0:i.token),c=null==(s=null==(r=null==(n=null==wb?void 0:wb.global)?void 0:n.settings)?void 0:r.switches)?void 0:s.enableGenSessionTokenFailsLimit,{count:u}=this.getFailedAttempts();return!(c&&u>=5)&&(!!e||(!l||"invalid"===t&&l||o||a))}async generateToken(e,t){var n;const r=Date.now(),s=null==(n=null==wb?void 0:wb.global)?void 0:n.settings,i=t||this.getPowParams();this.currentHashcash=new xu(i,Math.floor(Date.now()/1e3),this.getDeviceId(),1,1e3);let o=null;const a=new AbortController,{signal:l}=a,c=new Promise(t=>{o=window.setTimeout(()=>{this.currentHashcash&&this.logTokenGeneration(!1,{deviceId:this.getDeviceId(),powParams:i,generationTime:Date.now()-r,errorText:"Generation Timeout"}),o=null,a.abort(),t(null)},e)}),u=new Promise(e=>{const t=()=>{this.currentHashcash.terminate(),e(null)};l.addEventListener("abort",t,{once:!0}),(async()=>{var n,a;try{const c=await this.currentHashcash.compute();if(o&&window.clearTimeout(o),l.removeEventListener("abort",t),!c.ok)return this.logTokenGeneration(!1,{deviceId:this.getDeviceId(),powParams:i,generationTime:Date.now()-r,errorText:c.error}),void e(null);if(!(null==(n=c.data)?void 0:n.header)||"string"!=typeof c.data.header){const t="Неожиданный формат ответа от воркера";return this.logTokenGeneration(!1,{deviceId:this.getDeviceId(),powParams:i,generationTime:Date.now()-r,errorText:t}),void e(null)}(null==(a=null==s?void 0:s.switches)?void 0:a.enableGenSessionTokenSuccessLogs)&&this.logTokenGeneration(!0,{deviceId:this.getDeviceId(),powParams:i,generationTime:Date.now()-r}),e(c.data.header)}catch(n){o&&window.clearTimeout(o),l.removeEventListener("abort",t);const s=n instanceof Error?n.message:String(n);this.logTokenGeneration(!1,{deviceId:this.getDeviceId(),powParams:i,generationTime:Date.now()-r,errorText:`Exception: ${s}`}),e(null)}})()});return await Promise.race([u,c])}saveToken(e,t,n,r=!0){const s={token:e,expiresAt:Date.now()+t,challengeParams:n,isDefaultToken:r};localStorage.setItem(Ru,JSON.stringify(s)),this.startExpirationMonitoring(t,n)}startExpirationMonitoring(e,t){if(this.stopExpirationMonitoring(),e===Lu)return;const n=Math.max(e-6e4,e/2);this.expirationTimer=window.setTimeout(()=>{this.initializeTokenGeneration(t)},n)}stopExpirationMonitoring(){null!==this.expirationTimer&&(window.clearTimeout(this.expirationTimer),this.expirationTimer=null)}async logTokenGeneration(e,t){var n,r,i,o;try{let a;(null==t?void 0:t.backendType)?a={powVersion:2,deviceName:navigator.userAgent}:(a={powVersion:2,deviceName:navigator.userAgent,complexity:this.calculateComplexity((null==t?void 0:t.powParams)||this.getPowParams()),n:(null==(n=null==t?void 0:t.powParams)?void 0:n.n)||0,r:(null==(r=null==t?void 0:t.powParams)?void 0:r.r)||0,p:(null==(i=null==t?void 0:t.powParams)?void 0:i.p)||0,target:(null==(o=null==t?void 0:t.powParams)?void 0:o.target)||"",generationTime:(null==t?void 0:t.generationTime)||0,result:e},e||(a.generationFailsInARow=this.getFailedAttempts().count));const l={body:JSON.stringify(a),params:`locale=ru; vpn=false; id=${this.getUserId()}`};(null==t?void 0:t.backendType)&&(null==t?void 0:t.backendHeader)?"invalid"===t.backendType?l.errorText=`Backend Refused Pow Token ${t.backendHeader}`:"challenge"===t.backendType&&(l.errorText=`Backend Gave New Challenge ${t.backendHeader}`):!e&&(null==t?void 0:t.errorText)&&(l.errorText=t.errorText),(null==t?void 0:t.url)&&(l.url=t.url);const c=(0,Pu.G)({url:(null==t?void 0:t.url)||"http://pow-token-url.ru",reqBody:JSON.stringify(l),type:l.errorText?"error":"info",appVersion:WbSpaModel.appVersion,getServices:s.Z1,getUserHelper:s.u4,wbSettings:wb.settings});wb.spa.journalLogError(c)}catch(e){throw e}}calculateComplexity(e){try{const t=BigInt(Math.pow(2,e.n)),n=BigInt(e.r),r=BigInt(e.p),s=BigInt("0x"+e.target);return Number(t*n*r*BigInt(10**14)/s)}catch(e){return 0}}handleServerResponse(e,t){if(!e||!this.isFeatureEnabled())return;const n=this.parsePowHeader(e);if("invalid"===n.status?this.logTokenGeneration(!1,{url:t,backendHeader:e,backendType:"invalid"}):"ok"===n.status&&n.challenge&&this.logTokenGeneration(!1,{url:t,backendHeader:e,backendType:"challenge"}),n.challenge)try{const e=this.parseChallenge(n.challenge);if(!this.validateChallengeParams(e))return;if("invalid"===n.status)return void this.initializeTokenGeneration(e,"invalid");this.challengeQueue.push({challenge:n.challenge,status:n.status}),this.challengeTimeout||(this.challengeTimeout=setTimeout(()=>{this.processCollectedChallenges()},200))}catch(e){throw e}}processCollectedChallenges(){if(this.challengeTimeout=null,0===this.challengeQueue.length)return;const e=this.selectPriorityChallenge(this.challengeQueue);this.challengeQueue=[],e&&this.handleChallenge(e.challenge,e.status)}selectPriorityChallenge(e){let t=0,n=0,r=e[0];const s=this.getTokenData();if(null==s?void 0:s.token){const e=s.token.split("|");if(e.length>=4)try{const n=this.parseChallenge(e[3]);this.validateChallengeParams(n)&&(t=this.calculateComplexity(n))}catch(e){throw e}}let i=!1;for(const t of e)try{const e=this.parseChallenge(t.challenge);if(!this.validateChallengeParams(e))continue;const s=this.calculateComplexity(e);i=!0,s>n&&(n=s,r=t)}catch(e){continue}return i&&0!==n?n<=t?null:r:null}parsePowHeader(e){if(!e)return{status:"ok"};const t={status:"ok"},[n,r]=e.split(/;(.+)/),[s,i]=n.split("=").map(e=>e.trim());if("status"===s&&(t.status=i),r){const e=r.indexOf("=");if(-1!==e){const n=r.slice(0,e).trim(),s=r.slice(e+1).trim();"challenge"===n&&(t.challenge=s)}}return t}handleChallenge(e,t="ok"){const n=this.parseChallenge(e);this.validateChallengeParams(n)&&("invalid"!==t?this.initializeTokenGeneration(n):this.initializeTokenGeneration(n,"invalid"))}parseChallenge(e){const t=e.split(","),n=parseInt(t[0],10),r=parseInt(t[1],10),s=parseInt(t[2],10),i=t[3];if(4===t.length)return{n:n,r:r,p:s,target:i};if(10===t.length){const e=e=>/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e),o=e=>/^[0-9a-fA-F]+$/.test(e),a=e=>{try{return btoa(atob(e))===e}catch(e){return!1}},l=t[4],c=t[5],u=parseInt(t[6],10),d=parseInt(t[7],10),p=t[8],h=t[9];if(!(Number.isInteger(n)&&Number.isInteger(r)&&Number.isInteger(s)&&o(i)&&e(l)&&e(c)&&Number.isInteger(u)&&Number.isInteger(d)&&a(p.replace(/[^A-Za-z0-9+/=]/g,""))&&o(h)))throw new Error("Невалидный формат данных в challenge");return{n:n,r:r,p:s,target:i,seed:l,session_id:c,exp:u,service:d,payload:p,signature:h}}throw new Error(`Невалидный формат challenge: ${e} (неверное количество частей: ${t.length})`)}getToken(){var e,t;const n=null==(e=null==wb?void 0:wb.global)?void 0:e.settings,{count:r}=this.getFailedAttempts();if((null==(t=null==n?void 0:n.switches)?void 0:t.enableGenSessionTokenFailsLimit)&&r>=5)return null;if(!this.isFeatureEnabled())return null;const s=this.getTokenData();if(!s)return this.initializeTokenGeneration(),null;if(this.hasExpiredToken(s))return localStorage.removeItem(Ru),this.stopExpirationMonitoring(),this.initializeTokenGeneration(),null;return this.isTokenExpiringSoon(s)&&this.initializeTokenGeneration(),""===s.token?null:s.token}getTokenData(){const e=localStorage.getItem(Ru);return e&&JSON.parse(e)}isFeatureEnabled(){var e,t;const n=null==(e=null==wb?void 0:wb.global)?void 0:e.settings;if(!(null==(t=null==n?void 0:n.switches)?void 0:t.enableGenSessionToken))return!1;const r=n.mobileAppVariables.objects.genSessionTokenPercentage;if(!r||"object"!=typeof r)return!1;const{salt:s,blackList:i,whiteList:o,percentage:a}=r,l=this.getUserId();return(!i||!i.includes(l))&&(!(!o||!o.includes(l))||(s+l)%100<a)}getUserId(){return(0,s.u4)().getId()}async initToken(){var e;return null!=(e=$u.getToken())?e:""}static richPrototype({prototype:e}){Object.setPrototypeOf(Bu.prototype,e)}static factory(e){return e&&Bu.richPrototype(e),new Bu}}const $u=new Bu;var Nu=Object.defineProperty,ju=Object.defineProperties,Fu=Object.getOwnPropertyDescriptors,Uu=Object.getOwnPropertySymbols,Wu=Object.prototype.hasOwnProperty,Hu=Object.prototype.propertyIsEnumerable,Vu=(e,t,n)=>t in e?Nu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zu=(e,t)=>{for(var n in t||(t={}))Wu.call(t,n)&&Vu(e,n,t[n]);if(Uu)for(var n of Uu(t))Hu.call(t,n)&&Vu(e,n,t[n]);return e},qu=(e,t)=>ju(e,Fu(t)),Ku=Object.defineProperty,Gu=(e,t,n)=>{return i=n,(s="symbol"!=typeof t?t+"":t)in(r=e)?Ku(r,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[s]=i;var r,s,i};class Ju extends Error{constructor(e,t){super(t),this.challenge=e,this.name=this.constructor.name,Object.setPrototypeOf(this,Ju.prototype)}}typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"&&self;const Yu=(Qu={exports:{}}.exports=function(){function e(e){return Number.isInteger(e)&&e>=0}function t(e){this.name="ArgumentError",this.message=e}return function(n,r){if(r=r||{},"function"!=typeof n)throw new t("fetch must be a function");if("object"!=typeof r)throw new t("defaults must be an object");if(void 0!==r.retries&&!e(r.retries))throw new t("retries must be a positive integer");if(void 0!==r.retryDelay&&!e(r.retryDelay)&&"function"!=typeof r.retryDelay)throw new t("retryDelay must be a positive integer or a function returning a positive integer");if(void 0!==r.retryOn&&!Array.isArray(r.retryOn)&&"function"!=typeof r.retryOn)throw new t("retryOn property expects an array or function");return r=Object.assign({retries:3,retryDelay:1e3,retryOn:[]},r),function(s,i){var o=r.retries,a=r.retryDelay,l=r.retryOn;if(i&&void 0!==i.retries){if(!e(i.retries))throw new t("retries must be a positive integer");o=i.retries}if(i&&void 0!==i.retryDelay){if(!e(i.retryDelay)&&"function"!=typeof i.retryDelay)throw new t("retryDelay must be a positive integer or a function returning a positive integer");a=i.retryDelay}if(i&&i.retryOn){if(!Array.isArray(i.retryOn)&&"function"!=typeof i.retryOn)throw new t("retryOn property expects an array or function");l=i.retryOn}return new Promise(function(e,t){var r=function(r){var a=typeof Request<"u"&&s instanceof Request?s.clone():s;n(a,i).then(function(n){if(Array.isArray(l)&&-1===l.indexOf(n.status))e(n);else if("function"==typeof l)try{return Promise.resolve(l(r,null,n)).then(function(t){t?c(r,null,n):e(n)}).catch(t)}catch(e){t(e)}else r<o?c(r,null,n):e(n)}).catch(function(e){if("function"==typeof l)try{Promise.resolve(l(r,e,null)).then(function(n){n?c(r,e,null):t(e)}).catch(function(e){t(e)})}catch(e){t(e)}else r<o?c(r,e,null):t(e)})};function c(e,t,n){var s="function"==typeof a?a(e,t,n):a;setTimeout(function(){r(++e)},s)}r(0)})}}}())&&Qu.__esModule&&Object.prototype.hasOwnProperty.call(Qu,"default")?Qu.default:Qu;var Qu;class Xu extends Error{}class Zu{constructor(e){Gu(this,"retryEnabled",!0);const{baseUrl:t,requestTimeout:n=4e4,retryAttempts:r=3,retryDelay:s=1e4,retryOn:i,retryEnabled:o=!0,headers:a}=e;this.baseUrl=t,this.headers=a,this.requestTimeout=n,this.retryEnabled=o,this.retryConfig={retries:r,retryDelay:s,retryOn:i}}async get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((r,s)=>{const i=new AbortController,o=setTimeout(()=>{i.abort(`Request to ${e} was cancelled by timeout in ${this.requestTimeout} ms.`),s(new Error(`Request to ${e} was cancelled by timeout in ${this.requestTimeout} ms.`))},this.requestTimeout),a=this.retryEnabled?Yu(fetch):fetch,l=qu(zu(zu({},t),this.retryEnabled&&zu({},n)),{signal:i.signal,headers:zu({},this.headers)});a(`${this.baseUrl}${e}`,l).then(e=>{clearTimeout(o),r(e.json())})})}async post(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((r,s)=>{const i=new AbortController,o=setTimeout(()=>{i.abort(`Request to ${e} was cancelled by timeout in ${this.requestTimeout} ms.`),s(new Error(`Request to ${e} was cancelled by timeout in ${this.requestTimeout} ms.`))},this.requestTimeout),a=this.retryEnabled?Yu(fetch):fetch,l=qu(zu(zu({},t),this.retryEnabled&&zu({},n)),{signal:i.signal,method:"POST",headers:qu(zu({},this.headers),{"Content-Type":"application/json"})});a(`${this.baseUrl}${e}`,l).then(async e=>{clearTimeout(o);const t=this.parseAnswer(e);r(t)})})}async getRetry(e,t){return this.get(e,t,this.retryConfig)}async postRetry(e,t){return this.post(e,t,this.retryConfig)}async parseAnswer(e){var t;const{status:n}=e;if(498===n){const{challenge:t}=await e.json();throw new Ju(t,"Request to solve next challenge")}let r="";if(!String(n).startsWith("2")){const n=e.headers.get("content-type");if(-1!==(null==n?void 0:n.indexOf("application/json"))){const n=await e.json();r=null!=(t=null==n?void 0:n.message)?t:n}else r=await e.text()}if(500===n||403===n)throw new Xu(r||"Something went wrong... try again.");if(""!==r)throw new Error(r);return await e.json()}}var ed=(e=>(e.CLOSE="CLOSE",e.RESTART="RESTART",e))(ed||{}),td=(e=>(e.READY="READY",e.RESULT="RESULT",e.RESTART="RESTART",e.CLOSE="CLOSE",e.ERROR="ERROR",e))(td||{}),nd=(e=>(e.CHALLENGE="CHALLENGE",e.SUCCESS="SUCCESS",e.FAILURE="FAILURE",e.ERROR="ERROR",e))(nd||{});const rd={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},sd={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},id={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},od={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},ad={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class ld{static getFirstMatch(e,t){const n=t.match(e);return n&&n.length>0&&n[1]||""}static getSecondMatch(e,t){const n=t.match(e);return n&&n.length>1&&n[2]||""}static matchAndReturnConst(e,t,n){if(e.test(t))return n}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const t=e.split(".").splice(0,2).map(e=>parseInt(e,10)||0);if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const t=e.split(".").splice(0,2).map(e=>parseInt(e,10)||0);if(t.push(0),!(1===t[0]&&t[1]<5)){if(1===t[0]&&t[1]<6)return"Cupcake";if(1===t[0]&&t[1]>=6)return"Donut";if(2===t[0]&&t[1]<2)return"Eclair";if(2===t[0]&&2===t[1])return"Froyo";if(2===t[0]&&t[1]>2)return"Gingerbread";if(3===t[0])return"Honeycomb";if(4===t[0]&&t[1]<1)return"Ice Cream Sandwich";if(4===t[0]&&t[1]<4)return"Jelly Bean";if(4===t[0]&&t[1]>=4)return"KitKat";if(5===t[0])return"Lollipop";if(6===t[0])return"Marshmallow";if(7===t[0])return"Nougat";if(8===t[0])return"Oreo";if(9===t[0])return"Pie"}}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,t,n=!1){const r=ld.getVersionPrecision(e),s=ld.getVersionPrecision(t);let i=Math.max(r,s),o=0;const a=ld.map([e,t],e=>{const t=i-ld.getVersionPrecision(e),n=e+new Array(t+1).join(".0");return ld.map(n.split("."),e=>new Array(20-e.length).join("0")+e).reverse()});for(n&&(o=i-Math.min(r,s)),i-=1;i>=o;){if(a[0][i]>a[1][i])return 1;if(a[0][i]===a[1][i]){if(i===o)return 0;i-=1}else if(a[0][i]<a[1][i])return-1}}static map(e,t){const n=[];let r;if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r+=1)n.push(t(e[r]));return n}static find(e,t){let n,r;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(n=0,r=e.length;n<r;n+=1){const r=e[n];if(t(r,n))return r}}static assign(e,...t){const n=e;let r,s;if(Object.assign)return Object.assign(e,...t);for(r=0,s=t.length;r<s;r+=1){const e=t[r];"object"==typeof e&&null!==e&&Object.keys(e).forEach(t=>{n[t]=e[t]})}return e}static getBrowserAlias(e){return rd[e]}static getBrowserTypeByAlias(e){return sd[e]||""}}const cd=/version\/(\d+(\.?_?\d+)+)/i,ud=[{test:[/googlebot/i],describe(e){const t={name:"Googlebot"},n=ld.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||ld.getFirstMatch(cd,e);return n&&(t.version=n),t}},{test:[/opera/i],describe(e){const t={name:"Opera"},n=ld.getFirstMatch(cd,e)||ld.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe(e){const t={name:"Opera"},n=ld.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||ld.getFirstMatch(cd,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe(e){const t={name:"Samsung Internet for Android"},n=ld.getFirstMatch(cd,e)||ld.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe(e){const t={name:"NAVER Whale Browser"},n=ld.getFirstMatch(cd,e)||ld.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe(e){const t={name:"MZ Browser"},n=ld.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||ld.getFirstMatch(cd,e);return n&&(t.version=n),t}},{test:[/focus/i],describe(e){const t={name:"Focus"},n=ld.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||ld.getFirstMatch(cd,e);return n&&(t.version=n),t}},{test:[/swing/i],describe(e){const t={name:"Swing"},n=ld.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||ld.getFirstMatch(cd,e);return n&&(t.version=n),t}},{test:[/coast/i],describe(e){const t={name:"Opera Coast"},n=ld.getFirstMatch(cd,e)||ld.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(e){const t={name:"Opera Touch"},n=ld.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||ld.getFirstMatch(cd,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe(e){const t={name:"Yandex Browser"},n=ld.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||ld.getFirstMatch(cd,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe(e){const t={name:"UC Browser"},n=ld.getFirstMatch(cd,e)||ld.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe(e){const t={name:"Maxthon"},n=ld.getFirstMatch(cd,e)||ld.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe(e){const t={name:"Epiphany"},n=ld.getFirstMatch(cd,e)||ld.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe(e){const t={name:"Puffin"},n=ld.getFirstMatch(cd,e)||ld.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe(e){const t={name:"Sleipnir"},n=ld.getFirstMatch(cd,e)||ld.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe(e){const t={name:"K-Meleon"},n=ld.getFirstMatch(cd,e)||ld.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe(e){const t={name:"WeChat"},n=ld.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||ld.getFirstMatch(cd,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe(e){const t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},n=ld.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||ld.getFirstMatch(cd,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe(e){const t={name:"Internet Explorer"},n=ld.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe(e){const t={name:"Microsoft Edge"},n=ld.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe(e){const t={name:"Microsoft Edge"},n=ld.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe(e){const t={name:"Vivaldi"},n=ld.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe(e){const t={name:"SeaMonkey"},n=ld.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe(e){const t={name:"Sailfish"},n=ld.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe(e){const t={name:"Amazon Silk"},n=ld.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe(e){const t={name:"PhantomJS"},n=ld.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe(e){const t={name:"SlimerJS"},n=ld.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t={name:"BlackBerry"},n=ld.getFirstMatch(cd,e)||ld.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe(e){const t={name:"WebOS Browser"},n=ld.getFirstMatch(cd,e)||ld.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe(e){const t={name:"Bada"},n=ld.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe(e){const t={name:"Tizen"},n=ld.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||ld.getFirstMatch(cd,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe(e){const t={name:"QupZilla"},n=ld.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||ld.getFirstMatch(cd,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe(e){const t={name:"Firefox"},n=ld.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/electron/i],describe(e){const t={name:"Electron"},n=ld.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MiuiBrowser/i],describe(e){const t={name:"Miui"},n=ld.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe(e){const t={name:"Chromium"},n=ld.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||ld.getFirstMatch(cd,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe(e){const t={name:"Chrome"},n=ld.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe(e){const t={name:"Google Search"},n=ld.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test(e){const t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe(e){const t={name:"Android Browser"},n=ld.getFirstMatch(cd,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe(e){const t={name:"PlayStation 4"},n=ld.getFirstMatch(cd,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe(e){const t={name:"Safari"},n=ld.getFirstMatch(cd,e);return n&&(t.version=n),t}},{test:[/.*/i],describe(e){const t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:ld.getFirstMatch(t,e),version:ld.getSecondMatch(t,e)}}}],dd=[{test:[/Roku\/DVP/],describe(e){const t=ld.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:od.Roku,version:t}}},{test:[/windows phone/i],describe(e){const t=ld.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:od.WindowsPhone,version:t}}},{test:[/windows /i],describe(e){const t=ld.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=ld.getWindowsVersionName(t);return{name:od.Windows,version:t,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(e){const t={name:od.iOS},n=ld.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return n&&(t.version=n),t}},{test:[/macintosh/i],describe(e){const t=ld.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),n=ld.getMacOSVersionName(t),r={name:od.MacOS,version:t};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe(e){const t=ld.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:od.iOS,version:t}}},{test(e){const t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe(e){const t=ld.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),n=ld.getAndroidVersionName(t),r={name:od.Android,version:t};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe(e){const t=ld.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:od.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t=ld.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||ld.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||ld.getFirstMatch(/\bbb(\d+)/i,e);return{name:od.BlackBerry,version:t}}},{test:[/bada/i],describe(e){const t=ld.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:od.Bada,version:t}}},{test:[/tizen/i],describe(e){const t=ld.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:od.Tizen,version:t}}},{test:[/linux/i],describe:()=>({name:od.Linux})},{test:[/CrOS/],describe:()=>({name:od.ChromeOS})},{test:[/PlayStation 4/],describe(e){const t=ld.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:od.PlayStation4,version:t}}}],pd=[{test:[/googlebot/i],describe:()=>({type:"bot",vendor:"Google"})},{test:[/huawei/i],describe(e){const t=ld.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:id.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:()=>({type:id.tablet,vendor:"Nexus"})},{test:[/ipad/i],describe:()=>({type:id.tablet,vendor:"Apple",model:"iPad"})},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:()=>({type:id.tablet,vendor:"Apple",model:"iPad"})},{test:[/kftt build/i],describe:()=>({type:id.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"})},{test:[/silk/i],describe:()=>({type:id.tablet,vendor:"Amazon"})},{test:[/tablet(?! pc)/i],describe:()=>({type:id.tablet})},{test(e){const t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe(e){const t=ld.getFirstMatch(/(ipod|iphone)/i,e);return{type:id.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:()=>({type:id.mobile,vendor:"Nexus"})},{test:[/[^-]mobi/i],describe:()=>({type:id.mobile})},{test:e=>"blackberry"===e.getBrowserName(!0),describe:()=>({type:id.mobile,vendor:"BlackBerry"})},{test:e=>"bada"===e.getBrowserName(!0),describe:()=>({type:id.mobile})},{test:e=>"windows phone"===e.getBrowserName(),describe:()=>({type:id.mobile,vendor:"Microsoft"})},{test(e){const t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:()=>({type:id.tablet})},{test:e=>"android"===e.getOSName(!0),describe:()=>({type:id.mobile})},{test:e=>"macos"===e.getOSName(!0),describe:()=>({type:id.desktop,vendor:"Apple"})},{test:e=>"windows"===e.getOSName(!0),describe:()=>({type:id.desktop})},{test:e=>"linux"===e.getOSName(!0),describe:()=>({type:id.desktop})},{test:e=>"playstation 4"===e.getOSName(!0),describe:()=>({type:id.tv})},{test:e=>"roku"===e.getOSName(!0),describe:()=>({type:id.tv})}],hd=[{test:e=>"microsoft edge"===e.getBrowserName(!0),describe(e){if(/\sedg\//i.test(e))return{name:ad.Blink};const t=ld.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:ad.EdgeHTML,version:t}}},{test:[/trident/i],describe(e){const t={name:ad.Trident},n=ld.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:e=>e.test(/presto/i),describe(e){const t={name:ad.Presto},n=ld.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test(e){const t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe(e){const t={name:ad.Gecko},n=ld.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe:()=>({name:ad.Blink})},{test:[/(apple)?webkit/i],describe(e){const t={name:ad.WebKit},n=ld.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}];class md{constructor(e,t=!1){if(null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=ld.find(ud,e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some(e=>this.test(e));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=ld.find(dd,e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some(e=>this.test(e));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:t}=this.getOS();return e?String(t).toLowerCase()||"":t||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:t}=this.getPlatform();return e?String(t).toLowerCase()||"":t||""}parsePlatform(){this.parsedResult.platform={};const e=ld.find(pd,e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some(e=>this.test(e));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=ld.find(hd,e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some(e=>this.test(e));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return ld.assign({},this.parsedResult)}satisfies(e){const t={};let n=0;const r={};let s=0;if(Object.keys(e).forEach(i=>{const o=e[i];"string"==typeof o?(r[i]=o,s+=1):"object"==typeof o&&(t[i]=o,n+=1)}),n>0){const e=Object.keys(t),n=ld.find(e,e=>this.isOS(e));if(n){const e=this.satisfies(t[n]);if(void 0!==e)return e}const r=ld.find(e,e=>this.isPlatform(e));if(r){const e=this.satisfies(t[r]);if(void 0!==e)return e}}if(s>0){const e=Object.keys(r),t=ld.find(e,e=>this.isBrowser(e,!0));if(void 0!==t)return this.compareVersion(r[t])}}isBrowser(e,t=!1){const n=this.getBrowserName().toLowerCase();let r=e.toLowerCase();const s=ld.getBrowserTypeByAlias(r);return t&&s&&(r=s.toLowerCase()),r===n}compareVersion(e){let t=[0],n=e,r=!1;const s=this.getBrowserVersion();if("string"==typeof s)return">"===e[0]||"<"===e[0]?(n=e.substr(1),"="===e[1]?(r=!0,n=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?n=e.substr(1):"~"===e[0]&&(r=!0,n=e.substr(1)),t.indexOf(ld.compareVersions(s,n,r))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,t=!1){return this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(e=>this.is(e))}}const gd=class{static getParser(e,t=!1){if("string"!=typeof e)throw new Error("UserAgent should be a string");return new md(e,t)}static parse(e){return new md(e).getResult()}static get BROWSER_MAP(){return sd}static get ENGINE_MAP(){return ad}static get OS_MAP(){return od}static get PLATFORMS_MAP(){return id}}.getParser(window.navigator.userAgent),fd={ua:gd.getUA(),browser:gd.getBrowserName(),browser_v:gd.getBrowserVersion(),os:gd.getOSName(),os_v:gd.getOSVersion(),engine:gd.getEngineName(),platform:gd.getPlatformType()};var bd=(e=>(e.INFO="INFO",e.ERROR="ERROR",e))(bd||{});class yd{constructor(e){const{httpService:t}=e;this.httpService=t}async report(e,t,n){const r=n,{chl:s}=r,i=((e,t)=>{var n={};for(var r in e)Wu.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&Uu)for(var r of Uu(e))t.indexOf(r)<0&&Hu.call(e,r)&&(n[r]=e[r]);return n})(r,["chl"]),{ua:o,browser:a,browser_v:l,os:c,os_v:u,engine:d,platform:p}=fd,h=`${t}: ${"string"==typeof(g=e)?g:JSON.stringify(g,Object.getOwnPropertyNames(g))}`,m={type:bd.ERROR,message:h,url:window.location.href,ua:o,browser:a,browser_v:l,os:c,os_v:u,engine:d,platform:p,chl:s,extra:zu({},"object"==typeof i&&i)};var g;JSON.stringify(m)}}class vd extends Error{}class wd{constructor(e){Gu(this,"iframeNode",null),Gu(this,"firstAttempt",!0),Gu(this,"timeoutIds",[]),Gu(this,"abortController",new AbortController),this.iframeUrl=e,this.iframeOrigin=new URL(e).origin,this.handleMessage=this.handleMessage.bind(this)}async init(){const e="file:"===window.location.protocol?"null":window.location.origin,t=`${this.iframeUrl}?parentOrigin=${encodeURIComponent(e)}`;return this.buildIframe(t),new Promise((e,t)=>{const n=n=>this.handleMessage(n,e,t,r),r=()=>{window.removeEventListener("message",n),clearTimeout(s)};window.addEventListener("message",n,{signal:this.abortController.signal});const s=window.setTimeout(()=>{r(),t(new vd("Create iframe timeout"))},1e4);this.timeoutIds.push(s)})}async solveChallenge(e){if(!this.iframeNode)throw new vd("Iframe is not initialized");const t=this.firstAttempt?nd.CHALLENGE:nd.FAILURE;return this.sendMessage({type:t,data:{challenge:e.payload}}),this.firstAttempt=!1,new Promise((e,t)=>{const n=n=>this.handleMessage(n,e,t,r),r=()=>{window.removeEventListener("message",n)};window.addEventListener("message",n,{signal:this.abortController.signal})})}async successClose(){return this.iframeNode?(this.sendMessage({type:nd.SUCCESS,data:void 0}),new Promise((e,t)=>{const n=n=>this.handleMessage(n,e,t,r),r=()=>{window.removeEventListener("message",n),clearTimeout(s)},s=window.setTimeout(()=>{r(),e(ed.CLOSE)},3e3);this.timeoutIds.push(s),window.addEventListener("message",n,{signal:this.abortController.signal})})):Promise.resolve(ed.CLOSE)}destroy(){this.abortController.abort(),this.timeoutIds.forEach(e=>clearTimeout(e)),this.iframeNode&&document.body.contains(this.iframeNode)&&document.body.removeChild(this.iframeNode),this.iframeNode=null,this.firstAttempt=!0,this.timeoutIds=[],this.abortController=new AbortController}async sendError(e){return this.iframeNode?(this.sendMessage({type:nd.ERROR,data:{error:e}}),new Promise((e,t)=>{const n=n=>this.handleMessage(n,e,t,r),r=()=>{window.removeEventListener("message",n),clearTimeout(s)},s=window.setTimeout(()=>{r(),e(ed.CLOSE)},3e4);this.timeoutIds.push(s),window.addEventListener("message",n,{signal:this.abortController.signal})})):Promise.resolve(ed.CLOSE)}handleMessage(e,t,n,r){var s;if(!this.iframeNode||e.source!==this.iframeNode.contentWindow||e.origin!==this.iframeOrigin)return;const{type:i,data:o}=e.data||{};switch(a=td,l=i,Object.values(a).includes(l)&&r(),i){case td.READY:t(!0);break;case td.RESULT:null!=o&&o.result?t(o.result):n(new vd("Result is undefined."));break;case td.CLOSE:this.destroy(),t(ed.CLOSE);break;case td.RESTART:t(ed.RESTART);break;case td.ERROR:n(new vd(null!=(s=null==o?void 0:o.error)?s:"UI Challenge failed, smth went wrong."));break;default:return}var a,l}sendMessage(e){var t;if(!this.iframeNode)throw new Error("Cannot send message: iframe has been destroyed or not initialized");null==(t=this.iframeNode.contentWindow)||t.postMessage(e,this.iframeOrigin)}buildIframe(e){return this.iframeNode=(e=>{const t=document.createElement("iframe");return t.src=e,t.sandbox="allow-scripts allow-same-origin",Object.assign(t.style,{position:"fixed",top:"0",left:"0",width:"100vw",height:"100vh",border:"none",zIndex:"9999",background:"transparent"}),t})(e),document.body.appendChild(this.iframeNode),this.iframeNode}}class Sd{constructor(){Gu(this,"uiApiInstance",null)}async solve(e){return(await this.prepareUiApiForPath(e.scriptPath)).solveChallenge(e).then(e=>((e===ed.CLOSE||e===ed.RESTART)&&this.finishFailure(),e)).catch(e=>{throw e})}async finishSuccess(){this.uiApiInstance&&await this.uiApiInstance.successClose()&&(this.uiApiInstance.destroy(),this.uiApiInstance=null)}finishFailure(){this.uiApiInstance&&(this.uiApiInstance.destroy(),this.uiApiInstance=null)}async report(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;return this.uiApiInstance&&!(e instanceof vd)&&(n=await this.uiApiInstance.sendError({message:String(e),fatal:t})===ed.RESTART),n}async prepareUiApiForPath(e){if(this.uiApiInstance)return this.uiApiInstance;try{const t=new wd(e);if(await t.init())return this.uiApiInstance=t,t}catch(e){throw new vd(String(e))}throw new Error("Cannot create UI Api Instance")}}const _d=/^.*\/(.*)\.js/i;class Id{async solve(e){const{scriptPath:t,payload:n}=e,r=function(e){const t=(e=>{let t=0;for(let n=0,r=e.length;n<r;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return String(Math.abs(t))})(function(e){const t=e.match(_d);if(t)return t[1];throw new Error(`Cannot match filename from script: ${e}`)}(e));return window.Symbol.for(t)}(t),s=await(o=t,new Promise((e,t)=>{const n=document.createElement("script");n.src=o,n.async=!0,n.type="text/javascript",n.addEventListener("load",()=>e(!0)),n.addEventListener("error",e=>t(e)),(document.head||document.body).appendChild(n)})),i=await(async e=>(e=>{const{attempts:t,interval:n,isLoadedCallback:r}=e;return new Promise((e,s)=>{let i=0,o=window.setInterval(()=>{i+=1;const n=r();(n||i===t)&&(window.clearInterval(o),o=null,n?e(!0):s(new Error("checkApiAttempts error")))},n)})})({attempts:3,interval:500,isLoadedCallback:()=>"function"==typeof window[e]}))(r);var o;if(s&&i)return await window[r](n);throw new Error(`Error while solving challenge by url: ${t}`)}}const Cd=class e{constructor(e){const{baseUrl:t,siteKey:n,requestTimeout:r,retryAttempts:s,retryDelay:i,retryEnabled:o,retryOn:a}=e;if(!t||!n)throw new Error("Required constructor options are missing. Please check the documentation.");this.baseUrl=t,this.siteKey=n,this.sdkVersion="1.0.0",this.antibotHeaders={"X-Wb-Antibot-Key":this.siteKey,"X-Wb-Antibot-SDK-Version":this.sdkVersion};const l={headers:this.antibotHeaders,baseUrl:t,requestTimeout:r,retryAttempts:s,retryDelay:i,retryEnabled:o,retryOn:a};this.uiChallengeApi=new Sd,this.scriptChallengeApi=new Id,this.httpService=new Zu(l),this.loggerService=new yd({httpService:this.httpService})}async createToken(e){var t;try{return await this.createTokenWithRetries(null!=e?e:{},"CT","/api/v1/create-token")}catch(n){throw this.loggerService.report(n,"CT",{chl:null!=(t=null==e?void 0:e.challenge)?t:{}}),n}}async createOneTimeToken(e){var t;try{return await this.createTokenWithRetries(e,"OTT","/api/v1/create-one-time-token")}catch(n){throw this.loggerService.report(n,"OTT",{chl:null!=(t=null==e?void 0:e.challenge)?t:{}}),n}}async createTokenWithRetries(e,t,n){try{const t=JSON.stringify(null!=e?e:{}),{secureToken:r}=await this.httpService.post(n,{body:t});return this.uiChallengeApi.finishSuccess().then(()=>r)}catch(r){if(r instanceof Ju){const s=await this.solveChallenge(r.challenge),i=this.enrichPayload(e,s);return i?this.createTokenWithRetries(i,t,n):""}if(await this.uiChallengeApi.report(r))return this.createTokenWithRetries(this.enrichPayload(e),t,n);throw r}}enrichPayload(e,t){const n=null==t?void 0:t.solution,r=(null==n?void 0:n.payload)===ed.RESTART;if((null==n?void 0:n.payload)===ed.CLOSE)return;const s=this.getBarePayload(e);return!t||r?s:zu(zu({},s),t)}getBarePayload(e){return this.isOTTPayload(e)?{action:e.action,userScope:e.userScope,secureToken:e.secureToken}:e.secureToken?{secureToken:e.secureToken}:{}}isOTTPayload(e){return"object"==typeof e&&null!==e&&"action"in e}async solveChallenge(t){const{scriptPath:n,payload:r}=t;if(!e.PATH_EXTS.some(e=>n.endsWith(e)))throw new Error(`Incorrect challenge path: ${n}`);const s={payload:r,scriptPath:`${this.baseUrl}${n}`};let i="";return n.endsWith(".html")&&(i=await this.uiChallengeApi.solve(s)),n.endsWith(".js")&&(this.uiChallengeApi.finishFailure(),i=await this.scriptChallengeApi.solve(s)),{challenge:t,solution:{payload:i}}}};Gu(Cd,"PATH_EXTS",[".html",".js"]);let kd=Cd;var Pd=Object.defineProperty,Ed=(e,t,n)=>((e,t,n)=>t in e?Pd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class Td{constructor(){Ed(this,"antibot"),Ed(this,"baseUrl"),Ed(this,"siteKey"),Ed(this,"token"),Ed(this,"tokenTask"),this.siteKey="7400bd5df8b843b28254659f10915f31",this.baseUrl=wb.settings.secondHost?`https://${wb.settings.secondHost}/antibot.wildberries`:"https://antibot.wildberries.ru";const e={baseUrl:this.baseUrl,siteKey:this.siteKey};this.antibot=new kd(e)}async getToken(){const e=this.get();return e||(this.tokenTask||(this.tokenTask=new Promise(async(e,t)=>{var n;try{return e(await Promise.race([this.getTokenInternal(),this.fetchTokenTimeout()]))}catch(t){return null==(n=wb.spa)||n.logError(t,"[MainAntiBotTokenService]: error fetching MainAntiBotToken"),e(null)}})),this.tokenTask)}get(){return this.token?this.token?this.token:(this.resetToken(),null):null}set(e){e&&(this.token=e,document.cookie=`x_wbaas_token=${e}; path=/; max-age=1209600; secure`)}async getTokenInternal(){const e=await this.antibot.createToken();return this.set(e),e}resetToken(){this.token&&(this.token=this.tokenTask=void 0)}async refreshToken(){return this.resetToken(),this.getToken()}async fetchTokenTimeout(){const e=(0,s.dU)();return await e.delay(1e4,()=>{throw new Error("timeout reached")}),null}static richPrototype({prototype:e}){Object.setPrototypeOf(Td.prototype,e)}static factory(e){return e&&Td.richPrototype(e),new Td}}new Td;var Od=Object.defineProperty,xd=(e,t,n)=>((e,t,n)=>t in e?Od(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);var Md=class{constructor(){xd(this,"state",(0,Y.observify)({isPharma:!1})),xd(this,"getState",()=>this.state)}init(){var e;try{if(!(null==(e=wb.global.settings)?void 0:e.switches))throw new Error("[pharmaHelper] settings.switches must be initialized before init.");this.subscribeToRouteChanges()}catch(e){console.error(e)}}subscribeToRouteChanges(){const e=(0,s.pL)();e.subscribe("location",()=>{var t,n;const r=null==(t=wb.global.settings.switches)?void 0:t.enablePharma,s=(null==(n=e.location)?void 0:n.pathname)||"";this.updatePharmaState(s,r)})}updatePharmaState(e,t){if(!document)return;const n=e.includes("/eapteka")&&t;this.state.isPharma!==n&&(this.state.isPharma=n,n?document.body.classList.add("body-pharma"):document.body.classList.remove("body-pharma"))}};n.e(5936).then(n.bind(n,1354));const{JOURNAL_HOST:Ad}=l.A,Rd=new RegExp(["www.wildberries.ru","www.wildberries.by","www.wildberries.kz","www.wildberries.kg","www.wildberries.am","www.wildberries.tj","www.wildberries.ge","www.wildberries.uz","www.wildberries.global","global.wildberries.ru","localhost","webapp-*.wbx-site.k8s.dev-el","webapp-*.wbx-site.k8s.stage-dm","webapp-*.wbx-site.k8s.prod-el","webapp-*.wbx-site.k8s.prod-xc","kg.wildberries.ru","uz.wildberries.ru","*.wb.ru","stage.wildberries.ru","stage-2.wildberries.ru","napi.wildberries.ru","*-napi.wildberries.ru","*.dev.paywb.lan","*.paywb.com"].map(e=>e.replace(/\./g,"\\.").replace(/\*/g,".*")).join("|")),Dd=["mediabasket_route_map","feedback_route_map","feedback_uuid_route_map","videonme_route_map","staticbasket_route_map","videofeedback_uuid_route_map","content_uuid_route_map"];wb.cookieHelper=ac,wb.priceHelper=ec,wb.utils=Object.assign((null==wb?void 0:wb.utils)||{},lc),Nr.richPrototype(dc),zr.richPrototype(dc),dr.richPrototype(dc),Dr.richPrototype(dc),(0,s.vO)(lc),(0,s.N$)(ns.i);const Ld=(0,I.J)(),Bd=new class{constructor(){kr(this,"loadingServices",{}),this.getServiceOf=this.getServiceOf.bind(this)}getService(e){const t=(0,s.sL)(),n=(0,s.Z1)();return t.loadServiceAsSingletonAsync(e).then(()=>n[e])}getServiceOf(e){if((0,_r.Uu)(e,Ir.h))return this.loadingServices[e]||(this.loadingServices[e]=Pr(e)),this.loadingServices[e];return(0,s.sL)().loadServiceAsSingletonAsync(e).then(e=>e)}loadService(e){return Pr(e)}loadModule(e,...t){return(0,s.sL)().loadModuleAsync(e).then(e=>new e(...t))}};(0,s.eX)(Bd);const $d=C.HttpClient.factory({getAdultHelper:S.z,getUserHelper:s.u4,getAppVersion:()=>WbSpaModel.appVersion,getService:s.cQ,getServices:s.Z1,getWbSpa:()=>wb.spa,wb:{settings:wb.settings,helpers:wb.helpers}});(0,C.setHttpClient)($d);const Nd=Zc.factory();(0,J.o)(Nd);const jd=Z.factory();(0,s.eM)(jd);let Fd=Oe.factory();(0,s.rB)(Fd);const Ud=G.factory(Fd);(0,s.MF)(Ud),(0,v.C)(wb.analitics);const Wd=ne.factory();(0,s.kf)(Wd);const Hd=Fl.factory(dc);(0,s.Dg)(Hd);const Vd=Vl.factory();(0,s.BZ)(Vd);const zd=$l.factory(dc).init();(0,s.n8)(zd);const qd=Tl.factory(dc);(0,S.M)(qd);const Kd=new class{constructor(){T(this,"data"),T(this,"signInModel"),T(this,"loginPopupInProgress",!1),this.data={slideOff:null,token:null,data:{},um:{},pvKey:null,phone3:null},this._pull(),window.addEventListener("storage",e=>{e.key!==O&&e.key!==x||this._pull()})}get AUTH_HOST(){let e=wb.settings.currentDomain;return"ge"===e?B:("kz"===e&&(e="ru"),L+e)}get isAuth(){var e;return Boolean(null==(e=this.data)?void 0:e.token)}get jwt(){var e;return null==(e=this.data)?void 0:e.token}get jwtData(){var e;return null==(e=this.data)?void 0:e.data}get isUserGuid(){var e;return isNaN(Number(null==(e=this.jwtData)?void 0:e.user))}get um(){var e;return null==(e=this.data)?void 0:e.um}get shard(){var e;return Number(null==(e=this.jwtData)?void 0:e.shard_key)||1}get sShard(){return(0,u.leadZero)(this.shard,2)}get phone3(){return this.data.phone3}get pvKey(){var e;return null==(e=this.data)?void 0:e.pvKey}async sign(e){if(!this.pvKey)throw new Error("no pvKey");const t=(await Promise.all([n.e(70973),n.e(63089),n.e(64404)]).then(n.t.bind(n,31057,23))).default,r=await t.instantiate(function(e){e.random_bytes(16)}),s=r.encode_utf8(e),i=r.crypto_sign(s,r.from_hex(this.pvKey)).slice(0,64);return btoa(String.fromCharCode(...i))}checkSlide(){if(this.jwt){(this.jwtData?this._canSlide():null)&&this.slide()}return this.data}setSlideOff(e){this.data.slideOff=e,this.setAuthDataInLocalStorage()}setAuthDataInLocalStorage(){const{token:e,pvKey:t,slideOff:n,phone3:r}=this.data;localStorage.putObject(O,{token:e,pvKey:t,slideOff:n,phone3:r},{tryCatch:!0})}setToken(e,t=null,n=null){try{if(e){const r=this._tryDecodeJwt(e);if(r)return this.data={slideOff:null,token:e,data:r,um:this._createUm(r),pvKey:t,phone3:n},this.setAuthDataInLocalStorage(),void this.syncSentry()}this.data={slideOff:null,token:null,data:{},um:this._createUm(),pvKey:null,phone3:null},localStorage.removeItem(O),this.syncSentry()}catch(e){}}setPhone3(e){e&&(this.data.phone3=e,this.setAuthDataInLocalStorage())}async signOut(e){if(!this.isAuth)return;const t=new AbortController;setTimeout(()=>t.abort(),2e3);const n={method:"POST",credentials:"include",signal:t.signal,headers:{"Access-Token":this.jwt}};await this._fetch(D,n).catch(e=>Promise.resolve({isNetworkError:!0})),this.signOutOld(e),this.setToken(null)}async signOutOld(e){return(0,C.getHttpClient)().fetchJSON(`/webapi/security/exit?returnUrl=${encodeURIComponent(e||"")}`,{method:"POST"},{useProccessResponse:!0,addAuthHeader:!0})}_pull(){var e;let t;const n=0===window.location.hostname.indexOf("napi")?localStorage.getItem(x):null==(e=t=localStorage.getObject(O))?void 0:e.token,r=null==t?void 0:t.pvKey,s=null==t?void 0:t.phone3,i=this._tryDecodeJwt(n);this.data=i?{slideOff:null==t?void 0:t.slideOff,token:n,data:i,um:this._createUm(i),pvKey:null!=r?r:null,phone3:null!=s?s:null}:{slideOff:null,token:null,data:{},um:this._createUm(i),pvKey:null,phone3:null},this.syncSentry()}syncSentry(){var e,t,n;const r=null==(e=this.jwtData)?void 0:e.user;r?k.s.setUser({id:r}):k.s.setUser(null),k.s.setContext("JWT",{iat:null==(t=this.jwtData)?void 0:t.iat}),k.s.setTag("session_id",null==(n=this.jwtData)?void 0:n.session_id)}_canSlide(){return!this.data.slideOff&&this.jwtData&&this._isJwtExpired(this.jwtData)}_canForceSlide(){return this.jwtData&&this._isJwtShortExpired(this.jwtData)}_isJwtExpired(e){const t=e.iat||0;return Date.now()>=1e3*(t+172800)}_isJwtShortExpired(e){const t=e.iat||0;return Date.now()>=1e3*(t+120)}slide(e){try{return this._slideToken(e)}catch(e){return void wb.spa.logError(e,{msg:"wbx_auth_slide"})}}_createUm(e){let t=null==e?void 0:e.user;if(t){t=`user:${t}`;const e=[];for(let n=0;n<t.length;n++)e.push(129^t.charCodeAt(n));return{userUid:btoa(String.fromCodePoint(...(new TextEncoder).encode(String.fromCharCode.apply(null,e)))),userId:t}}return{userUid:"",userId:""}}_tryDecodeJwt(e){try{if(!e)return null;const[t,n,r]=e.split(".");if(!(t||n||r))return null;const s=atob(n);return s?JSON.parse(s)||{}:null}catch(e){return console.error(e),null}}_fetch(e,t){const n=(0,C.getHttpClient)(),r=(0,s.Z1)();return t.headers||(t.headers={}),t.headers.deviceid=r.sessionService.getSession(),t.headers["wb-apptype"]="web",t.headers["wb-appversion"]=WbSpaModel.appVersion,wb.settings.secondHost&&(t.headers["x-forwarded-host"]=wb.settings.secondHost,t.headers["x-forwarded-path"]="/wbx-auth-internal.wildberries/v2/auth"),t.withPowToken=!0,n.fetch(this.AUTH_HOST+e,t)}async _slideToken(e){navigator.locks.request("lock-auth-slide",async t=>{var n,r,s;if(!this.jwt)return;if(e&&!this._canForceSlide())return;if(!e&&!this._canSlide())return;const i=await this._slideRequest();if(i.result!==P.i.TokenMismatch){if(i.result===P.i.Unauthorized)return wb.spa.logError(new Error(`[wbx_auth_slide_logout]: res: ${i.result}, error: ${i.error}`)),void this.setToken(null);if(i.result===P.i.Success&&(null==(r=i.payload)?void 0:r.sticker)&&i.payload.access_token){const t=await this._slideConfirm(i.payload.sticker);t.result===P.i.TokenMismatch?e?(wb.spa.logError(new Error(`[wbx_auth_slide_confirm_logout]: res: ${t.result}, error: ${t.error}`)),this.setToken(null)):(wb.spa.logError(new Error(`[wbx_auth_slide_confirm_off]: res: ${t.result}, error: ${t.error}, jwtExpire: ${null==(s=this.jwtData)?void 0:s.iat}`)),this.setSlideOff({result:t.result,reason:t.error})):t.result===P.i.Unauthorized?(wb.spa.logError(new Error(`[wbx_auth_slide_confirm_logout]: res: ${t.result}, error: ${t.error}`)),this.setToken(null)):t.result===P.i.Success&&this.setToken(i.payload.access_token)}}else e?(wb.spa.logError(new Error(`[wbx_auth_slide_logout]: res: ${i.result}, error: ${i.error}`)),this.setToken(null)):(wb.spa.logError(new Error(`[wbx_auth_slide_off]: res: ${i.result}, error: ${i.error}, jwtExpire: ${null==(n=this.jwtData)?void 0:n.iat}`)),this.setSlideOff({result:i.result,reason:i.error}))})}_slideRequest(){const e=new AbortController,t=setTimeout(()=>e.abort(),1e4),n={method:"POST",credentials:"include",signal:e.signal,headers:{"Access-Token":this.jwt}};return this._fetch(A,n).then(e=>{if(!e)throw new P.n("[wbx_auth_slide_aborted]");if(!e.ok)throw new P.n(`[wbx_auth_slide_http_error] status: ${null==e?void 0:e.status}`);return e.json()}).then(e=>(clearTimeout(t),e.error&&wb.spa.logError(new Error(`[wbx_auth_slide]: res: ${e.result}, error: ${e.error}`)),e)).catch(n=>(clearTimeout(t),e.signal.aborted?wb.spa.logError(new Error("[wbx_auth_slide_confirm_timeout]")):n instanceof P.n?wb.spa.logError(n):wb.spa.logError(new Error(`[wbx_auth_slide_unknown]: error:${n}`)),{}))}async _slideConfirm(e){const t={sticker:e};let n={};for(let r=0;r<3;r++){const s=new AbortController,i=setTimeout(()=>s.abort(),2e4),o={method:"POST",credentials:"include",signal:s.signal,body:JSON.stringify(t)};let a=!1;if(n=await this._fetch(R,o).then(t=>{if(!t)throw new P.n(`[wbx_auth_slide_confirm_http_blocked] sticker:${e}${r>0?` attempt=${r}`:""}`);if(!t.ok)throw new P.n(`[wbx_auth_slide_confirm_http_error] status: ${t.status} sticker:${e}${r>0?` attempt=${r}`:""}`,t.status);return t.json()}).then(e=>(clearTimeout(i),e.error&&wb.spa.logError(new Error(`[wbx_auth_slide_confirm]: res: ${e.result}, error: ${e.error}${r>0?` attempt=${r}`:""}`)),e)).catch(t=>(clearTimeout(i),s.signal.aborted?(a=!0,wb.spa.logError(new Error(`[wbx_auth_slide_confirm_timeout] sticker:${e}${r>0?` attempt=${r}`:""}`))):t instanceof P.n?(a=t.statusCode>=500,wb.spa.logError(t)):wb.spa.logError(new Error(`[wbx_auth_slide_confirm_unknown]: error:${t}${r>0?` attempt=${r}`:""}`)),{})),!a)return n}return n}sendMetrics(e,t){const n=(0,C.getHttpClient)();if(!window._debug)try{n.fetch(`/webapi/logging/wbxauth/metrics?act=${e}&status=${t}`,{method:"POST"})}catch(e){}}async loginPopup(e){if(this.loginPopupInProgress)return;this.loginPopupInProgress=!0;const{showSignInPopup:t}=await Promise.all([n.e(49785),n.e(50704),n.e(25020),n.e(5521),n.e(43685),n.e(47891),n.e(55014),n.e(56467),n.e(95450),n.e(36e3),n.e(6679),n.e(61875)]).then(n.bind(n,6679));await t({isPopup:!0,options:e}).finally(()=>this.loginPopupInProgress=!1)}};(0,y.B)(Kd);const Gd=Cl.A.factory(dc);(0,s.fk)(Gd);const Jd=Yl.factory(dc);(0,s.MR)(Jd);const Yd=Rl.factory(dc);(0,s.Gv)(Yd);const Qd=new class{async getUserGender(){const e=(0,s.Z1)(),{userInfo:t}=await e.userData.getUserDataAsync();return t.genderE}async menuLk(e){return null==Fr&&(Fr=Nr.factory(e),await Fr.init()),Fr}get promotionsHelper(){return Dr}get observerHelper(){return(0,s.ZS)()}getCurrentXInfoWithClustersAsync(){return(0,s.u4)().getXinfoWithClusters()}getCurrentVectorsAsync(e){return(0,s.u4)().getUserVector(e)}isUvShouldPassInHeaders(){return wb.global.settings.switches.enableUserVectorQueryHeader&&this.checkUserInMobileRange("userVectorQueryHeaderRange")}isFeedbacksResaleEmployeeEnabled({isSeller:e=!1}){return Boolean(this.isResaleEnabled({isSeller:e})&&wb.global.settings.switches.enableC2CFeedbacksOnPA)}generateGuid(){const e=()=>Math.floor(65536*(1+Math.random())).toString(16).substring(1);return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}isQuestionsResaleEmployeeEnabled({isSeller:e=!1}){return Boolean(this.isResaleEnabled({isSeller:e})&&wb.global.settings.switches.enableC2CQuestionsOnPA)}isResaleSupplierLKQuestionsEnabled(){return wb.global.settings.switches.enableSupplierLKc2cQuestions}isResaleSupplierLKFeedbacksEnabled(){return wb.global.settings.switches.enableSupplierLKc2cFeedbacks}isResaleOnboardingEnabled(){return wb.global.settings.switches.enableC2CResaleHowToSend}isResaleOrderCancelEnabled(){return wb.global.settings.switches.enableC2COrderCancel}isResalePurchaseCardEnabled(){return wb.global.settings.switches.enableC2CPurchaseCardResaleAction}isResaleRecommendedSellingPriceEnabled(){return wb.global.settings.switches.enableC2CRecommendedSellingPrice}isResaleForUpridWalletEnabled(){var e;if(!wb.global.settings.switches.enableC2CResaleForUpridWallet)return!1;const t=(0,y.c)(),n=parseInt((null==(e=t.jwtData)?void 0:e.user)||"")||0;return this.checkMobileRange(n,wb.global.settings.mobileAppVariables.objects.C2CResaleRangeForUpridWallet)}isResalePurchasesBannerEnabled(){return wb.global.settings.switches.enableC2CPurchasesBanner}getNumberC2CPurchasesBanner(){var e,t;return null!=(t=null==(e=wb.global.settings.mobileAppVariables.numbers)?void 0:e.numberC2CPurchasesBanner)?t:0}isResaleRefactoredShoppingPageEnabled(){return wb.global.settings.switches.enableC2CRefactoredShoppingPage}isCourierDeliveryFromOPPPartV2Enabled(){var e;if(!wb.global.settings.switches.enableCourierDeliveryFromOPPPartV2||!wb.global.settings.mobileAppVariables.objects.enableCourierDeliveryFromOPPPartV2Range)return!1;const t=(0,y.c)(),n=parseInt((null==(e=t.jwtData)?void 0:e.user)||"")||0;return this.checkMobileRange(n,wb.global.settings.mobileAppVariables.objects.enableCourierDeliveryFromOPPPartV2Range)}isChatWithCourierEnabled(){var e;if(!wb.global.settings.switches.enableChatWithCourier||!wb.global.settings.mobileAppVariables.objects.chatWithCourierRange)return!1;const t=(0,y.c)(),n=parseInt((null==(e=t.jwtData)?void 0:e.user)||"")||0;return this.checkMobileRange(n,wb.global.settings.mobileAppVariables.objects.chatWithCourierRange)}isResaleAdDeactivationReasonEnabled(){return wb.global.settings.switches.enableC2CAdDeactivationReason}isResaleActionsOnProductCardEnabled(){return wb.global.settings.switches.enableC2CActionsOnProductCard}getC2CAdDeactivationReasons(){return wb.global.settings.mobileAppVariables.objects.C2CAdDeactivationReason}getC2COrderCancelReasons(){return wb.global.settings.mobileAppVariables.objects.C2COrderCancelReasons}isResaleSendingViaWBTrackEnabled(){return wb.global.settings.switches.enableC2CSendingViaWBTrack}isResaleFinanceStatusOrderEnabled(){return wb.global.settings.switches.enableC2CFinanceStatusOrder}isSupportBooking(){return"RUB"===wb.user.getCurrency()&&!wb.settings.b2bMode&&wb.global.settings.switches.enableSupportBooking}isSupportDigital(){var e,t,n,r,i;const o=(0,s.Z1)(),a=(0,y.c)(),l=parseInt((null==(e=a.jwtData)?void 0:e.user)||"")||0,{isActiveEmployee:c,isEmployeeSynced:u}=o.userData.userData,d=c||u,p=(null==(t=wb.global.settings.switches)?void 0:t.enablePaymentDigitalGoodsEmp)&&d,h=(null==(n=wb.global.settings.switches)?void 0:n.enablePaymentDigitalGoods)&&this.checkMobileRange(l,(null==(i=null==(r=wb.global.settings.mobileAppVariables)?void 0:r.objects)?void 0:i.enablePaymentDigitalGoodsRange)||[]);return"RUB"===wb.user.getCurrency()&&!wb.settings.b2bMode&&(p||h)}isUserPremiumEnabled(){var e,t,n,r;const i=(0,y.c)(),o=(0,s.u4)(),a=null==(t=null==(e=wb.global.settings.mobileAppVariables)?void 0:e.objects)?void 0:t.countriesForClubWeb;return!(!a||!a.includes(wb.settings.currentLocale))&&(!(null==(n=i.jwtData)?void 0:n.user)||(null==(r=o.getUserGradeFromCache())?void 0:r.isCountryAlowed))}isTravelEnabled(){return"ru"===wb.settings.currentLocale}isTravelEnabledMenu(){return"ru"===wb.settings.currentLocale&&"ru"===(0,s.u4)().getLocale()}isTrendEnabledMenu(){const e=(0,s.u4)().getLocale();return e&&"il"!==e}isRealtyEnableMenu(){var e,t,n,r,s;const i=(0,y.c)(),o=parseInt((null==(e=i.jwtData)?void 0:e.user)||"");return"ru"===wb.settings.currentLocale&&(null==(t=wb.global.settings.switches)?void 0:t.enableCatalogMenuPromoRealEstate)&&(null==(n=wb.global.settings.switches)?void 0:n.enableRealty)&&this.checkMobileRange(o,(null==(s=null==(r=wb.global.settings.mobileAppVariables)?void 0:r.objects)?void 0:s.realtyRange)||[])}isTravelHotelsEnabled(){var e,t,n;const r=(0,y.c)(),i=(0,s.Z1)();if("ru"!==wb.settings.currentLocale||!wb.global.settings.switches.enableWBTravelHotels)return!1;const o=parseInt((null==(e=r.jwtData)?void 0:e.user)||"")||0,{isActiveEmployee:a,isEmployeeSynced:l}=i.userData.userData,c=a||l,u=wb.global.settings.switches.enableWBTravelHotelsEmployee&&c,d=this.checkMobileRange(o,(null==(n=null==(t=wb.global.settings.mobileAppVariables)?void 0:t.objects)?void 0:n.enableWBTravelHotelsRange)||[]);return u||d}isLotteryMenuEnabled(){const e=(0,s.u4)();return wb.global.settings.switches.enableDigitalLottery&&"ru"===wb.settings.currentLocale&&"ru"===e.getLocale()&&"RUB"===wb.user.getCurrency()&&wb.global.settings.switches.enableLotteryCatalogMenu}isTravelToursEnabled(){var e,t,n;const r=(0,y.c)(),i=(0,s.Z1)();if("ru"!==wb.settings.currentLocale||!wb.global.settings.switches.enableWBTravelFS)return!1;const o=parseInt((null==(e=r.jwtData)?void 0:e.user)||"")||0,{isActiveEmployee:a,isEmployeeSynced:l}=i.userData.userData,c=a||l,u=wb.global.settings.switches.enableWBTravelFSEmployee&&c,d=this.checkMobileRange(o,(null==(n=null==(t=wb.global.settings.mobileAppVariables)?void 0:t.objects)?void 0:n.enableWBTravelFSRange)||[]);return u||d}isResaleEnabled({isSeller:e=!1}){var t,n,r;const i=(0,y.c)(),o=(0,s.Z1)();if(wb.settings.b2bMode||!wb.global.settings.switches.enableC2CSales||"ru"!==wb.settings.currentLocale)return!1;const a=parseInt((null==(t=i.jwtData)?void 0:t.user)||"")||0,{isActiveEmployee:l,isEmployeeSynced:c}=o.userData.userData,u=l||c,d=wb.global.settings.switches.enableC2CSalesForAllEmp&&u,p=this.checkMobileRange(a,(null==(r=null==(n=wb.global.settings.mobileAppVariables)?void 0:n.objects)?void 0:r.C2CSalesRangeExternal)||[]),h=d||p;return e?h&&wb.global.settings.switches.enableC2CResaleProfile:h}isWBTrackProfileEnabled(){var e,t,n,r,i;if("ru"!==wb.settings.currentLocale||!wb.global.settings.switches.enableWBTrackProfile)return!1;const o=(0,y.c)(),a=parseInt((null==(e=o.jwtData)?void 0:e.user)||"");if(wb.global.settings.switches.enableWBTrackProfileEmployee){const e=(0,s.Z1)(),{isActiveEmployee:r,isEmployeeSynced:i}=e.userData.userData;return(r||i)&&this.checkMobileRange(a,(null==(n=null==(t=wb.global.settings.mobileAppVariables)?void 0:t.objects)?void 0:n.enableWBTrackProfileRange)||[])}return this.checkMobileRange(a,(null==(i=null==(r=wb.global.settings.mobileAppVariables)?void 0:r.objects)?void 0:i.enableWBTrackProfileRange)||[])}isB2bDocumentsEnabled(){var e,t,n;if("ru"!==wb.settings.currentLocale||!wb.global.settings.switches.enableProfileDocuments)return!1;const r=(0,y.c)(),s=parseInt((null==(e=r.jwtData)?void 0:e.user)||"");return this.checkMobileRange(s,(null==(n=null==(t=wb.global.settings.mobileAppVariables)?void 0:t.objects)?void 0:n.enableProfileDocumentsRange)||[])}isB2bEdoLkEnabled(){var e,t,n;if("ru"!==wb.settings.currentLocale||!wb.global.settings.switches.enableProfileEDO)return!1;const r=(0,y.c)(),s=parseInt((null==(e=r.jwtData)?void 0:e.user)||"");return this.checkMobileRange(s,(null==(n=null==(t=wb.global.settings.mobileAppVariables)?void 0:t.objects)?void 0:n.enableProfileEDORange)||[])}checkMobileRange(e,t){return(0,u.checkMobileRange)(e,t)}isTypeShouldPassInHeaders(){return wb.global.settings.switches.enableHeaderRecomType&&this.checkUserInMobileRange("headerRecomTypeRange")}isQvShouldPassInHeader(){return wb.global.settings.switches.enableTextVectorInRecInKt&&this.checkUserInMobileRange("textVectorInRecInKtRange")}isOcrSearchEnabled(){return wb.global.settings.switches.enableOcrInPhotoSearch&&this.checkUserInMobileRange("ocrInPhotoSearchRange")}checkUserInMobileRange(e){var t,n;const r=Number((0,s.u4)().getId()),i=null!=(n=null==(t=wb.global.settings.mobileAppVariables.objects)?void 0:t[e])?n:[];return this.checkMobileRange(r,i)}checkByRange(e){var t;const n=(0,y.c)(),r=(null!=(t=null==e?void 0:e.split(";"))?t:[]).map(e=>parseInt(e));if(r.length<2)return!1;const s=n.jwtData.user||"",i=isNaN(s)?Math.abs(s.hashCode()):parseInt(s);return r.length>2?!!r.find(e=>e===i):i>r[0]&&i<=r[1]}checkByMultiRange(e){var t,n;const r=(0,y.c)();if(!(null==(t=r.jwtData)?void 0:t.user)||!e)return!1;const s=parseInt((null==(n=r.jwtData)?void 0:n.user)||"")||0;for(const t of e.split(";").filter(e=>e)){const e=t.trim().split("-").map(e=>parseInt(e));if(1==e.length&&s==e[0]||2==e.length&&s>e[0]&&s<=e[1])return!0}return!1}isRangeEnabledFor(e){var t;return!(!(null==(t=(0,y.c)().jwtData)?void 0:t.user)||!e)&&this.checkByRange(e)}useCatalogReturnCost(){var e,t,n,r;const i=(0,s.u4)();return!!(null==(t=null==(e=wb.global.settings)?void 0:e.variables)?void 0:t.catalogReturnCostLocales)&&(null==(r=null==(n=wb.global.settings)?void 0:n.variables)?void 0:r.catalogReturnCostLocales.includes(i.getLocale()))}isDesktop(){return jr.desktop==wb.settings.displayMode}isPostPayForPreorderCourier(){var e,t,n,r,i,o;const a=(0,y.c)(),l=(0,s.Z1)(),c=(0,s.u4)(),u=parseInt((null==(e=a.jwtData)?void 0:e.user)||"")||0,{isActiveEmployee:d,isEmployeeSynced:p}=l.userData.userData,h=d||p;return(wb.global.settings.switches.enablePostPayForPreorderCourier&&this.checkMobileRange(u,(null==(n=null==(t=wb.global.settings.mobileAppVariables)?void 0:t.objects)?void 0:n.postPayForPreorderCourierRange)||[])||wb.global.settings.switches.enablePostPayForPreorderCourierForEmp&&h)&&(null==(o=null==(i=null==(r=wb.global.settings.mobileAppVariables)?void 0:r.objects)?void 0:i.currencyForPostPayForPreorderCourier)?void 0:o.includes(c.getCurrency()))&&"ru"===c.getLocale()||!1}getArchiveOrderServiceForUser(){var e,t,n;return this.checkByMultiRange(null==(n=null==(t=null==(e=wb.global)?void 0:e.settings)?void 0:t.variables)?void 0:n.astroShopperUsers)?"astroArchiveOrdersService":"archiveOrdersService"}isEnableInformerCourierExpress(){var e;if(!wb.global.settings.switches.enableInformerCourierExpressOverSnippet||!wb.global.settings.switches.enableCourierDeliveryFromOPPPartV2)return!1;const t=(0,y.c)(),n=parseInt((null==(e=t.jwtData)?void 0:e.user)||"")||0;return this.checkMobileRange(n,wb.global.settings.mobileAppVariables.objects.informerCourierExpressOverSnippetRange)}isDigitalAvailable(){var e;if(!wb.global.settings.switches.enableDigitalProducts)return!1;const t=(0,y.c)(),n=parseInt((null==(e=t.jwtData)?void 0:e.user)||"")||0;return this.checkMobileRange(n,wb.global.settings.mobileAppVariables.objects.newDigitalProductsRange)}isEnableReasonsInClaimsRedesign(){var e,t,n,r,i,o;const a=(0,s.u4)(),l=Number(a.getId());return(null==(t=null==(e=wb.global.settings)?void 0:e.switches)?void 0:t.enableReasonsInClaimsRedesign)&&(0,u.checkMobileRange)(l,null!=(o=null==(i=null==(r=null==(n=wb.global.settings)?void 0:n.mobileAppVariables)?void 0:r.objects)?void 0:i.reasonsInClaimsRedesignRange)?o:[])}isEnableChatListTravel(){var e,t,n,r,i;const o=(0,y.c)(),a=(0,s.Z1)(),l=parseInt((null==(e=o.jwtData)?void 0:e.user)||"")||0,{isActiveEmployee:c,isEmployeeSynced:d}=a.userData.userData,p=(null==(t=wb.global.settings.switches)?void 0:t.enableChatListTravel)&&(0,u.checkMobileRange)(l,(null==(r=null==(n=wb.global.settings.mobileAppVariables)?void 0:n.objects)?void 0:r.chatListTravelRange)||[]),h=(null==(i=wb.global.settings.switches)?void 0:i.enableChatListTravelEmp)&&(c||d);return(p||h)&&"ru"==wb.settings.currentLocale}isEnableRealty(){var e,t,n,r,i;const o=(0,y.c)(),a=(0,s.Z1)(),l=parseInt((null==(e=o.jwtData)?void 0:e.user)||"")||0,{isActiveEmployee:c,isEmployeeSynced:d}=a.userData.userData,p=null==(t=wb.global.settings.switches)?void 0:t.enableRealty,h=null==(n=wb.global.settings.switches)?void 0:n.enableRealtyForEmployees,m=(null==(i=null==(r=wb.global.settings.mobileAppVariables)?void 0:r.objects)?void 0:i.realtyRange)||[],g=c||d,f=(0,u.checkMobileRange)(l,m),b=h&&g,v=p&&f;return("ru"===wb.settings.currentLocale||"ru"===(0,s.u4)().getLocale())&&(b||v)}isEnableRealtyReservation(){var e,t,n,r,i;const o=(0,y.c)(),a=(0,s.Z1)(),l=parseInt((null==(e=o.jwtData)?void 0:e.user)||"")||0,{isActiveEmployee:c,isEmployeeSynced:d}=a.userData.userData,p=c||d,h=(null==(n=null==(t=wb.global.settings.mobileAppVariables)?void 0:t.objects)?void 0:n.realtyReservationRange)||[],m=(0,u.checkMobileRange)(l,h),g=(null==(r=wb.global.settings.switches)?void 0:r.enableRealtyReservation)&&m,f=(null==(i=wb.global.settings.switches)?void 0:i.enableRealtyReservationForEmployees)&&p;return this.isEnableRealty()&&(g||f)}isEnableChatListRealty(){var e,t,n,r,i;const o=(0,s.Z1)(),a=(0,y.c)(),l=parseInt((null==(e=a.jwtData)?void 0:e.user)||"")||0,{isActiveEmployee:c,isEmployeeSynced:d}=o.userData.userData,p=(null==(t=wb.global.settings.switches)?void 0:t.enableChatListRealtyEmp)&&(c||d);return((null==(n=wb.global.settings.switches)?void 0:n.enableChatListRealty)&&(0,u.checkMobileRange)(l,(null==(i=null==(r=wb.global.settings.mobileAppVariables)?void 0:r.objects)?void 0:i.chatListRealtyRange)||[])||p)&&"ru"==wb.settings.currentLocale&&this.isEnableRealty()&&this.isEnableRealtyReservation()}isC2COrdersInCarouselSupportEnabled(){var e,t,n,r,i;const o=(0,y.c)(),a=(0,s.Z1)(),l=(0,s.u4)(),c=parseInt((null==(e=o.jwtData)?void 0:e.user)||"")||0,{isActiveEmployee:d,isEmployeeSynced:p}=a.userData.userData,h=d||p,m=wb.global.settings.switches.enableC2CSalesForAllEmp&&h,g=wb.global.settings.switches.enableC2CSales&&(0,u.checkMobileRange)(c,(null==(n=null==(t=wb.global.settings.mobileAppVariables)?void 0:t.objects)?void 0:n.C2CSalesRangeExternal)||[]);return wb.global.settings.switches.enableC2COrdersInCarouselSupport&&(m||g)&&(null==(i=null==(r=l.getUserGradeFromCache())?void 0:r.personal_info)?void 0:i.is_c2c_supplier)}isEnableNewTimeSlotsSelectionLogic(){return wb.global.settings.switches.enableNewTimeSlotsSelectionLogic}percentageRollout(e){if(!e||"object"!=typeof e)return!1;const{type:t,blackList:n,whiteList:r,percentage:i}=e,o=(0,s.u4)().getId();if(o&&n&&n.includes(o))return!1;if(o&&r&&r.includes(o))return!0;if("deviceId"===t){const e=(0,s.Z1)().sessionService.getSession();return parseInt(e.slice(-2),16)%100<(null!=i?i:0)}return!(!o||"userId"!==t)&&parseInt(o.slice(-2),10)%100<(null!=i?i:0)}};(0,s.Zs)(Qd),(0,s.Y)(zr);const Xd=new Md;(0,_.f)(Xd),(0,s.ft)(Yr.factory()),wb.user=Gd,wb.adult=qd;const Zd={currency:Gd.getCurrency(),activePositions:[],activePositionsTask:new w.cY};(0,s.Uz)(Zd);const ep={storeService:Qi.factory(dc),userAddressService:ji.A.factory(dc),cartService:Ni.factory(dc),userData:xs.factory(dc),notifications:zs.factory(dc),productCard:bo.factory(dc),bannersService:ua.factory(dc),apiUserStorage:Oa.factory(dc),sessionService:Da.factory(dc),pager:es,retryFetchService:ja.factory(dc),splitterService:Qa.factory(dc),favsService:ts.Y.factory(dc),stimulus:rl.factory(dc),brandsBySuppliers:hl.factory(dc),installmentAggregatorService:au.A.factory(dc),aidService:eu.A.factory(dc),commonInstallmentService:new class{constructor(){iu(this,"baseUrl",ou),iu(this,"client",(0,C.getHttpClient)()),iu(this,"cachedPrice",null),iu(this,"refreshTimer",null)}async getSubscriptionPrice(e){try{return this.cachedPrice&&!this.isPriceExpired(this.cachedPrice)||await this.fetchAndScheduleRefresh(e),null==e||e(this.cachedPrice),this.cachedPrice}catch(e){return console.error("Failed to fetch subscription price:",e),null}}async fetchAndScheduleRefresh(e){var t,n,r;if(this.cachedPrice=await this.client.fetchJSON(this.baseUrl+"/api/v1/subscription/price",{withJwtToken:!0,withAuthz:!0}),null==e||e(this.cachedPrice),this.refreshTimer&&clearTimeout(this.refreshTimer),!(null==(t=this.cachedPrice)?void 0:t.expiresAt))return;const s=new Date(null!=(r=null==(n=this.cachedPrice)?void 0:n.expiresAt)?r:"").getTime()-Date.now();s>0&&(this.refreshTimer=setTimeout(()=>{this.fetchAndScheduleRefresh(e).catch(console.error)},s))}isPriceExpired(e){return new Date(e.expiresAt)<new Date}destroy(){this.refreshTimer&&clearTimeout(this.refreshTimer)}async turnOnSubscription(e,t){const n=new AbortController,r=setTimeout(()=>n.abort(),3e3);try{return await this.client.fetchJSON(`${this.baseUrl}/api/v1/user/schedule/${e}/subscription/activate`,{method:"POST",body:JSON.stringify({priceSigned:t}),withJwtToken:!0,withAuthz:!0,headers:{"Content-Type":"application/json"},signal:n.signal},{throwErr:!0,throwTimeoutError:!0})}catch(e){throw e}finally{clearTimeout(r)}}async turnOffSubscription(e){const t=new AbortController,n=setTimeout(()=>t.abort(),3e3);try{return await this.client.fetchJSON(`${this.baseUrl}/api/v1/user/schedule/${e}/subscription/deactivate`,{method:"POST",body:JSON.stringify({}),withJwtToken:!0,withAuthz:!0,headers:{"Content-Type":"application/json"},signal:t.signal},{throwErr:!0,throwTimeoutError:!0})}catch(e){throw e}finally{clearTimeout(n)}}},calendarWbIntervals:fl.factory(dc),favsSellersService:ks.factory(dc),onePurchasePromoService:gu.factory(dc),smartCalendarDays:Il.factory(dc),tokenService:Bu.factory(dc),cardCounterService:ku.factory(dc),mainAntiBotTokenService:Td.factory(dc)};(0,s.u)(ep),(0,s.Kv)(()=>n.e(30068).then(n.bind(n,82694)).then(e=>new e.UserCompaniesManager));(e=>{((e,t)=>{const n=ql(e);zl()[n]=t})(Kl,{clients:{},loaders:e})})({customerReceiptsAstroClient:()=>n.e(80428).then(n.bind(n,57367)).then(e=>e.CustomerReceiptAstroClient)}),ep.notifications.init(),ep.cartService.init(),ep.stimulus.init(),ep.userAddressService.init(),ep.cardCounterService.init();const tp=({noScript:e})=>{wb.settings.secondHost&&(Object.getOwnPropertyDescriptor(window,"wba-url")||Object.defineProperty(window,"wba-url",{get(){return this._wbaUrl},set(){this._wbaUrl=`https://${wb.settings.secondHost}/a.wb/e`}})),window.wba=window.wba||function(){window.wba.q=window.wba.q||[];(window.wba.q||[]).push(arguments)},window.wba.l=Date.now();const t=-1===window.location.hostname.indexOf("napi")?4:35;if(!e){const e=wb.settings.secondHost?`https://${wb.settings.secondHost}/a.wb/sdk/sdk.js`:"https://a.wb.ru/sdk/sdk.js",t=document.createElement("script"),n=document.getElementsByTagName("script")[0];t.async=!0,t.src=e,t.onload=function(){ep.splitterService.init()},n.parentNode&&n.parentNode.insertBefore(t,n)}wba("init",{counterId:t})};wb.namespace("spa",function(){let e={};const t=new dc,n=pc.A.factory();let i=null;const o=e=>!(e.transferSize>0)&&(e.decodedBodySize>0||e.duration<3),a=()=>n,l=()=>i,c=async e=>{const{isEnabled:n,company:r}=localStorage.getObject("b2bMode")||{isEnabled:!1,company:{}};if(n){const n=await(0,s.yj)({preventRefresh:e});t.$auth.isAuth?n.restoreState(r):n.resetB2B()}},u=()=>{if(!window.opener||window.opener===window||"esia_unblock_2fa"!==window.name)return;const e=new URLSearchParams(window.location.search),t=e.get("code"),n=e.get("state");t&&n&&(window.opener.postMessage({name:"2fa_unblock_params",payload:{code:t,state:n}}),window.close())};$.views.loadTemplateDictionaryAsync=$.views.loadTemplateAsync=$.views.helpers.loadTemplateAsync,$.views.loadWebApiTemplateAsync=$.views.helpers.loadWebApiTemplateAsync;async function d(){var e,t,n;if(!((null==(t=null==(e=wb.global.settings)?void 0:e.variables)?void 0:t.resourseStatSettings)&&"PerformanceObserver"in window&&(null==(n=null==PerformanceObserver?void 0:PerformanceObserver.supportedEntryTypes)?void 0:n.includes("resource"))))return;const r=await wb.user.getShardAsync();for(const e in wb.global.settings.variables.resourseStatSettings){const t=wb.global.settings.variables.resourseStatSettings,[n,s]=t[e].split(";"),i=parseInt(s),[a,l]=n.split("-"),c=parseInt(a),u=parseInt(l);if(r>=c&&r<=u&&i>0){let t=0;const n=new PerformanceObserver(async n=>{var r,s,a,l,c;if(n.getEntries){const u=n.getEntries();for(const n of u.filter(t=>t.initiatorType===e)){if(t%i===0&&!o(n)){const e={url:n.name,ok:n.responseStatus>300?1:0,error:n.responseStatus>=300?n.responseStatus:0,dns:parseInt(n.domainLookupEnd-n.domainLookupStart),connect:parseInt(n.connectEnd-n.connectStart),ttfb:parseInt(n.responseStart-n.requestStart),load:n.responseStart>0?parseInt(n.responseEnd-n.fetchStart):0,full:parseInt(n.duration),cache:"HIT"===(null==(s=null==(r=n.serverTiming)?void 0:r.find(e=>"cache"===e.name))?void 0:s.description)?1:0,srv:null!=(c=null==(l=null==(a=n.serverTiming)?void 0:a.find(e=>"srv"===e.name))?void 0:l.description)?c:"",size:n.transferSize};wb.analitics.sendEvent("performance_static_download",e)}t++}}});n.observe({type:"resource",buffered:!0});let r=0;const s=new PerformanceObserver(e=>{if(e.getEntries){const t=e.getEntries();for(const e of t.filter(e=>"img-load-error"===e.name))r%i===0&&wb.analitics.sendEvent("performance_static_download",{url:e.detail.url,ok:0}),r++}});s.observe({type:"mark",buffered:!0})}}}return{_catalogMenuTask:null,init:async e=>{var o,a,l;(0,b.jZ)(wb,null==(a=null==(o=wb.global.settings.mobileAppVariables)?void 0:o.objects)?void 0:a.UnclaimedPrice);const{makeApplication:p}=await(0,Qr.V)(),{render:h,layoutViewModel:m}=await p();i=m;const{router:g,menuLkHelper:f}=e;await ru.loadGlobal(),Object.defineProperty(dc,"appVersion",{value:g.appVersion,writable:!1}),Nd.setData(g.routesDictionary);const y=Sr.factory(g.routesDictionary,g.tmplHashes);Fd.setResourseLoader(y),Fd.setData(g.routesDictionary),await bc.A.initI18nInstance(),h("header"),zd.setModules(g.modules),zd.setServices(g.services),wb.displayModeSettings.init(),n.preInit();if("ru"!==wb.settings.currentLocale?(null==(l=m.cookiePolicy)?void 0:l.check())?tp({noScript:!1}):(tp({noScript:!0}),Ld.addEventListener("CookiePolicyHide",()=>{var e;(null==(e=m.cookiePolicy)?void 0:e.check())?tp({noScript:!1}):window.wba=function(){}},{once:!0})):tp({noScript:!1}),Gd.initUser(),wb.global.loadSettingAsync(),wb.global.periodicBasketConfigUpdate(),Hd.init(),await t.menuLk(f),h("layout"),n.init(),m.init(),wb.network.init(),c(),u(),wb.analitics.getSplitInfo(),(()=>{const e=(0,s.cI)(),t=(0,v.a)(),n=(0,s.pL)(),r=(0,s.uL)();window.addEventListener("popstate",async s=>{var i,o,a,l;t.updateStatInfo(!1);const{name:c,isRouterTrigger:u,title:d}=history.state,p=c&&e.routesDictionary[c];if(d&&(document.title=d),!c||!p)return void window.location.reload();if(null==(i=e.customHistory)||i.updateCurrent(history.state),window.dispatchEvent(new CustomEvent("spaTransition",{detail:{isFinished:!1,dest:{name:c}}})),u&&(null==(o=e.currentRoute)?void 0:o.name)===c)return e.updateRouteParametres(window.location.pathname.substring(1),e.currentRoute),e.updateQueryModel(),null==(l=null==(a=r.viewModel)?void 0:a.onHistoryChange)||l.call(a,history.state,null,{fromPopstate:!0},e.abortController.signal),window.dispatchEvent(new CustomEvent("spaTransition",{detail:{isFinished:!0,dest:{name:c}}})),void n.updateLocation(s.state);e.setTargetRoute(c),n.updateLocation(s.state);const h=new AbortController;e.abortController.abort(),e.abortController=h,e.routerTransitionAsync({destName:c,url:window.location,isInitialRender:!1,forceUpdate:!1,isTransition:!1})}),window.addEventListener("pushState",e=>{const{state:t}=e.detail;n.updateLocation(t)}),window.addEventListener("replaceState",e=>{const{state:t}=e.detail;n.updateLocation(t)}),window.addEventListener("click",n=>{const r=n.target.closest("a");if((null==r?void 0:r.classList.contains("BDC_ReloadLink"))||n.defaultPrevented||n.ctrlKey||n.metaKey)return!1;if(r){if(t.saveEcomInfo(r),r.hasAttribute("target")&&"_blank"===r.getAttribute("target"))return void t.updateStatInfo(!0);t.updateStatInfo(!1),n.preventDefault(),e.moveTo(r.href)}return!0}),window.addEventListener("mouseup",e=>{const t=e.target.closest("a");return!!t&&(0==e.button||1==e.which||(wb.analitics.saveEcomInfo(t),wb.analitics.updateStatInfo(!0)),!0)})})(),h("portal"),h("mainApp"),await Fd.init(()=>{Fd.targetRoute&&(Nd.loadingTemplate=Fd.targetRoute)}),h("footer"),!Rd.test(window.location.hostname))return wb.spa.logError(new Error(`fishing from ${document.location}`),{referrer:wb.spa.getReferrer(),cookie:document.cookie}),wb.popup.renderModalError(r.R.t("common.errors.phishingSite")),void(wb.spa=null);document.body.addEventListener("load",e=>{var t;const n=e.target;"IMG"===(null==n?void 0:n.tagName)&&n.complete&&(null==(t=n.closest(".img-plug"))||t.classList.remove("img-plug--error"))},!0),navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.indexOf("Trident/")>0||document.body.addEventListener("error",e=>{var t,n;const r=e.target,s=r.closest(".img-plug"),i=r.src;return r.dataset.srcPb&&r.dataset.srcPb!==i?(r.src=r.dataset.srcPb,r.dataset.src&&(r.dataset.src=r.dataset.srcPb),delete r.dataset.srcPb,void(null==s||s.classList.remove("load"))):r.dataset.srcPc&&r.dataset.srcPc!==i?(r.src=r.dataset.srcPc,void delete r.dataset.srcPc):void((null==(n=null==(t=wb.global.settings)?void 0:t.switches)?void 0:n.enableErrorImagePlug)&&"IMG"===r.tagName&&-1===r.src.indexOf("/i/blank.gif")&&(null==s||s.classList.add("img-plug--error"),null==s||s.classList.remove("load"),null==performance||performance.mark("img-load-error",{detail:{url:r.src}})))},!0),setTimeout(d,2e3),setTimeout(()=>{lc.loadJsAsync(wb.settings.scripts.performance)},5e3)},registerViewModel:t=>{const n=Object.getPrototypeOf(t.prototype);n===Object.prototype?Object.setPrototypeOf(t.prototype,dc.prototype):n!==dc.prototype&&Object.setPrototypeOf(n,dc.prototype),Nd.getAppliedEntries().forEach(n=>{e[n]=t})},getViewModelByName:t=>e[t],redirect:(e,t,n=!1)=>{Fd.moveTo(e,t,!1,n)},setUserStatus:({userIsAuth:e,userUid:n})=>{Fd.userIsAuth=e,Ld.dispatchEvent(new CustomEvent(e?"onUserAuth":"onUserUnAuth")),ep.userData.setKey(e,n),t.$getService("orderService").then(e=>e.startSync(ep.cartService.publicBasketApiUrl)),t.$getService("wbxOrderService").then(e=>e.startSync(ep.cartService.publicBasketApiUrl)),e&&t.$getService("groupedDeliveriesService").then(e=>e.init())},refresh:()=>{Fd.refresh()},getMainLayout:a,getMainReactLayout:l,getCatalogMenu:async function(){return this._catalogMenuTask||(this._catalogMenuTask=new Promise(async(e,t)=>{const n=new fc;await n.initMenu(),n.isInited?e(n):(t(),this._catalogMenuTask=null),WbSpaModel.prototype.$eventBus.dispatchEvent(new CustomEvent("MenuUpdated"))})),this._catalogMenuTask},clearCatalogMenu:function(){this._catalogMenuTask=null},getReferrer:()=>Fd.referrer,restoreB2BState:c,logError:(e,t=null,n=!1)=>{if(!window._debug)try{const r={msg:null==e?void 0:e.message};n&&(r.stk=null==e?void 0:e.stack),t&&(r.data=t);const s="/webapi/logging/jserror",i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)};$d.fetch(s,i).catch(()=>{ep.retryFetchService.saveRequest(s,i)})}catch(e){}},orderMetrics:e=>{try{$d.fetch(`/webapi/logging/orders/metrics?status=${e}`,{method:"POST"})}catch(e){}},signIn:(e,t)=>{Fd.moveToSignIn(e,t)},afterSignOut:()=>{var e;wb.spa.signIn({query:{returnUrl:window.location.href}}),a().updateAfterLogin(),null==(e=l())||e.updateAfterLogin()},journalLogError:(e=null)=>{if(!window._debug&&"ge"!==wb.settings.currentLocale)try{const t=`${Ad}/api/v1/set`,n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify([e])};$d.fetch(t,n).catch(()=>{ep.retryFetchService.saveRequest(t,n)})}catch(e){}}}}()),wb.namespace("global",function(){const e="user-settings",t="global-settings-v2",n="cdn-config-v2",r=18e4,s=Xr;let i,o,a,l,c=[],u=0;window.addEventListener("storage",e=>{if(e.key===t)try{const{data:t}=JSON.parse(String(e.newValue));i=t,h(i.variables.siteMinVersion),c.forEach(e=>e(i)),window._debug&&console.log("[globalsettings] changed external")}catch(e){console.error("[globalsettings] changed external failed")}else if(e.key===n){const t=JSON.parse(e.newValue);t&&f(t)}});const p=()=>{a||(a=setInterval(p,12e4));return(u>=2?$d.fetchText("/webapi/settings/global/hash",void 0,{noCache:!0}):$d.fetchText(wb.helpers.url.urlStaticData("settings-front.json.hash"),void 0,{noCache:!0})).then(e=>{var n;if(null==e)throw new Error;if(e!==(null==(n=localStorage.getObject(t))?void 0:n.hash)){return(u>=2?$d.fetchJSON("/webapi/settings/global/get",{headers:{"Content-Type":"application/json"}},{noCache:!0}):$d.fetchStatic("settings-front.json",{noCache:!0},wb.helpers.url.urlStaticData)).then(n=>{if(!n)throw new Error;return i=n,localStorage.putObject(t,{hash:e,data:i}),u=0,window._debug&&console.log("[globalsettings] changed"),c.forEach(e=>e(i)),h(i.variables.siteMinVersion),Promise.resolve()}).catch(()=>Promise.resolve())}return Promise.resolve()}).catch(()=>(u++,Promise.resolve()))},h=e=>{if(!e||!WbSpaModel.appVersion)return;const t=e.split("."),n=WbSpaModel.appVersion.split(".");if(t.length<3||n.length<3)return;+((parseInt(n[0])||0)+("000"+(parseInt(n[1])||0)).slice(-3)+("000"+(parseInt(n[2])||0)).slice(-3))<+(t[0]+("000"+t[1]).slice(-3)+("000"+t[2]).slice(-3))&&window.location.reload()},m=()=>o||(o=localStorage.getObject(e),o||(o={closed:[],colorsHitory:[],confirmed:[],purchaseCountInfo:[]}),o.closed||(o.closed=[]),o.colorsHitory||(o.colorsHitory=[]),o.confirmed||(o.confirmed=[]),o.purchaseCountInfo||(o.purchaseCountInfo=[]),o),g=async function(){if(wb.global.settings.switches.enableCdnConfig)if(l)try{await navigator.locks.request(`lock-${n}`,async e=>{const t=localStorage.getObject(n);if(t&&t.timestamp+r>Date.now())return;const s=await $d.fetchJSON(`https://cdn.wbbasket.ru/api/v3/upstreams?t=${Date.now()}`,void 0,{nullOnError:!0,noCache:!0});(null==s?void 0:s.recommend)&&(null==s?void 0:s.origin)&&(f(s),Object.assign(s,{timestamp:Date.now(),hash:s.hash}),localStorage.putObject(n,s),localStorage.removeItem("cdn-config"))})}catch(e){wb.spa.logError(e)}else{l=setInterval(g,r);const e=localStorage.getObject(n);e&&e.timestamp+r>Date.now()?f(e):setTimeout(g,5e3)}},f=e=>{var t;for(const n of Dd){const r=e.origin[n],s=null!=(t=e.recommend[n])?t:r,i=null==s?void 0:s[0].method;if(!s||!r)continue;let o=`\n                if (!reserve) {\n                    ${b(s[0],n)}\n                } else {\n                 ${b(r[0],n)}\n                }\n            `;const a=new Function("number","reserve",o);a("uuid"!==i?0:"1/1"),(0,d.V)().setImgFunc(n,a)}},b=(e,t,n)=>{const r=e=>{switch(e){case"staticbasket_route_map":return"number";case"videonme_route_map":return"number%144";default:return"~~(number/100000)"}};let s="";if("range"===e.method){s+=`const volId = ${r(t)}; switch (true) {`;for(const t of e.hosts)s+=`case volId >= ${t.vol_range_from} && volId <= ${t.vol_range_to}: return \`${t.host}${n?"fail":""}/vol\${volId}\`;`;s+="}"}else if("mod"===e.method){const n=e.hosts.length;s+=`const volId = ${r(t)}; switch (number % ${n}) {`;for(let t=0;t<n;t++)s+=`case ${t}: return \`${e.hosts[t].host}/vol\${volId}\`;`;s+="}"}else if("uuid"===e.method){s+=`${(e=>{switch(e){case"videofeedback_uuid_route_map":return" const [sh, uuid] = number?.split('/'); const shard = `videofeedback${(`00${sh}`).slice(-2)}`";case"feedback_uuid_route_map":return" const [sh, uuid] = number?.split('/'); const shard = `feedback-${(`00${sh}`).slice(-2)}`";case"content_uuid_route_map":return" const [sh, uuid] = number?.split('/'); const shard = `content-${(`00${sh}`).slice(-2)}`";default:return""}})(t)}; switch (true) {`;for(const t of e.hosts)s+=`case shard === '${t.shard_name}': return \`${t.host}/\${uuid}\`;`;s+="}"}return s};return{get settings(){const e=i||(i=null!=(r=null==(n=localStorage.getObject(t))?void 0:n.data)?r:s,i);var n,r;return e.switches.enableWbxOrder=!0,e.variables.enableLanguageSwitcher=["ge","uz"],e.switches.enableSendPersonalDataGe=!0,e.switches.enableWbClubLevels=e.switches.enableWbClubLevels&&"ru"===wb.settings.currentLocale,"ge"==wb.settings.currentLocale&&(WbSpaModel.prototype.$auth.isAuth||(e.switches.enableUnauthOnlineChat=e.switches.enableUnauthOnlineChatGE),e.switches.enableSellersChat=e.switches.enableSellersChatGE),e.switches.enableChat=WbSpaModel.prototype.$auth.isAuth?e.switches.enableOnlineChat:e.switches.enableUnauthOnlineChat,e},get userSettings(){return m()},saveUserSettings:()=>{localStorage.putObject(e,m()),Ld.dispatchEvent(new CustomEvent("UserSettingsSaved"))},periodicBasketConfigUpdate:g,loadSettingAsync:p,subscribe:e=>{c.push(e)}}}()),ep.tokenService.init(),Xd.init()},48254:function(e,t,n){"use strict";n.d(t,{A:function(){return v}});var r=n(42094);const s=Object.freeze({UNKNOWN:"unknown",HOME:"home",CATALOG:"catalog",PRODUCTCARD:"product-card",SECURITY:"security",BASKET:"basket",PONED:"poned",PROFILE:"profile",ARCHIVE:"archive",ORDERS:"orders",SERVICES:"services",CLAIMS:"claims",SUBSCRIPTION:"subscription",CONTACTS:"contacts",WALLET:"wallet",REALTYCARD:"realty-card",REALTYCATALOG:"realty-catalog",REALTYBOOKING:"realty-booking",REALTYNEWBOOKING:"realty-new-booking",RESIDENTIALCARD:"residential-card"});var i=class{static get types(){return s}static getType(){const e=location.pathname.toLowerCase();return"/"==e?s.HOME:/\/catalog\/\d+\/detail\.aspx/.test(e)||/\/resale\/product\/[a-zA-Z0-9]+/.test(e)?s.PRODUCTCARD:e.startsWith("/catalog")?s.CATALOG:e.startsWith("/subscription")?s.SUBSCRIPTION:e.startsWith("/security")?s.SECURITY:e.startsWith("/lk/basket")?s.BASKET:e.startsWith("/lk/favorites")?s.PONED:e.startsWith("/lk/myorders/archive")?s.ARCHIVE:e.startsWith("/lk/myorders/delivery")?s.ORDERS:e.startsWith("/lk/claims")||e.startsWith("/lk/refund")?s.CLAIMS:e.startsWith("/lk/mywallet")?s.WALLET:e.startsWith("/lk")?s.PROFILE:e.startsWith("/services/kontakty")?s.CONTACTS:e.startsWith("/services/")||e.startsWith("/promo/")||e.startsWith("/presservice")?s.SERVICES:/\/realty\/product\/\d+\/reservation\/\d+/.test(e)?s.REALTYBOOKING:/\/realty\/product\/\d+\/reservation/.test(e)?s.REALTYNEWBOOKING:/\/realty\/product\/\d+/.test(e)?s.REALTYCARD:/\/realty\/residential\/\d+/.test(e)?s.RESIDENTIALCARD:e.startsWith("/realty")?s.REALTYCATALOG:s.UNKNOWN}};class o extends WbSpaModel{constructor(){var e;super(),this.currentType=i.getType(),this.menuModel={type:this.currentType,catalogState:!1,router:this.$router,isPremium:!!this.$auth.isAuth&&(null==(e=this.$user.getUserGradeFromCache())?void 0:e.isPremium),isB2B:wb.settings.b2bMode},this.catalogState=!1}get menuLink(){return this.navbarMenuLink}get types(){return i.types}async init(){var e,t,n,r;this.navbarContainer=document.querySelector(".j-navbar-mobile");const s=this.$analitic.checkDataInSplitterServiceV2("common","ab_NewHeaderMob","wallet"),i=this.$analitic.checkDataInSplitterServiceV2("common","ab_NewHeaderMob","wallet_and_favorites");let o="mobileMenuTemp";(null==(t=null==(e=wb.global.settings)?void 0:e.switches)?void 0:t.enableNewHeaderMob)&&s&&(o="mobileMenuTempB"),(null==(r=null==(n=wb.global.settings)?void 0:n.switches)?void 0:r.enableNewHeaderMob)&&i&&(o="mobileMenuTempC"),await $.views.helpers.loadTemplateAsync(o),this._init(o),this.navbarMenuLink=document.querySelector("#catalogNavbarLink")}_init(e){this._bindEvents(),$.templates[e].link(this.navbarContainer,this),$.link(!0,this.navbarContainer,this)}sendAnalytics(e){const t=e.target.closest(".navbar-mobile__link");t&&this.$analitic.sendEvent("Header_T",{name:t.dataset.wbaHeaderName})}showPopupLoginMobile(e){!1===this.$auth.isAuth&&(e.preventDefault(),this.$auth.loginPopup())}setType(e){this.catalogState=e==this.types.CATALOG,this.catalogState?e=null:this.currentType=e,$.observable(this.menuModel).setProperty({catalogState:this.catalogState,type:e})}setCatalog(){this.setType("catalog")}isCatalog(){return this.catalogState}isNavbarLink(e){return!!e.closest(".navbar-mobile__link")}revertActive(){this.setType(this.currentType)}updatePremiumState(){var e;$.observable(this.menuModel).setProperty({isPremium:null==(e=this.$user.getUserGradeFromCache())?void 0:e.isPremium})}updateB2Bmode(){$.observable(this.menuModel).setProperty({isB2B:wb.settings.b2bMode})}updateBasket(e){$.observable(this.menuModel).setProperty({basketCount:e})}updateEvents(e){$.observable(this.menuModel).setProperty({eventsModel:e})}_bindEvents(){window.addEventListener("spaTransition",e=>{e.detail.isFinished||(this.currentType=i.getType(),this.$eventBus.dispatchEvent(new CustomEvent("MobileMenuTypeChange",{detail:{currentType:this.currentType}})))}),this.$eventBus.addEventListener("OnlineChatInited",e=>{this.currentType=i.getType(),this.$eventBus.dispatchEvent(new CustomEvent("MobileMenuTypeChange",{detail:{currentType:this.currentType,isInit:!0}}))}),this.$eventBus.addEventListener("MobileMenuTypeChange",e=>{const{currentType:t}=e.detail;let n="";switch(t){case i.types.HOME:case i.types.BASKET:case i.types.PONED:case i.types.ARCHIVE:case i.types.ORDERS:case i.types.PROFILE:case i.types.SUBSCRIPTION:case i.types.WALLET:case i.types.CONTACTS:n=t;break;case i.types.SECURITY:n=i.types.PROFILE}this.setType(n),this.navbarContainer.classList.toggle("navbar-realty",t===i.types.REALTYCARD||t===i.types.RESIDENTIALCARD),this.navbarContainer.classList.toggle("hide",t===i.types.REALTYNEWBOOKING)}),this.$eventBus.addEventListener("UserGradeUpdated",this.updatePremiumState.bind(this)),this.$eventBus.addEventListener("B2BModeToggled",this.updateB2Bmode.bind(this))}}var a=o,l=n(33863);var c=class{constructor(e){this.delay=e.delay,this.menuContainer=e.menuContainer,this.timerId=null,this.updateFirstLvlMenuTask=null,this.success=!1,this.menuItemsUpdated=null,this.getFullEcomInfo=e.getFullEcomInfo}lazyUpdateMenu(){this.timerId=setTimeout(this._setUpdateFirstLvlMenuTask.bind(this),this.delay)}async forceUpdateMenu(){this._setUpdateFirstLvlMenuTask();try{const e=await this.updateFirstLvlMenuTask;return Promise.resolve(e)}catch(e){return Promise.reject(null)}}reloadMenu(){this.updateFirstLvlMenuTask=null,this.forceUpdateMenu()}_stopUpdatingMenu(){this.timerId&&clearTimeout(this.timerId)}_setUpdateFirstLvlMenuTask(){this.updateFirstLvlMenuTask&&this.success||(this.updateFirstLvlMenuTask=this._updateFirstLvlMenu()),this._stopUpdatingMenu()}async _updateFirstLvlMenu(){const[e]=await Promise.all([wb.spa.getCatalogMenu(),$.views.loadTemplateDictionaryAsync("menuTopTmpl")]),t=e.fullMenu;return this.menuItemsUpdated=await this._addMenuItemsFirstLvl(t,this.menuContainer),this.menuContainer.addEventListener("click",e=>{if(e.target.closest('a[href="/subscription"]'))this.setEntryPointWBClub();else if(e.target.closest('a[href="/mechtallionlottery"]')){e.stopImmediatePropagation();const t=(0,l.z)();t.isConfirmed||(e.preventDefault(),t.proceedIfAdultConfirmed(!0,()=>{WbSpaModel.prototype.$router.moveTo(e.target.href),t.setIsModalClosed()}))}}),this.success=!0,Promise.resolve(e)}setEntryPointWBClub(){window.localStorage.setItem("entryPointWBClub","Catalog")}async _addMenuItemsFirstLvl(e,t){var n;const r=t.querySelector(".menu-burger__main-list");let s=r.querySelectorAll(".j-menu-main-item"),i=null,o=!0,a=0;const l=r.getAttribute("lang");for(let t=0;t<e.length;t++){const c=e[t];if(o&&(i=null==s?void 0:s[a]),c.id==(null==(n=null==i?void 0:i.dataset)?void 0:n.menuId)&&l===wb.currentLanguage){o=!0,a++;continue}o=!1;const u=$.templates.menuFirstLvlTmpl.render(c);i?i.insertAdjacentHTML("beforebegin",u):r.insertAdjacentHTML("beforeend",u)}if(s=t.querySelectorAll(".j-menu-main-item"),e.length<s.length)for(let t=e.length;t<s.length;t++)s[t].remove();return Promise.resolve(s)}},u=n(88166);class d extends WbSpaModel{constructor(e){super(),this.mobileMenu=new a,this.layoutModel=e.layoutModel,this.menuBtn=document.querySelector(".j-menu-burger-btn"),this.menuContainer=document.querySelector(".j-menu-burger"),this.mainMenuContainer=this.menuContainer.querySelector(".j-menu-burger-main"),this.header=document.querySelector(".j-header"),this.wrapper=document.querySelector(".j-wrapper"),this.fixedBlock=document.querySelector(".j-fixed-block"),this.widthScrollbar=Math.abs(window.innerWidth-document.documentElement.clientWidth),this.bodyOverflowClass="body--overflow",this.menuContainerActiveClass="menu-burger--active",this.innerMenuContainerActiveClass="menu-burger__drop--active",this.innerMenuItemActiveClass="menu-burger__drop-list-item--active",this.menuActiveClass="j-menu-active",this.mainMenuItemActiveClass="menu-burger__main-list-item--active",this.headerStickyClass="header--sticky",this.headerFixedClass="header--fixed",this.headerFixedAnimateClass="header--fixed-animate",this.menuItemActiveClass="menu-burger__drop-list-item--active",this.menuBtnCloseClass="nav-element__burger--close",this.menuOverlay=this._getMenuOverlay(document.body.querySelector(".j-menu-burger")),this._menuOpenHandler=this._menuOpenHandler.bind(this),this._menuCloseHandler=this._menuCloseHandler.bind(this),this.firstLvlMenuUpdater=new c({menuContainer:this.menuContainer,delay:12e3}),this.firstLvlMenuUpdater.lazyUpdateMenu()}get headerFixedScrollTop(){return this.$isDesktop?0:400}get mainMenuItems(){var e;return(null==(e=this.firstLvlMenuUpdater)?void 0:e.menuItemsUpdated)?this.firstLvlMenuUpdater.menuItemsUpdated:this.menuContainer.querySelectorAll(".menu-burger__main-list-item")}isMenuOpened(){return this.menuContainer.classList.contains(this.menuContainerActiveClass)}async init(){this._bindB2BEvent(),await this.mobileMenu.init(),this._bindEvents(),this._initMobileSearchbar(!this.$isDesktop)}_initMobileSearchbar(e){const t=this.mobileMenu.types;let n=0,r=!1,s="";function o(){r||(window.requestAnimationFrame(l.bind(this)),r=!0)}o=o.bind(this);const a=(e,t)=>{e?(this.header.classList.add(this.headerFixedClass),window.requestAnimationFrame(()=>this.header.classList.add(this.headerFixedAnimateClass))):(t&&this.header.classList.remove(this.headerFixedClass),window.requestAnimationFrame(()=>this.header.classList.remove(this.headerFixedAnimateClass)))};function l(){const e=window.scrollY;if(Math.abs(e-n)<0)return void(r=!1);if(e<=this.headerFixedScrollTop)return a(!1,!0),void(r=!1);const t=e>n;t&&"down"!=s?(this.$isDesktop?a(!0):a(!1),s="down"):t||"up"==s||(a(!0),s="up"),n=e>0?e:0,r=!1}const c=e=>{const{currentType:n}=e.detail;[t.PRODUCTCARD,t.REALTYCARD,t.REALTYBOOKING,t.REALTYNEWBOOKING,t.RESIDENTIALCARD].includes(n)?this.header.classList.add("hide-mobile"):this.header.classList.remove("hide-mobile"),n==t.HOME||n==t.SERVICES?(this.header.classList.add(this.headerStickyClass),window.addEventListener("scroll",o)):(this.header.classList.remove(this.headerFixedClass,this.headerFixedAnimateClass,this.headerStickyClass),window.removeEventListener("scroll",o))};this.$eventBus.addEventListener("MobileMenuTypeChange",c);c({detail:{currentType:i.getType()}})}async _renderInnerMenu(){var e,t;const[{SideMenu:r},s]=await Promise.all([await Promise.all([n.e(90568),n.e(17491)]).then(n.bind(n,47991)),this.firstLvlMenuUpdater.forceUpdateMenu()]),i=this.layoutModel.$services.bannersService.getMenuBanners(),o=new r(this.menuContainer,s,i);return o.checkMenuItemForHide(o.menuItems,null==(t=null==(e=this.$geoLocation)?void 0:e.location)?void 0:t.destinations),o.relinkModel(),o.onSearchImage=()=>this._onMenuHide(),o}_bindEvents(){var e,t,n;this.menuBtn.addEventListener("mousedown",this._menuOpenHandler),null==(t=null==(e=this.mobileMenu)?void 0:e.menuLink)||t.addEventListener("mousedown",this._menuOpenHandler),null==(n=wb.displayModeSettings)||n.addObserver(()=>{this._onMenuHide(),this._initMobileSearchbar(!this.$isDesktop)}),window.addEventListener("spaTransition",e=>{e.detail.isFinished&&this._onMenuHide()}),this.$eventBus.addEventListener("HideSideMenu",()=>{this.isMenuOpened()&&(document.body.classList.remove(this.bodyOverflowClass),document.body.style.paddingRight="")}),this.$eventBus.addEventListener("SelectedSideMenuItemUpdated",e=>{const{menuId:t}=e.detail;this.mainMenuItems.forEach(e=>e.classList.toggle(this.mainMenuItemActiveClass,e.dataset.menuId==t))})}_bindB2BEvent(){this.$eventBus.addEventListener("B2BModeToggled",()=>{const e=document.querySelector(".j-logo");e&&(e.dataset.business=u.R.t("header.forBusiness")),this.header.classList.toggle("is-b2b-mode",wb.settings.b2bMode)})}_bindMenuCloseHandlers(){document.addEventListener("mousedown",this._menuCloseHandler)}_unbindMenuCloseHandlers(){document.removeEventListener("mousedown",this._menuCloseHandler)}_menuOpenHandler(e){if(this.isMenuOpened()||!this.$isDesktop&&this.mobileMenu.isCatalog())return;e.stopPropagation(),e.preventDefault();const t=e.currentTarget;let n="touchstart"===e.type?"touchend":"mouseup";const r=()=>{t.removeEventListener(n,r),this.layoutModel.$helper.loadCssAsync(wb.settings.styles.menuBurger).then(()=>this._onMenuShow())};t.addEventListener(n,r),this.visibleCertItemMenu&&wb.analitics.sendEvent("Certificate_S",{location:"Catalog"})}_menuCloseHandler(e){var t;const n=e.target,r=this;if(!(this.$isDesktop&&n.closest(`.${this.menuActiveClass}`)||!this.$isDesktop&&!this.mobileMenu.isNavbarLink(n)&&!this.menuBtn.contains(n)))if(this.$isDesktop){let t=function(){n.removeEventListener(r,t),s()};const n=e.currentTarget,r="touchstart"===e.type?"touchend":"mouseup";n.addEventListener(r,t)}else null==(t=this.sideMenu)||t.touchHandlerHelper(e,s);function s(){r._onMenuHide()}}refreshMenu(e){e&&(wb.spa.clearCatalogMenu(),this.firstLvlMenuUpdater.reloadMenu()),this.isSubMenuShowerActivated=!1,this.menuRendered=!1,!this.$isDesktop&&this.isMenuOpened()&&this._onMenuShow()}async _onMenuShow(){var e;if(document.body.classList.add(this.bodyOverflowClass),this.wrapper.style.paddingRight=`${this.widthScrollbar}px`,this.header.style.paddingRight=`${this.widthScrollbar}px`,this.header.style.marginRight=`-${this.widthScrollbar}px`,this.fixedBlock.style.marginRight=`${this.widthScrollbar}px`,"d"===wb.settings.displayMode&&scrollY<=this.header.offsetHeight&&document.documentElement.style.setProperty("--scroll-top",window.scrollY+"px"),this.menuContainer.classList.add(this.menuContainerActiveClass),this.mainMenuContainer.classList.add(this.menuActiveClass),this.menuBtn.classList.add(this.menuBtnCloseClass),this.menuOverlay.show(),!this.$isDesktop&&this.mobileMenu.setCatalog(),this._bindMenuCloseHandlers(),this.menuRendered)null==(e=this.sideMenu)||e.clearShownBanners();else{const e=await this._renderInnerMenu();this.sideMenu=e,this.mainMenuItems.forEach(e=>{var t,n,r;if(!this.$isDesktop&&("2192"===e.dataset.id||"4853"===e.dataset.id))return;const s=this.sideMenu.findItem(e.dataset.menuId);s&&(((null==(t=s.childs)?void 0:t.length)>0||(null==(n=s.banners)?void 0:n.length)>0)&&e.classList.add("menu-burger__main-list-item--subcategory"),e.classList.toggle("hide",null!=(r=s.hide)&&r),1234===s.id&&(this.visibleCertItemMenu=!0,wb.analitics.sendEvent("Certificate_S",{location:"Catalog"})))}),this.menuRendered=!0}this._menuMainHoverHandler()}_onMenuHide(){var e,t;null==(e=this.sideMenu)||e.changeSelectedMenuItem(null),null==(t=this.sideMenu)||t.innerMenuHide(),this.wrapper.style.paddingRight="",this.header.style.marginRight="",this.header.style.paddingRight="",this.fixedBlock.style.marginRight="",document.body.classList.remove(this.bodyOverflowClass),this.menuContainer.classList.remove(this.menuContainerActiveClass),this.mainMenuContainer.classList.remove(this.menuActiveClass),this.menuBtn.classList.remove(this.menuBtnCloseClass),this.menuOverlay.hide(),!this.$isDesktop&&this.mobileMenu.revertActive(),this._unbindMenuCloseHandlers()}async _menuMainHoverHandler(){if(this.isSubMenuShowerActivated||!this.$isDesktop)return;new(await n.e(41356).then(n.bind(n,80570)).then(e=>e.SubMenuShower))(this.mainMenuItems,{over:e=>{this.$isDesktop&&this.sideMenu.onMenuSelected(e)},out:()=>{},timeout:30,interval:40,sensitivity:4}),this.isSubMenuShowerActivated=!0}_getMenuOverlay(e){const t=e;let n;function r(){n&&n.remove(),n=null}return{show:function(){"m"!==wb.settings.displayMode?n||(t.insertAdjacentHTML("beforebegin",'<div class="overlay overlay--menu-burger j-overlay"></div>'),n=e.parentElement.querySelector(".j-overlay")):r()},hide:r}}}var p=d;var h=Object.defineProperty,m=(e,t,n)=>((e,t,n)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);var g=class{constructor(e){m(this,"$base",null),m(this,"oferta"),this.$base=e.layoutModel,this._enableOferta()&&(this.$base.$auth.isAuth?window.addEventListener("spaTransition",e=>{e.detail.isFinished&&this._onAuthLogin()},{once:!0}):this.$base.$eventBus.addEventListener("onUserAuth",this._onAuthLogin.bind(this),{single:!0}))}_loadResources(){return Promise.all([n.e(90568),n.e(42107)]).then(n.bind(n,99654)).then(e=>e.NewOfferPopupViewModel).then(e=>{this.oferta||(this.oferta=new e)})}_onAuthLogin(){this._loadResources().then(e=>{var t;null==(t=this.oferta)||t.show()})}_enableOferta(){return"am"===wb.settings.currentLocale&&wb.global.settings.switches.enablePopupAcceptOffer||"tj"===wb.settings.currentLocale&&wb.global.settings.switches.enablePopupAcceptOfferTj}async confirm(){var e;this._enableOferta()&&this.$base.$auth.isAuth&&(await this._loadResources(),null==(e=this.oferta)||e.confirm())}async promise(){var e;return this._enableOferta()&&this.$base.$auth.isAuth?(await this._loadResources(),(null==(e=this.oferta)?void 0:e.promise())||new Promise(e=>e())):new Promise(e=>e())}},f=Object.defineProperty,b=(e,t,n)=>((e,t,n)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class y extends WbSpaModel{constructor(){super(),b(this,"initTask",null),b(this,"oferta",null),b(this,"menuTop",null),this.initTask=new r.cY}preInit(){const e={layoutModel:this};this.oferta=new g(e)}init(){const e={layoutModel:this};this.menuTop=new p(e);const t=this.menuTop.init();Promise.all([t]).then(()=>{var e;return null==(e=this.initTask)?void 0:e.resolve(void 0)})}updateAfterLogin(){}static factory(){return new y}}var v=y},42891:function(e,t,n){"use strict";n.d(t,{y:function(){return te}});var r=n(8379),s=Object.defineProperty,i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,l=(e,t,n)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,c=(e,t)=>{for(var n in t||(t={}))o.call(t,n)&&l(e,n,t[n]);if(i)for(var n of i(t))a.call(t,n)&&l(e,n,t[n]);return e},u=(e,t,n)=>l(e,"symbol"!=typeof t?t+"":t,n);class d{constructor(e){u(this,"bannersData"),u(this,"unobserveVI"),this.bannersData=this._getBannersData(e.iframeBanners),this.unobserveVI=e.unobserveVI}send1pxShowedEvent(e){const t=this._getMainBanner(e);if(!t)return;const n=this.bannersData.get(t);if(!n)return;if(n.iframeShowing1pxEventSended)return;n.iframeShowing1pxEventSended=!0;const r=this._getEventData("Banner_N",t);WbSpaModel.prototype.$analitic.sendBannersWbaEventByData(r)}sendIframeReadyEvent(e){if(e.isDuplicate)return;const t=this._getEventData("Banner_SI",e);WbSpaModel.prototype.$analitic.sendBannersWbaEventByData(t)}sendIframeEvent(e,t){if(e.isDuplicate||!t)return;const n=t.name,r=t.params,s=this._getEventData(n,e),i=c(c({},s),r);WbSpaModel.prototype.$analitic.sendBannersWbaEventByData(i)}iframeShowing(e,t){const n=this._getMainBanner(e);if(!n)return;const r=this.bannersData.get(n);if(!r)return;if(r.iframeShowingEventSended)return;!0===t&&(r.visibleVI=!0);if(!(n.isHTML5?n.isReady():n.isVideoPlaying())||!r.visibleVI)return;const s=n.isHTML5?1e3:2e3;r.iframeShowingTimerId=setTimeout(()=>{this._trySendIframeShowingEvent(r),this._removeShowingTimer(r)},s)}iframeStopped(e){if(e.isDuplicate)return;const t=this.bannersData.get(e);t&&(t.visibleVI=!1,this._removeShowingTimer(t))}_getMainBanner(e){return e.isDuplicate?e.mainIframeBanner:e}_getBannersData(e){const t=new Map;return null==e||e.forEach(e=>{const n={iframeBanner:e,iframeShowingTimerId:null,iframeShowingEventSended:!1,iframeShowing1pxEventSended:!1,visibleVI:!1};t.set(e,n)}),t}_getEventData(e,t){var n;const r=t.banner,s=this._getHTMLBanner(t);return r&&s?{eventName:e,bannerName:r.alt,location:s.dataset.analiticsCode,link:r.href,ind:s.dataset.bannerIndex,bid:r.id,withPromoMark:Boolean(r.ordBannerMark),pixelSrc:r.pixelSrc,adv_params:(null==(n=r.htmlData)?void 0:n.data)||"",banner_load_time:r.loadTime}:null}_getHTMLBanner(e){return e.bannerHTML.querySelector(".j-banner")}_removeShowingTimer(e){null!==e.iframeShowingTimerId&&(clearTimeout(e.iframeShowingTimerId),e.iframeShowingTimerId=null)}_trySendIframeShowingEvent(e){(e.iframeBanner.isHTML5||e.iframeBanner.isVideoPlaying())&&(e.iframeShowingEventSended||(e.iframeShowingEventSended=!0,this._sendBannerShowingStatEvent(e.iframeBanner),this.unobserveVI(e.iframeBanner)))}_sendBannerShowingStatEvent(e){const t=this._getEventData("Banner_VI",e);WbSpaModel.prototype.$analitic.sendBannersWbaEventByData(t)}}var p=Object.defineProperty,h=(e,t,n)=>((e,t,n)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class m{constructor(e){h(this,"observer1px"),h(this,"observer50VI"),h(this,"handlers",new Map);const t=[];e.bannersData.forEach(e=>{this.handlers.set(e.banner.bannerHTML,e),t.push(e.banner.bannerHTML)}),this.observer1px=this._getObserverOn1px(t),this.observer50VI=this._getObserver50VI(t)}unobserveVI(e){var t,n;null==(n=(t=this.observer50VI).unobserveItem)||n.call(t,e)}destroy(){var e,t;null==(e=this.observer1px)||e.destroy(),null==(t=this.observer50VI)||t.destroy()}_getObserver50VI(e){if(navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.indexOf("Trident/")>0)return{destroy:()=>{}};const t=WbSpaModel.prototype.$observerHelper.getSimpleObserver((e,t,n)=>{const r=this.handlers.get(e);r&&r.callback(r.banner,!1,n)},{threshold:.5},{keepObserve:!0,sendOutEvent:!0});return t.observe(e),{destroy:t.destroy,unobserveItem:t.unobserveItem}}_getObserverOn1px(e){if(navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.indexOf("Trident/")>0)return{destroy:()=>{}};const t=WbSpaModel.prototype.$observerHelper.getSimpleObserver(e=>{const t=this.handlers.get(e);t&&t.callback(t.banner,!0)},{threshold:0});return t.observe(e),{destroy:t.destroy}}}const g="served",f="ready",b="started",y="paused",v="resumed",w="completed",S="error",_="trackAnalytics",I="init",C="visible",k="invisible",P="VISIBLE",E="INVISIBLE",T="ACTIVE",O="NOT_ACTIVE";var x=Object.defineProperty,M=(e,t,n)=>((e,t,n)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);const A="CREATED",R="SERVICE_READY",D="IFRAME_READY",L="CONTENT_READY",B="VIDEO_INIT_START_EVENT",$="VIDEO_STARTED",N="VIDEO_PAUSED",j="VIDEO_RESUMED",F="VIDEO_COMPLETED",U="ERROR",W={CREATED:1,SERVICE_READY:2,IFRAME_READY:3,CONTENT_READY:4,VIDEO_INIT_START_EVENT:5,VIDEO_STARTED:6,VIDEO_PAUSED:7,VIDEO_RESUMED:8,VIDEO_COMPLETED:9,ERROR:100};class H{constructor(e){M(this,"_actions"),M(this,"_isHTML5"),M(this,"currentState",A),this._actions=e.actions,this._isHTML5=e.isHTML5}_doOnState(e){const t=this._actions[e];null==t||t()}isServiceReady(){return W[this.currentState]>=W.SERVICE_READY}isReady(){return W[this.currentState]>=W.CONTENT_READY}isVideoPlaying(){return this.currentState===$||this.currentState===j}goToState(e){if(e===U)return this.currentState=e,void this._doOnState(this.currentState);e!==this.currentState&&this._canGoToState(e)&&(this.currentState=e,this._doOnState(this.currentState))}_canGoToState(e){return this.currentState!==U&&(e===U||(W[e]>W[this.currentState]||!this._isHTML5&&(this.currentState===j&&e===N||this.currentState===F&&e===L)))}}var V=Object.defineProperty,z=(e,t,n)=>((e,t,n)=>t in e?V(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class q{constructor(e){z(this,"started",!1),z(this,"waitingTimeForStartVideo",2e3),z(this,"slideDuration"),z(this,"actions"),z(this,"slideHoldTimerId",null),z(this,"videoUploadTimerId",null),z(this,"videoEnded",!1),z(this,"isError",!1),this.slideDuration=e.slideDuration,this.actions=e.actions}start(e){this.started=!0,e&&this._setTimerOnUploadVideo(),this.slideHoldTimerId=setTimeout(()=>{this._onBaseHoldTimeEnded()},this.slideDuration)}stop(){this.started=!1,this._removeVideoUploadTimer(),this._removeSlideHoldTimerId(),this.videoEnded=!1,this.isError=!1}onVideoStarted(){this.isError||(this._removeVideoUploadTimer(),this.actions.stopSlide(),this._showVideoContent(!0))}onVideoEnded(){this.videoEnded=!0,this._tryChangeSlide()}onSlideInactive(){this.isError||this.videoEnded&&this.started&&this.stop()}setError(){this.isError=!0,this._removeVideoUploadTimer(),this._tryChangeSlide()}_onBaseHoldTimeEnded(){this._removeSlideHoldTimerId(),this._tryChangeSlide()}_tryChangeSlide(){if(this.isError)return this._showVideoContent(!1),void(null===this.slideHoldTimerId&&this._changeSlide());this.videoEnded&&this._changeSlide()}_showVideoContent(e){this.actions.showVideoContent(e)}_changeSlide(){this.actions.changeSlide()}_setTimerOnUploadVideo(){this.videoUploadTimerId=setTimeout(()=>{this._setTimerError()},this.waitingTimeForStartVideo)}_setTimerError(){this.isError=!0,this.actions.setError()}_removeVideoUploadTimer(){null!==this.videoUploadTimerId&&(clearTimeout(this.videoUploadTimerId),this.videoUploadTimerId=null)}_removeSlideHoldTimerId(){null!==this.slideHoldTimerId&&(clearTimeout(this.slideHoldTimerId),this.slideHoldTimerId=null)}}var K=Object.defineProperty,G=(e,t,n)=>((e,t,n)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class J{constructor(e){G(this,"banner"),G(this,"iframe"),G(this,"bannerHTML"),G(this,"bannerSlideIndex"),G(this,"isHTML5"),G(this,"isDuplicate"),G(this,"mainIframeBanner"),G(this,"duplicates",null),G(this,"carouselHandlers"),G(this,"incomingIframeEvents"),G(this,"statEvents"),G(this,"needInitBanner",!1),G(this,"isVisible",!1),G(this,"isActive",!1),G(this,"stateMachine"),G(this,"slideHolder"),e.banner.isIframeBanner=!0,this.banner=e.banner,this.iframe=e.iframe,this.bannerHTML=e.bannerHTML,this.isHTML5=e.banner.isHtml5,this.bannerSlideIndex=e.bannerSlideIndex,this.isDuplicate=e.isDuplicate,this.mainIframeBanner=e.mainIframeBanner||null,this.carouselHandlers=e.carouselHandlers,this.incomingIframeEvents=e.incomingIframeEvents,this.statEvents=e.statEvents,this.stateMachine=this._getStateMachine(),this.slideHolder=this._getSlideHolder(e.slideDuration)}setDuplicates(e){e.length&&(this.duplicates=e)}isVideoPlaying(){return this.stateMachine.isVideoPlaying()}initIframeBanner(){if(this.stateMachine.currentState===U)return;(this.stateMachine.currentState===A||this.stateMachine.currentState===R)&&(this.incomingIframeEvents.sendInitEvent(this),this.stateMachine.isServiceReady()||(this.needInitBanner=!0))}handleIframeResponseEvent(e){switch(e.event){case g:this.stateMachine.goToState(R);break;case f:this.stateMachine.goToState(D);break;case b:this.stateMachine.goToState($);break;case y:this.stateMachine.goToState(N);break;case v:this.stateMachine.goToState(j);break;case w:this.stateMachine.goToState(F);break;case S:this.stateMachine.goToState(U)}}handleObserverEvent(e){var t;if(this.stateMachine.currentState!==U)switch(null==(t=this.duplicates)||t.forEach(t=>{t.handleObserverEvent(e)}),e){case P:this.isVisible=!0,this._initShowVideo();break;case E:this.isVisible=!1,this._stopShowingIframe()}}handleCarouselEvent(e){var t,n;if(this.stateMachine.currentState!==U)switch(null==(t=this.duplicates)||t.forEach(t=>{t.handleCarouselEvent(e)}),e){case T:this.isActive=!0,this._initShowVideo();break;case O:this.isActive=!1,this._stopShowingIframe(),this.stateMachine.currentState===F&&(null==(n=this.slideHolder)||n.onSlideInactive())}}isReady(){return this.stateMachine.isReady()}_getSlideHolder(e){if(this.isHTML5)return null;const t={setError:this._doOnError.bind(this),stopSlide:()=>{this.isDuplicate||this.carouselHandlers.stopSlide(this.bannerSlideIndex)},changeSlide:()=>{this.isDuplicate||(this._doOnSlideChange(),this.carouselHandlers.changeSlide(this.bannerSlideIndex))},showVideoContent:this._changeActiveContainer.bind(this)};return new q({slideDuration:e,actions:t})}_getStateMachine(){const e={actions:{CREATED:()=>{},SERVICE_READY:this._doOnServiceReady.bind(this),IFRAME_READY:this._doOnIframeReady.bind(this),CONTENT_READY:this._doOnContentReady.bind(this),VIDEO_INIT_START_EVENT:this._doOnInitStartVideo.bind(this),VIDEO_STARTED:this._doOnVideoStarted.bind(this),VIDEO_PAUSED:this._doOnVideoPaused.bind(this),VIDEO_RESUMED:this._doOnVideoResumed.bind(this),VIDEO_COMPLETED:this._doOnVideoCompleted.bind(this),ERROR:this._doOnError.bind(this)},isHTML5:this.isHTML5};return new H(e)}_doOnError(){var e;this.isHTML5&&this._changeActiveContainer(!1),null==(e=this.slideHolder)||e.setError()}_doOnServiceReady(){this.needInitBanner&&this.incomingIframeEvents.sendInitEvent(this)}_doOnIframeReady(){this.stateMachine.goToState(L)}_doOnContentReady(){var e,t;if(this.stateMachine.currentState===U)return;if(this.isHTML5)return this._changeActiveContainer(!0),void this.statEvents.iframeShowing(this);(null==(e=this.slideHolder)?void 0:e.started)?null==(t=this.slideHolder)||t.stop():this._canPlayVideo()&&this.stateMachine.goToState(B)}_doOnInitStartVideo(){var e;this.stateMachine.currentState!==U&&(this.incomingIframeEvents.sendVisibleEvent(this),null==(e=this.slideHolder)||e.start(!0))}_doOnVideoStarted(){var e;this.stateMachine.currentState!==U&&(null==(e=this.slideHolder)||e.onVideoStarted(),this._canPlayVideo()?this.statEvents.iframeShowing(this):this.stateMachine.goToState(N))}_doOnVideoPaused(){var e;null==(e=this.slideHolder)||e.stop(),this.statEvents.iframeStopped(this)}_doOnVideoResumed(){var e,t;this.stateMachine.currentState!==U&&(null==(e=this.slideHolder)||e.start(!1),null==(t=this.slideHolder)||t.onVideoStarted(),this.statEvents.iframeShowing(this))}_doOnVideoCompleted(){var e;null==(e=this.slideHolder)||e.onVideoEnded()}_doOnSlideChange(){this.stateMachine.currentState!==U&&this.stateMachine.goToState(L)}_canPlayVideo(){return this.stateMachine.isReady()&&this.isVisible&&this.isActive}_initShowVideo(){this._canPlayVideo()&&(this.stateMachine.currentState!==F?this.stateMachine.currentState!==L?this.incomingIframeEvents.sendVisibleEvent(this):this.stateMachine.goToState(B):this.stateMachine.goToState(L))}_stopShowingIframe(){this.statEvents.iframeStopped(this),this.incomingIframeEvents.sendInvisibleEvent(this)}_changeActiveContainer(e){this.stateMachine.currentState===U&&(e=!1),this.bannerHTML.classList.toggle("iframe-show",e)}}var Y=Object.defineProperty,Q=(e,t,n)=>((e,t,n)=>t in e?Y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class X{constructor(){Q(this,"_handlers",new Map),Q(this,"_handleMessageFunc",e=>this._handleMessage(e)),this._init()}registerIframe(e){var t;(null==(t=e.target.iframe)?void 0:t.contentWindow)&&this._handlers.set(e.target.iframe.contentWindow,e)}sendMessage(e,t){e&&e.contentWindow&&e.contentWindow.postMessage(t,"*")}destroy(){window.removeEventListener("message",this._handleMessageFunc)}_init(){window.addEventListener("message",this._handleMessageFunc)}_handleMessage(e){var t;if((null==(t=null==e?void 0:e.data)?void 0:t.type)&&-1!==e.data.type.indexOf("webpack"))return;const{source:n,data:r}=e;if(!n||!this._handlers.has(n))return;const s=r?JSON.parse(r):null,i=this._handlers.get(n);if(!i||null===s)return;const o={target:i.target,response:s};i.callback(o)}}var Z=Object.defineProperty,ee=(e,t,n)=>((e,t,n)=>t in e?Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class te{constructor(e){ee(this,"bannersCountForLazy",2),ee(this,"duplicateClass","swiper-slide-duplicate"),ee(this,"container"),ee(this,"slideDuration"),ee(this,"carouselHandlers"),ee(this,"iframeHandler",null),ee(this,"bannersObserver",null),ee(this,"bannersAnalyticsHelper",null),ee(this,"allBanners",[]),ee(this,"iframeBanners",[]),ee(this,"currentActiveBanner",null),this.container=e.container,this.slideDuration=e.slideDuration,this.carouselHandlers=e.handlers}setCarouselVisible(e){const t=e?P:E;this.iframeBanners.forEach(e=>{e.handleObserverEvent(t)})}setBannerAsActiveByIndex(e){if(!this.allBanners.length)return;if(this.currentActiveBanner&&this._isIframeBanner(this.currentActiveBanner)){if(this.currentActiveBanner.bannerSlideIndex===e)return;this.currentActiveBanner.handleCarouselEvent(O)}this._initIframeBanners(e);const t=this.allBanners[e];this._isIframeBanner(t)?(this.currentActiveBanner=t,t.handleCarouselEvent(T)):this.currentActiveBanner=null}destroy(){var e,t;null==(e=this.bannersObserver)||e.destroy(),null==(t=this.iframeHandler)||t.destroy()}init(e){if(!e)return;const t=this._getBanners(e);!!(null==t?void 0:t.iframeBanners.length)&&(this.allBanners=t.allBanners,this.iframeBanners=t.iframeBanners,this.iframeHandler=new X,this._registerIframeBanners(this.iframeBanners),this.bannersAnalyticsHelper=this._getBannersAnalyticsHelper(this.iframeBanners),this.bannersObserver=this._getObserver(this.iframeBanners))}bannerIsShowingOn50perc(e){const t=this.iframeBanners.find(t=>t.bannerSlideIndex===e);t&&this._iframeShowing(t)}_getBanners(e){if(!(null==e?void 0:e.length))return null;const t=[],n=[];return null==e||e.forEach((e,r)=>{const s=this._tryGetIframeBanner(e,r);s?(n.push(s),t.push(s)):t.push(e)}),{allBanners:t,iframeBanners:n}}_getIframeWithDuplicates(e){const t=this.container.querySelectorAll(`#${e.iframeId}`),n={main:null,duplicates:[]};return null==t||t.forEach(e=>{if(!(0,r.tH)(e,HTMLIFrameElement))return;const t=e.closest(".j-iframe-banner");if(!(0,r.tH)(t,HTMLElement))return;const s={iframe:e,bannerHTML:t};t.classList.contains(this.duplicateClass)?n.duplicates.push(s):n.main=s}),n}_tryGetIframeBanner(e,t){if(!e.iframeId)return null;const n=this._getIframeWithDuplicates(e);return null===n.main?null:this._createIframeBannerWithDuplicates(e,n,t)}_createIframeBannerWithDuplicates(e,t,n){if(!t.main)return null;const r=this._createIframeBanner(e,t.main,n),s=t.duplicates.map(t=>this._createIframeBanner(e,t,n,r));return r.setDuplicates(s),r}_createIframeBanner(e,t,n,r){const s={banner:e,iframe:t.iframe,bannerHTML:t.bannerHTML,incomingIframeEvents:{sendInitEvent:this._sendInitEvent.bind(this),sendVisibleEvent:this._sendVisibleEvent.bind(this),sendInvisibleEvent:this._sendInvisibleEvent.bind(this)},carouselHandlers:this.carouselHandlers,bannerSlideIndex:n,slideDuration:this.slideDuration,statEvents:{iframeShowing:this._iframeShowing.bind(this),iframeStopped:this._iframeStopped.bind(this)},isDuplicate:!!r,mainIframeBanner:r};return new J(s)}_iframeShowing(e,t){var n;null==(n=this.bannersAnalyticsHelper)||n.iframeShowing(e,t)}_iframeStopped(e){var t;null==(t=this.bannersAnalyticsHelper)||t.iframeStopped(e)}_sendInitEvent(e){const t=this._getMessageForSendIframeEvent(e,I);this._sendMessage(e.iframe,t)}_sendVisibleEvent(e){const t=this._getMessageForSendIframeEvent(e,C);this._sendMessage(e.iframe,t)}_sendInvisibleEvent(e){const t=this._getMessageForSendIframeEvent(e,k);this._sendMessage(e.iframe,t)}_getMessageForSendIframeEvent(e,t){var n,r;if(t===C||t===k)return{event:t,payload:{}};const s={xml:null==(n=e.banner.htmlData)?void 0:n.xml,data:null==(r=e.banner.htmlData)?void 0:r.data};return{event:I,payload:s}}_getBannersAnalyticsHelper(e){const t={iframeBanners:e,unobserveVI:this._unobserveVI.bind(this)};return new d(t)}_unobserveVI(e){var t;e.bannerHTML&&(null==(t=this.bannersObserver)||t.unobserveVI(e.bannerHTML))}_getObserver(e){const t=[];return e.forEach(e=>{var n;const r=this._getBannerDataForObserver(e);t.push(r),null==(n=e.duplicates)||n.forEach(e=>{const n=this._getBannerDataForObserver(e);t.push(n)})}),new m({bannersData:t})}_getBannerDataForObserver(e){return{banner:e,callback:this._handleObserverEvent.bind(this)}}_registerIframeBanners(e){e.forEach(e=>{var t;this._registerIframe(e),null==(t=e.duplicates)||t.forEach(e=>{this._registerIframe(e)})})}_registerIframe(e){var t;const n={target:e,callback:e=>{this._handleMessage(e)}};null==(t=this.iframeHandler)||t.registerIframe(n)}_sendMessage(e,t){var n;null==(n=this.iframeHandler)||n.sendMessage(e,t)}_handleMessage(e){var t,n,r;const s=e.response,i=e.target,o=s.event;o!==_?(o===f&&(null==(r=this.bannersAnalyticsHelper)||r.sendIframeReadyEvent(i)),i.handleIframeResponseEvent(s)):null==(n=this.bannersAnalyticsHelper)||n.sendIframeEvent(i,null==(t=e.response)?void 0:t.payload)}_handleObserverEvent(e,t,n){var r;t?null==(r=this.bannersAnalyticsHelper)||r.send1pxShowedEvent(e):n?this._iframeStopped(e):this._iframeShowing(e,!0)}_isIframeBanner(e){return e&&"iframe"in e&&"banner"in e}_initIframeBanners(e){this._getCircularSlice(this.allBanners,e).forEach(e=>{var t;e&&this._isIframeBanner(e)&&(e.initIframeBanner(),null==(t=e.duplicates)||t.forEach(e=>{e.initIframeBanner()}))})}_getCircularSlice(e,t){const n=2*this.bannersCountForLazy+1,r=e.length;return r<n?e:Array.from({length:n},(n,s)=>e[(t-this.bannersCountForLazy+s+r)%r])}}},39889:function(e,t){"use strict";var n=Object.defineProperty,r=(e,t,r)=>((e,t,r)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);const s=6048e5,i="__catalogOptions";class o{constructor(e){r(this,"sort"),r(this,"resaleSort"),r(this,"cardSize"),e&&(this.sort=e.sort,this.cardSize=e.cardSize,this.resaleSort=e.resaleSort)}setValues({sort:e,cardSize:t,resaleSort:n}){e&&(this.sort=e),t&&(this.cardSize=t),n&&(this.resaleSort=n)}}class a{static updateCatalogOptions(e,t){const n=a._getCatalogOptionsFromCache(e);"cardSize"===e&&(n.cardSize=t),"resaleSort"===e&&(n.resaleSort=t),"sort"===e&&(n.sort=t),a._updateOption(e,n)}static _updateOption(e,t){("cardSize"==e?localStorage:sessionStorage).putObject(i,{expired:Date.now()+s,data:t})}static getCatalogOptionsValueByKey(e){return a._getCatalogOptionsFromCache(e)[e]}static _getCatalogOptionsFromCache(e){const t=("cardSize"==e?localStorage:sessionStorage).getObject(i),n=new o(null==t?void 0:t.data);if(null!=t&&t.data&&t.expired>Date.now()-s)switch(e){case"cardSize":n.setValues({cardSize:t.data.cardSize});break;case"sort":n.setValues({sort:t.data.sort});break;case"resaleSort":n.setValues({resaleSort:t.data.resaleSort})}else{switch(e){case"cardSize":n.setValues({cardSize:"c516x688"});break;case"sort":n.setValues({sort:"popular"});break;case"resaleSort":n.setValues({resaleSort:"newly"})}a._updateOption(e,n)}return n}}t.A=a},59067:function(e,t){"use strict";var n=Object.defineProperty,r=(e,t,r)=>((e,t,r)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class s extends WbSpaModel{constructor(e){super(),r(this,"func"),r(this,"interval"),r(this,"timerObj"),this.func=e.func,this.interval=e.interval,this.timerObj=null}stop(){return this.timerObj&&(clearInterval(this.timerObj),this.timerObj=null),this}start(){return this.timerObj||(this.stop(),this.timerObj=window.setInterval(this.func,this.interval)),this}}t.A=s},78169:function(e,t,n){"use strict";n.d(t,{I9:function(){return o},pL:function(){return p}});var r=n(88166),s=Object.defineProperty,i=(e,t,n)=>((e,t,n)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);const o={bottomCustomMsg:0,addToBasket:1,addToPoned:2,copyNmId:3,copyProductLink:4,removeFromPoned:5,wrongProductReported:6,similarProductReported:7,sendCommunication:8,claimIsAlreadySended:9,cardDeleted:10,feedbackPhotoUploadCanceled:11,feedbackVideoUploadCanceled:12,copyColorName:13,claimSended:14,revokeAction:15,successfullyCopied:16,addToFavsSeller:17,favsSellerOverlimit:18,onePurchasePromo:19,onePurchasePromoWasBought:20,basketProductsLimit:21},a=0,l=1,c=2,u=3;window.__globalPanelMap__=window.__globalPanelMap__||new Map;const d=window.__globalPanelMap__;class p{constructor(e,t,n,r,s){i(this,"type"),i(this,"timeout"),i(this,"text"),i(this,"modClass"),i(this,"options"),this.type=e,this.text=t,this.modClass=n,this.timeout=null!=r?r:2500,this.options=s}static get notificationsType(){return o}static removePanels(e){d.forEach((t,n)=>{if(n===o.revokeAction||n!==e)return t.destroy()})}createElement(){const e=document.createElement("div");e.classList.add("action-notification"),this.modClass&&(Array.isArray(this.modClass)?e.classList.add(...this.modClass):e.classList.add(this.modClass));const t=document.createElement("p");return t.innerText=this.text,e.appendChild(t),new h(e,this.type,this.timeout)}static showNotification(e,t,n,s,i){var o;new this(e,null!=(o=null!=t?t:r.R.t(`common.notificationCode.${e}`))?o:"",n,s,i).showNotification()}showNotification(){p.removePanels(this.type);const e=d.get(this.type);if(e)switch(e.state){case a:return;case l:case c:return e.resetTimer();case u:d.delete(this.type)}const t=this.createElement();document.body.appendChild(t.element),d.set(this.type,t),t.show(),this.dispatchNotificationCreatedEvent()}dispatchNotificationCreatedEvent(){window.dispatchEvent(new Event("actionNotificationCreatedByDOM"))}}class h{constructor(e,t,n,r){i(this,"element"),i(this,"type"),i(this,"state"),i(this,"timer"),i(this,"timeout"),i(this,"isCancelled"),i(this,"loadTimer"),i(this,"timeoutCallback"),i(this,"boundHandleUnload"),this.element=e,this.type=t,this.state=a,this.timeout=n,this.isCancelled=!1,this.timeoutCallback=r,this.bindEvents(),this.setupUnloadListener()}bindEvents(){this.element.addEventListener("transitionend",()=>{this._showPanel(),this.element.addEventListener("transitionend",()=>{this.element.remove()})},{once:!0}),this.type===o.revokeAction&&this._startTimer()}setupUnloadListener(){const e=()=>this.handleTimeoutEnd();window.addEventListener("beforeunload",e),window.addEventListener("unload",e),window.addEventListener("spaTransition",e),window.addEventListener("actionNotificationCreatedByReact",e),this.boundHandleUnload=e}handleTimeoutEnd(){var e;this._hidePanel(),clearTimeout(this.timer),clearInterval(this.loadTimer),!this.isCancelled&&this.timeoutCallback&&(null==(e=this.timeoutCallback)||e.call(this),this.isCancelled=!0)}show(){document.body.appendChild(this.element),window.requestAnimationFrame(WbSpaModel.prototype.$helper.debounce(()=>{this.state=l,this.element.classList.add("show")},10))}destroy(){this.handleTimeoutEnd(),this.boundHandleUnload&&(window.removeEventListener("beforeunload",this.boundHandleUnload),window.removeEventListener("unload",this.boundHandleUnload),window.removeEventListener("spaTransition",this.boundHandleUnload),window.removeEventListener("actionNotificationCreatedByReact",this.boundHandleUnload))}resetTimer(){clearTimeout(this.timer),this._showPanel()}_showPanel(){this.timer=window.setTimeout(()=>this._hidePanel(),this.timeout),this.state=c}_hidePanel(){this.state=u,this.element.classList.remove("show")}_startTimer(){const e=this.element.querySelector(".circle-timer__circle"),t=this.element.querySelector(".circle-timer__text");if(!e||!t)return;let n=this.timeout/1e3;e.style.animation=`dash ${n}s linear`,t.innerHTML=n.toString(),this.loadTimer=window.setInterval(()=>{n-=1,n<=0?(clearInterval(this.loadTimer),t.innerHTML="0",e.style.stroke="transparent",this.timeoutCallback&&this.timeoutCallback()):t.innerHTML=n.toString()},1e3)}cancel(){this.isCancelled=!0}}},13203:function(e,t,n){"use strict";n.d(t,{A:function(){return r}});class r{async getAidData(e){return await WbSpaModel.prototype.$httpClient.fetchStatic(`emergency-situation/${e}.json`,{timeout:4e3,nullOnError:!0})}static richPrototype({prototype:e}){Object.setPrototypeOf(r.prototype,e)}static factory(e){return e&&r.richPrototype(e),new r}}},62145:function(e,t,n){"use strict";n.d(t,{i:function(){return r}});const r={appType:{desktop:1,mobile:2,desktopAndMobile:3},locationType:{main:42,small:38,strip:39,_352x428:60,_305x245:57,_770x245:59,big:41,vertical:36,promo_strip:61,_1440x168:62,_215x168:63,_705x394:64,_460x394:65,_364x668:66,menu_banners:73,footerSocial:80,mainInfo:81,special_promo:88,promo_landing_92:92,promo_landing_93:93,promo_landing_94:94,newMainBanners:100,searchBanners:102,lkBanners:103,deliveryBanners:104,thxForOrderBanners:105,newPromoBanners:106,newBottomPromoBanners:107,trendBanners:110},urlType:{main:1024,default:0,promotion:16384,cataloger:1<<22,promotionCatalog:62,promotionLanding:256,advBanner:1024,trendBanners:32},bannerDisplayType:{forAuth:2,forNotAuth:3},country:{ru:1,by:2,kz:3,am:4,kg:5,ge:10,uz:13,tj:25,il:11},langs:{ka:"ge",kk:"kz",uz:"uz",ky:"ky"},ownerType:{marketing:0,supplier:1}}},78127:function(e,t,n){"use strict";n.d(t,{Y:function(){return U}});var r=n(88927),s=n(76904),i=n(82516),o=n(77762),a=n(88166),l=Object.freeze({delete:0,add:1,update:2}),c=Object.defineProperty,u=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,h=(e,t,n)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,m=(e,t,n)=>h(e,"symbol"!=typeof t?t+"":t,n);var g=class{constructor(e,t=!1){m(this,"items"),m(this,"isEmptyCache"),m(this,"_favoritesGoodsMap"),m(this,"_favoritesGoodsHashMap");const n=e.sort((e,t)=>{var n,r;return(null!=(n=t.timestamp)?n:0)-(null!=(r=e.timestamp)?r:0)}).map(e=>{var t,n,r;const s=(null==e?void 0:e.syncType)===l.delete,i=(null==e?void 0:e.syncType)===l.add;if(s)return e;let o=!1;return(null==(t=e.meta)?void 0:t.analitic)&&!e.analytics&&(e.analytics=((e,t)=>{for(var n in t||(t={}))d.call(t,n)&&h(e,n,t[n]);if(u)for(var n of u(t))p.call(t,n)&&h(e,n,t[n]);return e})({},e.meta.analitic),delete e.meta.analitic,o=!0),(null==(n=e.analytics)?void 0:n.tail_object)&&(e.analytics.tailObject=e.analytics.tail_object,delete e.analytics.tail_object,o=!0),(null==(r=e.analytics)?void 0:r.in_list_index)&&(e.analytics.inListIndex=Number(e.analytics.in_list_index),delete e.analytics.in_list_index,o=!0),o&&(e.needSync=!0,e.syncType=i?l.add:l.update),e});this.items=wb.helpers.deepClone(n),this.isEmptyCache=t,this._favoritesGoodsMap=null,this._favoritesGoodsHashMap=null}get count(){return this.items.length}get favoritesGoodsMap(){return null!=this._favoritesGoodsMap||(this._favoritesGoodsMap=this.items.reduce((e,t)=>(e.set(t.characteristicId,t),e),new Map)),this._favoritesGoodsMap}get favoriteGoodsHashMap(){if(null!=this._favoritesGoodsHashMap)return this._favoritesGoodsHashMap;const e=this.items.reduce((e,t)=>t.syncType!==l.delete?[...e,t.cod1S]:e,[]);return this._favoritesGoodsHashMap=new Set(e),this._favoritesGoodsHashMap}},f=n(34113),b=Object.defineProperty,y=(e,t,n)=>((e,t,n)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);const v="user_favorite_goods_{0}_v{1}";var w=class{constructor(){y(this,"uid"),y(this,"sort",null),y(this,"cacheModel",null),this._bindEvents()}get cacheKey(){return v.format(this.uid,2..toString())}get lastSyncCacheKey(){return"favorite_last_sync_dt_{0}_v{1}".format(this.uid,2..toString())}get tabsSyncCacheKey(){return"favorite_tabs_sync_v{0}".format(void 0,2..toString())}setKey(e){this.uid=e,this._checkOldCache(),this.cacheModel=null}async setSort(e){if(e&&null!=this.uid)try{this.sort=e;const t=await this._openIDb();await f.i.setItem(t,this.lastSyncCacheKey,{name:"sort",sortName:e})}catch(e){}}async getSort(){if(null==this.uid)return null;try{const e=await this._openIDb(),t=await f.i.getItem(e,this.lastSyncCacheKey,"sort");return(null==t?void 0:t.sortName)||null}catch(e){return this.sort}}async getLastSyncDt(){var e;if(null==this.uid)return-1;try{const t=await this._openIDb(),n=await f.i.getItem(t,this.lastSyncCacheKey,"sync_dt");return null!=(e=null==n?void 0:n.lastSyncDt)?e:-1}catch(e){return this.getLastSyncDtFromLocalStorage()}}getLastSyncDtFromLocalStorage(){var e;if(null==this.uid)return-1;const t=null!=(e=localStorage.getItem(this.lastSyncCacheKey))?e:-1;return parseInt(localStorage.hasItem(this.cacheKey)?t:"-1",10)}async setLastSyncDt(e){if(!(await this.getLastSyncDt()>=e||null==this.uid))try{const t=await this._openIDb();await f.i.setItem(t,this.lastSyncCacheKey,{name:"sync_dt",lastSyncDt:e})}catch(t){localStorage.setItem(this.lastSyncCacheKey,e.toString())}}async clearLastSyncDt(){try{const e=await this._openIDb();await f.i.removeItem(e,this.lastSyncCacheKey,"sync_dt")}catch(e){localStorage.removeItem(this.lastSyncCacheKey)}}getFavoriteHashMap(){var e;const t=wb.analitics.checkDataInSplitterServiceV2("common","ab_enableFavouriteSnippet","yes");return this.cacheModel?t?null==(e=this.cacheModel)?void 0:e.favoriteGoodsHashMap:null:(this.getFavoriteGoods(),null)}async getFavoriteGoods(e=!1){if(null==this.uid&&(this.cacheModel=new g([],!0)),!this.cacheModel){let e=await this._fetchFromIDb();null==e&&(e=localStorage.getObject(this.cacheKey)),this.cacheModel=null==e?new g([],!0):new g(e)}return e?this.cacheModel:new g(this.cacheModel.items.filter(e=>!e.needSync||e.needSync&&e.syncType!==l.delete),this.cacheModel.isEmptyCache)}async setFavoriteGoods(e){if(null==this.uid)return;this.cacheModel=null==e?new g([],!0):new g(e);await this._saveToIDb(e)||localStorage.putObject(this.cacheKey,e),localStorage.setItem(this.tabsSyncCacheKey,`${Date.now()}`)}contains(e){if(null==this.cacheModel)return!1;const t=this.cacheModel.favoritesGoodsMap.get(e);return null!=t&&!(t.needSync&&t.syncType===l.delete)}_checkOldCache(){for(let e=1;e<2;e++)localStorage.removeItem(v.format(this.uid,e.toString())),f.i.removeDb(v.format(this.uid,e.toString()))}_bindEvents(){window.addEventListener("storage",e=>{null!=e.key&&e.key!==this.tabsSyncCacheKey||(this.cacheModel=null,this.getFavoriteGoods())})}async _fetchFromIDb(){try{const e=await this._openIDb(),t=await f.i.getAll(e,this.cacheKey);return null!=t?t:[]}catch(e){return console.log(`[FAVS_STORAGE]: fetching from idb failed, reason=${e.message}`),null}}async _saveToIDb(e){try{const t=await this._openIDb(),n=null==t?void 0:t.transaction([this.cacheKey],"readwrite"),r=null==n?void 0:n.objectStore(this.cacheKey);null==r||r.clear();for(const t of e)null==r||r.put(t);return!0}catch(e){return console.log(`[FAVS_STORAGE]: saving to idb failed, reason=${e.message}`),!1}}async _openIDb(){const e=await f.i.openDb(`wb_${this.cacheKey}`,{onupgradeneeded:e=>{if(!e.objectStoreNames.contains(this.cacheKey)){e.createObjectStore(this.cacheKey,{keyPath:"characteristicId"}).createIndex("timestamp","timestamp",{unique:!1})}e.objectStoreNames.contains(this.lastSyncCacheKey)||e.createObjectStore(this.lastSyncCacheKey,{keyPath:"name"})},version:2});if(!e)throw new Error("Failed to open the IndexedDB.");return e}},S=n(8379);var _=class{static enrichGood(e,t,n,r){r&&(e.sortPromoIdx=r.sortPromoIdx,e.logs=r.logs||e.logs,e.isAdv=!!e.logs,e.through={zone:"wishlist",adv:e.logs?"true":"false"}),e.isOnePurchasePromoButtonEnabled=null==n?void 0:n.includes(e.nmId),e.isItemInBasket=t.includes(e.id)}static convertToFavoriteGoods(e,t){var n,r,s,o,a,l,c,u,d,p,h,m,g;const f=null==(n=e.sizes)?void 0:n.find(e=>e.optionId===t.characteristicId),b=null!=(r=null==f?void 0:f.price)?r:e.price,y=b&&!(0,S.RI)(b)&&null!=(o=null==(s=null==f?void 0:f.stocks)?void 0:s.some(e=>e.qty>0))&&o,v=20624===e.brandId||30624===e.siteBrandId,w=y?b.logistics:0,_=y?b.priceToShow/100:0,I=!wb.settings.b2bMode&&y?b.paymentDiscountAmount:0,C=!!y&&(wb.xnm.isDtypeFlagSet(e.dtype,i.iA.DBS)||wb.xnm.isDtypeFlagSet(e.dtype,i.iA.EDBS)),k=e.logs,P=null!=(u=null==(l=null==(a=e.sizes)?void 0:a.filter(e=>e.payload))?void 0:l[0])?u:null==(c=e.sizes)?void 0:c[0],E={nmId:e.id,cod1S:e.id,brandName:e.brand,characteristicId:t.characteristicId,meta:t.meta,analytics:t.analytics,id:t.characteristicId,goodsName:e.name,colorName:null==(p=null==(d=e.colors)?void 0:d[0])?void 0:p.name,onStock:y?1:0,star:e.rating,price:y?b.basic/100:0,priceWithSale:_,priceWithCouponAndDiscount:_,sale:y?b.sale:0,totalSale:y?b.sale:0,salePrice:_,targetUrl:null!=(h=t.targetUrl)?h:"",sizeName:null!=(m=null==f?void 0:f.origName)?m:"",stocks:null==f?void 0:f.stocks,timestamp:t.timestamp,deliveryHours:y&&f?f.time1+f.time2:void 0,isDbs:C,source:t.source,subjectId:e.subjectId,subjectParentId:e.subjectParentId,reviewRating:e.reviewRating,feedbacks:e.feedbacks,supplierId:e.supplierId,supplier:e.supplier,newlyArrived:y&&(1&t.source)>0,_rawCatalogModel:e,viewFlags:e.viewFlags,shouldShowOriginalMark:!v&&wb.xnm.isViewFlagSet(e.viewFlags,i._q.isOriginal),paymentDiscountAmount:I,premiumSale:e.premiumSale,showRedPrice:wb.xnm.isRedPrice(e.panelPromoId),logisticsCost:w,is2025LogisticCost:e.is2025LogisticCost,canBeBooking:wb.xnm.isDtypeFlagSet(e.dtype,i.iA.CC),whDtype:e.dtype,isPostpaidBooking:e.isPostpaidBooking,isVatRefundable:!1,vatPercent:null,isItemInBasket:!1,sortPromoIdx:-1,logs:k,isAdv:!!k,through:{zone:"wishlist",adv:k?"true":"false"},isOnePurchasePromo:e.isOnePurchasePromo,woSize:1===(null==(g=e.sizes)?void 0:g.length)&&""===P.name,get isDeleted(){return!(this.goodsName||this.brandName||this.colorName||this.sizeName)},get showDiscount(){return(this.price>0||this.priceWithCouponAndDiscount>0)&&this.price!=this.priceWithCouponAndDiscount}};return wb.settings.b2bMode&&(E.isVatRefundable=wb.xnm.isVatRefundable(e.viewFlags),E.vatPercent=wb.xnm.getVatPercent(e.viewFlags)),E}static convertFromAddModelToCacheItem(e,t){var n,r,s;const i=wb.analitics.analiticsInfoToListName(e),o={characteristicId:e.characteristicId,cod1S:e.cod1S,id:e.characteristicId,source:t,targetUrl:`${null!=(n=e.targetUrl)?n:""}|${null!=(r=e.iid)?r:1}|${i}|${e.logs}`,timestamp:Math.ceil(Date.now()/1e3),meta:e.meta,analytics:e.analytics};return(null==(s=o.meta)?void 0:s.shade)&&delete o.meta.shade,o}},I=Object.freeze({waitlist:1,poned:2,both:3}),C=n(27473),k=Object.defineProperty,P=(e,t,n)=>((e,t,n)=>t in e?k(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class E{constructor(e,t,n,r,s){P(this,"chrt_id"),P(this,"cod_1s"),P(this,"client_ts"),P(this,"op_type"),P(this,"type"),P(this,"target_url"),P(this,"meta_json"),P(this,"is_deleted"),P(this,"analytics_json"),this.chrt_id=+t,this.cod_1s=n,this.client_ts=r||Math.floor(Date.now()/1e3),this.op_type=e||1,this.type=s||2}static fromCache(e){var t,n;if(0===e.syncType)return E.toDelete(e.characteristicId);const r=new E(e.syncType===l.update?2:1,e.characteristicId,e.cod1S,e.timestamp,e.source),s=Number(null==(t=null==e?void 0:e.analytics)?void 0:t.inListIndex)||(null==(n=WbSpaModel.prototype.$analitic.getAnaliticsInfoFromTargetUrl((null==e?void 0:e.targetUrl)||""))?void 0:n.iid);if(r.client_ts>1e12&&(r.client_ts=Math.floor(r.client_ts/1e3)),r.target_url=e.targetUrl,e.meta&&(r.meta_json=JSON.stringify(e.meta)),e.analytics){const{logs:t,tailObject:n}=e.analytics;r.analytics_json=JSON.stringify({logs:t||"",tail_object:n||{},in_list_index:s||1,counter_id:4})}return r}static toDelete(e){return new E(3,e,0)}static convertFromSharedModelToCacheItem(e){const t={characteristicId:e.chrt_id,cod1S:e.cod_1s,targetUrl:e.target_url,timestamp:e.client_ts,source:e.type};try{t.meta=e.meta_json?JSON.parse(e.meta_json):null,t.analytics=e.analytics_json?JSON.parse(e.analytics_json):null}catch(e){t.meta=null}return t}}var T=E,O=Object.defineProperty,x=(e,t,n)=>((e,t,n)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);const{FAVS_STORAGE_URL:M}=C.A,A=M;var R=class{constructor(e,t){x(this,"_cacheHelper"),x(this,"_syncProcess",null),x(this,"debounceSync"),x(this,"$wbSpa"),this.$wbSpa=e,this._cacheHelper=t,this.debounceSync=wb.utils.debounce(this.sync.bind(this),3e3)}async _getOperationAsync(){return(await this._cacheHelper.getFavoriteGoods(!0)).items.filter(e=>e.needSync).map(e=>T.fromCache(e))}async _getAllAsync(){return(await this._cacheHelper.getFavoriteGoods()).items.map(e=>T.fromCache(e))}async sync(e){var t,n;if(!(null==(t=this.$wbSpa.$auth)?void 0:t.isAuth))return!1;this._syncProcess=null!=(n=this._syncProcess)?n:this._sync(e);try{return await this._syncProcess}catch(e){return console.error(`[WB_FAVS_SYNC]: ${e}`),!1}finally{this._syncProcess=null}}async _sync(e){return await navigator.locks.request("lock-fav-sync",async()=>{var t;const n=await this._cacheHelper.getLastSyncDt(),r=await this._getOperationAsync(),s=null==(t=this.$wbSpa.$services)?void 0:t.sessionService.getSession();try{const t=await this._doSync({ts:n,sessionId:s,operations:r,timeout:e});if(this._sendMetrics(t.state),0===t.state&&t.change_ts>0)return await this._updateProductsAsync(r,t);if(1===t.state){const e=await this._getAllAsync(),t=await this._doSync({ts:n,sessionId:s,operations:e,rememberMe:!0});if(0===t.state&&t.change_ts>0)return await this._updateProductsAsync(e,t)}else console.error(`[WB_FAVS_SYNC]: sync state:${t.state}`,{result:t,ts:n,deviceId:s,opLen:r.length,hasJwt:!0})}catch(e){console.error("[WB_FAVS_SYNC]: Error during sync",e)}return!1})}async _updateProductsAsync(e,t){return await this._cacheHelper.setFavoriteGoods(await this.mergeUpdatedAndCacheItems(e,t.result_set)),await this._cacheHelper.setLastSyncDt(t.change_ts),!0}async mergeUpdatedAndCacheItems(e,t){var n;const r=(null==(n=(await this._cacheHelper.getFavoriteGoods(!0)).items)?void 0:n.reduce((e,t)=>e.set(t.characteristicId,t),new Map))||new Map;return null==e||e.forEach(e=>{if(3===e.op_type)r.delete(e.chrt_id);else{const t=r.get(e.chrt_id);t&&(delete t.needSync,delete t.syncType)}}),null==t||t.forEach(e=>{const t=r.get(e.chrt_id);if(null==t?void 0:t.needSync){if(!e.is_deleted)return;if(1===t.op_type)return}e.is_deleted?r.delete(e.chrt_id):r.set(e.chrt_id,T.convertFromSharedModelToCacheItem(e))}),Array.from(r.values()).sort((e,t)=>t.timestamp-e.timestamp)}_doSync({ts:e,sessionId:t,operations:n,rememberMe:r=!1,timeout:s=1e4}){return this.$wbSpa.$httpClient.fetch(`${A}/sync?ts=${e}&device_id=${t}${r?"&remember_me=true":""}`,{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json","Wb-AppType":"site"},timeout:s,withAuthz:!0,withJwtToken:!0}).then(async e=>e.ok?e.json():{}).then(e=>(e.result_set&&(e.result_set=e.result_set[0]||[]),e))}_sendMetrics(e){try{fetch(`/webapi/logging/favs/metrics?status=${e}`,{method:"POST"})}catch(e){console.error(`[WB_FAVS_METRICS]: ${e}`)}}},D=Object.defineProperty,L=Object.getOwnPropertySymbols,B=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,j=(e,t,n)=>t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,F=(e,t,n)=>j(e,"symbol"!=typeof t?t+"":t,n);class U{constructor(){F(this,"_cacheHelper"),F(this,"_enrichedFavoriteItems"),F(this,"dumpFav"),F(this,"_initialSyncInProgress"),F(this,"isSynced"),F(this,"$wbSpa"),this.$wbSpa=WbSpaModel.prototype,this._cacheHelper=new w,this._setKey(),this.dumpFav=new R(this.$wbSpa,this._cacheHelper),this._enrichedFavoriteItems=new Map,this.isSynced=!1,this._bindEvents(),localStorage.clearStartsWith("_favs_synced_v3")}_setKey(){this.$wbSpa.$auth.isAuth&&this._cacheHelper.setKey(this.$wbSpa.$auth.um.userUid||"")}get limit(){var e,t,n,r,s,i,o,a,l,c,u,d,p;return"subscribed"===(null==(e=this.$wbSpa.$user.getUserGradeFromCache())?void 0:e.wbClub)&&"ru"===wb.settings.currentLocale&&wb.global.settings.switches.enableWbLimitInCartOn1ShK?(null==(r=null==(n=null==(t=wb.global.settings)?void 0:t.mobileAppVariables)?void 0:n.numbers)?void 0:r.favoritesLimitWbClub)?null==(o=null==(i=null==(s=wb.global.settings)?void 0:s.mobileAppVariables)?void 0:i.numbers)?void 0:o.favoritesLimitWbClub:4e3:(null==(c=null==(l=null==(a=wb.global.settings)?void 0:a.mobileAppVariables)?void 0:l.numbers)?void 0:c.favoritesLimitDefault)?null==(p=null==(d=null==(u=wb.global.settings)?void 0:u.mobileAppVariables)?void 0:d.numbers)?void 0:p.favoritesLimitDefault:2e3}async syncFromServerAsync(){if(this.isSynced||this._initialSyncInProgress)return;this._initialSyncInProgress=!0;const e=await this._loadRawGoodsFromDumpAsync();return this._initialSyncInProgress=!1,e}async getWlArrivedCatalogModelAsync(){window._debug&&console.time("buildWlArrivedCatalogModel");try{const[e,t]=await Promise.all([this._loadFavoriteGoodsAsync(),(0,o.m)()]),n=new t(e);return n.setOnlyWlArrived(!0).setSorting(1).setGoods(Number.MAX_SAFE_INTEGER).complete(),{goods:n.favoriteGoods}}catch(e){return console.error(e),{goods:[],isEmptyCache:!0}}finally{window._debug&&console.timeEnd("buildWlArrivedCatalogModel")}}async getSimplifiedModelAsync(){return await this.syncFromServerAsync(),await this._cacheHelper.getFavoriteGoods()}getFavoriteHashMap(){return this._cacheHelper.getFavoriteHashMap()}async getFavsDataAsync(e="",t=!1,n=null,r=!1){var s,i,a,l;window._debug&&console.time("buildFavModel");const c=new URLSearchParams(e),u=null!=(i=null!=(s=c.get("sort"))?s:await this._cacheHelper.getSort())?i:"popular",d=null!=(a=c.get("search"))?a:"",p="true"==(null!=(l=c.get("wlArrived"))?l:c.get("wlarrived")),h="popular"===u;this._cacheHelper.setSort(c.get("sort")),t&&[...this._enrichedFavoriteItems].forEach(([e,t])=>{t.sortPromoIdx=-1});try{const[e,t,{FavoriteGoodsSorterModel:s}]=await Promise.all([this._loadFavoriteGoodsAsync(h,r),(0,o.m)(),this.$wbSpa.$moduleLoader.loadModuleAsync("sorterModel")]),i=new t(e,new s(u,window.location.href));return i.setOnlyWlArrived(p).setSearch(d).setSorting().setGoods(n).complete(),i}catch(e){return console.error(e),{isEmptyCache:!0}}finally{window._debug&&console.timeEnd("buildFavModel")}}async addToFavs(e,t=!1,n={}){if(!this.$wbSpa.$auth.isAuth)throw new s.UnauthorizeError;return this.sendToWishlistStat(e,n,!0),t?this._addToPoned(e):this._addToWl(e)}async sendToWishlistStat(e,t,n=!0){var s,o,a,l,c,u,d,p,h,m,g,f,b;if(window.wba)try{const y=n?"add_to_wishlist":"remove_from_wishlist",v=t&&t.sizes||e&&e.sizes||[];let w={stores:null==(s=v.find(t=>t.ch==e.characteristicId))?void 0:s.stocks,salePrice:Number((null==t?void 0:t.salePrice)||(null==e?void 0:e.salePrice)||0)};if(!w.stores){w=(await wb.xnm.getInfoForWbaStat([{nmId:e.cod1S,size:e.characteristicId}])).get(e.cod1S)}const S="URV"===e.l||"URA"===e.l,_=this.$wbSpa.$analitic.getState(),I={},C=(0,r.cI)(),k=this.$wbSpa.$analitic.getLocationFromEntrypoint(null==(o=C.currentRoute)?void 0:o.name),P="Cart"===k,E="Favorites"===k,T=e.isBasketProduct||t.isBasketProduct,O=null==t?void 0:t.isSharedProduct;P&&T?(I.type_add=n?"cart":void 0,I.type_remove=n?void 0:"cart"):E?(I.type_add=n?"cancel_wishlist_from_remove":void 0,I.type_remove=n?void 0:"wishlist"):O?(I.type_add=n?"shared_cart_snippet":void 0,I.type_remove=n?void 0:"shared_cart_snippet"):(I.type_add=n?"list":void 0,I.type_remove=n?void 0:"list");const x=this.$wbSpa.$analitic.getAnaliticsInfoFromTargetUrl(e.targetUrl),M=()=>this.$wbSpa.$analitic.analiticsInfoToListName(e.l?e:x),A=()=>this.$wbSpa.$analitic.getTailObjectFromAnalyticsInfo(e.l?e:x),R=this.$wbSpa.$analitic.getDtypeProp(null==w?void 0:w.stores),D=this.$wbSpa.$analitic.getDeliveryTypeForStat(R),L=this.$wbSpa.$analitic.getStoreProp(null==w?void 0:w.stores),B=this.$wbSpa.$analitic.getCategory({isC2C:(null==t?void 0:t.isC2C)||(null==e?void 0:e.isC2C),isDigital:wb.xnm.isDtypeFlagSet(R||e.whDtype,i.iA.WBD)});if(["CSD","CAD","WLC","WLA"].includes(e.l)){const t=WbSpaModel.prototype.$analitic.getTermsFromTailObject(e.l);e.t=t.category,e.t1=t.id_category,e.t2=t.discount_name}const $={id:e.cod1S,chrt:e.characteristicId,quantity:e.quantity,price:null==w?void 0:w.salePrice,affiliation:null!=(a=null==t?void 0:t.supplierId)?a:e.supplierId,deliveryType:D,inListIndex:e.iid||1,listName:S?_.listName:M(),name:null!=(l=null==t?void 0:t.name)?l:e.goodsName,brand:null!=(c=null==t?void 0:t.brand)?c:e.brandName,category:B,rating:null!=(u=null==t?void 0:t.reviewRating)?u:e.reviewRating,storeId:null!=(d=null==e?void 0:e.storeId)?d:L,feedbacksCount:null!=(p=null==t?void 0:t.feedbacks)?p:e.feedbacks,subjectId:null!=(h=null==t?void 0:t.subjectId)?h:e.subjectId,subjectParentId:null!=(m=null==t?void 0:t.subjectParentId)?m:e.subjectParentId,logs:(null==t?void 0:t.logs)||(null==e?void 0:e.logs)||(null==x?void 0:x.logs)||(null==(g=null==e?void 0:e.analytics)?void 0:g.logs),tailObject:A(),is_available:(null==t?void 0:t.soldOut)||e.soldOut?0:1,actualStimulusList:e.actualStimulusList};this.$wbSpa.$analitic.isSearchTerms(e.l?e:x)&&(null==(f=null==e?void 0:e.analytics)?void 0:f.tailObject)&&($.tailObject.terms=e.analytics.tailObject.terms),(null==(b=null==e?void 0:e.analytics)?void 0:b.isDecodedAnalytics)&&($.tailObject=e.analytics.tailObject.loc?e.analytics.tailObject:{},$.listName=e.l?this.$wbSpa.$analitic.analiticsInfoToListName(e):this.$wbSpa.$analitic.analiticsInfoToListName({})),this.$wbSpa.$analitic.sendWbaEcomStat(y,[$],I),this.$wbSpa.$user.resetTimeForUserVector()}catch(e){console.error(e)}}deleteFromFavs(e,t,n=!1){return this._removeFromPoned(e,t,n)}isAddedToFavs(e){return this.syncFromServerAsync(),this._cacheHelper.contains(e)}async deleteManyFromFavsAsync(e){const t=await this._cacheHelper.getFavoriteGoods(!0);e.forEach(e=>{const n=t.favoritesGoodsMap.get(e.characteristicId);n&&(n.needSync=!0,n.syncType=l.delete)});const n=[...t.favoritesGoodsMap.values()];await this._cacheHelper.setFavoriteGoods(n);const r=n.every(e=>e.syncType===l.delete);return this.dumpFav.debounceSync(),r}async moveManyToBasketAsync(e){const t=this.$wbSpa.$services.cartService.addManyItems(e);return(null==t?void 0:t.isSuccess)&&WbSpaModel.prototype.$moduleLoader.execModule("bottomNotificationPanel","showNotification",[0,a.R.t("favorites.productAddedToBasket")]),t}_bindEvents(){this.$wbSpa.$eventBus.addEventListener("GeoUpdated",()=>this._enrichedFavoriteItems.clear()),this.$wbSpa.$eventBus.addEventListener("onUserAuth",this._setKey.bind(this))}async _loadFavoriteGoodsAsync(e,t){try{const n=await this._loadRawGoodsFromDumpAsync(4e3,t);if(!n)return{isEmptyCache:!0,items:[]};if(n.isEmptyCache)return{isEmptyCache:!0,items:[]};const r=n.items;return r.length<1?{isEmptyCache:!1,items:[]}:this._enrichGoodsAsync(r,e)}catch(e){return console.error(e),wb.spa.logError(e,"[FAVS_SERVICE]: failed _loadFavoriteGoodsAsync"),null}}async _enrichGoodsAsync(e,t){const n=wb.xnm.show2025Logistics(),r=[...this._enrichedFavoriteItems];r.some(([e,t])=>{var r;return(null!=(r=t.is2025LogisticCost)&&r)!==n})&&this._enrichedFavoriteItems.clear();const s=t&&r.every(([e,t])=>-1===t.sortPromoIdx);let i={},o=[];const a=e.filter(e=>!this._enrichedFavoriteItems.has(e.characteristicId));a.length>0?[i,o]=await Promise.all([wb.xnm.getCatalogCards(a.map(e=>e.cod1S),!1,!0,!0),s?wb.xnm.getSMergerXnmProducts(e.sort((e,t)=>t.timestamp-e.timestamp).map(e=>e.cod1S)):Promise.resolve([])]):s&&(o=await wb.xnm.getSMergerXnmProducts(e.sort((e,t)=>t.timestamp-e.timestamp).map(e=>e.cod1S)));const l=o.reverse().map((e,t)=>({cod1S:e.id,sortPromoIdx:t,logs:e.logs})).toMap(e=>e.cod1S),c=this.$wbSpa.$services.cartService.getItems().map(e=>e.characteristicId),u=this.$wbSpa.$services.onePurchasePromoService.getNmList();return{isEmptyCache:!1,items:e.reduce((e,t)=>{var n;const r=i[t.cod1S],s=this._enrichedFavoriteItems.get(t.characteristicId);if(r||s){const i=null!=(n=s&&((e,t)=>{for(var n in t||(t={}))B.call(t,n)&&j(e,n,t[n]);if(L)for(var n of L(t))N.call(t,n)&&j(e,n,t[n]);return e})({},s))?n:_.convertToFavoriteGoods(r,t);_.enrichGood(i,c,u,l.get(t.cod1S)),e.push(i),(!s||l.size>0)&&this._enrichedFavoriteItems.set(i.characteristicId,i)}return e},[])}}_addToPoned(e){return this._addThroughCache(e,I.poned)}async getFavsCount(){return(await this._cacheHelper.getFavoriteGoods()).count}async _removeFromPoned(e,t,n=!1){var s;const i=(await this._cacheHelper.getFavoriteGoods(!0)).items;i.forEach(t=>{t.cod1S!==e.cod1S||n?t.characteristicId===e.characteristicId&&(t.needSync=!0,t.syncType=l.delete):(t.needSync=!0,t.syncType=l.delete)}),await this._cacheHelper.setFavoriteGoods(i),null==(s=this.dumpFav)||s.debounceSync();(0,r.Z1)().favsService.sendToWishlistStat(e,t,!1)}_addToWl(e){return this._addThroughCache(e,I.waitlist)}async _addThroughCache(e,t){var n;if(!e.isFromCache){if((await this._cacheHelper.getFavoriteGoods()).count>=this.limit)throw new s.KnownServerError(a.R.t("favorites.ponedMaxStorage").format(this.limit))}const r=(await this._cacheHelper.getFavoriteGoods(!0)).items;let i=r.find(t=>t.characteristicId==e.characteristicId);i?i.timestamp=Math.ceil(Date.now()/1e3):(i=_.convertFromAddModelToCacheItem(e,t),r.push(i)),i.needSync=!0,i.syncType=l.add,await this._cacheHelper.setFavoriteGoods(r),null==(n=this.dumpFav)||n.debounceSync()}_updateSyncStatus(e){$.observable(this).setProperty({isSynced:e}),WbSpaModel.prototype.$eventBus.dispatchEvent(new CustomEvent("favouritesSynced"))}async _loadRawGoodsFromDumpAsync(e,t){return t||(await this.dumpFav.sync(e),this._updateSyncStatus(!0)),await this._cacheHelper.getFavoriteGoods()}resetCache(){this._enrichedFavoriteItems.clear()}static richPrototype({prototype:e}){Object.setPrototypeOf(U.prototype,e)}static factory(e){return e&&U.richPrototype(e),new U}}},65607:function(e,t,n){"use strict";var r=n(27473),s=n(18136),i=n(88166),o=Object.defineProperty,a=(e,t,n)=>((e,t,n)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);const{INSTALLMENTS_AGGREGATOR_URL:l}=r.A;class c extends WbSpaModel{constructor(){super(),a(this,"baseUrl"),a(this,"userId"),a(this,"INST_STORAGE_KEY"),a(this,"instalmentInfo"),this.baseUrl=l,this.userId=this.$user.getUid(),this.INST_STORAGE_KEY=`user-avail-inst-${this.userId}`,this.instalmentInfo=localStorage.getObject(this.INST_STORAGE_KEY),this.syncUserInfo=this.syncUserInfo.bind(this),this.$eventBus.addEventListener("onUserAuth",this.syncUserInfo)}syncUserInfo(){this.userId=this.$user.getUid(),this.INST_STORAGE_KEY=`user-avail-inst-${this.userId}`,this.instalmentInfo=localStorage.getObject(this.INST_STORAGE_KEY)}async getAvailableInstallment(){var e,t;if("0"===this.userId)return null;if("ru"!==wb.settings.currentLocale||"RUB"!==this.$user.getCurrency())return null;if(!(null==(e=this.instalmentInfo)?void 0:e.type)||this.instalmentInfo.ts<Date.now()){const e={ts:Date.now()+36e5,type:""};try{let n=await this.$httpClient.fetch(this.baseUrl+"/api/v1/installment",{credentials:"include",timeout:2e3,headers:{"site-locale":"ru","wb-apptype":"site","wb-appversion":WbSpaModel.appVersion},withJwtToken:!0,withAuthz:!0});if(n.ok){const r=await n.json();e.type=null==(t=r.installmentProduct)?void 0:t[0],e.type!==s.c.bpl&&e.type!==s.c.cwb||"ru"===wb.settings.currentLocale||(e.type=""),localStorage.putObject(this.INST_STORAGE_KEY,e),this.instalmentInfo=e}}catch(e){return console.log("INST_AGGREGATOR]:",e),this.instalmentInfo}}return this.instalmentInfo}async getLimit(e){const t=e+"options";if(this.instalmentInfo&&this.instalmentInfo[t])return this.instalmentInfo[t];let n=null;return"pdl"===e&&(n=await this.$httpClient.fetchJSON("/webapi/account/installmentoptions/pdl",{method:"POST"},{timeout:2e3,useProccessResponse:!0}).catch(()=>{var e;return(null==(e=this.instalmentInfo)?void 0:e[t])||{limit:0,productType:[]}})),this.instalmentInfo||(this.instalmentInfo={ts:Date.now()+6e5}),this.instalmentInfo[t]=n,localStorage.putObject(this.INST_STORAGE_KEY,this.instalmentInfo),this.instalmentInfo[t]}async nextPaymentInfo(e=""){var t;if(this.instalmentInfo&&this.instalmentInfo.nextPayment||this.instalmentInfo&&null===(null==(t=this.instalmentInfo)?void 0:t.nextPayment))return this.instalmentInfo.nextPayment;let n;try{const t=await this.$httpClient.fetchJSON("/webapi/installment/withcommission/next",{method:"POST"},{useProccessResponse:!0}),r=null==t?void 0:t.paymentsTable.filter(e=>!e.isExecuted)[0];if(t&&r){const s=new Date(r.executeDate),o=(new Date).daysBetween(s);let a="";0===o?a=i.R.t("common.today"):1===o?a=i.R.t("common.tomorrow"):2===o&&(a=i.R.t("common.dayAfterTomorrow")),n={date:r.executeDate,amount:r.amount,scheduleId:t.scheduleId,isOverdue:r.isOverdue,instType:e,textDay:a}}}catch(e){return}return this.instalmentInfo||(this.instalmentInfo={ts:Date.now()+6e5}),this.instalmentInfo.nextPayment=n,localStorage.putObject(this.INST_STORAGE_KEY,this.instalmentInfo),this.instalmentInfo.nextPayment}resetInstalmentInfo(){localStorage.removeItem(this.INST_STORAGE_KEY),this.instalmentInfo=null}static richPrototype({prototype:e}){Object.setPrototypeOf(c.prototype,e)}static factory(e){return e&&c.richPrototype(e),new c}}t.A=c},26620:function(e,t,n){"use strict";n.d(t,{A3:function(){return c},M$:function(){return o},Qg:function(){return r},X1:function(){return i},dY:function(){return l},ej:function(){return s},tX:function(){return a}});const r="all-poo-fr-v11.json",s="all-poo-v11.json.hash",i={selfTechPostamat:86},o=[{dtype:i.selfTechPostamat,min:1e7,max:11e6}],a={dbName:"wb_allpickups_v2",stores:[{name:"pickups_active",keyPath:"id"},{name:"hashes",keyPath:"key"}],dbVersion:1},l={pvz:1,pvzTech:2,pvzEmployeeOnly:3,pvzFormerBrandedFranchise:5,pvzBrandedFranchise:7,ppvzBrandedPartner:8,ppvzPartner:9,sortCenter11:11,sortCenter12:12,sortCenter13:13,ppvzPartnerPost:14,sortCenter15:15,sortCenter16:16,ppvzShop:17,ppvzDarkStore:24,ppvzSimple:28,ppvzAid:30,ppvzKiosk:31,ppvzPostamat:32,ppvzEmployeeOnly:33,ppvzNew:34,ppvzBank:35,sortCenterVirtual:37,pvzBelarusMail:46,pvzArmeniaMail:48},c=(l.pvz,l.pvzTech,l.pvzEmployeeOnly,l.pvzFormerBrandedFranchise,l.pvzBrandedFranchise,l.ppvzBrandedPartner,l.sortCenter11,l.sortCenter12,l.sortCenter13,l.ppvzPartnerPost,l.sortCenter16,l.ppvzSimple,l.ppvzKiosk,l.ppvzEmployeeOnly,l.ppvzNew,l.pvzBelarusMail,l.pvzArmeniaMail,l.sortCenterVirtual,l.sortCenter11,l.sortCenter12,l.sortCenter13,l.sortCenter15,l.sortCenter16,l.sortCenterVirtual,l.pvz,l.pvzTech,l.pvzEmployeeOnly,l.pvzFormerBrandedFranchise,l.pvzBrandedFranchise,l.ppvzBrandedPartner,l.ppvzPartnerPost,l.ppvzSimple,l.ppvzKiosk,l.ppvzEmployeeOnly,l.ppvzNew,l.pvzBelarusMail,l.pvzArmeniaMail,i.selfTechPostamat,[l.pvzEmployeeOnly,l.ppvzEmployeeOnly]);l.pvzTech},14326:function(e,t,n){"use strict";var r=n(27473),s=n(88927),i=n(76904),o=n(74929),a=n(26620),l=n(53527),c=n(88166),u=n(47184),d=Object.defineProperty,p=(e,t,n)=>((e,t,n)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);const{USER_GEO_DATA_URL:h}=r.A,m="wb_delivery-points-";class g{constructor(){p(this,"checkLocalePromises",{}),p(this,"locationWorker"),p(this,"worker"),p(this,"deliveryPoints"),p(this,"updateWorkerSearchParamsDebounced",null)}init(){this.startJobSyncLocations(),this.startJobSyncPickups(),this.updateWorkerSearchParamsDebounced||(this.updateWorkerSearchParamsDebounced=(0,u.debounce)(this.updateWorkerSearchParams.bind(this),500))}async startJobSyncLocations(){var e;this.locationWorker=await l.r.create(wb.settings.workers.location),null==(e=this.locationWorker)||e.postMessage({action:wb.global.settings.switches.enableSyncLocationsDbsV2?"resume":"pause"}),this.updateWorkerSearchParams().then(()=>{var e;wb.global.subscribe(e=>{var t;null==(t=this.locationWorker)||t.postMessage({action:e.switches.enableSyncLocationsDbsV2?"resume":"pause"})}),null==(e=this.locationWorker)||e.postMessage({action:"start"})}),WbSpaModel.prototype.$eventBus.addEventListener("onUserAuth",()=>{Promise.all([this.getDeliveryPointsAsync("self"),this.getDeliveryPointsAsync("courier")])}),WbSpaModel.prototype.$eventBus.addEventListener("onBeforeSignOut",()=>{var e;null==(e=this.locationWorker)||e.postMessage({action:"setSearchParams",locationData:[]})})}async getMinCheck(e,t){var n;try{const r=await(null==(n=this.locationWorker)?void 0:n.postMessage({action:"getMinCheck",addressId:e,storeId:t}));return null!=r?r:null}catch(e){return console.error("Error in getMinCheck:",e),null}}async startJobSyncPickups(){var e;this.worker=await l.r.create(wb.settings.workers.syncPickups,{handleVisibilityChange:!0}),null==(e=this.worker)||e.postMessage({action:"startSync",data:{hashUrl:wb.helpers.url.urlStaticData(a.ej),pickupsUrl:wb.helpers.url.urlStaticData(a.Qg),currentLocale:wb.settings.currentLocale}})}openPickupDb(){return(0,s.MH)().openDb(a.tX.dbName,{version:a.tX.dbVersion,onupgradeneeded:e=>a.tX.stores.forEach(t=>{e.objectStoreNames.contains(t.name)||e.createObjectStore(t.name,{keyPath:t.keyPath})})})}restoreOriginalId(e){for(const{min:t,max:n,dtype:r}of a.M$)if(t<=e&&e<n)return{id:e-t,dtype:r};return{id:e}}getAddressSignData(e){const t=e.lat||e.latitude,n=e.lon||e.longitude;return`officeId=${"self"===e.deliveryType?e.addressId:e.officeId}&dest=${e.dest}&sign=${e.sign}&lat=${t}&lng=${n}`}getPickupAsync(e,t){const n=(0,s.dU)(),r=(0,s.MH)(),i=[this.openPickupDb().then(t=>r.getItem(t,a.tX.stores[0].name,e))];return t&&i.push(n.delay(t,()=>{throw new Error("idb get office timeout")})),Promise.race(i)}async getPickupsFromDbOrStatic(){var e;const t=(0,s.MH)(),n=await this.openPickupDb(),[r,{value:i}={}]=await Promise.all([t.getAll(n,a.tX.stores[0].name),t.get(n,"hashes","wb_allpickups_hash")]);return(null==r?void 0:r.length)&&i?r:null==(e=this.worker)?void 0:e.postMessage({action:"getPickupsFromStatic",data:{pickupsUrl:wb.helpers.url.urlStaticData(a.Qg),currentLocale:wb.settings.currentLocale,timeout:15e3}})}async getActivePickupsAsync(e={}){const t=(0,o.c)(),n=(0,s.Z1)(),[r,i]=await Promise.all([this.getPickupsFromDbOrStatic(),t.isAuth?n.userData.getUserDataAsync():Promise.resolve({})]);return[...this.filterPickups(r,null==i?void 0:i.userInfo,e)]}*filterPickups(e,{isEmployeeSynced:t,houseKeeping:n,isPickupPointOwner:r,id:i}={},l={}){const c=(0,o.c)(),u=(0,s.u4)();if(!e||!Symbol.iterator in Object(e))return;const d=u.getUserGradeFromCache();for(const s of e){s.isHkn&&!n||a.A3.includes(s.typePoint)&&!t||s.isSortCenter&&!(r||t)||(null==l?void 0:l.dest)&&s.dest3!=l.dest||"changeOffice"===(null==l?void 0:l.source)&&(2===s.status||s.isExternalPostamat||31===s.typePoint)||(null==l?void 0:l.filterDeliveryPoints)&&!l.filterDeliveryPoints(s)||"basketC2C"===(null==l?void 0:l.source)&&!this.allowC2C(s)||"basketSpecialDelivery"===(null==l?void 0:l.source)&&!this._allowSpecialDelivery(s)||36===(null==s?void 0:s.typePoint)&&(!d||!c.isAuth||!wb.global.settings.switches.enableSmartPVZ||!WbSpaModel.prototype.checkMobileRange(i,wb.global.settings.mobileAppVariables.objects.smartPVZRange))||(yield s)}}allowC2C(e){return"ru"===e.country&&this.isPickupPoint(e)}isPickupPoint(e){return!!e.typePoint&&[1,2,3,4,5,6,7,8,9,10,14].includes(e.typePoint)}_allowSpecialDelivery(e){return"ru"===e.country&&14==e.typePoint}get removeUrl(){return(0,s.Z1)().cartService.publicBasketApiUrl+"/spa/removeaddress"}get editPooUrl(){return(0,s.Z1)().cartService.publicBasketApiUrl+"/spa/poos/create?version=1"}get editCourierAddressUrl(){return(0,s.Z1)().cartService.publicBasketApiUrl+"/spa/yandexaddress/editajax?version=2"}get deliveryPointsUrl(){return(0,s.Z1)().cartService.publicBasketApiUrl+"/spa/deliverypoints"}getDeliveryPointsAsync(e,t){const n=(0,s.dU)(),r=(0,i.getHttpClient)(),o=(0,s.u4)();return new Promise((s,i)=>{const a=Object.assign({deliveryWay:e,currency:o.getCurrency()},t);r.fetchJSON(this.deliveryPointsUrl,{method:"POST",body:n.objectSerializer(a),credentials:"include"},{timeout:2e3,useProccessResponse:!0}).then(t=>{const n=this._updateDeliveryPoints(t,e);s(n)}).catch(t=>{console.log(t.message);let n=this.restoreDeliveryPoints(e);n&&s(n)})})}_updateDeliveryPoints(e,t){const n=[...e,...this.restoreDeliveryPoints(t).filter(e=>e._local)].reduce((e,t)=>{const n=e.findIndex(e=>e.addressId===t.addressId);return-1===n?e.push(t):e[n]._local=e[n]._local&&t._local,e},[]);return this.backupDeliveryPoints(n,t),this._syncDeliveryPoints(n.filter(e=>e._local).reverse(),t),n}async _syncDeliveryPoints(e,t){for(let n=0;n<e.length;n++)await this.saveAddressAsync(e[n],t)}get(e,t){var n;const r=null==(n=this.restoreDeliveryPoints(t))?void 0:n.find(t=>t.addressId==e);return this.checkLocale(r,t),r}checkLocale(e,t){if(e&&e._local){if(this.checkLocalePromises[e.addressId])return this.checkLocalePromises[e.addressId];this.checkLocalePromises[e.addressId]=this._syncDeliveryPoints([e],t).then(()=>this.checkLocalePromises[e.addressId]=void 0)}}getByCoordinates(e,t,n){return["self","courier"].forEach(r=>{var s;const i=null==(s=this.restoreDeliveryPoints(r))?void 0:s.find(r=>r.lat==e&&r.lon==t&&r.address===n);if(i&&i._local&&this._syncDeliveryPoints([i],r),i)return i}),null}get _key(){const e=(0,o.c)(),t=(0,s.Z1)(),n=e.isAuth?e.um.userUid:t.sessionService.getSession();return`${m}_${n}`}backupDeliveryPoints(e,t){var n;this.deliveryPoints[t]=e;const r=this._key;localStorage.putObject(r,this.deliveryPoints),Object.entries(localStorage).filter(e=>e[0].startsWith(m)&&e[0]!==r).forEach(e=>{localStorage.removeItem(e[0])}),null==(n=this.updateWorkerSearchParamsDebounced)||n.call(this)}restoreDeliveryPoints(e){var t,n;return this.deliveryPoints=null!=(t=localStorage.getObject(this._key))?t:{},this.deliveryPoints.self||(this.deliveryPoints.self=[]),this.deliveryPoints.courier||(this.deliveryPoints.courier=[]),[...this.deliveryPoints.courier,...this.deliveryPoints.self].forEach(e=>{e.latitude&&e.longitude||!e.lat||!e.lon||(e.latitude=e.lat,e.longitude=e.lon)}),null!=(n=this.deliveryPoints[e])?n:[]}async updateWorkerSearchParams(){var e;const t=[...this.restoreDeliveryPoints("self"),...this.restoreDeliveryPoints("courier")].map(e=>{var t;return{id:e.addressId.toString(),dest:null==(t=e.dest)?void 0:t.toString()}});await(null==(e=this.locationWorker)?void 0:e.postMessage({action:"setSearchParams",locationData:t}))}async add(e,t){const n=(0,i.getHttpClient)();let r=this.restoreDeliveryPoints(t);const s=this.convertModel(e,t);if(!r.find(e=>(null==e?void 0:e.addressId)==s.addressId)){if("courier"===t){const e=await n.fetchJSON(`${h}get-office?latitude=${s.lat}&longitude=${s.lon}`,{},{timeout:3e3,nullOnError:!0});e&&Object.assign(s,e)}r.unshift(s),this.backupDeliveryPoints(r,t)}return this.saveAddressAsync(s,t),r}remove(e,t){let n=this.restoreDeliveryPoints(t);return n=n.filter(t=>t.addressId!=e),this.backupDeliveryPoints(n,t),this.removeAddressAsync(e,t),n}removeAddressAsync(e,t){const n=(0,s.dU)();(0,i.getHttpClient)().fetchJSON(this.removeUrl,{method:"POST",body:n.objectSerializer({addressId:e,deliveryWay:t}),credentials:"include"},{useProccessResponse:!0}).then(e=>{this.backupDeliveryPoints(e,t)})}saveAddressAsync(e,t){const n=(0,i.getHttpClient)(),r=(0,s.dU)(),o="self"===t?{"Item.AddressId":e.addressId}:e;return n.fetchJSON(this.dataUrl(t),{method:"POST",credentials:"include",body:r.objectSerializer(o,new URLSearchParams,!0)},{useProccessResponse:!0}).then(e=>(this.backupDeliveryPoints(e,t),e))}dataUrl(e){return"self"===e?this.editPooUrl:this.editCourierAddressUrl}convertModel(e,t){if("courier"===t){let n=Object.assign({},e);return n._local=!0,n.deliveryType=t,n.addressId=btoa(wb.helpers.generateGuid().slice(12)),n.address=`${n.city?n.city:n.province}, `,n.area&&!n.city&&(n.address+=`${n.area}, `),n.street&&(n.address+=`${n.street}, `),n.home&&(n.address+=`${c.R.t("userAddress.addressDetails.home",{home:n.home})}, `),n.flat&&!n.isPrivateHouse&&(n.address+=`${c.R.t("userAddress.addressDetails.flat",{flat:n.flat})}, `),n.entrance&&""===n.entrance.trim()?n.entrance=null:n.entrance&&(n.address+=`${c.R.t("userAddress.addressDetails.entrance",{entrance:n.entrance})}, `),n.doorCode&&""===n.doorCode.trim()?n.doorCode=null:n.doorCode&&(n.address+=`${c.R.t("userAddress.addressDetails.doorCode",{doorCode:n.doorCode})}, `),n.floor&&""===n.floor.trim()?n.floor=null:n.floor&&(n.address+=`${c.R.t("userAddress.addressDetails.floor",{floor:n.floor})}, `),n.address=n.address.slice(0,-2),n.lat||(n.lat=n.latitude),n.lon||(n.lon=n.longitude),n}if("self"===t)return{_local:!0,address:e.address,addressId:e.id,lat:e.coordinates[0],lon:e.coordinates[1],workTime:e.workTime,deliveryType:t,pointTypeName:this.getPointTypeName(e.dtype||e.typePoint),status:e.status,rate:e.rate,deliveryPrice:$.views.helpers.priceFromRub(e.deliveryPrice,!0),country:e.country,dest:e.dest,sign:e.sign,props:e.props}}getPointTypeName(e){switch(e){case 63:return c.R.t("delivery.points.scWarehouse");case 31:return c.R.t("delivery.points.kiosk");case 36:return c.R.t("delivery.points.smartPvz");default:return c.R.t("delivery.points.pickupPoint")}}static richPrototype({prototype:e}){Object.setPrototypeOf(g.prototype,e)}static factory(e){return e&&g.richPrototype({prototype:e}),new g}}t.A=g},1568:function(e,t,n){"use strict";n.d(t,{A:function(){return T}});var r=n(27473),s=n(65644);wb.currencies=s.Q2,$.views.helpers({wbCurrencies:s.dt,getIsoCode:s.BD}),$.views.converters({isoCode:s.BD,currencySign:s.lD});var i=n(7838),o=n(28288),a=n(74929),l=n(34113);var c=Object.defineProperty,u=Object.defineProperties,d=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,g=(e,t,n)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,f=(e,t)=>{for(var n in t||(t={}))h.call(t,n)&&g(e,n,t[n]);if(p)for(var n of p(t))m.call(t,n)&&g(e,n,t[n]);return e},b=(e,t)=>u(e,d(t)),y=(e,t,n)=>g(e,"symbol"!=typeof t?t+"":t,n);const{USER_GEO_DATA_URL:v,FIN_PERSON_INSTALLMENT_URL:w}=r.A,S="_sys_auth",_="user-balance",I=w,C=["16809639","34125211","19089801"],k="https://user-grade.wildberries.ru/api",P=[i.s8.Rejected,i.s8.Closed,i.s8.Blocked,i.s8.BlockedSystem,i.s8.BlockedSystemClose,i.s8.BlockedUser],E=class e{constructor(){var t;y(this,"balance"),y(this,"brokerInstallmentConfig"),y(this,"brokerInstallmentStatus"),y(this,"userInfo"),y(this,"userOrderCancelPrices"),y(this,"_balanceTs"),y(this,"_brokerInstStatusTs"),y(this,"_resetBrokerInstStatusTs"),y(this,"_savedBalance"),y(this,"_userGrade"),y(this,"_customsData"),y(this,"_isWalletRedesignEnabledCache",null),y(this,"getUserSettings",(()=>{let e,t=0;return function(){const n=Date.now();return e&&n-t<3e5?Promise.resolve(e):WbSpaModel.prototype.$httpClient.fetchJSON("/webapi/lk/account/userinfo/settings").then(r=>(e=r.value.settings,t=n,e))}})());for(const t in e.syncData)e.syncData[t].init();this.balance=localStorage.getObject(e.storageKey(_)),this.balance&&(this._savedBalance=Object.assign(this.balance)),this._balanceTs=(null==(t=this.balance)?void 0:t.balanceTs)||0,this.getUserGrade=WbSpaModel.prototype.$helper.lockPromise(this.getUserGrade),this.getCustomsDuty=WbSpaModel.prototype.$helper.lockPromise(this.getCustomsDuty),window.addEventListener("storage",this._onSync.bind(this))}get isOriginalWalletTypeAccount(){var e;return"account"===(null==(e=this.balance)?void 0:e.originalWalletType)}getUid(){return e._getUserUid()}getId(){return WbSpaModel.prototype.$auth.jwtData.user||"0"}getShard(){return WbSpaModel.prototype.$auth.shard||""}getUserInfo(){return this.userInfo}initUser(){const t=WbSpaModel.prototype.$auth.jwtData,n=WbSpaModel.prototype.$auth.isAuth,r=WbSpaModel.prototype.$services.sessionService.getSession(),s=n?e._getUserUid():"";localStorage.setItem(S,n?t.user||"":"unauth"),this.userInfo=n?{uid:s,basketUid:void 0,isAuth:n,t:t.user}:{uid:0,basketUid:r,isAuth:n},wb.analitics.sendUserEvent(s,n?t.user:""),wb.analitics.sendSessionStartEvent(),n?this.getUserGrade(this.getCurrency()):this.setDiscountForUnAuth(),wb.spa&&wb.spa.setUserStatus({userIsAuth:n,userUid:n?s:r,userId:parseInt(String(t.user),10)})}async getBalance({force:t,timeout:n}={}){var r;let s=!1;if(t||(null==(r=this._savedBalance)?void 0:r.balanceCurrency)&&this._savedBalance.balanceCurrency!==this.getCurrency()||!this.balance||this._balanceTs<(new Date).getTime()){this._balanceTs=(new Date).getTime()+3e4;try{this.balance=await WbSpaModel.prototype.$httpClient.fetchJSON("/webapi/account/getsignedbalance",{method:"POST"},n?{timeout:n,useProccessResponse:!0}:{useProccessResponse:!0}),this.balance.balanceCurrency=this.getCurrency(),this.balance.walletRidLimit=this.getWalletRidLimit(),this.balance.isMaxWallet=this.balance.originalWalletType===i.bD.Account,this.balance.walletTypeCode=this.getWalletTypeCode(this.balance.walletType,this.balance.walletStatus,this.balance.balanceCurrency),this._savedBalance=Object.assign(this.balance),this.balance.balanceTs=this._balanceTs,localStorage.putObject(e.storageKey(_),this.balance),s=!0}catch(e){if(!this._savedBalance)throw this._balanceTs=(new Date).getTime()+15e3,e;this.balance=Object.assign(this._savedBalance)}}return null===this.balance?{walletLimit:0,moneyBalanceRUB:0,walletBalance:0,cashbackBalance:0,totalBalanceRub:0,totalBalance:0,balanceCurrency:this.getCurrency()}:(this.handleTotalBalanceSetting(),this.handleWalletUnblocking(),s&&WbSpaModel.prototype.$eventBus.dispatchEvent(new CustomEvent("BalanceUpdated",{detail:this.balance})),s&&WbSpaModel.prototype.$eventBus.dispatchEvent(new CustomEvent("LocaleUpdated")),this.balance)}_handleWalletUnblocking(){const e=localStorage.getItem("wb__wallet_unblocking_started_at");e&&!isNaN(Number(e))&&(Date.now()-Number(e)>3e5?this.resetWalletUnblockStatus():this.balance.isWalletUnblocking=!0)}resetWalletUnblockStatus(){localStorage.removeItem("wb__wallet_unblocking_started_at"),this.balance.isWalletUnblocking=void 0}mapWalletTypeCode(e=i.bD.Unknown,t=i.s8.Unknown){return P.includes(t)?0:e===i.bD.Verified?2:e===i.bD.Anonymous?1:0}getWalletTypeCode(e=i.bD.Unknown,t=i.s8.Unknown,n){return["ge","tj"].includes(wb.settings.currentLocale)||"RUB"!==n?0:this.mapWalletTypeCode(e,t)}resetBalance(){this.balance=null,WbSpaModel.prototype.$eventBus.dispatchEvent(new CustomEvent("BalanceReset"))}async getBrokerInstallmentConfig(){if("ru"!==wb.settings.currentLocale||!WbSpaModel.prototype.$auth.isAuth)return null;if(this.brokerInstallmentConfig)return this.brokerInstallmentConfig;if(this.brokerInstallmentConfig=localStorage.getObject("wbx_br_inst_config"),!this.brokerInstallmentConfig||this.brokerInstallmentConfig.expire<Date.now())try{const e=await WbSpaModel.prototype.$httpClient.fetch(`${I}/v2/config`,{method:"GET",headers:{"wb-apptype":"web"},timeout:1e3,withJwtToken:!0,withAuthz:!0}),t=await e.json();t.expire=Date.now()+36e5,localStorage.putObject("wbx_br_inst_config",t),this.brokerInstallmentConfig=t}catch(e){wb.spa.logError(e,"[WBX_BR_INST_CONFIG]: failed to fetch broker installment config")}return this.brokerInstallmentConfig}resetBrokerInstStatusTs(){this._resetBrokerInstStatusTs=!0}isCryptoReplenishEnable(e){var t,n;if("by"!==wb.settings.currentLocale)return!1;const r=WbSpaModel.prototype.$auth.jwtData.user,s=WbSpaModel.prototype.checkMobileRange(Number(this.getId()),(null==(n=null==(t=wb.global.settings.mobileAppVariables)?void 0:t.objects)?void 0:n.enableCryptoChangeSiteRange)||[]);return r&&C.includes(r)||s||!!wb.global.settings.switches[e]}async getBrokerInstallmentStatus(e=!1){if("ru"!==wb.settings.currentLocale)return null;if(e&&this.resetBrokerInstStatusTs(),this._brokerInstStatusTs=this._resetBrokerInstStatusTs?0:Date.now()+3e5,!this.brokerInstallmentStatus||this._brokerInstStatusTs<Date.now())try{const e=await WbSpaModel.prototype.$httpClient.fetch(`${I}/v1/status`,{method:"GET",credentials:"include",headers:{"wb-apptype":"web"},timeout:1e3,withJwtToken:!0,withAuthz:!0});this.brokerInstallmentStatus=await e.json(),["186199515"].includes(String(WbSpaModel.prototype.$auth.jwtData.user))&&(this.brokerInstallmentStatus={maxInstallmentSum:15e5,status:"completed",availableSum:15e5}),this._resetBrokerInstStatusTs=!1}catch(e){this.brokerInstallmentStatus=null}return this.brokerInstallmentStatus}async getUserGrade(e="RUB"){var t,n,r,s,o,a,l,c,u;const d=null==(t=wb.global.settings.switches)?void 0:t.enableV6Ug;if(!WbSpaModel.prototype.$auth.isAuth)return null;let p=this._userGrade||localStorage.getObject("wbx_user_grade");if(WbSpaModel.prototype.$auth.jwtData.user!==(null==p?void 0:p.user_id)&&(p=null),null==p||p.expire<Date.now()||WbSpaModel.prototype.$auth.jwtData.user!==p.user_id||p.currency!==e)try{const t=d?"v6":"v5",i=await WbSpaModel.prototype.$httpClient.fetch(`${k}/${t}/grade?curr=${e}`,{withJwtToken:!0,withAuthz:!0});if(!i.ok)throw new Error(`resp_status=${i.status}`);const a=await i.json();if(null==a.payload||0!==a.state)throw new Error(`resp_data=${JSON.stringify(a||{})}`);if(p=a.payload,p.sign=a.sign,p.sign_version=a.sign_version,p.expire=Date.now()+3e5,p.fraud){let e=null;if("string"==typeof p.fraud)try{e=JSON.parse(p.fraud)}catch(e){console.error("Failed to parse fraud data:",e)}else"object"==typeof p.fraud&&null!==p.fraud&&(e=p.fraud);(null==e?void 0:e.is_trust)&&(p.wbClub="available")}(null==(n=p.subscription_features)?void 0:n.length)&&(p.wbClub="subscribed"),(null==p?void 0:p.payments)&&(p.priceAdjustmentPercent=-(null!=(s=null==(r=p.payments.find(e=>2===e.wctype_id))?void 0:r.price_discount)?s:0),p.pricingRuleId=(null==(o=p.payments.find(e=>4===e.wctype_id))?void 0:o.pricing_rule)||0),localStorage.putObject("wbx_user_grade",p),this._userGrade=p,WbSpaModel.prototype.$eventBus.dispatchEvent(new CustomEvent("UserGradeUpdated")),this._xInfoUpdate()}catch(e){wb.spa.logError(e,"[WBX_USER_GRADE]: failed to fetch user grade data")}if(p&&!p.isPremium){const e=this.isAvaibilityCountryPhone();let t=p.fraud,n=!1;if("string"==typeof t)try{t=JSON.parse(t),n=Boolean(null==t?void 0:t.is_trust)}catch(e){console.error("Failed to parse fraud data:",e)}else"object"==typeof t&&null!==t&&(n=Boolean(t.is_trust));let r=n&&e,s=(null==(a=p.subscription_features)?void 0:a.indexOf("extra_discount"))>-1&&r;!this._userGrade||p.isCountryAlowed===r&&p.isPremium===s||(this._userGrade.isCountryAlowed=r,p.isCountryAlowed=r,this._userGrade.isPremium=s,p.isPremium=s,localStorage.putObject("wbx_user_grade",p))}if(null==p?void 0:p.payments){const e=p.payments.find(e=>1===e.wctype_id);wb.settings.walletDiscountValue=e.discount_value||0;const t=((null==(l=wb.global.settings.switches)?void 0:l.enableDiscountValueForAll)||(null==(c=wb.global.settings.switches)?void 0:c.enableV6Ug))&&(null==e?void 0:e.turnover_discount_value)||0,n=((null==e?void 0:e.anonymous_discount)||0)+t,r=((null==e?void 0:e.uprid_discount)||0)+t,s=((null==e?void 0:e.invoice_discount)||0)+t,o=((null==e?void 0:e.wb_club_anonymous_discount)||0)+t,a=((null==e?void 0:e.wb_club_uprid_discount)||0)+t,d=((null==e?void 0:e.wb_club_invoice_discount)||0)+t;wb.settings.wlt1DiscountPercent=p.isPremium&&(null==e?void 0:e.wb_club_anonymous_discount)>0?o:n,wb.settings.wlt2DiscountPercent=p.isPremium&&(null==e?void 0:e.wb_club_uprid_discount)>0?a:r,wb.settings.wlt3DiscountPercent=p.isPremium&&(null==e?void 0:e.wb_club_invoice_discount)>0?d:s,wb.settings.wlt1PromoDiscountPercent=wb.settings.walletDiscountValue;let h=(null==e?void 0:e.wb_club_anonymous_discount)-(null==e?void 0:e.anonymous_discount);wb.settings.premium1DiscountPercent=h>0?h:0,wb.settings.premium1DiscountPercentFull=null==e?void 0:e.wb_club_anonymous_discount;let m=(null==e?void 0:e.wb_club_uprid_discount)-(null==e?void 0:e.uprid_discount);if(wb.settings.premium2DiscountPercent=m>0?m:0,wb.settings.premium2DiscountPercentFull=null==e?void 0:e.wb_club_uprid_discount,(null==(u=p.wallet)?void 0:u.wallet_type)===i.bD.Account){let n=(null==e?void 0:e.wb_club_invoice_discount)-(null==e?void 0:e.invoice_discount);wb.settings.wlt2DiscountPercent=(null==e?void 0:e.invoice_discount)+t||0,wb.settings.premium2DiscountPercent=n>0?n:0,wb.settings.premium2DiscountPercentFull=null==e?void 0:e.wb_club_invoice_discount,p.isPremium&&(wb.settings.wlt2DiscountPercent=wb.settings.premium2DiscountPercentFull)}}else wb.settings.wlt1DiscountPercent=0,wb.settings.wlt2DiscountPercent=0,wb.settings.wlt3DiscountPercent=0,wb.settings.wlt1PromoDiscountPercent=0;return p||{spp:0,postpaid_limit:0,currency:e}}isAvaibilityCountryPhone(){var e;const t=null==(e=(0,a.c)())?void 0:e.phone3;if(!t)return!0;return{ru:["79","78"],by:["375"],global:["70","76","77"],kg:["996"],am:["374"],uz:["998"],ge:["995"],tj:["992"]}[wb.settings.currentLocale].some(e=>null==t?void 0:t.startsWith(e))}getUserGradeFromCache(){return WbSpaModel.prototype.$auth.isAuth?this._userGrade||localStorage.getObject("wbx_user_grade"):null}async getUserOrderCancelPrices(){const e=`${k}/v1/paid-services`,t=await WbSpaModel.prototype.$httpClient.fetchJSON(e,{withJwtToken:!0});return this.userOrderCancelPrices=t,t}resetUserGrade(){const e=this.getUserGradeFromCache();e&&(e.expire=0,localStorage.putObject("wbx_user_grade",e))}async setDiscountForUnAuth(){var e,t,n;let r=localStorage.getObject("wbx_default_discounts");if(null==r||r.expire<Date.now()){const t=await WbSpaModel.prototype.$httpClient.fetchStatic("global-payment/default-payment.json",{},o.urlStaticBasket,1);if(0===(null==t?void 0:t.state)){const n=null==(e=t.data)?void 0:e.find(e=>1===e.wctype_id);r={wctype_id:(null==n?void 0:n.wctype_id)||1,discount_value:(null==n?void 0:n.discount_value)||0,expire:Date.now()+3e5},r.expire=Date.now()+3e5,localStorage.putObject("wbx_default_discounts",r)}}wb.settings.wlt1DiscountPercent=null!=(t=null==r?void 0:r.discount_value)?t:0,wb.settings.walletDiscountValue=null!=(n=null==r?void 0:r.discount_value)?n:0}async getCustomsDuty(e){var t,n,r,s,i,a,l,c;if(!(null==(n=null==(t=wb.global.settings)?void 0:t.switches)?void 0:n.enableCustomsDuty))return null;let u=this._customsData||localStorage.getObject("customs_duty");const d=(null==(s=null==(r=wb.global.settings)?void 0:r.switches)?void 0:s.enableNewDutyCalculation)?"v2":"v1",p=null!=(i=null==u?void 0:u.version)?i:"";try{if(!u||!u.dutyForImportedGoods||u.dutyForImportedGoods.find(e=>new Date(1e3*e.timestamp).addDays(1)<new Date)||d!==p){const e=(null==(l=null==(a=wb.global.settings)?void 0:a.switches)?void 0:l.enableNewDutyCalculation)?"duty/duty_v2.json":"duty/duty.json",t=await WbSpaModel.prototype.$httpClient.fetchStatic(e,{timeout:5e3},o.urlStaticBasket,44).catch(e=>(wb.spa.logError(e,"[CUSTOMS_DUTY]: failed to fetch customs duty data"),this._customsData));t&&(t.version=d,localStorage.putObject("customs_duty",t),this._customsData=u=t)}return null==(c=null==u?void 0:u.dutyForImportedGoods)?void 0:c.find(t=>t.curr==e)}catch(e){return wb.spa.logError(e,"[CUSTOMS_DUTY]: customs duty exception"),null}}reset(){this.resetUserGrade(),wb.cookieHelper.deleteCookie("access_token"),this.initUser(),this.resetBalance(),this.clearXInfo(),WbSpaModel.prototype.$services.userData.clear(),WbSpaModel.prototype.$getServiceOf("groupedDeliveriesService").then(e=>e.resetCache()),this.clearUserLK()}clearLocalUserData(){WbSpaModel.prototype.$services.userData.clearLocalUserInfo(),localStorage.removeItem(e.storageKey(_)),localStorage.removeItem("offerRateMain"),localStorage.removeItem(i.if),localStorage.removeItem("_useServiceFee"),localStorage.removeItem("wibesUserExists"),sessionStorage.removeItem("wibesUserExists"),sessionStorage.removeItem("wibesPublishEnabled"),sessionStorage.removeItem("filters-sort"),sessionStorage.removeItem("wbird_tokens_data"),this.clearUserLK()}async clearUserLK(){var e,t;try{if(!(null==(t=null==(e=wb.global.settings)?void 0:e.switches)?void 0:t.enableTransitionOnFeedbackBT))return;if(l.i.supportIndexedDb()){const e=await this._getAllDatabaseByPrefix("wb_user_lk_fedbacks");if(Array.isArray(e))for(const t of e)t&&l.i.removeDb(t)}sessionStorage.removeItem("wb_user_lk_products")}catch(e){}}async _getAllDatabaseByPrefix(e){try{return(await indexedDB.databases()).filter(t=>!(!t.name||!t.name.startsWith(e))).map(e=>e.name)}catch(e){}}async getUserData(){return null!=e.syncData.userData.time&&e.syncData.userData.time<=Date.now()&&!e.syncData.userData.updateInProgress&&await this._xInfoUpdate(),e.syncData.userData.data}async _xInfoUpdate(){const t=e.syncData.userData;t.data&&(t.data.xinfo=this.createXinfo(t.data)),t.updateInProgress=!0;const n=e.storageKey(t.prefix);await navigator.locks.request(`lock-${n}`,async r=>{var s,i;const o=e.syncData.userData;if(!o||null!=o.time&&o.time<Date.now()){const e=null==t?void 0:t.data;let r=new URLSearchParams;(null==e?void 0:e.currency)&&r.set("currency",e.currency),e&&(r.set("latitude",e.latitude.toString()),r.set("longitude",e.longitude.toString()),r.set("locale",e.locale),r.set("address",e.address),r.set("dt",(e.dt||"0").toString()),r.set("currentLocale",wb.settings.currentLocale.toString()),r.set("b2bMode",null!=(s=wb.settings.b2bMode)&&s),e.addressId&&r.set("addressId",e.addressId),e.addressType&&r.set("addressType",e.addressType));const o=t.fetchParam.url(r),a=await WbSpaModel.prototype.$httpClient.fetchJSON(o,{credentials:"include"},{timeout:t.fetchParam.timeout,nullOnError:!0,addAuthHeader:!0});if(a){a.xinfo=this.createXinfo(a);const e=null==(i=localStorage.getObject(n))?void 0:i.data,r={time:Date.now()+t.interval,data:f(f({},e),a)};localStorage.putObject(n,r),Object.assign(t,r),this.checkForRefresh(e,a)}else e&&(e.time=Date.now()+1e4)}else o&&o.time!==t.time&&Object.assign(t,o);t.updateInProgress=!1})}createXinfo(t){var n,r;if(!(null==(n=t.destinations)?void 0:n.length))return e._getFallbackData().xinfo;const s=[];WbSpaModel.prototype.$isSupportBooking()||s.push("10"),WbSpaModel.prototype.$isSupportDigital()||s.push("11"),WbSpaModel.prototype.isResaleEnabled({isSeller:!1})||s.push("13"),WbSpaModel.prototype.$isSupportDbsp()||s.push("14");const i=this.getUserGradeFromCache(),o=["appType=1",`curr=${(null==(r=t.currency)?void 0:r.toLowerCase())||e._getDefaultCurrency(wb.settings.currentLocale||"ru").toLowerCase()}`,`dest=${t.destinations.last()}`,"spp=30"];WbSpaModel.prototype.$isSupportSpecialDelivery()||o.push("hide_dflags=131072"),s.length>0&&o.push(`hide_dtype=${s.join(";")}`),wb.settings.b2bMode&&o.push("b2b=true"),(null==i?void 0:i.pricingRuleId)>0&&o.push(`udg=${i.pricingRuleId}`);const a=new URLSearchParams;return WbSpaModel.prototype.$analitic.appendSplitInfoV2(a,"catalog"),o.push(a.toString()),o.join("&")}getXinfo(){return this.getUserData().then(e=>Promise.resolve(null==e?void 0:e.xinfo))}getXinfoWithClusters(){return this.checkNeedUpdateData(e.syncData.userClusters),this.checkNeedUpdateData(e.syncData.userVector),this.getUserData().then(t=>{var n;let r=e.syncData.userClusters.data&&(null==(n=e.syncData.userClusters.data)?void 0:n.length)>0?(null==t?void 0:t.xinfo)+`&uclusters=${e.syncData.userClusters.data.join(",")}`:null==t?void 0:t.xinfo;return Promise.resolve(r)})}getUserVector(t){var n,r;const s=null==(r=null==(n=e.syncData.userVector)?void 0:n.data)?void 0:r[t];if((null==s?void 0:s.value)&&"string"==typeof(null==s?void 0:s.value)&&(wb.global.settings.switches.addUserVector&&"search"===t||wb.global.settings.switches.addUserVectorCatalog&&"catalog"===t||wb.global.settings.switches.addUserVectorRecommend&&"new_recom"===t||"suggests"===t))return s}getUserClusters(){var t;return this.checkNeedUpdateData(e.syncData.userClusters),null==(t=e.syncData.userClusters.data)?void 0:t.join(",")}getUserInterests(){var t,n,r;return this.checkNeedUpdateData(e.syncData.userVector),null==(r=null==(n=null==(t=e.syncData.userVector)?void 0:t.data)?void 0:n.interest)?void 0:r.value}getXinfoSignedV1(){return this.getUserData().then(e=>{var t;return Promise.resolve({xinfo:null==e?void 0:e.xinfo,userDataSign:null==e?void 0:e.userDataSign,addressDataSign:null==e?void 0:e.addressDataSign,shard:null==e?void 0:e.shard,latitude:null==e?void 0:e.latitude,longitude:null==e?void 0:e.longitude,address:null==e?void 0:e.address,dest:null==(t=null==e?void 0:e.destinations)?void 0:t.last(),addressId:null==e?void 0:e.addressId})})}async getLocationData(){const e=await this.getUserData();return{latitude:null==e?void 0:e.latitude,longitude:null==e?void 0:e.longitude,address:null==e?void 0:e.address,addressId:null==e?void 0:e.addressId,destinations:null==e?void 0:e.destinations,locale:null==e?void 0:e.locale}}async setGeo(t){var n,r,s;const i=null!=(n=t.lat)?n:t.latitude,o=null!=(r=t.lon)?r:t.longitude,a=t.address;if(i&&o&&a){const n=e.syncData.userData,r=e.storageKey(n.prefix),l=WbSpaModel.prototype.$services.userAddressService.getAddressSignData(t),c=b(f(f({},null==n?void 0:n.data),null==(s=localStorage.getObject(r))?void 0:s.data),{latitude:i,longitude:o,address:a,addressId:t.addressId,addressType:t.deliveryType,addressDataSign:l,dt:Date.now()/1e3|0,relevant:!1});c.xinfo=this._changeXDest(c.xinfo,t.dest);const u={data:c,time:e._timeInPast(n.interval)};Object.assign(n,u),localStorage.putObject(r,u),WbSpaModel.prototype.$geoLocation.setCityName(a),await this._xInfoUpdate()}}async setCurrency(t){var n;if(t){const r=e.syncData.userData,s=e.storageKey(r.prefix),i=b(f(f({},null==r?void 0:r.data),null==(n=localStorage.getObject(s))?void 0:n.data),{currency:t,relevant:!1});i.xinfo=this._changeXCurrency(i.xinfo,t),Object.assign(r,{data:i,time:e._timeInPast(r.interval)}),await this._xInfoUpdate()}}clearXInfo(){for(const t in e.syncData)e.syncData[t].time=e._timeInPast(e.syncData[t].interval);Object.keys(localStorage).forEach(t=>{for(const n in e.syncData)-1!==t.indexOf(e.syncData[n].prefix)&&localStorage.removeItem(t)})}clearUserData(t){const n=e.syncData[t];n.time=e._timeInPast(n.interval),Object.keys(localStorage).forEach(e=>{-1!==e.indexOf(n.prefix)&&localStorage.removeItem(e)})}resetTimeForUserVector(t){t&&(e.syncData.userVector.countViewItem+=1,e.syncData.userVector.countViewItem<5)||(e.syncData.userVector.time=e._timeInPast(e.syncData.userVector.interval),e.syncData.userVector.countViewItem=0)}async getShardAsync(){const e=await this.getUserData();return null==e?void 0:e.shard}async check2FAEnabled(){var e,t,n,r;const s=WbSpaModel.prototype.checkMobileRange(Number(this.getId()),(null==(t=null==(e=wb.global.settings.mobileAppVariables)?void 0:e.objects)?void 0:t["2FARange"])||[]);return(null!=(r=null==(n=this.balance)?void 0:n.walletTypeCode)?r:0)>0&&"ru"===wb.settings.currentLocale&&s}async checkWalletRedesignEnabled(){var e,t,n,r;const s=Boolean(null==(e=this.userInfo)?void 0:e.isAuth);if(null===this._isWalletRedesignEnabledCache&&s){const{userInfo:e}=await WbSpaModel.prototype.$services.userData.getUserDataAsync(),s=wb.global.settings.switches.enableWalletRedesign&&WbSpaModel.prototype.checkMobileRange(Number(this.getId()),(null==(n=null==(t=wb.global.settings.mobileAppVariables)?void 0:t.objects)?void 0:n.walletRedesignRange)||[]),i=e.isEmployeeSynced||e.isEmp,o=wb.global.settings.switches.enableWalletRedesignEmployees&&i;this._isWalletRedesignEnabledCache=null!=(r=s||o)?r:null}return Boolean(this._isWalletRedesignEnabledCache)}checkEnabledUnitedWbCourierDelivery(){var e,t;const n=WbSpaModel.prototype.checkMobileRange(Number(this.getId()),(null==(t=null==(e=wb.global.settings.mobileAppVariables)?void 0:e.objects)?void 0:t.unitedWBCourierDeliveryRange)||[]);return wb.global.settings.switches.enableUnitedWBCourierDelivery&&n}checkEnabledSmartCalendar(){var e,t;const n=WbSpaModel.prototype.checkMobileRange(Number(this.getId()),(null==(t=null==(e=wb.global.settings.mobileAppVariables)?void 0:e.objects)?void 0:t.enableSmartCalendarRange)||[]);return wb.global.settings.switches.enableSmartCalendar&&n}getIp(){var t;return null==(t=e.syncData.userData.data)?void 0:t.ip}getCurrency(){var t;return null==(t=e.syncData.userData.data)?void 0:t.currency}async getCurrencyAsync(){const e=await this.getUserData();return null==e?void 0:e.currency}getLocale(){var t;return null==(t=e.syncData.userData.data)?void 0:t.locale}getDestinations(){var t;return null==(t=e.syncData.userData.data)?void 0:t.destinations}getDest(){var t,n;return null==(n=null==(t=e.syncData.userData.data)?void 0:t.destinations)?void 0:n.last()}getCurrentCoordinates(){var t,n;return[null==(t=e.syncData.userData.data)?void 0:t.longitude,null==(n=e.syncData.userData.data)?void 0:n.latitude]}_changeXCurrency(e,t){const n=`$1${t.toLowerCase()}$3`;return e.replace(/(&curr=)(.*?)(&)/,n)}_changeXDest(e,t){const n=`$1${t}$3`;return e.replace(/(&dest=)(.*?)(&)/,n)}checkForRefresh(t,n,r){var s,i,o,a,l,c,u,d,p,h,m;let g=!1;if((null==t?void 0:t.currency)!==(null==n?void 0:n.currency)&&(e._checkCurrencyInvalid(n)&&location.reload(),null==(o=null==(i=null==(s=wb.spa.getMainReactLayout())?void 0:s.header)?void 0:i.changeSettings)||o.refresh(n.currency),g=!0),(null==t?void 0:t.destinations[t.destinations.length-1])!==(null==n?void 0:n.destinations[n.destinations.length-1])&&(g=!0),(null==n?void 0:n.address)&&(null==(a=WbSpaModel.prototype.$geoLocation.location)?void 0:a.address)!==(null==n?void 0:n.address)&&WbSpaModel.prototype.$geoLocation.updateLocation(),g)if(WbSpaModel.prototype.$eventBus.dispatchEvent(new CustomEvent("GeoUpdated")),null==(u=null==(c=null==(l=wb.spa)?void 0:l.getMainLayout())?void 0:c.menuTop)||u.refreshMenu((null==t?void 0:t.locale)!==(null==n?void 0:n.locale)),WbSpaModel.prototype.$containers.clearNotActiveContainer(),"error404"!==(null==(d=WbSpaModel.prototype.$router.currentRoute)?void 0:d.name)||"SpaWalletPurchaseEntrypoint"!==WbSpaModel.prototype.$router.targetRoute&&"SpaMyWalletEntrypoint"!==WbSpaModel.prototype.$router.targetRoute)(r||WbSpaModel.prototype.$router.currentRoute&&"SpaBasketEntrypoint"!==(null==(p=WbSpaModel.prototype.$router.currentRoute)?void 0:p.name)&&"SpaBasketBuyItNowEntrypoint"!==(null==(h=WbSpaModel.prototype.$router.currentRoute)?void 0:h.name))&&(null==(m=wb.spa)||m.refresh());else{const e=wb.global.settings.switches.enableWalletRedesign?"/lk/mywallet":"/lk/mywallet/purchases";WbSpaModel.prototype.$router.moveTo(e,!1,!0)}}_onSync(t){var n;const{key:r,oldValue:s,newValue:i}=t;if(r===S&&i)s!==i&&(i&&"unauth"!==i&&!WbSpaModel.prototype.$auth.isAuth?(wb.spa.getMainLayout().updateAfterLogin(),null==(n=wb.spa.getMainReactLayout())||n.updateAfterLogin()):location.reload());else if(r===e.storageKey(e.syncData.userData.prefix)){if(i){const t=JSON.parse(s),n=JSON.parse(i);Object.assign(e.syncData.userData,n),setTimeout(()=>this.checkForRefresh(null==t?void 0:t.data,n.data,!0),1e3)}}else{if(r===e.storageKey(_)){if(this.balance=localStorage.getObject(r),null===this.balance)return;return this.handleTotalBalanceSetting(),this.handleWalletUnblocking(),WbSpaModel.prototype.$eventBus.dispatchEvent(new CustomEvent("BalanceUpdated",{detail:this.balance})),this.balance}for(const t in e.syncData)if(r===e.storageKey(e.syncData[t].prefix)){const n=JSON.parse(i);Object.assign(e.syncData[t],n)}}}handleTotalBalanceSetting(){var e;const t=null!=(e=this.balance[`moneyBalance${this.balance.balanceCurrency}`])?e:"RUB"===this.balance.balanceCurrency?this.balance.moneyBalance:0;this.balance.totalBalance=t+("RUB"===this.balance.balanceCurrency?this.balance.bonusBalance+this.balance.walletBalance:0),"RUB"===this.balance.balanceCurrency&&(this.balance.totalBalance=Math.floor(Math.abs(this.balance.totalBalance)<1?0:this.balance.totalBalance)),this.balance.totalBalanceRub=(this.balance.moneyBalanceRUB||0)+(this.balance.bonusBalance||0)+(this.balance.walletBalance||0),this.balance.totalBalanceRub=Math.floor(Math.abs(this.balance.totalBalanceRub)<1?0:this.balance.totalBalanceRub)}handleWalletUnblocking(){this.balance.isWalletBlocked=this.balance.walletStatus===i.s8.BlockedSystem,(this.balance.isWalletBlocked||this.balance.walletStatus===i.s8.Active)&&this._handleWalletUnblocking()}checkNeedUpdateData(t){if(null!=t.time&&t.time>=Date.now()||t.updateInProgress)return;t.updateInProgress=!0;const n=e.storageKey(t.prefix);navigator.locks.request(`lock-${n}`,async r=>{let s;if("0"!==e._getUserUid())if(t.disableFetch&&await t.disableFetch())s=[];else{const n=t.fetchParam.url(e._getUserUid()),r=await WbSpaModel.prototype.$httpClient.fetchJSON(n,{credentials:"omit"},{timeout:t.fetchParam.timeout,nullOnError:!0,addAuthHeader:t.fetchParam.jwt});s=t.processData&&t.processData(r)}else s=[];if(s){const e={time:Date.now()+t.interval,data:s};localStorage.putObject(n,e),Object.assign(t,e)}else t.time=Date.now()-t.interval+6e4;t.updateInProgress=!1})}checkAccountLimitsEnabled(){return this.isOriginalWalletTypeAccount||wb.settings.walletTypeCode>0&&wb.global.settings.switches.enableNewDiscountLimitForAllWalletLevel}getWalletAccountLimits(){var e,t,n,r,s,i,o,a,l,c,u,d,p,h,m,g,f,b,y;return{maxOrderPrice:"active"===(null==(e=this.balance.discountsConditions)?void 0:e.rids_and_total_amount)?Math.floor((null!=(n=null==(t=this.balance.discount)?void 0:t.max_order_price)?n:0)/100):null,walletLimit:"active"===(null==(r=this.balance.discountsConditions)?void 0:r.monthly)?Math.floor((null!=(i=null==(s=this.balance.discount)?void 0:s.monthly_limit)?i:0)/100):null,walletVolumeLimit:"active"===(null==(o=this.balance.discountsConditions)?void 0:o.max_amount)?Math.floor((null!=(l=null==(a=this.balance.discount)?void 0:a.volume_monthly_limit)?l:0)/100):null,remainingWalletLimit:"active"===(null==(c=this.balance.discountsConditions)?void 0:c.monthly)?Math.max(Math.floor(((null!=(d=null==(u=this.balance.discount)?void 0:u.monthly_limit)?d:0)-(null!=(h=null==(p=this.balance.discount)?void 0:p.expenses)?h:0))/100),0):null,remainingWalletVolumeLimit:"active"===(null==(m=this.balance.discountsConditions)?void 0:m.max_amount)?Math.max(Math.floor(((null!=(f=null==(g=this.balance.discount)?void 0:g.volume_monthly_limit)?f:0)-(null!=(y=null==(b=this.balance.discount)?void 0:b.volume_expenses)?y:0))/100),0):null}}checkRidLimitExceeded(e){const t=this.getWalletRidLimit();return!(null===t||t<0)&&e>t}getWalletOrderLimitExceeded(e){var t;if(!this.balance||!this.isOriginalWalletTypeAccount){if(e>(wb.settings.walletTypeCode>0&&(null==(t=this.balance)?void 0:t.walletLimit)||(wb.settings.walletTypeCode>1?wb.global.settings.variables.wlt2DiscountDisplayMaxPrice:wb.global.settings.variables.wlt1DiscountDisplayMaxPrice)))return!0}return!1}getExceededWalletLimit(e,t,n=!1){if(this.getWalletOrderLimitExceeded(e))return i.Hl.walletOrderLimit;if(!this.balance||0===this.balance.walletTypeCode)return null;const{maxOrderPrice:r,remainingWalletLimit:s,remainingWalletVolumeLimit:o}=this.getWalletAccountLimits();return!n&&null!=r&&e+t>r?i.Hl.walletOrderLimit:null!=s&&e>s?i.Hl.walletLimit:null!=o&&t>o?i.Hl.walletVolumeLimit:null}isVipAchieved(){return!1}isVipSubscription(){return!1}getPremiumFreeCancelAmount(){return 2}getPremiumCancelRefreshDate(){return(new Date).addDays(20)}getWalletOrderLimit(){var e,t,n,r,s,i,o,a,l;return this.checkAccountLimitsEnabled()?this.getWalletAccountLimits().maxOrderPrice:(null==(e=this.balance)?void 0:e.walletTypeCode)?this.balance.walletTypeCode>0?this.balance.walletLimit:(null==(l=null==(a=null==(o=null==(i=wb.global.settings.mobileAppVariables)?void 0:i.objects)?void 0:o.walletLimitDescription)?void 0:a.anonymous)?void 0:l.oneTimeLimit)/100:(null==(s=null==(r=null==(n=null==(t=wb.global.settings.mobileAppVariables)?void 0:t.objects)?void 0:n.walletLimitDescription)?void 0:r.anonymous)?void 0:s.oneTimeLimit)/100}getWalletRidLimit(){var e,t,n;return this.checkAccountLimitsEnabled()?"active"===(null==(e=this.balance.discountsConditions)?void 0:e.rids_and_total_amount)?Math.floor((null!=(n=null==(t=this.balance.discount)?void 0:t.max_rid_price)?n:0)/100):-1:null}static richPrototype({prototype:t}){Object.setPrototypeOf(e.prototype,t)}static factory(t){return t&&e.richPrototype(t),new e}static _getUserUid(){return WbSpaModel.prototype.$auth.um.userUid||"0"}static storageKey(t){return`${t}-${e._getUserUid()}`}static _getFallbackData(){const t=wb.settings.currentLocale||"ru",n=e._getDefaultCurrency(t);let r={xinfo:`appType=1&curr=${null==n?void 0:n.toLowerCase()}&dest=-1257786&locale=${t}&spp=30&lang=${wb.currentLanguage}`,address:"Москва",latitude:55.753737,longitude:37.6201,currency:n,locale:"ru",destinations:[-1029256,-102269,-2162196,-1257786]};switch(t){case"ru":break;case"by":r={xinfo:`appType=1&curr=${null==n?void 0:n.toLowerCase()}&dest=-8139704&locale=by&spp=30&lang=${wb.currentLanguage}`,address:"Минск",latitude:53.901328,longitude:27.549044,currency:n,locale:"by",destinations:[12358386,12358403,-70563,-8139704]};break;case"global":case"kz":r={xinfo:`appType=1&curr=${null==n?void 0:n.toLowerCase()}&dest=85&locale=kz&spp=30&lang=${wb.currentLanguage}`,address:"Астана",latitude:51.129669,longitude:71.495475,currency:n,locale:"kz",destinations:[12358388,12358412,-3479876,85]};break;case"kg":r={xinfo:`appType=1&curr=${null==n?void 0:n.toLowerCase()}&dest=28&locale=kg&spp=30&lang=${wb.currentLanguage}`,address:"Бишкек",latitude:42.8618,longitude:74.5831,currency:n,locale:"kg",destinations:[12358387,12358395,-10860151,28]};break;case"am":r={xinfo:`appType=1&curr=${null==n?void 0:n.toLowerCase()}&dest=36&locale=am&spp=30&lang=${wb.currentLanguage}`,address:"Ереван",latitude:40.177628,longitude:44.512547,currency:n,locale:"am",destinations:[12358387,12358400,-13404218,36]};break;case"uz":r={xinfo:`appType=1&curr=${null==n?void 0:n.toLowerCase()}&dest=491&locale=uz&spp=30&lang=${wb.currentLanguage}`,address:"Ташкент",latitude:41.311158,longitude:69.279737,currency:n,locale:"uz",destinations:[12358390,12358442,-2448072,491]};break;case"tj":r={xinfo:`appType=1&curr=${null==n?void 0:n.toLowerCase()}&dest=123589607&locale=tj&spp=30&lang=${wb.currentLanguage}`,address:"Душанбе",latitude:38.576271,longitude:68.779716,currency:n,locale:"tj",destinations:[-214626,-7328360,-11018181,123589607]};break;case"ge":r={xinfo:`appType=1&curr=${null==n?void 0:n.toLowerCase()}&dest=123586302&locale=ge&spp=30&lang=${wb.currentLanguage}`,address:"Тбилиси",latitude:41.693083,longitude:44.801561,currency:n,locale:"ge",destinations:[-28699,-1996871,-13438811,123586302]}}return r.shard=0,r}static getXCurrency(e){var t;return null==(t=/curr=(.*?)&/.exec(e))?void 0:t[1]}static _getDefaultCurrency(e){return wb.currencies.getDefaultForLocale(e)}static _timeInPast(e){return Date.now()-e}static _checkCurrencyInvalid(t){var n;const r=null==(n=e.getXCurrency(t.xinfo))?void 0:n.toUpperCase();return!t||!wb.currencies.info[t.currency]||r&&!wb.currencies.info[r]}};y(E,"syncData",{userData:{prefix:"geo-data-v1",data:null,interval:18e4,fetchParam:{url:e=>`${v}get-geo-info?${e}`,timeout:3e3},init:function(){const e={data:E._getFallbackData(),time:E._timeInPast(Date.now())},t=localStorage.getObject(E.storageKey(this.prefix));(null==t?void 0:t.data)&&E._checkCurrencyInvalid(t.data)&&(t.time=E._timeInPast(this.interval)),Object.assign(this,f(f({},e),t))}},userClusters:{prefix:"user-clusters",data:null,processData:function(e){return this.fetchParam.dataField?e[this.fetchParam.dataField]:e},interval:432e5,fetchParam:{url:e=>`https://personal-clusters.wildberries.ru/api/v1/clusters?id=${e}`,dataField:"uclusters",timeout:2e4},init:function(){Object.assign(this,f(f({},{data:[],time:E._timeInPast(this.interval)}),localStorage.getObject(E.storageKey(this.prefix))))},disableFetch:async function(){const e=await WbSpaModel.prototype.$services.userData.getUserDataAsync();return!e||!e.userInfo.enableUserPersonalization}},userVector:{prefix:"user-vector",data:null,processData:function(e){if(e){const t={};for(const n of Object.keys(e))if(e[n].length>0){const r=e[n][0];t[n]={value:r.value,version:r.version}}return t}return this.data},countViewItem:0,interval:432e5,fetchParam:{url:()=>"https://user-vector-info.wb.ru/api/v2/vector",timeout:2e4,jwt:!0},init:function(){Object.assign(this,f(f({},{data:[],time:E._timeInPast(this.interval)}),localStorage.getObject(E.storageKey(this.prefix))))},disableFetch:async function(){const e=await WbSpaModel.prototype.$services.userData.getUserDataAsync();return!e||!e.userInfo.enableUserPersonalization}}});var T=E},31226:function(e,t,n){"use strict";var r=n(80781);$.processResponse=(0,r.X)({wb:wb,getWbSpa:()=>wb.spa}),wb.quickNav=function(e){var t=e||{},n=document.querySelector(".j-quicknav");if(null===n)return;n.addEventListener("click",function(){return window.scrollTo({top:0,behavior:"smooth"}),!1});let r;function s(){null!==n&&(n.style.display="block")}function i(){null!==n&&(n.style.display="none")}window.addEventListener("scroll",function(){if(n){document.documentElement.clientWidth>=768?function(){const e=t.bottomPx||function(){const e=document.querySelector("#app");return e?e.offsetTop+parseFloat(getComputedStyle(e,null).height.replace("px","")):0}();(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0)>e?s():i()}():function(){const e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;r||(r=e),function(){if(e>=r)return!1;const t=document.documentElement.clientHeight;return!(e<1.5*t)}()?s():i(),r=e}()}})},wb.namespace("displayModeSettings",function(){const e="displayMode";let t;var n=new Map;return{init:function(){function n(){const n=wb.settings.breakponts,r=window.innerWidth;for(var s in t="d",n)r<Number(s)&&(t=n[s]);let i="desktop";r<=767.98&&(i="phone"),r>=768&&r<=1023.98&&(i="tablet");const o=window.innerWidth>1023.98?"desktop":/iPhone|iPad|iPod|Mac OS/i.test(navigator.userAgent)?"ios":/Android/i.test(navigator.userAgent)?"android":"unknown";$.observable(wb.settings).setProperty(e,t),$.observable(wb.settings).setProperty({displayType:i}),$.observable(wb.settings).setProperty({deviceType:o})}n(),window.addEventListener("resize",n)},addObserver:function(r,s){if("function"==typeof r){s&&r(t);var i=()=>r(t);$.observe(wb.settings,e,i),$.observe(wb.settings,"displayType",i),n.set(r,i)}},removeObserver:function(t){let r=n.get(t);r&&($.unobserve(wb.settings,e,r),$.unobserve(wb.settings,"displayType",r))}}}()),wb.namespace("network",function(){return{init:function(){function e(){$.observable(wb.settings).setProperty("isOffline",!window.navigator.onLine)}e(),window.addEventListener("online",e),window.addEventListener("offline",e)}}}())},53527:function(e,t,n){"use strict";n.d(t,{K:function(){return p},r:function(){return d}});var r=n(76904),s=n(28288),i=Object.defineProperty,o=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(e,t,n)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u=(e,t,n)=>c(e,"symbol"!=typeof t?t+"":t,n);class d{static async create(e,t){try{const n=(0,r.getHttpClient)(),i=(0,s.urlSiteStatic)("/"===e[0]?e.slice(1):e),o=await n.fetchText(i),a=new Blob([o],{type:"application/javascript"}),l=URL.createObjectURL(a);return new p(new Worker(l),t)}catch(e){return null}}}class p{constructor(e,t={}){var n;u(this,"worker"),u(this,"callbacks"),u(this,"id"),u(this,"visibilityHandlerEnabled"),u(this,"_handleVisibilityChange",()=>{var e;null==(e=this.worker)||e.postMessage({action:"visible"===document.visibilityState?"resume":"pause"})}),this.worker=e,this.callbacks=new Map,this.id=0,this.visibilityHandlerEnabled=null!=(n=t.handleVisibilityChange)&&n,this.worker.onmessage=e=>{const{id:t,data:n,error:r}=e.data,s=this.callbacks.get(t);s&&(r?s.reject(r):s.resolve(n),this.callbacks.delete(t))},this.visibilityHandlerEnabled&&this._setupVisibilityHandler()}_setupVisibilityHandler(){"hidden"in document&&"visibilityState"in document&&document.addEventListener("visibilitychange",this._handleVisibilityChange)}postMessage(e){return new Promise((t,n)=>{const r=++this.id;this.callbacks.set(r,{resolve:t,reject:n}),this.worker.postMessage(((e,t)=>{for(var n in t||(t={}))a.call(t,n)&&c(e,n,t[n]);if(o)for(var n of o(t))l.call(t,n)&&c(e,n,t[n]);return e})({id:r},e))})}terminate(){this.visibilityHandlerEnabled&&document.removeEventListener("visibilitychange",this._handleVisibilityChange),this.worker.terminate()}}},37324:function(){"use strict";wb.stat={},wb.stat.banners=function(){const e="j-banner",t={cl:{banner:e},sl:{shownStat:".j-banner-shown-stat",clickStat:".j-banner-click-stat",banner:"."+e}},n=e=>{var t,n;if((null==e?void 0:e.length)>0){const r=e[0];if(r.classList.contains("j-banner-wba")){let{data:e}=$.view(r);e=e.length>0?e[0]:e,e.banner&&(e=e.banner);const s=Boolean(e.ordBannerMark),i=(null==(t=e.bannerSelections)?void 0:t.length)>0?e.bannerSelections.map(e=>e.href).toString():e.link,o=e.isVideo||e.isHtml5,a={eventName:"Banner_T",bannerName:e.alt,location:r.dataset.analiticsCode,link:i,ind:r.dataset.bannerIndex,bid:e.id,withPromoMark:s,pixelSrc:e.pixelSrc,adv_params:o?(null==(n=e.htmlData)?void 0:n.data)||"":void 0,banner_load_time:o?e.loadTime:void 0};wb.analitics.sendBannersWbaEventByData(a)}}};return{initClickEvent:()=>{$("body").off("mousedown",t.sl.clickStat).on("mousedown",t.sl.clickStat,e=>{if(3===e.which)return;const r=e.currentTarget.classList.contains(t.cl.banner);let s=$(e.currentTarget);var i;r||(i=s.data("banner-id"),s=$(t.sl.banner).filter((e,t)=>$(t).data("banner-id")===i).first()),n(s)})},sendClickStatistic:n,destroyClickEvent:()=>{$("body").off("mousedown",t.sl.clickStat)},bannerBlockShownStatWba:e=>{const t=(e=>{if(!e)return;const t=document.querySelectorAll(".j-banners-block"),n=[],r=t=>{const r=Array.from(t.querySelectorAll(".j-banner-wba")),s=e.$observerHelper.getVerticalObserver(r,{threshold:.5});n.push(s);const i=t=>{const n=t.target,{data:r}=$.view(n),o=Boolean(r.ordBannerMark);e.$analitic.sendBannersWbaEvent("Banner_S",n.title,n.dataset.analiticsCode,n.href,n.dataset.bannerIndex,n.dataset.bannerId,o,r.pixelSrc),n.removeEventListener(s.elementInViewportEventName,i)};r.forEach(e=>{e.addEventListener(s.elementInViewportEventName,i)}),s.observe()};return t.forEach(e=>{r(e)}),{destroy:()=>{n.forEach(e=>{e.destroy()})},addBlocks:e=>{(null==e?void 0:e.length)&&e.filter(e=>e.classList.contains("j-banners-block")).forEach(e=>{r(e)})}}})(e);return{destroy:()=>{t&&t.destroy()},addBlocks:e=>{t&&t.addBlocks(e)}}}}}()},68387:function(e,t,n){"use strict";var r=n(88927),s=n(82516);var i=class{getFullEcomInfoHtml(e){return this.getFullEcomInfo(e,null)}_tryGetTargetItem(e){var t,n,r;let s=null==e?void 0:e.closest(".j-analitics-item");return s?$.view(s).data:(s=null==e?void 0:e.closest(".j-menu-main-item"),s?{getFullEcomInfo:(null==(r=null==(n=null==(t=wb.spa.getMainLayout().menuTop)?void 0:t.sideMenu)?void 0:n.statisticManager)?void 0:r.getFullEcomInfoMenuItem)||null}:null)}getFullEcomInfo(e,t){var n;if(t||(t=this._tryGetTargetItem(e)),!t)return null;return(null==(n=null==t?void 0:t.getFullEcomInfo)?void 0:n.call(t,e,t))||null}};const o="onw_handler_key",a=3e5;var l=class{saveStatInfo(e,t){if(!e||!t)return;const n=document.location.pathname;this._saveStatInfo({targetUrl:e,pathname:n,analiticsData:t})}getStatInfo(){const e=this._getStatInfo();return(null==e?void 0:e.analiticsData)||null}_getStatInfo(){var e;const t=JSON.parse(null!=(e=localStorage.getItem(o))?e:"{}");if(!(null==t?void 0:t.expired)||t.expired<Date.now()-a)return null;const n=t.data,r=document.location.href,s=document.referrer?new URL(document.referrer).pathname:"";return n.targetUrl==r&&n.pathname==s?n:null}_saveStatInfo(e){try{if(!e)return;localStorage.putObject(o,{expired:Date.now()+a,data:e})}catch(e){}}},c=Object.defineProperty,u=Object.defineProperties,d=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,g=(e,t,n)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,f=(e,t)=>{for(var n in t||(t={}))h.call(t,n)&&g(e,n,t[n]);if(p)for(var n of p(t))m.call(t,n)&&g(e,n,t[n]);return e},b=(e,t)=>u(e,d(t));const y="tail_object_data",v=["SNT","SNH","SNS","SST","SHT"],w=["SNS","ANS","SNH","ANH","SHT"],S=["SAB","ANH","ANS","AST"],_=["MBB","MBM","MBS","MBV","BBB","BBA","CBB","CBA","CBU","CBS","SBE","SAE","PBG","PBF","LKB","LKA","DLB","DLA","TBB","TAB","MBA","ABT","ABM","ABS","ABV"],I=["SAR","SAA"];var C=class{getTermsFromTailObject(e,t){var n,r,s,i,o,a,l,c,u,d,p,h,m,g,y,C,k,P,E,T,O,x,M,A,R,D,L,B,$,N;const j=this.getTailObjectData(),F={filters:null!=(n=j.filters)?n:"",filters_data:null!=(r=j.filters_data)?r:{},filters_entry_point:null!=(s=j.filters_entry_point)?s:"default"},U={bid:j.bid,bid_index:j.bid_index},W={category:j.category,id_category:j.id_category},H={parent_item_id:j.parent_item_id,brand:j.brand},V={entry_point:j.entry_point,entry_point_info:j.entry_point_info};if("AAA"===e||"ADI"===e){const e=this.getTailObjectData();let t;switch(e.page_type){case"brand":t=null!=(i=e.brand)?i:"";break;case"catalog":t=null!=(o=e.id_category)?o:"";break;case"search":t=null!=(a=e.search_text)?a:"";break;case"seller":t=null!=(l=e.page_info)?l:"";break;case"promo":t=null!=(c=e.page_info)?c:"";break;default:t=""}return{page_type:e.page_type,page_info:t,link:e.link}}if("AHT"===e){const e=this.getTailObjectData();return f({catalog_type:e.catalog_type,catalog_value:e.catalog_value,normquery:e.normquery,query_id:e.query_id,rs:e.rs,search_text:e.search_text,text_typed:e.text_typed,meta_preset_id:e.meta_preset_id},F)}if("SCL"===e){const e=this.getTailObjectData();return{catalog_type:e.catalog_type,catalog_value:e.catalog_value,query_id:e.query_id,rs:e.rs}}if("SCM"===e){const e=this.getTailObjectData(),t=wb.analitics.checkDataInSplitterServiceV2("common","ab_sp_search","true"),n=wb.global.settings.switches.enableSearchInSeller||t;return{catalog_type:e.catalog_type,catalog_value:e.catalog_value,query_id:e.query_id,rs:e.rs,recid:n&&G(e.filters_data)?e.recid:void 0,entry_point:n&&G(e.filters_data)?e.entry_point:void 0}}function z(){return f(f({},U),F)}function q(){return f(f({},F),W)}function K(){return{project_name:j.project_name,entry_point:j.entry_point,vendor_name:j.vendor_name,bid_index:j.bid_index,banner_block:j.banner_block,link:j.link}}if(_.includes(e))return["BBB","BBA"].includes(e)?f(f({},z()),V):["DLB","DLA"].includes(e)?b(f({},z()),{qty_block_delivery_before:j.qty_block_delivery_before}):["TBB","TAB"].includes(e)?b(f({},z()),{name:j.name}):["MBM","MBS","MBA","ABT","ABM","ABS","MBV","ABV"].includes(e)?f(f(b(f({},t),{page_type:j.page_type}),U),F):z();if("BWA"===e||"BQA"===e)return b(f(f(f({},F),U),V),{page_type:j.page_type,page_info:j.page_info});if("SXB"===e||"SXA"===e)return f(f({},F),U);function G(e){if(e&&e.fsupplier&&1===e.fsupplier.length)return e.fsupplier[0]}if(v.includes(e)||S.includes(e)){const n=function(){var e;const n=f({catalog_type:j.catalog_type,catalog_value:j.catalog_value,normquery:j.normquery,query_id:j.query_id,rs:j.rs,search_text:j.search_text,meta_preset_id:j.meta_preset_id,entry_point:null!=(e=null==j?void 0:j.entry_point)?e:""},F),r=Object.keys(t||{}).filter(e=>e in n).reduce((e,n)=>(e[n]=t[n],e),{});return f(f({},n),r)}(),r=wb.analitics.checkDataInSplitterServiceV2("common","ab_sp_search","true"),s=G(j.filters_data)&&(null==(u=wb.global.settings.mobileAppVariables.objects.eaptekaIds)?void 0:u.includes(Number(G(j.filters_data))))&&wb.global.settings.switches.enableSearchForEaptekaSellerPage;return(wb.global.settings.switches.enableSearchInSeller||r||s)&&G(j.filters_data)&&(n.supplier_id=G(j.filters_data),n.entry_point=j.entry_point,n.grid_type=j.grid_type),w.includes(e)&&(n.text_typed=null!=(d=j.text_typed)?d:"",n.meta_preset_id=j.meta_preset_id),"SNH"!==e&&"SNT"!==e||(n.article=j.article),n}if("STB"===e)return f({brand:j.brand,query_id:j.query_id,text_typed:null!=(J=j.text_typed)?J:"",search_text:null!=(Y=j.search_text)?Y:"",meta_preset_id:null!=(Q=j.meta_preset_id)?Q:""},F);var J,Y,Q;if("ATB"===e)return b(f({},F),{brand:j.brand,query_id:j.query_id,catalog_value:j.catalog_value,catalog_type:j.catalog_type,search_text:j.search_text,text_typed:j.text_typed});if("SCF"===e)return{search_text:j.search_text};if("SPA"===e)return f({query_id:j.query_id,grid_type:"Small",crop_category:j.crop_category},F);if("ATB"===e)return f({brand:j.brand,query_id:j.query_id,meta_preset_id:j.meta_preset_id},F);if(I.includes(e))return f({catalog_type:j.catalog_type,catalog_value:j.catalog_value,type_auto:j.type_auto,query_id:j.query_id,search_text:j.search_text,normquery:j.normquery,rs:j.rs,form_fields:j.form_fields,grid_type:j.grid_type,meta_preset_id:j.meta_preset_id},F);if("SBH"===e||"SAH"===e)return b(f(b(f({},U),{line:j.line,query:j.query,shardkey:j.shardkey,query_id:j.query_id,search_text:j.search_text}),F),{type:j.type});if("MAB"===e||"MCS"===e)return f({catalog_type:j.catalog_type,catalog_value:j.catalog_value,preset_type:j.preset_type,recid:j.recid},t);if("MBL"===e)return f({bid:j.bid},F);if("MBT"===e)return b(f(f({},U),F),{tv_block:"1"});if("MOS"===e)return{name:"Eapteka",filters:null!=(h=null!=(p=null==t?void 0:t.filters)?p:j.filters)?h:"",filters_entry_point:null!=(g=null!=(m=null==t?void 0:t.filters_entry_point)?m:j.filters_entry_point)?g:"default",filters_data:j.filters_data,grid_type:j.grid_type};if("IBC"===e)return F;if("BCR"===e)return f({filters:null!=(C=null!=(y=null==t?void 0:t.filters)?y:j.filters)?C:"",filters_entry_point:null!=(P=null!=(k=null==t?void 0:t.filters_entry_point)?k:j.filters_entry_point)?P:"default",filters_data:j.filters_data},V);if("BTA"===e)return f(f({carousel_name:j.carousel_name,carousel_index:j.carousel_index,type_of_block:null!=(E=null==t?void 0:t.type_of_block)?E:"FullsizeBlock"},F),V);if("BCA"===e||"BEA"===e)return f(f({},q()),V);if("BOL"===e||"BOA"===e)return b(f({},F),{letter:j.text_typed,place:j.search_text});if("SBB"===e)return b(f({bid_index:1},F),{grid_type:j.grid_type});if("SCT"===e||"SAT"===e)return b(f({supplier_id:j.supplier_id,category:j.category,id_category:j.id_category},F),{grid_type:j.grid_type,type:j.type,index:j.index});if("CCT"===e||"CCR"===e)return{};if(["CCC","CTC","CAB"].includes(e))return q();if("ICC"===e)return F;if("PCH"===e||"PAH"===e)return f({promo_name:j.category,promo_id:j.promo_id,cluster_name:j.cluster_name,cluster_index:1,type_of_block:"PreviewBlock"},F);if("PCD"===e||"PAD"===e)return f({promo_name:null!=(T=null==t?void 0:t.promo_name)?T:j.promo_name,promo_id:null!=(O=null==t?void 0:t.promo_id)?O:j.promo_id,type_of_block:null!=(x=null==t?void 0:t.type_of_block)?x:j.type_of_block},F);if("IAB"===e)return b(f({},F),{banner_name:j.banner_name});if(["ABN","ABC"].includes(e))return f(f({},F),H);if(["ISC","IBA","IBB"].includes(e))return b(f({},F),{parent_item_id:j.parent_item_id,entry_point:null!=(M=j.entry_point)?M:"default"});if(["IAC","IBN","ISC","IBB"].includes(e))return b(f({},F),{parent_item_id:j.parent_item_id});if(["IBT","IAT"].includes(e))return b(f({},F),{parent_item_id:j.parent_item_id});if(["ICO","ICV","ICR","IPT","ISR"].includes(e))return{parent_item_id:j.parent_item_id};if(["ISP","ISA"].includes(e))return{photo_index:j.photo_index,parent_item_id:j.parent_item_id};if(["ITO","IBS","IAS"].includes(e))return{parent_item_id:j.parent_item_id,type_of_block:j.type_of_block};if("IPT"===e)return{parent_item_id:j.parent_item_id};if("ICS"===e||"ICA"===e)return{catalog_type:j.catalog_type,catalog_value:j.catalog_value,preset_type:j.preset_type,parent_item_id:j.parent_item_id};if(["CCB","CCM","CPF"].includes(e))return{item_ids:j.item_ids};if("CRV"===e)return{empty_cart:j.empty_cart};if(["CSI"].includes(e))return{parent_item_id:null==(A=null==j?void 0:j.terms)?void 0:A.parent_item_id,type_of_block:(null==(R=null==j?void 0:j.terms)?void 0:R.type_of_block)||""};if("CCS"===e||"CSA"===e)return{recid:j.recid,preset_type:j.preset_type};if("TCA"===e||"TCM"===e)return{item_ids:j.item_ids};if(["CSD","CAD","WLC","WLA"].includes(e))return f(f({discount_name:"Скидка WB клуба"},F),W);if("PBC"===e)return U;if("PBB"===e)return b(f({},U),{filters_data:null!=(D=j.filters_data)?D:{}});if("PCB"===e||"PAP"===e)return b(f({},W),{filters_data:null!=(L=j.filters_data)?L:{}});if(["PSA","PBA","PAP","PPA","PCS","DLV","DCV","DRE"].includes(e))return{};if("AMB"===e)return{filters_data:null!=(B=j.filters_data)?B:{}};if(["PCC","PAS"].includes(e)){const e=Object.assign(j,t||{});return f({promo_name:e.promo_name,promo_id:e.promo_id,cluster_name:e.cluster_name,cluster_search_name:e.cluster_search_name,cluster_index:e.cluster_index,type_of_block:e.type_of_block,astro_name:e.astro_name},F)}return"FBR"===e||"FBA"===e?F:"FSA"===e||"FAA"===e?{parent_item_id:null!=($=null==t?void 0:t.parent_item_id)?$:j.parent_item_id,parent_loc:""}:"FCA"===e?{parent_item_id:null!=(N=null==t?void 0:t.parent_item_id)?N:j.parent_item_id}:["FCR","FAR","FBF","FAF","NCB","NAB"].includes(e)?{preset_type:j.preset_type,catalog_type:j.catalog_type,catalog_value:j.catalog_value,recid:j.recid}:"LLI"===e||"AIL"===e?{special_project:j.special_project}:"ICB"===e?{type_of_block:j.type_of_block,parent_item_id:j.parent_item_id}:"PVC"===e||"PAC"===e?f(f({type_of_block:j.type_of_block,vendor_index:j.vendor_index,promo_name:j.promo_name,promo_id:j.promo_id,vendor_rate:j.vendor_rate,vendor_id:j.vendor_id},F),t):"LKL"===e||"LLA"===e?{chance:j.chance,sum_next_chance:j.sum_next_chance,currency:j.currency}:"LCV"===e||"LVA"===e?{type_of_block:j.type_of_block}:"LSP"===e?f({},K()):"UAA"===e?b(f({},K()),{parent_loc:j.parent_loc}):"SCC"===e||"SAC"===e?b(f({},q()),{grid_type:"Line",index:j.index}):"SBS"===e||"SSA"===e?f({id_brand:j.id_brand,grid_type:"Line",index:j.index},F):"CSB"===e||"CAS"===e?{preset_type:j.preset_type,recid:j.recid}:"LKS"===e||"LAB"===e?f({catalog_type:j.catalog_type,catalog_value:j.catalog_value,preset_type:j.preset_type,recid:j.recid},t):"URV"===e||"URA"===e?f({parent_item_id:j.parent_item_id,placement:j.placement},t):"NCN"===e?{title:j.title,link:j.link}:"HDC"===e?f({diamond_id:j.diamond_id,diamond_name:j.diamond_name},F):"LBC"===e||"LAC"===e?f({bid:j.bid,banner_block:j.banner_block,bid_index:j.bid_index,project_name:j.project_name,banner_name:j.banner_name},F):"LTM"===e||"LAT"===e?f({task_id:j.task_id,task_index:j.task_index,type_of_block:j.type_of_block,project_name:j.project_name,chance:j.chance},F):"SRT"===e?f({catalog_type:"realty",normquery:j.normquery,query_id:j.query_id,search_text:j.text_typed,entry_point:j.entry_point,search_type:j.type},F):void 0}getTailObjectData(){const e=sessionStorage.getItem(y);let t=JSON.parse(null!=e?e:"{}");const n=t.query_id;if("terms"in t&&"object"==typeof t.terms&&null!==t.terms){const e=t.terms,{query_id:n}=e,r=((e,t)=>{var n={};for(var r in e)h.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&p)for(var r of p(e))t.indexOf(r)<0&&m.call(e,r)&&(n[r]=e[r]);return n})(e,["query_id"]);t=b(f({},t),{terms:r})}return void 0!==n&&(t.query_id=n),t}updateTailObjectDataFromHtml(e){if(e)if([..._,"MBL","MBT"].includes(e.l)){const t={bid:e.t,bid_index:e.t2};this.updateTailObjectData(t)}else if("IAB"===e.l){const t={banner_name:e.t};this.updateTailObjectData(t)}else if(["ICO","ICV","ICR","ICS","ISC","IBN","IBB"].includes(e.l)){const t={parent_item_id:e.t,entry_point:String(e.t1)};this.updateTailObjectData(t)}else if("ISP"===e.l||"ISA"===e.l){const t={photo_index:e.t,parent_item_id:e.t3};this.updateTailObjectData(t)}else if("PCC"===e.l){const t={promo_name:String(e.t),promo_id:String(e.t1),cluster_name:String(e.t2),cluster_search_name:String(e.t3),cluster_index:Number(e.t4),astro_name:""};this.updateTailObjectData(t)}}updateTailObjectData(e,t=!1){if(!e)return;const n=this.getTailObjectData();t&&delete n.terms,e.terms&&(e.terms=f(f({},n.terms),e.terms));const r=b(f(f({},n),e),{through:e.through});return this._saveTailObjectData(r),r}_saveTailObjectData(e){try{if(!e)return;sessionStorage.setItem(y,JSON.stringify(e))}catch(e){}}isSearchTail(e){if(e)return(null==e?void 0:e.l)&&(v.includes(e.l)||S.includes(e.l))}isAutoTail(e){if(e)return(null==e?void 0:e.l)&&I.includes(e.l)}},k=n(33506),P=n(41752),E=Object.defineProperty,T=Object.defineProperties,O=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,R=(e,t,n)=>t in e?E(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,D=(e,t)=>{for(var n in t||(t={}))M.call(t,n)&&R(e,n,t[n]);if(x)for(var n of x(t))A.call(t,n)&&R(e,n,t[n]);return e},L=(e,t)=>T(e,O(t)),B=(e,t,n)=>R(e,"symbol"!=typeof t?t+"":t,n);const N="wbAnalitic",j="__wba_s",F="last_search_type",U="search_suggest",W="purchase_checkout",H="stat_helper",V="query_id_search",z={l:"AAA",iid:1},q=3e5,K="temp_analytic_object_for_state";class G{constructor(){B(this,"_currentAddress"),B(this,"ecomStatHandler"),B(this,"moveFromTemp"),B(this,"openInNewWindowHandler"),B(this,"tailObjectModule"),B(this,"_statHelper"),this.tailObjectModule=new C,this.openInNewWindowHandler=new l,this.ecomStatHandler=new i,this._statHelper={moveFrom:""},this.moveFromTemp="",this._currentAddress=""}init(){var e,t;if(null==sessionStorage.getItem(N)){const t=JSON.parse(null!=(e=localStorage.getItem(N))?e:"{}");(null==t?void 0:t.expired)>Date.now()-q&&sessionStorage.setItem(N,JSON.stringify(t.payload)),this._updateFromDataForNewWindow()}const n=JSON.parse(null!=(t=localStorage.getItem(H))?t:"{}");(null==n?void 0:n.expired)>Date.now()-q&&(this._statHelper=n.info)}_updateFromDataForNewWindow(){const e=this.openInNewWindowHandler.getStatInfo();if(!e)return;if(!e.analiticsCode)return;const t=this.ecomInfoToAnaliticsState(e);this.saveState(t),e.tailObjectTerms&&this.updateTailObjectData(e.tailObjectTerms)}_getSort(e){var t,n;return["BCR","CCR","CEB","CSA","CCB","CCS","CRV","DRE","DLV","DCV","ICA","ICV","ICS","LCV","MCS","NCB","NCM","SCF","SCM","TCM","TCA","LCV","LKS","LAB","FBF"].includes(null!=(t=e.l)?t:"")?"":null!=(n=e.s)?n:"popular"}savePurchaseCheckout(e){sessionStorage.setItem(W,e)}getPurchaseCheckout(){var e;return null!=(e=sessionStorage.getItem(W))?e:"not_found"}sendWbaEcomStat(e,t,n,r){var s,i,o;try{if(!window.wba||!r&&0===(null!=(s=null==t?void 0:t.length)?s:0))return;if((n=null!=n?n:{}).hasOwnProperty("cookies_alert")||(n.cookies_alert=(null==(i=wb.spa.getMainReactLayout())?void 0:i.cookiePolicy.check())?1:0),n.hasOwnProperty("country")||(n.country=wb.settings.currentLocale),!n.hasOwnProperty("cluster")){const e=WbSpaModel.prototype.$user.getUserClusters();e&&(n.cluster=e)}n.address=null!=(o=this._currentAddress)?o:"not_selected",n.lang=wb.currentLanguage;const a=(new Date).format("yyyy-MM-dd HH:mm:ss");t.length&&!r?t.forEach(t=>{var r,s,i,o,l,c,u,d,p,h,m,g,f,b,y,v,w,S;let _={utcTime:a,id:null==(r=t.id)?void 0:r.toString(),nm:Number(t.id),chrt:Number(t.chrt),rid:null==(s=t.rid)?void 0:s.toString(),name:t.name,brand:t.brand,price:Number(t.price),inListIndex:Number(t.inListIndex)||1,listName:t.listName,variant:null!=(i=t.variant)?i:"",quantity:1,affiliation:`${null!=(o=t.affiliation)?o:""}|${null!=(l=t.storeId)?l:""}|${null!=(c=t.deliveryType)?c:""}`,category:null!=(u=t.category)?u:"regular",category2:t.subjectId&&t.subjectId>0?t.subjectId.toString():"",category3:t.subjectParentId&&t.subjectParentId>0?t.subjectParentId.toString():"",coupon:`${null!=(d=t.feedbacksCount)?d:""}|${null!=(p=t.rating)?p:""}`,currency:t.currency,country_code:wb.settings.currentLocale,logs:null!=(h=t.logs)?h:"",tailObject:t.tailObject,is_available:t.is_available,mark:t.mark,shippingItem:t.shippingItem};if("remove_from_cart"===e||"purchase"===e||"add_to_wishlist"===e){const e={showed_motivations:null!=(g=null==(m=t.actualStimulusListFirstTwo)?void 0:m.map(e=>e.type))?g:[],motivations_array:null!=(b=null==(f=t.actualStimulusList)?void 0:f.map(e=>e.type))?b:[]};_.motivations=JSON.stringify(e)}if("cart_del"===(null==n?void 0:n.type_remove)||"after_check_data"===(null==n?void 0:n.type_remove)||"card"===(null==n?void 0:n.type_add))return _.quantity=null!=(y=t.quantity)?y:1,void window.wba("ec:addProduct",_);if(window.wba("ec:setCurrency",WbSpaModel.prototype.$user.getCurrency()),"purchase"===e&&(_.dlDistance=null!=(v=null==t?void 0:t.dist)?v:0,_.dlTime=null!=(w=null==t?void 0:t.minDeliveryHours)?w:0),"add_to_wishlist"===e)window.wba("ec:addProduct",_);else{const e=parseInt(String(t.quantity))||1,n=!!t.rid&&e>1&&(null==(S=_.rid)?void 0:S.split(","))||[];for(let t=0;t<e;t++)(null==n?void 0:n.length)>t&&(_=Object.assign({},_),_.rid=n[t]),window.wba("ec:addProduct",_)}}):window.wba("ec:setCurrency",WbSpaModel.prototype.$user.getCurrency()),window.wba("ec:setAction",e),window.wba("ec:send",n)}catch(e){console.log("wba exception",e)}}async sendAddToCartEvent(e,t,n){const r=e.map(e=>({nmId:e.cod1S?e.cod1S:e.code1S,size:e.characteristicId})),i=await wb.xnm.getInfoForWbaStat(r),o=e.map(e=>{var n,r,o,a,l,c,u,d,p;const h=t.find(t=>t.cod1S==e.cod1S)||t.find(t=>t.code1S==e.cod1S),m=this.getStoreProp(e.stocks),g=this.getDtypeProp(e.stocks),f=null==(o=null==(r=null==(n=null==e?void 0:e.analytics)?void 0:n.tailObject)?void 0:r.terms)?void 0:o.query_id,b=this.getCategory({isC2C:null==h?void 0:h.isC2C,isDigital:wb.xnm.isDtypeFlagSet(g,s.iA.WBD)});let y=this.getTailObjectFromAnalyticsInfo(e.targetInfo.analiticsInfo);f&&(y.terms=L(D({},y.terms||{}),{query_id:f})),y.through=null==h?void 0:h.through;return{id:e.cod1S,chrt:e.characteristicId,price:null!=(c=null!=(l=null==h?void 0:h.salePrice)?l:null==(a=i.get(e.code1S||e.cod1S))?void 0:a.salePrice)?c:0,inListIndex:parseInt(e.targetInfo.analiticsInfo.iid||1),listName:this.analiticsInfoToListName(e.targetInfo.analiticsInfo),variant:(null==h?void 0:h.colorName)||(null==h?void 0:h.color),quantity:e.quantity,affiliation:(null==h?void 0:h.supplierId)||(null==h?void 0:h.sellerId)||0,storeId:m||(null==h?void 0:h.wh),deliveryType:(null==h?void 0:h.whDtype)||this.getDeliveryTypeForStat(g),name:(null==h?void 0:h.goodsName)||(null==h?void 0:h.name)||"",brand:(null==h?void 0:h.brandName)||(null==h?void 0:h.brand)||"",subjectId:null!=(u=null==h?void 0:h.subjectId)?u:0,subjectParentId:null!=(d=null==h?void 0:h.subjectParentId)?d:0,feedbacksCount:null!=(p=null==h?void 0:h.feedbacks)?p:0,rating:(null==h?void 0:h.reviewRating)||(null==h?void 0:h.rating)||0,rid:null==h?void 0:h.rId,logs:e.targetInfo.analiticsInfo.logs,tailObject:y,is_available:1,category:b}});"increase"===n?this.sendWbaEcomStat("add_to_cart",o,{type_add:"list_multi_button"}):"decrease"===n?this.sendWbaEcomStat("remove_from_cart",o,{type_remove:"list_multi_button"}):this.sendWbaEcomStat("add_to_cart",o,{type_add:"list"})}sendEvent(e,t={}){var n;if(!window.wba)return;t.country=wb.settings.currentLocale,t.lang=wb.currentLanguage;const r=WbSpaModel.prototype.$user.getUserClusters();r&&(t.cluster=r),e.startsWith("DLV_")||(t.address=null!=(n=this._currentAddress)?n:"not_selected"),"Header_T"===e&&(t.type="d"===wb.settings.displayMode?"desktop":"mobile"),window.wba(e,t)}sendAddressSelection({source:e,deliveryType:t,addressId:n,address:r,isChanged:s}){const i=s?"DLV_Address_Add_Ok":"DLV_Address_Slt",o={location:e};"courier"===t?(o.type="CRR",o.address_CRR=r):(o.type="PUP",o.pup_id=n.toString()),this.sendEvent(i,o)}sendCarouselWbaEvent(e,t,n,r,s,i){"Carousel_All"===e&&(this.moveFromTemp="carousel");let o={location:t=t||this.getState().l,index:null==n?void 0:n.toString(),item_id:null==r?void 0:r.toString(),name:s};i&&(o=Object.assign(o,i)),this.sendEvent(e,o)}sendBannersWbaEventByData(e){this.sendBannersWbaEvent(e.eventName,e.bannerName,e.location,e.link,e.ind,e.bid,e.withPromoMark,e.pixelSrc,e.noPromoStat,e.banner_load_time,e.adv_params)}sendBannersWbaEvent(e,t,n,r,s="0",i,o,a=null,l=!1,c,u,d="",p="",h=""){n=n||this.getState().l,"Banner_T"===e&&(this.moveFromTemp="banner");const m={name:null!=t?t:"",location:n,link:r,index:(parseInt(s)+1).toString(),id:i};l||(m.promo=o?"yes":"no"),"MBT"===n?m.tv_block=1:"SBH"===n&&(m.catalog_type=d,m.catalog_value=p,m.logs=h),c&&(m.banner_load_time=c),!u&&""!==u||"SBH"===n||(m.adv_params=u),this.sendEvent(e,m),a&&this.sendTrackingPixel(a)}getStatInfo(){return this._statHelper}setStatInfo(e,t){try{null==localStorage||localStorage.putObject(H,{info:e,expired:Date.now()+q}),t||(this._statHelper=e)}catch(e){console.warn("Saving analitics state has failed"),console.error(e.message)}}updateStatInfo(e){const t=this.getStatInfo();t.moveFrom=this.moveFromTemp?this.moveFromTemp:"",this.moveFromTemp="",this.setStatInfo(t,e)}sendSessionStartEvent(){const e=localStorage.getItem(j),t=Date.now();localStorage.setItem(j,(t+18e5).toString()),e&&Number(e)>t||this.sendEvent("session_start")}async getSplitInfo(){return WbSpaModel.prototype.$services.splitterService.getSplitInfo()}getSplitInfoV2(e){return WbSpaModel.prototype.$services.splitterService.getSplitInfoV2(e)}appendSplitInfoV2(e,t){return WbSpaModel.prototype.$services.splitterService.appendSplitInfoV2(e,t)}getSplitterHeadersV2(e){var t;const n=this.getSplitInfoV2(e),r=WbSpaModel.prototype.$user.getUserInfo(),s=(null!=(t=null==r?void 0:r.uid)?t:0).toString();let i="";(null==n?void 0:n.length)&&n.forEach(e=>{i+=`${e.key}=${e.value};`});const o=new Headers;return o.set("UserID",s),o.set("Test-Properties",(null==i?void 0:i.substring(0,i.length-1))||""),o}getRecommendationsSplitterHeaders(){return this.getSplitterHeadersV2("rec")}checkDataInSplitterServiceV2(e,t,n){let r=!1;if(e){const s=this.getSplitInfoV2(e);for(let e=0;e<s.length;e++)s[e].key===t&&s[e].value===n&&(r=!0,e=s.length)}return r}tryGetAnaliticsCodeForSearchAdvert(e){switch(e){case"SNH":return"ANH";case"SNS":return"ANS";case"SHT":return"AHT";case"SNT":return"SAB";case"SST":return"AST";case"AAA":return"ADI";case"MBB":return"AMB";case"PBC":return"PBA";case"PBB":return"PPA";case"PCB":return"PAP";case"CSD":return"CAD";case"WLC":return"WLA";case"PVC":return"PAC";case"WCI":return"WCD";case"IBN":return"ABN";case"IBB":return"IBA";case"IBC":return"ABC";case"ICC":return"IAC";case"LSP":return"UAA";case"SAR":return"SAA";case"SCC":return"SAC";case"SBS":return"SSA";case"STB":return"ATB";case"FBR":return"FBA";case"BBB":return"BQA";case"BBA":return"BWA";case"BCA":return"BEA";case"BCR":return"BTA";case"BOL":return"BOA";case"ISP":return"ISA";case"FCS":return"FCA";case"FSA":return"FAA";case"LKB":return"LKA";case"DLB":return"DLA";case"TBB":return"TAB";case"SBE":return"SAE";case"LCV":return"LVA";case"PBG":return"PBF";case"LKS":return"LAB";case"SXB":return"SXA";case"URA":return"URV";case"PCC":return"PAS";case"SBH":return"SAH";case"MBL":return"MBA";case"MBT":return"ABT";case"MBM":return"ABM";case"MBS":return"ABS";case"MBV":return"ABV";case"LBC":return"LAC";case"LTM":return"LAT";case"PCD":return"PAD";default:return null}}tryGetAdvertCode(e){switch(e){case"ANH":return"SNH";case"ANS":return"SNS";case"AHT":return"SHT";case"SAB":return"SNT";case"AST":return"SST";case"ADI":return"AAA";case"SAA":return"SAR";case"SAC":return"SCC";case"SSA":return"SBS";case"ATB":return"STB";case"FBA":return"FBR";case"BQA":return"BBB";case"BWA":return"BBA";case"BEA":return"BCA";case"BTA":return"BCR";case"BOA":return"BOL";case"FCS":return"FCA";case"FSA":return"FAA";case"LKA":return"LKB";case"DLA":return"DLB";case"TAB":return"TBB";case"SAE":return"SBE";case"LCV":return"LVA";case"PBF":return"PBG";case"PPA":return"PBB";case"LAB":return"LKS";case"IBS":return"IAS";case"SXA":return"SXB";case"URV":return"URA";case"ISA":return"ISP";case"SAH":return"SBH";case"MBA":return"MBL";case"ABT":return"MBT";case"ABM":return"MBM";case"ABS":return"MBS";case"ABV":return"MBV";case"LAC":return"LBC";case"LAT":return"LTM";case"PAD":return"PCD";default:return null}}getTermByTermName(e){const t=wb.cookieHelper.getCookie("_wbauid"),n=(new Date).format("yyyyMMddHHmmss",!0),r={qid:"qid",recid:"recid"};return r[e]?`${r[e]}${t}${n}`:void 0}updateTailObjectData(e,t){this.tailObjectModule.updateTailObjectData(e,t)}getTailObjectData(){return this.tailObjectModule.getTailObjectData()}getTempAnalyticForState(){const e=sessionStorage.getItem(K);if(e){const t=JSON.parse(e);return sessionStorage.removeItem(K),t}return null}saveTempAnalyticForState(e,t){try{if(!e)return;sessionStorage.setItem(K,JSON.stringify({list:e,tail:t}))}catch(e){}}getTermsFromTailObject(e,t){return this.tailObjectModule.getTermsFromTailObject(e,t)}getAnaliticsInfoFromTargetUrl(e,t=null,n="",r=!1){var s;e||(e="");const i=["targetUrl","iid","l","lw","s","t","t1","t2","t3","t4","t5","t6","logs"],o=(e,r)=>{var s;return null!=(s=null!=e?e:t&&(null==t?void 0:t[r]))?s:n},a={},l=e.split("|");for(let e=r?2:0;e<i.length;e++){const t=null!=(s=l[e])?s:null,n=i[e];if(!n)return;a[n]=o(t,n)}return a}analiticsInfoToListName(e={},t={}){const n=D(D({},e),t),{l:r="",lw:s="",s:i="",t:o="",t1:a="",t2:l="",t3:c="",t4:u="",t5:d="",t6:p=""}=n;return`${r}|${s}|${i}|${o}|${a}|${l}|${c}|${u}|${d}|${p}`}getDeliveryTypeForStat(e=void 0){return e?wb.xnm.isDtypeFlagSet(e,s.iA.DBS)?"DBS":wb.xnm.isDtypeFlagSet(e,s.iA.EDBS)?"eDBS":wb.xnm.isC2C(e)?"C2C":"WB":"WB"}getStoreProp(e){var t;if(null==e?void 0:e.length)return null==(t=e.sort((e,t)=>{var n,r,s,i;return(null!=(n=e.time1)?n:0)+(null!=(r=e.time2)?r:0)-(null!=(s=t.time1)?s:0)-(null!=(i=t.time2)?i:0)})[0])?void 0:t.wh}getDtypeProp(e){var t;if(null==e?void 0:e.length)return null==(t=e.sort((e,t)=>{var n,r,s,i;return(null!=(n=e.time1)?n:0)+(null!=(r=e.time2)?r:0)-(null!=(s=t.time1)?s:0)-(null!=(i=t.time2)?i:0)})[0])?void 0:t.dtype}getTailObjectFromAnalyticsInfo(e,t,n){var r;t=t||this.tailObjectModule.getTermsFromTailObject(null!=(r=null==e?void 0:e.l)?r:"",null!=n?n:{});const s=this.tailObjectModule.getTailObjectData().through;return this._getTailObjectFromAnalyticsInfo(e,t,s)}_getTailObjectFromAnalyticsInfo({l:e="",lw:t="",s:n="",t:r="",t1:s="",t2:i="",t3:o="",t4:a="",t5:l="",t6:c="",t7:u="",t8:d=""}={},p=null,h=null){const m={loc:e,loc_way:t,sort:n};if(h&&(m.through=h),p)return m.terms=p,m;const g={banner_block:a,bid_index_t2:i,bid_index_t3:o,bid_index_t6:c,bid_t:r,bid_t5:l,brand_index:i,brand_t:r,brand_t3:o,carousel_index_t3:o,carousel_name:r,carousel_type:a,catalog_type:i,catalog_value:s,category_t:r,category_t5:l,cluster_index_t4:a,cluster_name_t2:i,empty_cart:r,entry_point:s,filters_entry_point:d,filters_t2:i,filters_t7:u,id_category_t1:s,id_category_t3:o,id_category_t6:c,item_ids:r,letter_t3:o,link:i,name_t:r,name_t1:s,parent_item_id_t:r,parent_item_id_t1:s,position:i,place:r,project_name:r,promo_id_t1:s,promo_id_t3:o,promo_name:r,query_id:l,search_text_t:r,search_text_t3:o,subject_id:i,subject_parent_id:o,supplier_name:r,supplier_type:s,tag_index:s,tag_text:r,tv_block:s,type_of_block_t1:s,type_of_block_t5:l,type:r,vendor_id:o,vendor_index:a,vendor_name:i,vendor_rate:i,type_of_block:o},f=Object.keys(g).reduce((e,t)=>(e[t]=String(g[t]),e),{}),{banner_block:b,bid_index_t2:y,bid_index_t3:v,bid_index_t6:w,bid_t:S,bid_t5:_,brand_index:I,brand_t:C,brand_t3:k,carousel_index_t3:P,carousel_name:E,carousel_type:T,catalog_type:O,catalog_value:x,category_t:M,category_t5:A,cluster_index_t4:R,cluster_name_t2:B,empty_cart:$,entry_point:N,filters_entry_point:j,filters_t2:F,filters_t7:U,id_category_t1:W,id_category_t3:H,id_category_t6:V,item_ids:z,letter_t3:q,link:K,name_t:G,name_t1:J,parent_item_id_t:Y,parent_item_id_t1:Q,position:X,place:Z,project_name:ee,promo_id_t1:te,promo_id_t3:ne,promo_name:re,query_id:se,search_text_t:ie,search_text_t3:oe,subject_id:ae,subject_parent_id:le,supplier_type:ce,tv_block:ue,type_of_block_t1:de,type_of_block_t5:pe,type:he,vendor_id:me,vendor_index:ge,vendor_name:fe,vendor_rate:be,type_of_block:ye}=f,ve={catalog_type:O,catalog_value:x,normquery:""},we={catalog_type:"",catalog_value:"",normquery:""},Se={filters:"",filters_data:{},filters_entry_point:""},_e={},Ie={category:M,id_category:W},Ce={bid:S,bid_index:y},ke={supplier_type:ce};return["SNT","SNH","SNS","SHT","SCF","STB"].includes(e)?L(D({},m),{terms:L(D(D({},ve),Se),{search_text:ie,query_id:se})}):["SST"].includes(e)?L(D({},m),{terms:{search_text:ie,catalog_value:x,catalog_type:O}}):["SAB","ANH","ANS","AST","AHT"].includes(e)?L(D({},m),{terms:L(D({},_e),{search_text:oe,query_id:se})}):"STB"===e?L(D({},m),{terms:{brand:C,catalog_value:x,catalog_type:O,query_id:se}}):"ATB"===e?L(D({},m),{terms:L(D(D({},Se),we),{brand:k})}):["SCM","SCR","SPA"].includes(e)?L(D({},m),{terms:{query_id:se}}):["MBB","MBH","MBM","MBS","MBV"].includes(e)||["MBL","MBA","ABM","ABS","ABV"].includes(e)?L(D({},m),{terms:D(D({},Ce),Se)}):"MBT"===e||"ABT"===e?L(D({},m),{terms:L(D(D({},Ce),Se),{tv_block:ue})}):["MBG","MBF"].includes(e)?L(D({},m),{terms:D({},Ce)}):["MAB","AMB"].includes(e)?L(D({},m),{terms:D({},_e)}):["MCS","MCB","MCP","MCV","MCO","MPF","MCM","MCN","MSA"].includes(e)?D({},m):"MCD"===e||"MAD"===e?L(D({},m),{terms:{promo_name:re,promo_id:te,type_of_block:pe}}):["BBB","BBA","BBD"].includes(e)?L(D({},m),{terms:D(D({},Se),Ce)}):["BQA","BWA"].includes(e)?L(D({},m),{terms:L(D({},Se),{bid:S,bid_index:v})}):"BCA"===e?L(D({},m),{terms:D({filters:F},Ie)}):"BEA"===e?L(D({},m),{terms:{category:M,id_category:H}}):"BPA"===e?L(D({},m),{terms:L(D({},_e),{brand:k,filters:U})}):["BCR","BCB","BCP"].includes(e)||"MOS"===e?L(D({},m),{terms:D({},Se)}):"BTA"===e?L(D({},m),{terms:L(D({},Se),{carousel_name:E,carousel_index:P})}):"BOL"===e||"BOA"===e?L(D({},m),{terms:L(D({},Se),{place:Z,letter:q})}):["CCC","CTC"].includes(e)?L(D({},m),{terms:L(D({},Ie),{filters:F,filters_entry_point:""})}):"CAB"===e?L(D({},m),{terms:L(D(D({},Se),_e),{id_category:H})}):"SAA"===e?L(D({},m),{terms:L(D(D({},Se),_e),{search_text:oe,query_id:se,filters:U})}):["CBB","CBA","CBS","CBU"].includes(e)?L(D({},m),{terms:D(D({},Ce),Se)}):["CCA","CCR","CCT","CBP","CPA"].includes(e)?D({},m):"SAR"===e?L(D({},m),{terms:{search_text:ie,catalog_value:x,catalog_type:O,query_id:se,filters:U}}):"PCH"===e?L(D({},m),{terms:{promo_name:re,promo_id:te,cluster_name:B,cluster_index:R}}):"PAH"===e?L(D({},m),{terms:{promo_name:re,promo_id:ne}}):"PCD"===e?L(D({},m),{terms:{promo_name:re,promo_id:te}}):"PAD"===e?L(D({},m),{terms:{promo_name:re,promo_id:ne}}):"SPL"===e?L(D({},m),{terms:D({},ke)}):["SBB","SBT","SBC"].includes(e)?L(D({},m),{terms:D(D({},ke),Ce)}):"SCA"===e?L(D({},m),{terms:L(D({},ke),{category:M})}):"SBR"===e?L(D({},m),{terms:L(D({},ke),{brand_index:I})}):["SCB","SCO","SCP"].includes(e)?L(D({},m),{terms:D({},ke)}):"SSB"===e?L(D({},m),{terms:{name:G,type_of_block:de,position:X}}):"ABP"===e?L(D({},m),{terms:L(D({parent_item_id:null==r?void 0:r.toString()},_e),{brand:k,filters:U,filters_entry_point:j})}):["ABC","ABN"].includes(e)?L(D({},m),{terms:L(D({},Se),{parent_item_id:null==r?void 0:r.toString(),brand:k})}):"IBA"===e?L(D({},m),{terms:L(D({},Se),{parent_item_id:null==r?void 0:r.toString()})}):"IAC"===e?L(D({},m),{terms:L(D({parent_item_id:Y},_e),{filters:U,filters_entry_point:j})}):["ICO","ICB","ICF","ICV","ICD","ICR","ICE","ICS","IBS","IAS","ICL","ICI","ISC","IAD","IBT","IAT"].includes(e)?L(D({},m),{terms:D({parent_item_id:Y},Se)}):"ICA"===e?L(D({},m),{terms:L(D({},_e),{parent_item_id:Y})}):"IAB"===e?L(D({},m),{terms:D(D({},Ce),Se)}):["IBP","IBC","ICC","IRC","ISP","ISA","ITA"].includes(e)?L(D({},m),{terms:D({},Se)}):["IBN","IBB"].includes(e)?L(D({},m),{terms:{parent_item_id:Y,filters:U,filters_entry_point:j}}):["CCM","CPF","CRA"].includes(e)?L(D({},m),{terms:{item_ids:z}}):"CSI"===e?L(D({},m),{terms:{parent_item_id:Y}}):"CRV"===e?L(D({},m),{terms:{empty_cart:$}}):["CCS","CSA"].includes(e)?L(D({},m),{terms:{}}):["CRT","CER","CEB","CSC"].includes(e)?D({},m):"CCB"===e?L(D({},m),{terms:{item_ids:z,parent_item_id:Q,subject_id:ae,subject_parent_id:le,carousel_type:T}}):["DLV","DCR","DCV","DRC","DRE"].includes(e)?L(D({},m),{terms:D({},Se)}):"TCB"===e?L(D({},m),{terms:{parent_item_id:Y}}):"TCM"===e?L(D({},m),{terms:{item_ids:z}}):["FCS","FCA","FSA","FAA","FRP","FCV"].includes(e)?L(D({},m),{terms:{}}):["VRW","VCV"].includes(e)||["AAA","ADI","AAB","AAC","AAS"].includes(e)||["LCS","LCR","WTL"].includes(e)||["WSH","WCA","WCV","WCS","WCR","WAB"].includes(e)?D({},m):["RWA","LCV","LVA"].includes(e)?L(D({},m),{terms:{type_of_block:ye}}):["URV","URA"].includes(e)?L(D({},m),{terms:{parent_item_id:Y}}):["NCV","NCM","NCR"].includes(e)||"NIA"===e||["PRC","PCV"].includes(e)||["FEW","FEQ","FEF"].includes(e)||"PPM"===e?D({},m):["FBR","FBV"].includes(e)||"FBA"===e||"LBA"===e?L(D({},m),{terms:D({},Se)}):"PCA"===e?L(D({},m),{terms:L(D({},Se),{type:he,name:J,link:K})}):"ITO"===e?L(D({},m),{terms:{parent_item_id:Y,type_of_block:de}}):"LSP"===e?L(D({},m),{sort:"default",terms:{project_name:ee}}):["PBC","PBB"].includes(e)?L(D({},m),{terms:D({},Ce)}):["PSA","PBA","PPA"].includes(e)?L(D({},m),{terms:L(D({},_e),{bid:_,bid_index:w})}):"PAP"===e?L(D({},m),{terms:L(D({},_e),{category:A,id_category:V})}):"PCB"===e?L(D({},m),{terms:D({},Ie)}):"PSP"===e?L(D({},m),{terms:{parent_item_id:Y}}):"PCS"===e||["WCI","WCD"].includes(e)?D({},m):"LCV"===e?L(D({},m),{sort:"popular"}):["TBV","TBN","TBC","TBA","TBP","TBT"].includes(e)?L(D({},m),{terms:D({},Ce)}):"PVC"===e?L(D({},m),{terms:{promo_name:re,promo_id:te,vendor_rate:be,vendor_id:me,vendor_index:ge}}):"PAC"===e?L(D({},m),{terms:{promo_name:re,promo_id:ne}}):"LSP"===e?L(D({},m),{terms:{project_name:ee}}):"UAA"===e?L(D({},m),{terms:{project_name:ee,entry_point:N,vendor_name:fe,bid_index:v,banner_block:b}}):["LKS","LAB"].includes(e)?L(D({},m),{terms:L(D({},_e),{catalog_value:x,catalog_type:O})}):{}}saveEcomInfo(e){let t=this.ecomStatHandler.getFullEcomInfo(e,null);t&&this.openInNewWindowHandler.saveStatInfo(e.href,t)}getEcomInfoFromHtmlItem(e){return this.ecomStatHandler.getFullEcomInfoHtml(e)}getEcomInfoFromItem(e,t){return this.ecomStatHandler.getFullEcomInfo(e,t)}analiticsStateToEcomInfo(e){const{l:t="",iid:n="",logs:r="",lw:s="",s:i="",t:o="",t1:a="",t2:l="",t3:c="",t4:u="",t5:d="",t6:p=""}=e,h={analiticsCode:t,locationWay:s,sort:i,index:n,termsForListName:{t:o,t1:a,t2:l,t3:c,t4:u,t5:d,t6:p}};return r&&(h.logs=r),h}convertToAnaliticsState(e,t,n,r,s,i,o,a,l,c,u){if("string"!=typeof e)return;"string"!=typeof t&&"number"!=typeof t&&(t=null),"string"!=typeof n&&"number"!=typeof n&&(n=null),"string"!=typeof r&&"number"!=typeof r&&(r=null),"string"!=typeof s&&"number"!=typeof s&&(s=null),"string"!=typeof i&&"number"!=typeof i&&(i=null),"string"!=typeof o&&"number"!=typeof o&&(o=null),"string"!=typeof a&&"number"!=typeof a&&(a=null),"string"!=typeof l&&"number"!=typeof l&&(l=null),"string"!=typeof c&&"number"!=typeof c&&(c=null),"string"!=typeof u&&(u=null);const d={l:e};let p=parseInt(String(t));return null==t||isNaN(p)||(d.iid=Math.max(1,p)),null!=n&&(d.opt=n),null!=r&&(d.t=r),null!=s&&(d.t1=s),null!=i&&(d.t2=i),null!=o&&(d.t3=o),null!=a&&(d.t4=a),null!=l&&(d.t5=l),null!=c&&(d.t6=c),null!=u&&(d.logs=u),d}ecomInfoToAnaliticsState(e){var t,n,r,s,i,o,a,l,c;["Item","Feedback","Question","LK_Feedback","Item_Feedback","TikTok"].includes(null==e?void 0:e.termsForListName.t1)&&(e.termsForListName.t1=void 0);const u=this.convertToAnaliticsState(null==e?void 0:e.analiticsCode,null==e?void 0:e.index,null!=(t=null==e?void 0:e.sort)?t:"",null!=(n=null==e?void 0:e.termsForListName.t)?n:"",null!=(r=null==e?void 0:e.termsForListName.t1)?r:"",null!=(s=null==e?void 0:e.termsForListName.t2)?s:"",null!=(i=null==e?void 0:e.termsForListName.t3)?i:"",null!=(o=null==e?void 0:e.termsForListName.t4)?o:"",null!=(a=null==e?void 0:e.termsForListName.t5)?a:"",null!=(l=null==e?void 0:e.termsForListName.t6)?l:"",null!=(c=null==e?void 0:e.logs)?c:"");return u&&e.sort&&(u.s=e.sort),u}saveState(e,t=!1,n=!1){try{"string"==typeof e&&(e=this.getAnaliticsInfoFromTargetUrl(`||${e}`));const r=JSON.stringify({payload:e,expired:Date.now()+q});n||"object"!=typeof e||null==e||(e.s=this._getSort(e));const s=JSON.stringify(e);sessionStorage.setItem(N,s),t||localStorage.setItem(N,r)}catch(e){console.warn("Saving analitics state has failed"),console.error(e.message)}}trySaveStateV2(e){const t=this.getEcomInfoFromHtmlItem(e);if(!t)return!1;const n=this.ecomInfoToAnaliticsState(t);return this.saveState(n),this.updateTailObjectData(t.tailObjectTerms),!0}saveStateFromReact(e){const t=this.getEcomInfoFromItem(null,e);if(!t)return!1;const n=this.ecomInfoToAnaliticsState(t);return this.saveState(n),this.updateTailObjectData(t.tailObjectTerms),!0}mapPaymentSystemToWbaName(e){var t;if(!e)return"";const n="_newcardid"===e.id,r="qrc"===e.codeLower&&e.createNew,s=null!=(t=e.system)?t:e.codeLower;if(n)return"Add_Card";if(r)return"Add_SBP";switch(s){case"mir":return"MIR";case"visa":return"Visa";case"mastercard":return"Mastercard";case"belcard":return"Belcard";case"arca":return"Arca";case"humo":return"Humo";case"union_pay":return"UnionPay";case"elcard":return"Elcard";case"maestro":return"Maestro";case"uzcard":return"Uzcard";case"american_express":return"AmericanExpress";case"drm":return"Idram";case"sbp":return"SberPay";case"qrc":return"Selected_SBP";case"wlt":return"Wallet";case"ebl":return"Balance";case"cre":return"credit";case"cin":return"cin_installment";case"cwb":return"wb_installment"}return""}getNameForPaymentType(e){var t,n;return e?e.isWallet?"Wallet":e.isSberPay?"Sber_pay":e.isCredit?"Credit":e.isWbComInst?"Paid_installment":e.isBalance?"Balance":e.isBplInst||e.isInst?"Installment":e.isCwbInst?"Wb_installment":e.isCreditCard?"sbp"===(null==(t=null==e?void 0:e.selectedBankCard)?void 0:t.system)?"Sber_pay":"qrc"===(null==(n=null==e?void 0:e.selectedBankCard)?void 0:n.system)?"Sbp":"Card":"":""}sendUserEvent(e,t){this.sendEvent("user_id",{clientId:e,account_id:t})}proceedAndSave(e,t,n,r,s,i,o,a,l,c,u){if("string"!=typeof e)return;const d=this.convertToAnaliticsState(e,t,n,r,s,i,o,a,l,c,u);this.tailObjectModule.updateTailObjectDataFromHtml(d),this.saveState(d)}_escape(e){return e?"string"!=typeof e?e:e.replace(/'/g," "):""}_validateAndFix(e){return(null==e.iid||isNaN(e.iid)||e.iid<1)&&(e.iid=1),e.t=this._escape(e.t),e.t1=this._escape(e.t1),e.t2=this._escape(e.t2),e}getState(e=!0){var t;let n=null!=(t=sessionStorage.getObject(N))?t:z;return e&&n.extraL&&(n.l=n.extraL,n.extraTerms&&(n=D(D({},n),n.extraTerms))),this._validateAndFix(n)}updateState(e,t){const n=this.getState(!1);let r=D(D({},n),e);!(null==e?void 0:e.extraTerms)&&t&&t[n.l]&&(r=D(D({},r),t[n.l])),this.saveState(r)}updateAnalyticsFromQuery(){var e;const t=new URL(window.location.href);if(document.referrer.indexOf("guru.wildberries.ru")>0&&t.searchParams.has("externalSource")&&t.searchParams.has("analyticsCode")){const n=null!=(e=t.searchParams.get("analyticsCode"))?e:"";this.saveState(n,!1,!0)}else if(t.searchParams.has("listName")){const e=t.searchParams.get("listName"),n=this.getAnaliticsInfoFromTargetUrl(`||${e}`);this.saveState(n);const r=null==n?void 0:n.l;r&&["LLI","AIL"].includes(r)&&this.updateTailObjectData({special_project:null==n?void 0:n.t})}else t.searchParams.has("analiticsCode")&&this.saveState({l:t.searchParams.get("analiticsCode")},!0)}saveLastSearchAnaliticsData(e){sessionStorage.putObject(F,e)}saveLastSearchAnalyticsDataForSuggest(e){sessionStorage.setItem(U,e)}saveQueryIdForSearch(e){sessionStorage.setItem(V,e)}retrieveQueryIdForSearch(){const e=sessionStorage.getItem(V);if(e)return e;{const e=this.getTermByTermName("qid");return e&&this.saveQueryIdForSearch(e),e}}getLastSearchAnaliticsData(){var e;const t=null!=(e=sessionStorage.getObject(F))?e:null;return t&&sessionStorage.removeItem(F),t}getLastSearchAnalyticsDataForSuggest(){var e;return null!=(e=sessionStorage.getItem(U))?e:""}async isAbTest155Approved(){const{splitId:e,title:t}=await this.getSplitInfo();return"155"===e&&"test_1"===t}setCurrentAddress(e,t){this._currentAddress=`${"courier"===e?"CRR":""}${t}`}saveLastViewedNm(e){sessionStorage.putObject("LAST_VIEWED_NM",e)}getLastViewedNm(){return sessionStorage.getObject("LAST_VIEWED_NM")}updateAnalyticsSource(e){this.updateState({source:e})}sendTrackingPixel(e){document.createElement("img").src=e}isSearchTerms(e){return this.tailObjectModule.isSearchTail(e)}isAutoTerms(e){return this.tailObjectModule.isAutoTail(e)}getDecodedAnalytics(){var e,t,n,r,s,i,o,a,l,c;const u=this.getLastEncodedAnalyticsUrl(),d=new URL(u),p=new URLSearchParams(d.search);let h=null!=(e=p.get("analyticsCode"))?e:"",m=null!=(t=p.get("analyticsCodeJSON"))?t:"",g={};if(!h&&!m)return;const f=h.split("|"),b={l:null!=(n=f[0])?n:"",t:null!=(r=f[3])?r:"",t1:null!=(s=f[4])?s:"",t2:null!=(i=f[5])?i:"",t3:null!=(o=f[6])?o:"",t4:null!=(a=f[7])?a:"",t5:null!=(l=f[8])?l:"",t6:null!=(c=f[9])?c:""};if(m)try{g=JSON.parse(m)}catch(e){}return{analyticState:b,analyticsCodeJSON:g}}isNeedDecodeAnalytics(){const e=window.location.search,t=new URLSearchParams(e);return t.has("analyticsCode")||t.has("analyticsCodeJSON")?(this.saveLastEncodedAnalyticsUrl(window.location.href),!0):!!this._isPageRefreshOrRedirect&&(!window.location.href.includes("basket")&&this._areUrlsEquivalent(window.location.href,this.getLastEncodedAnalyticsUrl()))}saveLastDecodedAnalytics(e){sessionStorage.putObject("LAST_DECODED_ANALYTICS",e)}getLastDecodedAnalytics(e="",t=""){var n;const r=sessionStorage.getObject("LAST_DECODED_ANALYTICS");return r.analyticsCodeJSON&&Object.keys(r.analyticsCodeJSON).length&&(e&&"UAA"!==r.analyticsCodeJSON.loc&&(r.analyticsCodeJSON.terms.parent_loc=r.analyticsCodeJSON.loc,r.analyticsCodeJSON.loc="UAA"),t&&(r.analyticsCodeJSON.sort=t)),(null==(n=r.analyticState)?void 0:n.l)&&(e&&(r.analyticState.l="UAA",r.analyticState.logs=e),t&&(r.analyticState.s=t)),r}saveLastEncodedAnalyticsUrl(e){sessionStorage.putObject("LAST_ENCODED_ANALYTICS_URL",e)}getLastEncodedAnalyticsUrl(){return sessionStorage.getObject("LAST_ENCODED_ANALYTICS_URL")}_areUrlsEquivalent(e,t){if(!e||!t)return!1;const n=e=>{const[t,n]=e.split("?"),r=new URLSearchParams(n||"");return{path:t.replace(/\/$/,"").toLowerCase(),key:r.get("search")||r.get("seller")}},r=n(e),s=n(t);return r.path===s.path&&(r.key===s.key||!r.key&&!s.key)}_isPageRefreshOrRedirect(){var e;const t=null==(e=performance.getEntriesByType("navigation"))?void 0:e[0];return t&&("reload"===t.type||"navigate"===t.type)}getLocationFromEntrypoint(e){let t="";switch(e){case"SpaHomeEntrypoint":t="Main";break;case"SpaCatalogEntrypoint":case"SpaSearchEntrypoint":case"SpaSearchByImageEntrypoint":t="Catalog";break;case"SpaBrandsEntrypoint":t="Brand";break;case"SpaSellerCatalogEntrypoint":t="Supplier";break;case"SpaPersonalCabinetEntrypoint":t="LK";break;case"SpaActiveOrdersEntrypoint":t="Delivery";break;case"SpaArchivePositionsEntrypoint":t="Purchases";break;case"SpaFavoritesEntrypoint":t="Favorites";break;case"SpaBasketEntrypoint":t="Cart";break;case"SpaPromotionsEntrypoint":t="Promotions";break;case"SpaPromotionCatalogEntrypoint":case"Apple2024Entrypoint":t="SalePage";break;case"SpaProductCardEntrypoint":t="Item"}return t}getTypeInfoFromEntrypoint(e){var t,n,r,s,i,o;const a=this.getTailObjectData();let l="";switch(e){case"SpaCatalogEntrypoint":l=null!=(t=null==a?void 0:a.id_category)?t:"";break;case"SpaSearchEntrypoint":l=null!=(n=null==a?void 0:a.search_text)?n:"";break;case"SpaBrandsEntrypoint":l=null!=(r=null==a?void 0:a.brand)?r:"";break;case"SpaPromotionCatalogEntrypoint":l=(null==a?void 0:a.bid)?null==(s=null==a?void 0:a.bid)?void 0:s.toString():"";break;case"SpaSellerCatalogEntrypoint":l=null!=(i=null==a?void 0:a.page_info)?i:"";break;case"Apple2024Entrypoint":l=(null==a?void 0:a.bid)?null==(o=null==a?void 0:a.bid)?void 0:o.toString():""}return l}defineDeliveryMethod(e,t){return WbSpaModel.prototype.$services.storeService.storesMap.isDbs(t)?"CRR_Seller":k.fR.includes(e)?"CRR":k._S.includes(e)?"CRR_lift":"PUP"}getCurrentPlacement(){return{SpaActiveOrdersEntrypoint:"Deliveries",SpaCatalogEntrypoint:"Catalog",SpaSearchEntrypoint:"Search",SpaBrandsEntrypoint:"Catalog",SpaSellerCatalogEntrypoint:"Catalog",SpaProductCardEntrypoint:"ProductCard",SpaBasketEntrypoint:"Basket",SpaPersonalCabinetEntrypoint:"PrivateAccount"}[WbSpaModel.prototype.$router.currentRoute.name]||"Catalog"}getCategory({isC2C:e=!1,isDigital:t=!1}){let n;return e&&(n="C2C"),t&&(n="digital"),n}getMarkedList(e){const t=(0,r.MA)().promotionsHelper.getById(Number(e.panelPromoId)),n=Array(24).fill("");let i,o,a,l;"feedbackPoints"in e&&(i=e.feedbackPoints),"supplierPromoSale"in e&&(o=e.supplierPromoSale),"sale"in e&&(a=e.sale),"totalQuantity"in e&&(l=e.totalQuantity);const c=Boolean(i)?`${i} Р ЗА ОТЗЫВ`:"none",u=Boolean(o)?`ВАМ -${o}%`:"none",d=Boolean(a)?`-${a}%`:"none",p=(null==e?void 0:e.isC2C)?"РЕСЕЙЛ":"none",h=wb.xnm.isViewFlagSet(e.viewFlags,s._q.isNew)?"NEW":"none",m=t?t.text:"none",g=(null==e?void 0:e.showThermometer)&&l?`Осталось ${l} шт`:"none";return n[P.g7.ACCENT_SNIPPET]=(null==e?void 0:e.isAccentSnippet)?"Accent_Snippet":"none",n[P.g7.POINTS_FOR_REVIEWS]=c,n[P.g7.GOOD_PRICE]=wb.xnm.isViewFlagSet(e.viewFlags,s._q.isBestPrice)?"Good_Price":"none",n[P.g7.WBCLUB]=Boolean(null==e?void 0:e.premiumSale)?"WBClub":"none",n[P.g7.CASHBACK]=Boolean(null==e?void 0:e.cashbackAmount)?"Cashback":"none",n[P.g7.PRESCRIPTION]=(null==e?void 0:e.isPrescription)?"Prescription":"none",n[P.g7.ONLY_ONE_PURCHASE_PROMO]=(null==e?void 0:e.isOnePurchasePromo)?"Only_One":"none",n[P.g7.ORIGINAL]=(null==e?void 0:e.shouldShowOriginalMark)?"Original":"none",n[P.g7.INSURANCE]=(null==e?void 0:e.abInsuranceKt)?"Insurance":"none",n[P.g7.YOUR_SALE]=u,n[P.g7.WHOLESALE_GOODS]=(null==e?void 0:e.isWholesale)?"Wholesale_Goods":"none",n[P.g7.SALE]=d,n[P.g7.ISC2C]=p,n[P.g7.NEW]=h,n[P.g7.PROMO]=m,n[P.g7.QUANTITY]=g,n}}wb.namespace("analitics",(()=>{const e=new G;return e.init(),e})())},27473:function(e,t){"use strict";const n={DBS_CODES_API_URL:"https://dbs-codes.wildberries.ru",NNSZ_API_URL:"https://wbxoofex.wildberries.ru",USERGRADE_API_URL:"https://user-grade.wildberries.ru/api",STIMULUS_API_URL:"https://napi.wildberries.ru/api/basket/stimulus",ALL_PICKUPS_NAME:"all-poo-fr-v9.json",ALL_PICKUPS_HASH_NAME:"all-poo-v9.json.hash",PROXY_HTTPS:"http://webappx-proxy.wbx-site-utility.k8s.stage-xc/https/",PROXY_HTTP:"http://webappx-proxy.wbx-site-utility.k8s.stage-xc/http/",CATALOG_URL:"https://catalog.wb.ru/",SEARCH_URL:"https://search.wb.ru/",RECOM_URL:"https://recom.wb.ru/",CARD_URL:"https://card.wb.ru/",CATALOG_PROXY_URL:"/__internal/catalog/",SEARCH_PROXY_URL:"/__internal/search/",RECOM_PROXY_URL:"/__internal/recom/",CARD_PROXY_URL:"/__internal/card/",CATALOG_UNREG_URL:"https://u-catalog.wb.ru/",SEARCH_UNREG_URL:"https://u-search.wb.ru/",RECOM_UNREG_URL:"https://u-recom.wb.ru/",CARD_UNREG_URL:"https://u-card.wb.ru/",CATALOG_UNREG_PROXY_URL:"/__internal/u-catalog/",SEARCH_UNREG_PROXY_URL:"/__internal/u-search/",RECOM_UNREG_PROXY_URL:"/__internal/u-recom/",CARD_UNREG_PROXY_URL:"/__internal/u-card/",SEARCH_TAGS_URL:"https://search-tags.wb.ru/",SEARCH_UNREG_TAGS_URL:"https://u-search-tags.wb.ru/",SUGGESTS_URL:"https://suggests.wb.ru/",SUGGESTS_UNREG_URL:"https://u-suggests.wb.ru/",USER_GEO_DATA_URL:"https://user-geo-data.wildberries.ru/",CART_STORAGE_URL:"https://cart-storage-api.wildberries.ru/api/basket",CHAT_SELLERS_BY_RU_URL:"https://chat.wildberries.ru/api/sellers-chat-1/",CHAT_SELLERS_BY_BY_URL:"https://chat.wildberries.by/api/sellers-chat-1/",CHAT_SELLERS_BY_AM_URL:"https://chat.wildberries.am/api/sellers-chat-1/",CHAT_SELLERS_BY_KZ_URL:"https://chat.wildberries.kz/api/sellers-chat-1/",CHAT_SELLERS_BY_KG_URL:"https://chat.wildberries.kg/api/sellers-chat-1/",CHAT_SELLERS_BY_UZ_URL:"https://chat.wildberries.uz/api/sellers-chat-1/",CHAT_SELLERS_BY_TJ_URL:"https://chat.wildberries.tj/api/sellers-chat-1/",CHAT_TRAVEL_BY_RU_URL:"https://chat-prod.wildberries.ru/api/wbtravel-wb-chat",CHAT_REALTY_BY_RU_URL:"https://chat-prod.wildberries.ru/api/realty-wb-chat",FAVS_STORAGE_URL:"https://favs-storage-api.wildberries.ru/api/favs",INSTALLMENTS_AGGREGATOR_URL:"https://installments-aggregator-bt.wildberries.ru/installments-aggregator",CUSTOMER_SUBSCRIPTIONS_URL:"https://customer-subscriptions-gateway.wildberries.ru",HIGHLIGHT_URL:"https://highlight.wildberries.ru",PIN_USER_URL:"https://pin.wb.ru/pin-user-api/api/v1/pin/w/card/",AUTH_URL:"https://wbx-auth.wildberries.",AUTH_INTERNAL_URL:"https://wbx-auth-internal.wildberries.ru",OAUTH_URL:"https://oauth.wildberries.ru",BASKET_RU_API_URL:"https://ru-basket-api.wildberries.ru",BASKET_RU_INTERNAL_API_URL:"/__internal/ru-basket-api",BASKET_API_URL:"https://basket-api.wildberries.",CHAT_RU_URL:"https://chat-prod.wildberries.ru",CHAT_BY_URL:"https://chat-prod.wildberries.by",CHAT_AM_URL:"https://chat-prod.wildberries.am",CHAT_KZ_URL:"https://chat-prod.wildberries.kz",CHAT_KG_URL:"https://chat-prod.wildberries.kg",CHAT_UZ_URL:"https://chat-prod.wildberries.uz",CHAT_TJ_URL:"https://chat-prod.wildberries.tj",CHAT_COURIER_URL:"https://chat.wildberries.ru/api/courier-chat-srv/",WBX_BELL_URL:"https://wbx-bell-v3.wildberries.ru",SHOPPER_BT_URL:"https://shopper-bt.wb.ru",FIN_PERSON_INSTALLMENT_URL:"https://fin-person-installment.wildberries.ru",CUSTOMS_URL:"https://customs.wb.ru",POINTS_USERS_URL:"https://points.wb.ru/points-users-api/api/",FEEDBACKS_URL:"https://feedbacks{0}.wb.ru",FEEDBACK_SERVICE_NEW_URL:"https://feedbacks3-api.wb.ru/api/user/feedback/",FEEDBACK_SERVICE_RESALE_NEW_URL:"https://feedback-c2c-fbapi.wildberries.ru/api/user/feedback/",QUESTIONS_URL:"https://questions.wildberries.ru/api/v1",BASE_REASONS_URL:"https://reviews-reasons.wb.ru/reviews-reasons",BPL_URL:"https://bnpl-gateway.wildberries.ru",DELIVERY_CODE_URL:"https://delivery-code.wildberries.ru/delivery-code/api/v1",GIFTCARDS_URL:"https://giftcards.wildberries.ru",CRYPTO_URL:"https://dfa.wildberries.by",ASTRO_URL:"https://astro.wildberries.ru",SELLER_RECOM_URL:"https://rec-ins.wildberries.ru/api/v1/recommendations",SELLER_RECOM_NEW_URL:"https://static-basket-08.wbbasket.ru/vol154/content-recommendations",GENERATIVE_FEEDBACKS_URL:"https://reviews-sum.wildberries.",TRAVEL_PROMO_URL:"https://travel.wildberries.ru/stream/api/avia-service/v1",TRACKER_RU_URL:"https://wbx-status-tracker.wildberries.ru/api",TRACKER_BY_URL:"https://wbx-status-tracker.wildberries.by/api",TRACKER_AM_URL:"https://wbx-status-tracker.wildberries.am/api",TRACKER_KZ_URL:"https://wbx-status-tracker.wildberries.kz/api",TRACKER_KG_URL:"https://wbx-status-tracker.wildberries.kg/api",TRACKER_UZ_URL:"https://wbx-status-tracker.wildberries.uz/api",TRACKER_TJ_URL:"https://wbx-status-tracker.wildberries.tj/api",KING_PROXY_URL:"api.wildberries.ge",APPS_CONFIG_URL:"https://apps-config.wildberries.ru/config/api/v2/config?v=1&l=ru&t=wbx-web",WALLET_AUTH_URL:"https://finance.wildberries.ru",C2C_URL:"https://resale-api.wildberries.ru",C2C_FEEDBACK_QUESTIONS_URL:"https://feedback-bt.wildberries.ru",FEEDBACK_TRANSLATE_URL:"https://feedback-bt.wildberries.ru",FEEDBACK_BT_LK_URL:"https://feedback-bt.wildberries.ru",WB_GEOCODING_URL:"https://wb-maps.wb.ru/geocoding/api",SEARCH_BY_IMAGE_URL:"https://search-by-photo.wb.ru",PATHFINDER_URL:"https://pathfinder-bt.wildberries.ru",JOURNAL_HOST:"https://journal-bt.wildberries.ru/journal",BALANCE_HISTORY_URL:"https://wb-balance.wildberries.ru/wb-balance/api/v2/balance/history",WALET_TRANSACTION_INFO_URL:"https://wb-wallet.wildberries.ru/wb-wallet/api/v1/wallet/tx/info",FEEDBACKS_C2C_URL:"https://feedback-c2c-view.wildberries.ru",QUESTIONS_C2C_URL:"https://question-c2c.wildberries.ru/api/v1",BANNERS_URL:"https://banners-website.wildberries.ru/public/v2/banners",SESSION_URL:"https://auth-gateway.wildberries.ru",WBX_API_GATEWAY:"https://wbx-api-gateway.wildberries.ru",PDL_PROXY_URL:"https://installments.wildberries.ru/installments",PAYWB_API:"https://paywb.com",DELIVERY_ASSIST_URL:"https://delivery-assist.wildberries.ru",WB_COURIER_TIME_SLOTS_URL:"https://delivery-assist.wildberries.ru/delivery-assist/api/v1/orders/courier/conditions",SELLERS_SYNCER_URL:"https://user-data-syncer.wb.ru/sellers-syncer/api/v1/sellers",SELLERS_ENRICH_URL:"https://user-data-syncer.wb.ru/sellers/api/v1/enrich_sellers",SMART_CALENDAR_DAYS_URL:"https://delivery-bt.wildberries.ru/delivery/api/v1/sources/by/locations/wbgo",REALTY_URL:"https://realty.common.geo.paywb.com/",DELIVERY_BT:"https://delivery-bt.wildberries.ru",SENTRY_DSN:"https://4b0ada62a36843deca2d5cca6e3f9702@marketplace-sentry.wb.ru/183",LOTTERY_URL:"https://lottery-bt.wildberries.ru/lottery/api/v1/lottery",INSURANCIES_API:"https://product-insurance.wildberries.ru/app-gateway",PHARMA_RECOM_URL:"https://pharma-recom.wb.ru/",ENV:"release"};t.A=n},9582:function(e,t,n){"use strict";n.d(t,{_:function(){return r},p:function(){return s}});const r="appReactRoot",s=3},64852:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});const r=()=>Promise.all([n.e(89362),n.e(63946),n.e(81774),n.e(35417),n.e(7332),n.e(31887),n.e(76979),n.e(48829),n.e(64073),n.e(25020),n.e(5521),n.e(43685),n.e(47891),n.e(62609),n.e(55014),n.e(56467),n.e(28288),n.e(35746),n.e(50187),n.e(76904),n.e(58377),n.e(90568),n.e(65949),n.e(20551),n.e(64210)]).then(n.bind(n,77336))},74314:function(e,t,n){"use strict";n.d(t,{h:function(){return r}});const r={astroArchiveOrdersService:()=>n.e(70619).then(n.bind(n,5962)).then(e=>new e.AstroArchiveOrdersService),archiveOrdersService:()=>n.e(73266).then(n.bind(n,53071)).then(e=>new e.WebApiArchiveOrdersService),pathFinderService:()=>n.e(26524).then(n.bind(n,9087)).then(e=>new e.PathFinderService),deliveryCodeService:()=>n.e(31354).then(n.bind(n,25331)).then(e=>new e.DeliveryCodeService),webApiDeliveryCodeService:()=>n.e(50892).then(n.bind(n,8359)).then(e=>new e.WebApiDeliveryCodeService),lotteryService:()=>n.e(37896).then(n.bind(n,36869)).then(e=>new e.LotteryService)}},10288:function(e,t,n){"use strict";n.d(t,{i:function(){return o},n:function(){return i}});var r=Object.defineProperty,s=(e,t,n)=>((e,t,n)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class i extends Error{constructor(e,t=0){super(e),s(this,"statusCode"),this.statusCode=t}}const o={Success:0,BadRequest:1,InternalError:2,CaptchaNeed:3,WaitingResend:4,TooManyTries:5,MismatchCode:6,StickerExpired:8,NoDeviceToSend:9,WeirdUser:10,TokenMismatch:12,CaptchaFailed:26,CodeRequestRequired:30,BackendTimeout:34,Unauthorized:49,AlternativeSignIn:56,Timeout:-98,UnknownError:-99}},46743:function(e,t,n){"use strict";n.d(t,{z:function(){return r}});const r=131841},18136:function(e,t,n){"use strict";n.d(t,{c:function(){return r}});const r={pdl:"pdl",bpl:"bpl",cwb:"cwb"}},95729:function(e,t,n){"use strict";n.d(t,{F:function(){return r}});const r=Object.freeze({prepearing:0,readyToInstall:1,installed:2,destroyed:3})},7698:function(e,t,n){"use strict";n.d(t,{o:function(){return o},w:function(){return i}});var r=n(90568);const s="jsViewsAppHelpers",i=()=>(0,r.getSaveInstance)(s),o=e=>{(0,r.setInstance)(s,e)}},33506:function(e,t,n){"use strict";var r,s,i,o;n.d(t,{AM:function(){return P},As:function(){return d},CH:function(){return p},Ig:function(){return y},LO:function(){return _},NG:function(){return I},O3:function(){return k},QQ:function(){return c},QR:function(){return C},Yo:function(){return a},_S:function(){return f},f6:function(){return l},fR:function(){return g},lY:function(){return E},m9:function(){return S},oW:function(){return m},qn:function(){return h},r8:function(){return b},ue:function(){return w},vh:function(){return u},wG:function(){return v}});const a={Accepted:0,Assembling:1,Rejected:2,Processing:3,Completed:5,ValidateFail:6,Validated:7,Error:8},l={Unknown:-1,NotPaid:1,PaySent:2,PayFail:3,Paid:4,Refunded:5},c=(Object.freeze({Accepted:0,New:1,Failed:2,Processing:4,Completed:5}),l.NotPaid,l.PaySent,l.PayFail,a.Accepted,a.Assembling,a.Processing,a.Validated,a.Rejected,a.Completed,new Set(["SRC","SRD","SRF","SRG","SRK","SRM","SRN","SRO","SRP","SRR","SRT","SRV"])),u=new Set(["CIF","CRE","WIF","WIS","XYZ","PDL","CWB","BPL","ACC"]),d=new Set(["PDL","CRE","CWB","IWB"]),p={Card:1,DefaultCard:4,SbpQrc:7,Sbp:8,WalletQrc:9,WalletSbp:10,WalletMe2Me:11,Wallet:12,SberPay:13,PDL:14,Dram:15,C2CCard:17,B2B:18},h={Courier:5,PickupOffice:6,Cargo:17,SellerReturn:30,Kiosk:31,IzraelPost:33,SmartPvz:36,SelfTechPostamat:86,ExpressCourier:100,WbTrack:101,SuperExpress:103,Booking:111,DBSP:113,DBS:125,EDBS:135,DBSCargo:127,EDBSCargo:137,Digital:200,CourierWbGo:333,CargoWgGo:555},m=[h.PickupOffice,h.WbTrack],g=[h.Courier,h.SuperExpress,h.ExpressCourier,h.DBS,h.EDBS,h.CourierWbGo],f=[h.Cargo,h.DBSCargo,h.EDBSCargo,h.CargoWgGo],b=12,y=3,v=3,w=3,S=(null==(o=null==(i=null==(s=null==(r=wb.global)?void 0:r.settings)?void 0:s.mobileAppVariables)?void 0:i.numbers)||o.expirationPvzDays,e=>{var t,n,r,s,i;return null==(i=null==(s=null==(r=null==(n=null==(t=wb.global)?void 0:t.settings)?void 0:n.mobileAppVariables)?void 0:r.objects)?void 0:s.subjIdForWbCard)?void 0:i.includes(e)}),_=21,I=10,C=-300,k=[230,240,241,250,270,280,290],P=(e,t,n)=>{var r,s,i,o,a,l,c;const u=t?null!=(i=null==(s=null==(r=wb.global.settings)?void 0:r.variables)?void 0:s.b2bFailedPaymentsDisplayMinutes)?i:0:103===n?30:null!=(c=null==(l=null==(a=null==(o=wb.global)?void 0:o.settings)?void 0:a.variables)?void 0:l.failedPaymentsDisplayMinutes)?c:0;return Math.floor(Math.max(0,new Date(e).addMinutes(u).getTime()-(new Date).getTime())/1e3)},E={CANCEL_ITEM:"cancelItem",IS_PREPAID:"isPrepaid",IS_ON_SHELF:"isOnShelf",NEEDS_DELIVERY_UPDATE:"needsDeliveryUpdate",LOCATION:"location",ALL:"all"}},77762:function(e,t,n){"use strict";n.d(t,{m:function(){return r}});const r=()=>n.e(95338).then(n.bind(n,25415)).then(e=>e.FavoriteGoodsModel)},13808:function(e,t,n){"use strict";n.d(t,{_:function(){return d},m:function(){return p}});var r=n(51799),s=n(76904),i=n(28288),o=n(88927),a=n(26620),l=n(88166),c=n(33506),u=n(13965);const d={suppliersOrgForms:["ООО","ПАО","ОАО","ЗАО","ИП","Фонд","Ассоциации","Союзы","НАО","ТОО","АО"],getLangForServices:function(){const e=(0,o.u4)().getLocale(),t=wb.settings.currentLocale;return e===t||"global"===t&&"kz"===e?wb.currentLanguage:"ru"},supplierFineName:function(e,t){return 20624===t?"":1876===t&&"Wildberries"===e?"Brands Seller":20253===t&&"Wildberries"===e?"Best Brands":154===t&&"Wildberries"===e?"First Choice":"Wildberries"===e?"WILDBERRIES":p.trimSupplierName(e,d.suppliersOrgForms)},urlFeedbackPhoto:wb.helpers.url.urlFeedbackPhoto,urlProductVideo:wb.helpers.url.urlVideoProduct,urlFeedbackVideo:wb.helpers.url.urlFeedbackVideo,productCardUrl:function(e,t,n){return(0,i.urlForGood)(e,null,n,null,null,t)},forSellerLogo:function(e,t=!1){return(0,i.forSellerLogo)(e,t)},forSellerLogoPb:function(e,t=!1,n=!0){return(0,i.forSellerLogoPb)(e,t)},forSellerLogoNew:function(e){return d.forSellerLogoNewPb(e)},forSellerLogoNewPb:function(e){var t,n,r;const s=null==(r=null==(n=null==(t=wb.global.settings)?void 0:t.mobileAppVariables)?void 0:n.services)?void 0:r.feedbackNewLogoHost;return(0,i.urlStaticBasket)(`${s}/${e}.webp`,0)},isEmptyObject:function(e){return $.isEmptyObject(e)},Declension:function(e,t,n,r,s){let i;const o=e%10,a=e%100;return i=1==o&&11!=a?t:2==o&&12!=a||3==o&&13!=a||4==o&&14!=a?n:r||n,void 0===s?i:s.format(e,i.format(e))},pluralize:function(e,...t){return $.pluralize(null!=e?e:0,...t)},debug:function(e){console.log(e)},toDateFormat:function(e,t){return new Date(parseInt(e.replace("/Date(","").replace(")\\/",""),10)).format(t)},toJson:function(e){return JSON.stringify(e)},fromJson:function(e){return JSON.parse(e)},encode:function(...e){let t="";for(let n=0;n<e.length;n++)t=t.concat(e[n]);return encodeURIComponent(t)},isLazyImgInCarousel:function(e,t,n,r,s){return!!e&&(n?t>=2*r&&t<s-r:t>=2*r)},timeLeft:function(e){const t=d.parseFromDotNet(e);return wb.helpers.date.leftBefore(t)},parseFromDotNet:function(e){return new Date(parseInt(e.replace("/Date(","").replace(")\\/",""),10))},timeLeftSpa:function(e){const t=new Date(e);return wb.helpers.date.leftBefore(t)},isPriceEqual:function(e,t){return e===t},isNullOrWhiteSpace:function(e){return!e||0===e.length||/^\s*$/.test(e)},HasFlag:function(e,t){return(e&t)==t},blurAdult:function(e){return e&&!wb.adult.isConfirmed},createPickupTabletWorkTime:function(e){if(!e)return"";let t="";const n=e.split(/[.,]/).map(e=>e.trim()).filter(e=>e).map(n=>{const r=(n.match(/:/g)||[]).length;3===r||1===r&&n.includes("выходной")||(t=`<p class="details-self__info-text">${e}</p>`);const s=n.indexOf(":");if(-1===s)return null;return`<div>${n.slice(0,s+1).trim()}</div><div>${n.slice(s+1).trim()}</div>`}).filter(Boolean).join("");return t||`\n            <div class="details-self__workTime-table">\n                ${n}\n            </div>\n        `},pickupType:function(e,t){return e.dtype==a.X1.selfTechPostamat||e.shouldShowName?e.name:e.typePoint==a.dY.ppvzKiosk?l.R.t("delivery.points.kiosk"):e.typePoint===a.dY.ppvzPartnerPost?l.R.t("basket.delivery.partnerPost"):36===(null==e?void 0:e.typePoint)?l.R.t("delivery.points.smartPvz"):"courier"==e.deliveryType?l.R.t("delivery.points.courierAddress"):e.isSortCenter?t?l.R.t("delivery.points.scWarehouse"):l.R.t("delivery.points.scWarehouseWb"):e.smId==c.qn.DBSP||e.smId==c.qn.Booking?e.smId==c.qn.DBSP&&e.sellerName?`${l.R.t("delivery.points.pickup")} ${e.sellerName}`:l.R.t("delivery.points.pickup"):e.isExternalPostamat?l.R.t("delivery.points.partnerPostamate"):e.isWb?l.R.t("delivery.points.pickupPoint"):l.R.t("delivery.points.partnerPickupPoint")},pickupPhotos:e=>{const t=(0,o.CM)();if(!e.photos)return[];if(e.dtype==a.X1.selfTechPostamat)return e.photos;const n=new Set,r=new Set;for(let t of e.photos){const e=t.split(".").pop();t=t.replace("preview",""),"webp"==(null==e?void 0:e.toLowerCase())?n.add(t):r.add(t)}return[...n.size>0&&(null==t?void 0:t.webpImage)?n:r]},priceFromRub:(e,t,n)=>{var r,s;const i=(0,o.u4)();if(!(null==(s=null==(r=wb.global)?void 0:r.settings)?void 0:s.currencies))return e;const a=n||i.getCurrency();if("RUB"===a)return e;if(!wb.global.settings.currencies[a])return e;const l=e/wb.global.settings.currencies[a].rubRate;return t?"AMD"===a||"KZT"===a?10*Math.floor(l/10):"BYN"===a||"GEL"===a||"USD"===a?Math.floor(100*l)/100:"UZS"===a?100*Math.floor(l/100):Math.floor(l):l},priceToRub:(e,t)=>{var n,r;return(null==(r=null==(n=wb.global)?void 0:n.settings)?void 0:r.currencies)&&wb.global.settings.currencies[t]?e*wb.global.settings.currencies[t].rubRate:e},toLocalPrice:(e,t)=>"AMD"===t||"KZT"===t?10*Math.floor(e/10):"BYN"===t||"GEL"===t||"USD"===t||"TJS"===t?Math.floor(100*e)/100:"UZS"===t?100*Math.floor(e/100):Math.floor(e),max:e=>Math.max(e,0),abs:e=>Math.abs(e),trimSupplierName:function(e,t){if(!(null==t?void 0:t.length)||!e)return e;const n=e.trim().split(" "),r=new Set(t);return e=n.map(e=>{const t=e.toUpperCase();return r.has(t)&&(e=""),e}).join(" ").trim()},brandUrl:i.brandUrl,brandUrlById:async function(e){if(!e)return null;const t=(0,s.getHttpClient)(),n=await t.fetchStatic(`brands-by-id/${e}.json`,{},wb.helpers.url.urlStaticData);return n?(0,i.brandUrl)(n.url):null},forBrandLogoFromId:i.forBrandLogoFromId,isDateToday:e=>new Date(e).dateEqual(new Date),isClosedByUser:e=>{var t;return(null==(t=wb.global.userSettings.closed)?void 0:t.includes(e))||!1},getCurrentCurrency:function(){const e=(0,o.u4)();return $.views.converters.currencySign(e.getCurrency())},allPhotosHaveKeys:function(e){return(null==e?void 0:e.length)>0&&e.every(e=>{var t;return(null==(t=e.key)?void 0:t.length)>0})},fillFeedbackPhotosAndVideo:e=>e?e.map(e=>{if(e.isVideo){const t=d.fillFeedbackVideos([e]);return null==t?void 0:t[0]}{const t={id:e.id,key:e.key,isBlurred:e.isBlurred},n=d.fillFeedbackPhotos([t]);return null==n?void 0:n[0]}}):[],fillFeedbackPhotos:function(e){return e?e.map(e=>{const t="number"!=typeof e?e.id:e,n="number"!=typeof e&&e.key&&e.key.length>0?e.key:void 0;return{id:t,key:n,isBlurred:"number"!=typeof e?e.isBlurred:void 0,preview:wb.helpers.url.urlFeedbackPhoto(t,"ms",!1,n),previewFallback:wb.helpers.url.urlFeedbackPhoto(t,"ms",!0,n),fullPath:wb.helpers.url.urlFeedbackPhoto(t,"fs",!1,n),fullPathFallback:wb.helpers.url.urlFeedbackPhoto(t,"fs",!0,n)}}):[]},fillFeedbackVideos:function(e){if(!e)return[];return(Array.isArray(e)?e:[e]).map(e=>{const t=e.id,n=e.durationSec?wb.helpers.formatVideoDuration(e.durationSec):"-";return{id:t,preview:wb.helpers.url.urlFeedbackVideo(e),video:wb.helpers.url.urlFeedbackVideo(e,"index.m3u8"),mp4:wb.helpers.url.urlFeedbackVideo(e,"preview.mp4"),isVideo:!0,duration:n}})},stripHtml:(e,t)=>{if(!e)return"";if(t)return e;return(new DOMParser).parseFromString(e,"text/html").body.textContent||""},isIosDevice:wb.helpers.iOS,isHuaweiDevice:wb.helpers.huawei,sumBy:(e,t)=>t&&e&&0!=e.length?e.reduce((e,n)=>(isNaN(n[t])||(e+=+n[t]),e),0):0,stopPropagation:e=>e.stopPropagation(),subtract:function(e,t=0){return(Math.round(100*e)-Math.round(100*t))/100},addLogisticsCost:function(e,t=0){return t?(Math.round(100*e)+Math.round(t))/100:e},isExpressDeliveryToday:function(e,t,n){if(!t||!e||!n)return!1;const r=new Date,s=60*r.getHours()+r.getMinutes(),i=n[0],o=n[1],a=s+60*e;if(s>=i&&s<=o){if(t.some(e=>a<e.start)&&e<5)return!0}return!1},getVatAmount:(e,t,n)=>{let r=Number(-1*(e/(1+t/100)-e)).toFixed(2);return n&&(r=String($.views.converters.divideNumberBySeparator(r)),r+=`&nbsp;${n}`),r},onPreventDefault:e=>{e.preventDefault()},checkProductOpenSameWindowAb:()=>{const e=(0,r.a)();return"m"===wb.settings.displayMode||!(wb.global.settings.switches.enableOpenNewTab||e.checkDataInSplitterServiceV2("common","ab_enableOpenNewTab","yes"))},applyConverter:function(e,...t){return $.views.converters[e].apply(this,t)},getMenuItems:e=>({AboutCompany:[{name:l.R.t("servicePages.menuItems.aboutCompany.aboutUs"),pageUrl:"/services/o-nas"},{name:l.R.t("servicePages.menuItems.aboutCompany.requisites"),pageUrl:"/services/rekvizity"},{name:l.R.t("servicePages.menuItems.aboutCompany.pressCenterMain"),pageUrl:"/presservice"},{name:l.R.t("servicePages.menuItems.aboutCompany.contacts"),pageUrl:"/services/kontakty"},{name:l.R.t("servicePages.menuItems.aboutCompany.bugBounty"),pageUrl:"/services/bug-bounty"},{name:l.R.t("servicePages.menuItems.aboutCompany.socialMedia"),pageUrl:"/services/sotsialnye-seti"}],ToClient:[{name:l.R.t("servicePages.menuItems.toClient.faq"),pageUrl:"/services/voprosy-i-otvety"},{name:l.R.t("servicePages.menuItems.toClient.howToOrder"),pageUrl:"/services/kak-sdelat-zakaz"},{name:l.R.t("servicePages.menuItems.toClient.howToPay"),pageUrl:"/services/sposoby-oplaty"},{name:l.R.t("servicePages.menuItems.toClient.freeDelivery"),pageUrl:"/services/besplatnaya-dostavka"},{name:l.R.t("servicePages.menuItems.toClient.return"),pageUrl:"/services/vozvrat-tovara"},{name:l.R.t("servicePages.menuItems.toClient.howToRefund"),pageUrl:"/services/vozvrat-denezhnyh-sredstv"},{name:l.R.t("servicePages.menuItems.toClient.salesRules"),pageUrl:"/services/pravila-prodazhi"},{name:l.R.t("servicePages.menuItems.toClient.termsOfUse"),pageUrl:"/services/pravila-polzovaniya-torgovoy-ploshchadkoy"},{name:l.R.t("servicePages.menuItems.toClient.howToReturnMoneyAndGood"),pageUrl:"/services/kak-vernut-tovar-i-dengi"}]}[{"/services/o-nas":"AboutCompany","/services/rekvizity":"AboutCompany","/presservice":"AboutCompany","/services/kontakty":"AboutCompany","/services/bug-bounty":"AboutCompany","/services/sotsialnye-seti":"AboutCompany","/services/kak-sdelat-zakaz":"ToClient","/services/voprosy-i-otvety":"ToClient","/services/sposoby-oplaty":"ToClient","/services/besplatnaya-dostavka":"ToClient","/services/vozvrat-tovara":"ToClient","/services/vozvrat-denezhnyh-sredstv":"ToClient","/services/pravila-prodazhi":"ToClient","/services/pravila-polzovaniya-torgovoy-ploshchadkoy":"ToClient","/services/kak-vernut-tovar-i-dengi":"ToClient","/services/b2b-voprosy-i-otvety":"ToClient"}[e]]),getFilteredAllowedServicePages:e=>{if(!Array.isArray(e))return;const t={"/services/kak-sdelat-zakaz":{hideToTlds:["ge","tj","tm","ru","by","am","kg","uz","kz","global"]},"/services/kak-vernut-tovar-i-dengi":{hideToTlds:["ge","tj","tm"]},"/services/sposoby-oplaty":{hideToTlds:["ge","tj","tm","ru","by","am","kg","uz","kz","global"]},"/services/besplatnaya-dostavka":{hideToTlds:["ge","tj","tm"]},"/services/vozvrat-tovara":{hideToTlds:["ge","tj","tm","ru","by","am","kg","uz","kz","global"]},"/services/vozvrat-denezhnyh-sredstv":{hideToTlds:["ge","tj","tm","ru","by","am","kg","uz","kz","global"]},"/services/pravila-prodazhi":{hideToTlds:["ge","ru","by","am","kg","uz","kz","tj","tm","global"]},"/services/pravila-polzovaniya-torgovoy-ploshchadkoy":{hideToTlds:["ge","ru","by","am","kg","uz","kz","tj","tm","global"]},"/services/voprosy-i-otvety":{hideToTlds:["ge","tj","tm"]},"/services/o-nas":{hideToTlds:["ge","tm"]},"/services/sotsialnye-seti":{hideToTlds:["ge","tm"]},"/services/rekvizity":{hideToTlds:["ge","tm"]},"/presservice":{hideToTlds:["ge","tm"]},"/services/kontakty":{hideToTlds:["ge","tm"]},"/services/bug-bounty":{hideToTlds:["ge","tj","tm"]},"/services/b2b-voprosy-i-otvety":{hideToTlds:["ge","tj","tm","by","am","kg","uz","kz","global"]}};return e.filter(e=>{var n;const r=t[e.pageUrl]||{},s=wb.settings.currentDomain;if(0===Object.keys(r).length)return!0;return!(null==(n=r.hideToTlds)?void 0:n.includes(s))})},debounce:function(e,t){let n=null;return(...r)=>{n&&clearTimeout(n),n=setTimeout(()=>{e.apply(this,r),n=null},t)}},date:{paymentFeedbackTimerStr:function(e,t){const n=Number(e)-Number(t),r=Math.floor(n/1e3%60),s=Math.floor(n/6e4%60),i=Math.floor(n/36e5),o=Math.floor(n/864e5);if(n<0)return"";if(i>=24){const e=i%24>=12?o+1:o;return`${l.R.plural("common.time.days",{count:e})}`}return"{0}:{1}:{2}".format($.views.converters.leadZero(i,2),$.views.converters.leadZero(s,2),$.views.converters.leadZero(r,2))}},getAvailableLangs(){const e=(0,o.u4)(),t=wb.settings.currentLocale,n=e.getLocale(),r={ge:["ru","ka"],uz:["ru","uz"],kg:["ru","ky"]};return"global"===wb.settings.currentLocale&&(r.global="kz"===n?["ru","kk"]:void 0),r[t]},isExcludedNotAboutProduct:e=>{var t,n;if(!wb.global.settings.switches.enableExcludedFromRating)return!1;const r=null==(t=null==e?void 0:e.reasons)?void 0:t.includes("orderStatus"),s=null==(n=null==e?void 0:e.reasons)?void 0:n.includes("notProduct");return(null==e?void 0:e.isExcluded)&&(s||r)||!1},isExcludedByFrozen:e=>{var t,n;if(!wb.global.settings.switches.enableHoldBadFeedback)return!1;const r=null==(t=null==e?void 0:e.reasons)?void 0:t.some(e=>"frozenTemporarily"===e||"frozenPermanently"===e),s=null==(n=null==e?void 0:e.reasons)?void 0:n.includes("weightMLIsSmall");return(null==e?void 0:e.isExcluded)&&r&&!s||!1},isExcludedByHidden:e=>{var t,n;const r=null==(t=null==e?void 0:e.reasons)?void 0:t.some(e=>"hidden"===e),s=null==(n=null==e?void 0:e.reasons)?void 0:n.includes("weightMLIsSmall");return(null==e?void 0:e.isExcluded)&&r&&!s||!1},escapeHtmlSpecialChars:e=>e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/\(/g,"&lpar;").replace(/\)/g,"&rpar;").replace(/\\/g,"&bsol;").replace(/`/g,"&DiacriticalGrave;"):e,generateGuid:e=>{const t=URL.createObjectURL(new Blob).split("/").pop();return e?t:null==t?void 0:t.replace(/-/g,"")},downloadFile:wb.helpers.downloadFile,urlPdfInstruction:i.urlPdfInstruction,iOS:wb.helpers.iOS,getFromMap:(e,t)=>{var n;return null!=(n=null==e?void 0:e.get(t))?n:0},getProductsMaxQuantity:e=>(0,o.Z1)().cardCounterService.getProductsMaxQuantity(e)},p={not:function(e){return!e},formatPhone:function(e,t){return e.toString().formatPhone(t)},toOrdinalDigitByFemaleGender:function(e){return[l.R.t("common.femaleOrdinalDigit.first"),l.R.t("common.femaleOrdinalDigit.second"),l.R.t("common.femaleOrdinalDigit.third"),l.R.t("common.femaleOrdinalDigit.fourth"),l.R.t("common.femaleOrdinalDigit.fifth"),l.R.t("common.femaleOrdinalDigit.sixth"),l.R.t("common.femaleOrdinalDigit.seventh"),l.R.t("common.femaleOrdinalDigit.eighth"),l.R.t("common.femaleOrdinalDigit.ninth"),l.R.t("common.femaleOrdinalDigit.tenth")][e]||e+1},plusMinus:e=>{let t="";return e>0?t="+":e<0&&(t="-"),`${t} ${(0,i.spaceFormatted)(Math.abs(e))}`},toInt:function(e){return parseInt(e,10)},toFixed:function(e,t){const n=parseFloat(e);return isNaN(n)?"":n.toFixed(t)},leadZero:function(e,t){if(isNaN(e)||null==e)return null;let n=Math.floor(e);for(;n.toString().length<t;)n="0"+n;return n},priceWithPrecision:function(e,t,n=2,r=!1){var s,i,o,a,l,c;n=Math.min(n,12);const u=Math.abs(e),[d,p=""]=u.toString().split("."),h=Math.max(2,n-d.length),m=(null==(o=null==(i=null==(s=this.tagCtx)?void 0:s.props)?void 0:i.iso)?void 0:o.toUpperCase())||this.ctxPrm&&(null==(a=this.ctxPrm("iso"))?void 0:a.toUpperCase());m&&(t=null==(c=null==(l=wb.currencies)?void 0:l.info[m])?void 0:c.sign);let g=p.slice(0,h);if(r&&g.length<p.length){const e=parseInt(g[g.length-1],10)+1;g=g.slice(0,-1)+e.toString()}let f=g.length-1;for(;f>=0&&"0"===g[f];)f--;return g=g.slice(0,f+1),""===g&&(g=null),$.views.helpers.formatPrice(parseInt(d,10),g,t)},priceWithCoins:function(e,t,n=!1){var r,s,o,a,l,c;let u=Math.abs(Math.round(100*Number((e%1).toFixed(2))));e=e>0?Math.floor(e):Math.ceil(e);const d=(null==(o=null==(s=null==(r=this.tagCtx)?void 0:r.props)?void 0:s.iso)?void 0:o.toUpperCase())||this.ctxPrm&&(null==(a=this.ctxPrm("iso"))?void 0:a.toUpperCase());return d&&(t=null==(c=null==(l=wb.currencies)?void 0:l.info[d])?void 0:c.sign),0==u&&n?u=null:u<10&&(u="0"+u),(0,i.formatPrice)(e,u,t)},priceWithCurrencyOld:function(e,t,n,r=!1){var s,o;if(!t&&(isNaN(e)||!e))return"";if(("BYN"===n||"GEL"===n||"USD"===n||!n&&""!==n)&&("by"===wb.settings.currentLocale||"ge"===wb.settings.currentLocale||r)){let t=Math.round(100*Number((e%1).toFixed(2)));e=Math.floor(e),t<10&&(t="0"+t),n&&"BYN"!==n&&"GEL"!==n&&"USD"!==n&&(t=null);const r="BYN"===n?"р.":"GEL"===n?"₾":"USD"===n?"$":"₽";return(0,i.formatPrice)(e,t,r)}const a=(null==(o=null==(s=wb.currencies)?void 0:s.info[n])?void 0:o.sign)||wb.settings.currencyShortName;return e=Math.floor(100*e)/100,(0,i.formatPrice)(e,null,a)},urlStaticBasket:function(e,t,n){return(0,i.urlStaticBasket)(e,t)},toLower:function(e){return null==e?void 0:e.toLowerCase()},getFeedbacksPaymentTimerString:function(e){if(!e)return"";const t=new Date(Date.now()),n=new Date(e);return d.date.paymentFeedbackTimerStr(n,t)},formatDate:function(e,t){var n;if(!e)return"";const r=new Date(e);return(null==(n=this.tagCtx)?void 0:n.props.yearFormat)&&(new Date).getFullYear()!=r.getFullYear()&&(t+=this.tagCtx.props.yearFormat),r.format(t)},humanTime:function(e,t,n=!1,r=!1){if(e<=0||isNaN(e))return"";const s=[],i=Math.round(e/86400);if(n&&i)return t?l.R.plural("common.time.daysGenitive",{count:i}):l.R.plural("common.time.days",{count:i});const o=Math.floor(e%86400/3600);o&&s.push(t?l.R.plural("common.time.hourGenitive",{count:o}):l.R.plural("common.time.hour",{count:o}));const a=Math.floor(e%3600/60)+(r?0:1);if(a&&s.push(t?l.R.plural("common.time.minuteGenitive",{count:a}):l.R.plural("common.time.minute",{count:a})),r){const n=e%60;n&&s.push(t?l.R.plural("common.time.secondGenitive",{count:n}):l.R.plural("common.time.second",{count:n}))}return s.reduce((e,t,n,r)=>{if(0==n)return t;return`${e}${r.length-1==n?` ${l.R.t("common.and")} `:", "}${t}`},"")},differenceDatesInSeconds:function(e=new Date,t=0){const n=new Date(e).addDays(t),r=new Date,s=Math.floor((Number(n)-Number(r))/1e3);return Math.max(0,s)},humanTimerFormat:function(e=0,t=!1,n=!1){if(e<=0||isNaN(e))return l.R.t("common.humanTimer.timeIsUp");const r=e=>e.toString().padStart(2,"0"),s=Math.floor(e/3600),i=r(s),o=r(Math.floor(e%3600/60)),a=r(e%60);if(e<86400){if(t)return l.R.t("common.humanTimer.timeInWords",{hours:i,minutes:o,seconds:a});{const e=`${i}:${o}:${a}`;return l.R.plural("common.humanTimer.remainingTime",{count:s,displayCount:e})}}{let t=Math.floor(e/86400);if(n){const n=Math.floor(e/3600),r=Math.floor(n/24);t=n%24>=12?r+1:r}return l.R.plural("common.humanTimer.remainingDays",{count:t})}},getDaysFromOrder:function(e=null,t=null){if(!e||!t)return;const n="Purchased"==e.status?e.lastDate:null;if(n){const e=p.differenceDatesInSeconds(n,t),r=(new Date).daysBetween(new Date(n).addDays(t));return e<=86400?l.R.t("common.today").toLowerCase():l.R.plural("common.time.afterDays",{count:r})}return l.R.plural("common.time.days",{count:0})},humanTimerFormatSimple:function(e=0,t=!1){if(null==e)return;const n=Math.floor(e/3600),r=Math.floor(e%3600/60),s=e%60;return`${n>0||t?`${n<10?"0":""}${n}:`:""}${r<10?"0":""}${r}:${s<10?"0":""}${s}`},dateStringToFormat:function(e,t){if(!e||"string"!=typeof e)return"";const[n,r,s]=e.split(".").map(e=>parseInt(e));try{return new Date(s,r-1,n).format(t||"dd MMMM yyyy")}catch(e){return""}},localize:(e,...t)=>$.localize(e,...t),pluralize:(e,...t)=>$.pluralize(e,...t),customDateTimeFormat:i.customDateTimeFormat,trimWord:i.trimWord,trimSupplierName:d.trimSupplierName,join:function(e){if(!e||0==e.length)return"";const{upper:t,prefix:n,separator:r}=this.tagCtx.props;return e.map(e=>(t&&(e=e.toUpperCase()),Boolean(n)&&(e=`${n}${e}`),e)).join(r)},humanBytes:e=>{const t=l.R.t,n=[t("common.bytes.byte"),t("common.bytes.kilobyte"),t("common.bytes.megabyte"),t("common.bytes.gigabyte")];let r=0;for(;r<n.length-1&&e>=1024;)e/=1024,r++;return`${Number(e.toFixed(2))} ${n[r]}`},formatTimeStr:function(e){return e.replace(/^0(\d):/,"$1:")},getWorkSchedule:function(e,t,n){const r=l.R.t,s=["mon","tue","wed","thu","fri","sat","sun"].map(e=>r(`common.dates.dayNamesShortUppercase.${e}`));let o=null,a=null,c=null;if(void 0!==e&&void 0!==t&&(c=`${(0,i.minutesToTime)(e)}–${(0,i.minutesToTime)(t)}`,(0===e&&0===t||0===e&&1440===t)&&(c=r("common.allDay"))),!n&&c)o=`${l.R.t("common.daily")} ${c}`;else if(n&&n.length>0){let e=[],t=[];s.forEach((r,s)=>{0===n[s]?e.push(r):t.push(r)});let r=[],i=[e[0]];for(let t=1;t<e.length;t++){const n=s.indexOf(e[t-1]);s.indexOf(e[t])-n===1?i.push(e[t]):(r.push(i),i=[e[t]])}r.push(i),c&&(o=r.map(e=>e.length>1?`${e[0]}-${e[e.length-1]}`:e[0]).join(", ")+` ${c}`),a=t.join(", ")}return{workTime:o,weekend:a}},deliveryType:function(){const{storeType:e}=this.tagCtx.props;return 4&~e?8&~e?l.R.t("delivery.type.wildberriesDelivery"):l.R.t("delivery.type.sellerDelivery"):8&~e?l.R.t("delivery.type.wildberriesCargoDelivery"):l.R.t("delivery.type.sellerCargoDelivery")},formatString:function(e,t,n,r){return n&&(e=e.replace(/\[(\d+)\]/gm,"{$1}")),r&&(t=d.encode(t)),e.format(t)},trim:function(e){return null==e?void 0:e.trim()},imgForPromoCategory:function(e=0,t=!1,n,r){const s=t?"small/":"",o=n?n.replace("pack_7","pack_trend")+"/":"promo_v2/",a=e<1e6?e:parseInt((e+"").slice(-6));return(0,i.urlStaticBasket)(`wbx-catalog/${o}${s}${a}.webp`,1,r)},fileName:function(e){var t,n;const r=e.substring(e.lastIndexOf("/")+1),s=null==(n=null==(t=this.tagCtx)?void 0:t.props)?void 0:n.mode;return"name"==s?r.substring(0,r.lastIndexOf("."))||r:"extension"==s?r.slice(1+(Math.max(r.lastIndexOf("."),0)||r.length))||"":r},convertToText:function(e){if(!Array.isArray(e)||0===e.length)return"";const t={text:l.R.t("common.text"),photo:l.R.t("common.photo"),video:l.R.t("common.video")},n=e.map(e=>t[e.toLowerCase()].toLowerCase()).filter(Boolean);if(0===n.length)return"";if(1===n.length)return n[0];const r=n.pop(),s=n.join(", "),i=l.R.t("common.and");return"en"===wb.currentLanguage&&e.length>2?`${s}, ${i} ${r}`:`${s} ${i} ${r}`},onlyDigits:e=>null==e?void 0:e.replace(/[^\d\.]/g,""),toWebp:function(e){const t=(0,o.CM)();return(null==t?void 0:t.webpImage)?"webp":e},useWebp:function(e){const t=(0,o.CM)();return(null==t?void 0:t.webpImage)?null==e?void 0:e.replace(/^(.*\.)(jpg|jpeg)$/i,"$1webp"):e},toNumber:e=>Number(e),fixHtml:e=>e?(new DOMParser).parseFromString(e,"text/html").body.innerHTML:"",checkProductOpenSameWindowAb(){const e=(0,r.a)();return"m"===wb.settings.displayMode||!(wb.global.settings.switches.enableOpenNewTab||e.checkDataInSplitterServiceV2("common","ab_enableOpenNewTab","yes"))},legalRedirectUrl:u.N,escapeHtml:e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}},13965:function(e,t,n){"use strict";n.d(t,{N:function(){return o}});var r=n(88927),s=n(44325),i=n(88166);const o=e=>{const t=(0,r.u4)();if(!s.Xd[e])return e;const n=i.R.getLanguage(),o=wb.settings.currentLocale,a=t.getLocale();if(e===s.pP.TECH_RULES)return`${s.uu}ru${s.Xd[e]}/country/ru/lang/ru/`;if(e===s.pP.VIDEO_POLICY)return`${s.uu}by${s.Xd[e]}/country/by/lang/ru/`;if("il"===a)return e===s.pP.PRIVACY_POLICY||e===s.pP.PERSONAL_POLICY?`${s.uu}ru/global-confidentiality-policy/country/ru/lang/ru/`:`${s.uu}ru${s.Xd[e]}/country/ru/lang/ru/`;const l=window.location.hash,c=`${s.Xd[e]}/country/${a}/lang/ru/`+l,u=`${s.Xd[e]}/country/${a}/lang/${n}/`+l;switch(o){case"ru":case"am":case"by":case"tj":return`${s.uu}${o}${c}`;case"kg":return o===a&&"ky"===n?`${s.uu}${o}/${n}${u}`:`${s.uu}${o}${c}`;case"uz":return o===a&&"uz"===n?`${s.uu}${o}${u}`:`${s.uu}${o}/ru${c}`;case"global":return"kz"===a?"kk"===n?`${s.uu}ru/${n}${u}`:`${s.uu}ru${c}`:`${s.uu}${a}${c}`;default:return e}}},77215:function(e,t,n){"use strict";n.d(t,{AM:function(){return s.AM},AX:function(){return r.AX},C0:function(){return s.C0},CK:function(){return s.CK},G$:function(){return s.G$},HM:function(){return s.HM},JC:function(){return s.JC},JS:function(){return s.JS},K0:function(){return s.K0},Ky:function(){return r.Ky},Lj:function(){return r.Lj},NE:function(){return s.NE},NU:function(){return r.NU},NY:function(){return s.NY},Nm:function(){return s.Nm},O:function(){return r.O},OG:function(){return s.OG},P4:function(){return s.P4},P8:function(){return s.P8},PC:function(){return s.PC},PU:function(){return s.PU},PV:function(){return s.PV},Q9:function(){return s.Q9},QD:function(){return r.QD},QG:function(){return r.QG},R8:function(){return r.R8},SG:function(){return s.SG},SJ:function(){return s.SJ},SP:function(){return s.SP},Tg:function(){return s.Tg},U_:function(){return s.U_},V3:function(){return s.V3},Vg:function(){return s.Vg},YC:function(){return s.YC},Yq:function(){return s.Yq},Z3:function(){return s.Z3},ZW:function(){return s.ZW},Zh:function(){return s.Zh},_J:function(){return s._J},_R:function(){return s._R},au:function(){return s.au},db:function(){return r.db},do:function(){return s.do},eD:function(){return s.eD},fw:function(){return s.fw},hd:function(){return s.hd},jE:function(){return s.jE},jx:function(){return s.jx},kE:function(){return s.kE},kc:function(){return s.kc},pW:function(){return r.pW},qR:function(){return r.qR},r6:function(){return s.r6},sb:function(){return s.sb},sn:function(){return s.sn},tS:function(){return s.tS},xT:function(){return s.xT},yJ:function(){return s.yJ},ys:function(){return r.ys},yz:function(){return s.yz},zp:function(){return s.zp}});var r=n(65455),s=n(50478)},65455:function(e,t,n){"use strict";n.d(t,{AX:function(){return f},Ky:function(){return o},Lj:function(){return y},NU:function(){return h},O:function(){return d},QD:function(){return g},QG:function(){return l},R8:function(){return p},db:function(){return c},p:function(){return u},pW:function(){return m},qR:function(){return a},ys:function(){return b}});var r=n(51799),s=n(88927),i=n(28288);const o=()=>{var e;const t=(0,r.a)().checkDataInSplitterServiceV2("common","ab_central_block_kt","yes"),n=!!(null==(e=wb.global.settings.switches)?void 0:e.enableNewCentralBlock);return t&&n},a=()=>{var e;const t=(0,r.a)().checkDataInSplitterServiceV2("common","ab_similar_photo","up"),n=!!(null==(e=wb.global.settings.switches)?void 0:e.showTopSimilar);return t||n},l=()=>{var e;return(0,r.a)().checkDataInSplitterServiceV2("common","ab_enableAddQuantityCounter","yes")||(null==(e=wb.global.settings.switches)?void 0:e.enableProductCounter)},c=()=>{var e;return(0,r.a)().checkDataInSplitterServiceV2("common","ab_no_birds","yes")||(null==(e=wb.global.settings.switches)?void 0:e.enableHideArrowsKt)},u=()=>{var e;return!(0,r.a)().checkDataInSplitterServiceV2("common","ab_kt_price_history","yes")&&(null==(e=wb.global.settings.switches)?void 0:e.enableHidePriceHistory)},d=()=>{var e,t,n,o;if(null==(t=null==(e=wb.global.settings)?void 0:e.switches)?void 0:t.enableHistoryPriceWithDiscount){const e=(0,s.u4)();return(0,i.checkMobileRange)(Number(e.getId()),null==(o=null==(n=wb.global.settings.mobileAppVariables)?void 0:n.objects)?void 0:o.historyPriceWithDiscountRange)}const a=(0,r.a)().checkDataInSplitterServiceV2("common","ab_kt_history_change_price","new");return a||!1},p=e=>{const t=(0,r.a)();return Boolean(wb.global.settings.switches.enableInsurance||t.checkDataInSplitterServiceV2("common","ab_enableInsurance","enable"))&&e},h=()=>{const e=(0,r.a)();return Boolean(wb.global.settings.switches.enableKtBlockDistance||e.checkDataInSplitterServiceV2("common","ab_kt_block_distance","small"))},m=()=>{const e=(0,r.a)(),t=Boolean(wb.global.settings.switches.enableHistoryPriceWithLogistic),n=e.checkDataInSplitterServiceV2("common","ab_kt_price_history_logistic","no");return t&&!n},g=()=>{var e;const t=(0,r.a)().checkDataInSplitterServiceV2("common","ab_kt_duplicates_items","new_widget"),n=!!(null==(e=wb.global.settings.switches)?void 0:e.enableShowOtherSellersAdaptiveKt);return t||n},f=()=>{const e=(0,r.a)(),t="ab_kt_characteristics",n=e.checkDataInSplitterServiceV2("common",t,"new"),s=e.checkDataInSplitterServiceV2("common",t,"less");return n?"new":s?"less":null},b=()=>{const e=(0,r.a)(),t=Boolean(wb.global.settings.switches.enableTwoPricesDisplay),n=e.checkDataInSplitterServiceV2("common","ab_kt_price","black_price");return t&&!n},y=()=>{const e=(0,r.a)(),t=Boolean(wb.global.settings.switches.enableTaskMechanicsKt),n=e.checkDataInSplitterServiceV2("common","ab_hb_wb","no");return t&&!n}},50478:function(e,t,n){"use strict";n.d(t,{A0:function(){return K},AM:function(){return ee},C0:function(){return v},CK:function(){return C},G$:function(){return ie},HM:function(){return S},JC:function(){return O},JS:function(){return se},K0:function(){return I},LA:function(){return Y},Lv:function(){return Q},Mv:function(){return G},NE:function(){return D},NY:function(){return F},Nm:function(){return ye},OG:function(){return H},P4:function(){return de},P8:function(){return ue},PC:function(){return oe},PU:function(){return E},PV:function(){return b},Q9:function(){return fe},SG:function(){return j},SJ:function(){return Z},SP:function(){return q},Tg:function(){return re},U_:function(){return L},V3:function(){return M},Vg:function(){return R},YC:function(){return ne},Yq:function(){return me},Z3:function(){return U},ZW:function(){return ge},Zh:function(){return N},_J:function(){return B},_R:function(){return w},au:function(){return _},do:function(){return z},eD:function(){return k},fw:function(){return A},hd:function(){return V},jE:function(){return ae},jx:function(){return he},kE:function(){return te},kc:function(){return x},mw:function(){return pe},mz:function(){return X},r6:function(){return be},sb:function(){return y},sn:function(){return ce},tS:function(){return le},x8:function(){return J},xT:function(){return $},yJ:function(){return W},yz:function(){return P},zp:function(){return T}});var r=n(51799),s=n(88927),i=n(41752),o=n(88166),a=n(65455),l=Object.defineProperty,c=Object.defineProperties,u=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(e,t,n)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,g=(e,t)=>{for(var n in t||(t={}))p.call(t,n)&&m(e,n,t[n]);if(d)for(var n of d(t))h.call(t,n)&&m(e,n,t[n]);return e},f=(e,t)=>c(e,u(t));const b=(e,t)=>{const n=(0,r.a)();t?n.proceedAndSave(e,null,null,t):n.proceedAndSave(e)},y=e=>{const t=(0,r.a)(),n={item_id:e.nmId,subject_id:e.subjectId,subject_parent_id:e.subjectParentId,supplier_id:e.supplierId,type:"fullsize"};t.sendEvent("Item_Feedback_Top_T",n)},v=e=>{const t=(0,r.a)(),n={item_id:e.nmId,subject_id:e.subjectId,subject_parent_id:e.subjectParentId,supplier_id:e.supplierId};t.sendEvent("Item_Delivery_Details_Info_T",n)},w=(e,t,n,s)=>{const i=(0,r.a)(),a={item_id:e.nmId,subject_id:e.subjectId,subject_parent_id:e.subjectParentId,supplier_id:e.supplierId,delivery_date:t,conditions_list:`${n?o.R.t("productCard.returnInAmountDays",{amount:n}):o.R.t("productCard.returnViaApplication")}${s?`;${o.R.t("productCard.fitting")}`:""}`};i.sendEvent("Item_Delivery_Details_S",a)},S=(e,t)=>{const n=(0,r.a)(),s={item_id:e.nmId,supplier_id:e.supplierId,subject_id:e.subjectId,subject_parent_id:e.subjectParentId,type:"fullsize"},i="show"===t?"Item_Brand_Category_S":"Item_Brand_Category_T";n.sendEvent(i,s)},_=(e,t)=>{const n=(0,r.a)(),s={item_id:e.nmId,supplier_id:e.supplierId,subject_id:e.subjectId,subject_parent_id:e.subjectParentId,type:"fullsize"},i="show"===t?"Item_Category_S":"Item_Category_T";n.sendEvent(i,s)},I=(e,t,n)=>{const s=(0,r.a)(),i={item_id:e.nmId,supplier_id:e.supplierId,subject_id:e.subjectId,subject_parent_id:e.subjectParentId,category_type:e.isC2C?"c2c":"regular",location:"Item",type:"fullsize",seller_info:{name:"",rate:e.reviewRating,n_marks:e.feedbacks}},o="show"===t?"Item_Seller_Info_GoToShop_S":"Item_Seller_Info_GoToShop_T";if(!n)return void s.sendEvent(o,i);const{loyaltyProgramLevel:a,isPremiumSeller:l,rating:c}=n,u=Number(c);let d="default";4===a?d="gold":3===a?d="silver":2===a&&(d="bronze");const p=f(g({},i),{premium_seller:l?1:0,rating:isNaN(u)?void 0:u,loyalty:d});s.sendEvent(o,p)},C=e=>{const t=(0,r.a)();t.sendEvent("Item_Supplier_T",{name:e.supplier,id:e.subjectId,type:"fullsize"}),t.proceedAndSave("ISC")},k=(e,t)=>{var n;const s=(0,r.a)(),i={supplier_id:e.supplierId,level:null!=(n=null==t?void 0:t.titleLoyaltyProgram[null==t?void 0:t.loyaltyProgramLevel])?n:"no_level"};s.sendEvent("Item_Supplier_Details_T",f(g({},i),{item_id:e.nmId,subject_parent_id:e.subjectParentId,subject_id:e.subjectId,type:"fullsize"}))},P=(e,t,n)=>{const s=(0,r.a)();let i="default";const o=null==t?void 0:t.loyaltyProgramLevel,a=null==t?void 0:t.isPremiumSeller,l=Number(null==t?void 0:t.rating);4===o?i="gold":3===o?i="silver":2===o&&(i="bronze");const c={item_id:e.nmId,supplier_id:e.supplierId,subject_id:e.subjectId,subject_parent_id:e.subjectParentId,premium_seller:a?1:0,rating:isNaN(l)?void 0:l,loyalty:i,type:"fullsize"};n&&s.sendEvent("Item_Medical_Info_S",c)},E=e=>{const t=(0,r.a)(),n={item_id:e.nmId,supplier_id:e.supplierId,subject_id:e.subjectId,subject_parent_id:e.subjectParentId,type:"fullsize"};t.sendEvent("Item_Description_Parameters_More_T",n)},T=e=>{const t=(0,r.a)(),n={item_id:e.nmId,supplier_id:e.supplierId,subject_id:e.subjectId,subject_parent_id:e.subjectParentId,type:"fullsize"};t.sendEvent("Item_Description_Parameters_More_S",n)},O=e=>{const t=(0,r.a)(),n={item_id:e.nmId,supplier_id:e.supplierId,subject_id:e.subjectId,subject_parent_id:e.subjectParentId,type:"fullsize"};t.sendEvent("Item_Mark_Original_S",n)},x=e=>{const t=(0,r.a)(),n={item_id:e.nmId,supplier_id:e.supplierId,subject_id:e.subjectId,subject_parent_id:e.subjectParentId,type:"fullsize"};t.sendEvent("Item_Mark_Original_T",n)},M=(e,t,n)=>{const s=(0,r.a)(),i={supplier_id:e.supplierId,filter_name:t,filter_id:n,item_id:e.nmId,subject_id:e.subjectId,subject_parent_id:e.subjectParentId};s.sendEvent("Item_Filter_S",i)},A=(e,t,n,s)=>{const i=(0,r.a)(),o={supplier_id:e.supplierId,filter_name:t,filter_id:n,item_id:e.nmId,subject_id:e.subjectId,subject_parent_id:e.subjectParentId};i.sendEvent("Item_Filter_Apl",s?f(g({},o),{filter_value_name:s}):o)},R=e=>{const t=(0,r.a)(),n={subject_id:e.subjectId,subject_parent_id:e.subjectParentId,type:"fullsize",supplier_id:e.supplierId,item_id:e.nmId};t.sendEvent("Item_Choose_Color_S",n)},D=e=>{const t=(0,r.a)(),n={item_id:e.nmId,subject_id:e.subjectId,subject_parent_id:e.subjectParentId,type:"fullsize"};t.sendEvent("Item_Choose_Color_T",n)},L=e=>{const t=(0,r.a)(),n={subject_id:e.subjectId,subject_parent_id:e.subjectParentId,type:"fullsize"};t.sendEvent("Item_Choose_Color_V",n)},B=(e,t)=>{const n=(0,r.a)(),s={subject_id:e.subjectId,subject_parent_id:e.subjectParentId,type:"fullsize",base:t};n.sendEvent("Item_Choose_Color_Base_T",s)},$=(e,t,n)=>{const s=(0,r.a)(),i={subject_id:e.subjectId,subject_parent_id:e.subjectParentId,type:"fullsize",color:t,base:n};s.sendEvent("Item_Choose_Color_Apl",i)},N=e=>{const t=(0,r.a)(),n={subject_id:e.subjectId,subject_parent_id:e.subjectParentId,type:"fullsize"};t.sendEvent("Item_Choose_Color_Search_T",n)},j=e=>{const t=(0,r.a)(),n={subject_id:e.subjectId,subject_parent_id:e.subjectParentId,type:"fullsize"};t.sendEvent("Item_Choose_Color_Cancel_T",n)},F=(e,t,n,s)=>{const i=(0,r.a)(),o={subject_id:e.subjectId,subject_parent_id:e.subjectParentId,type:"fullsize",previous_color:n,base:s,color:t};i.sendEvent("Item_Change_Color_Apl",o)},U=e=>{const t=(0,r.a)(),n={location:"reviews",count_reviews:e.feedbacks,type:"fullsize",item_id:e.nmId,subject_id:e.subjectId,subject_parent_id:e.subjectParentId,supplier_id:e.supplierId};t.sendEvent("Item_Feedback_T",n)},W=(e,t,n,s)=>{const i=(0,r.a)(),o={item_id:e.nmId,supplier_id:e.supplierId,subject_id:e.subjectId,subject_parent_id:e.subjectParentId,logo:t?1:0,name:n||"",type:"fullsize"};i.sendEvent(s,o)},H=e=>{const t=(0,r.a)(),n={item_id:e.nmId,supplier_id:e.supplierId,subject_id:e.subjectId,subject_parent_id:e.subjectParentId,type:"fullsize"};t.sendEvent("Item_Parameters_More_S",n)},V=e=>{const t=(0,r.a)(),n={item_id:e.nmId,supplier_id:e.supplierId,subject_id:e.subjectId,subject_parent_id:e.subjectParentId,type:"fullsize"};t.sendEvent("Item_Parameters_More_T",n)},z=(e,t,n)=>{const s=(0,r.a)(),i={item_id:e.nmId,supplier_id:e.supplierId,subject_id:e.subjectId,subject_parent_id:e.subjectParentId,type:t?"preview":"fullsize"};s.sendEvent(n?"Item_SizeTable_S":"Item_SizeTable_T",i)},q=(e,t,n)=>{const s=(0,r.a)(),i={item_id:e.nmId,supplier_id:e.supplierId,subject_id:e.subjectId,subject_parent_id:e.subjectParentId,type:t?"preview":"fullsize"};s.sendEvent(n?"Item_ArticleNumber_S":"Item_ArticleNumber_Copy",i)},K=e=>{const t=(0,r.a)(),n={item_id:e.nmId,subject_id:e.subjectId,subject_parent_id:e.subjectParentId,category_type:e.isC2C?"c2c":"regular",type:"fullsize",supplier_id:e.supplierId};t.sendEvent("Item_SimilarItems_PhotoSearch_T",n)},G=(e,t)=>{const n=(0,r.a)(),s={item_id:e.nmId,subject_id:e.subjectId,subject_parent_id:e.subjectParentId,type:"fullsize",supplier_id:e.supplierId,video_type:"fullsize",button_type:t,location:"Item"};n.sendEvent("Item_Video_Icon_S",s)},J=(e,t)=>{const n=(0,r.a)(),s={item_id:e.nmId,subject_id:e.subjectId,subject_parent_id:e.subjectParentId,type:"fullsize",supplier_id:e.supplierId,video_type:"fullsize",button_type:t,location:"Item"};n.sendEvent("Item_Video_Icon_T",s)},Y=(e,t)=>{const n=(0,r.a)(),s={item_id:e.nmId,subject_id:e.subjectId,subject_parent_id:e.subjectParentId,type:"fullsize",supplier_id:e.supplierId,video_type:"fullsize",sound_status:t,location:"Item"};n.sendEvent("Item_VideoSound_T",s)},Q=(e,t,n,s,i,o)=>{const a=(0,r.a)(),l={item_id:e.nmId,subject_id:e.subjectId,subject_parent_id:e.subjectParentId,supplier_id:e.supplierId,last_photo:n?"yes":"no",index:t,has_video:i?1:0,type:"fullsize",viewer:s?"yes":"no",tags_nm:o?o.join(","):"no",category_type:e.isC2C?"c2c":"regular"};a.sendEvent("Item_Photo_S",l)},X=(e,t,n,s)=>{const i=(0,r.a)(),o={item_id:e.nmId,subject_id:e.subjectId,subject_parent_id:e.subjectParentId,supplier_id:e.supplierId,last_photo:n?"yes":"no",index:t,type:"fullsize",viewer:s?"yes":"no",tags_nm:"no",category_type:e.isC2C?"c2c":"regular"};i.sendEvent("Item_Photo_T",o)},Z=(e,t,n,s,o)=>{const l=(0,r.a)();let c=l.getState();const u=l.analiticsStateToEcomInfo(c);u.tailObjectTerms=l.getTermsFromTailObject(c.l),u.index||(u.index=1),!u.logs&&e.logs&&(u.logs=e.logs),c=l.ecomInfoToAnaliticsState(u);const d=g({lw:t||"IT"},c);"Offers_Other_Sellers"===s&&(d.l="ICO",d.iid=n);const p=l.getTailObjectFromAnalyticsInfo(c,u.tailObjectTerms);return p.loc_way=d.lw,d.analytics||(d.analytics={}),d.analytics={tailObject:p,logs:d.logs},d.mark=Array(15).fill(""),d.mark[i.g7.PRESCRIPTION]=o?"Prescription":"none",d.mark[i.g7.ONLY_ONE_PURCHASE_PROMO]=e.isOnePurchasePromo?"Only_One":"none",d.mark[i.g7.INSURANCE]=(0,a.R8)(!!e.isInsurance)?"Insurance":"none",d.mark[i.g7.PRE_ORDER]=(0,i.$Q)(null==e?void 0:e.viewFlags)?"Pre_Order":"none",d},ee=(e,t,n,s,i,a,l,c)=>{const u=(0,r.a)();let d;d=t>0?o.R.t("wbClub.premiumUserPopup.discountApplied",{sale:t}):"main"===n?o.R.t("wbClub.benefitsList.discountedGoods.title"):o.R.t("wbClub.premiumUserPopup.customerInWbClub");const p={location:n,name:d,type:s?"premium_club_on":"premium_club_off",type_info:"",button_name:c,subject_id:i||"",item_id:a||"",subject_parent_id:l||""};switch(e){case"open":u.sendEvent("Pop_Up_S",p);break;case"close":u.sendEvent("Pop_Up_Close",p);break;case"okBtn":u.sendEvent("Pop_Up_T",p)}},te=(e,t,n,s,i,a)=>{const l=(0,r.a)(),c={location:t,name:o.R.t("feedbacks.feedbacksForPointsPopup.title"),type:"info",type_info:"",item_id:null!=s?s:0,subject_id:n,subject_parent_id:i};switch(a&&(c.button_name=a),e){case"open":l.sendEvent("Pop_Up_S",c);break;case"close":l.sendEvent("Pop_Up_Close",c);break;case"okBtn":l.sendEvent("Pop_Up_T",c)}},ne=e=>{const t=(0,r.a)(),n=t.getState(),s=t.getTailObjectFromAnalyticsInfo(f(g({},n),{lw:""})),i={item_id:e.nmId,subject_id:e.subjectId,subject_parent_id:e.subjectParentId,supplier_id:e.supplierId,location:(null==s?void 0:s.loc)||"",location_type:"Item",type:"Chance_On",index:0};t.sendEvent("Goods_Mark_T",i)},re=(e,t)=>{const n=(0,r.a)(),i=(0,s.u4)(),o=n.getState(),a=n.getTailObjectFromAnalyticsInfo(f(g({},o),{lw:""}));if("Cashback"===e){const e={location_type:"fullsize",location:"item",currency:"RUB"===i.getCurrency()?"berries":"",wallet_exists:wb.settings.walletTypeCode>0?"yes":"no",cashback_value:t.cashbackAmount?t.cashbackAmount:0,item_id:t.nmId,subject_id:t.subjectId,subject_parent_id:t.subjectParentId,index:0};n.sendEvent("Cashback_Mark_T",e)}else{const r={type:e,location:(null==a?void 0:a.loc)||"",location_type:"Item",index:0,subject_id:t.subjectId,item_id:t.nmId,subject_parent_id:t.subjectParentId,supplier_id:t.supplierId};n.sendEvent("Goods_Mark_T",r)}},se=(e,t)=>{const n=(0,r.a)(),s={item_id:e.nmId,subject_id:e.subjectId,subject_parent_id:e.subjectParentId,supplier_id:e.supplierId,type:"fullsize",name:t};n.sendEvent("Item_Description_Hint_T",s)},ie=e=>{const t=(0,r.a)(),n={item_id:e.nmId,subject_id:e.subjectId,subject_parent_id:e.subjectParentId,supplier_id:e.supplierId,type:"fullsize"};t.sendEvent("Item_Proven_Quality_S",n)},oe=e=>{const t=(0,r.a)(),n={item_id:e.nmId,subject_id:e.subjectId,subject_parent_id:e.subjectParentId,supplier_id:e.supplierId,type:"fullsize"};t.sendEvent("Item_Proven_Quality_T",n)},ae=async(e,t,n)=>{const s=(0,r.a)();void 0===n&&(n="Item","IF"!==t&&"IQ"!==t||(n="Feedback"),"IP"===t&&(n="Quick_View"),"TG"===t&&(n="Photo_Tag"),"IC"===t&&(n="Skleyka"));const i={item_id:Number(e.nmId)||void 0,location:n,subject_id:e.subjectId,subject_parent_id:e.subjectParentId,supplier_id:Number(e.supplierId)||void 0};s.sendEvent("Item_Only_One_Notification_S",i)},le=(e,t)=>{const n=(0,r.a)(),s={item_id:e.nmId,subject_id:e.subjectId,subject_parent_id:e.subjectParentId,supplier_id:e.supplierId,type:"fullsize",name:t.name,format:t.format,index:t.index};n.sendEvent("Item_Description_Parameters_Document_T",s)},ce=(e,t)=>{const n=(0,r.a)(),s={item_id:e.nmId,subject_id:e.subjectId,subject_parent_id:e.subjectParentId,supplier_id:e.supplierId,type:"fullsize",name:t.name,format:t.format,index:t.index};n.sendEvent("Item_Description_Parameters_Document_S",s)},ue=(e,t)=>{const n=(0,r.a)(),s={item_id:e.nmId,subject_id:e.subjectId,subject_parent_id:e.subjectParentId,small_percent:t.smaller.share,match_percent:t.ok.share,big_percent:t.bigger.share};n.sendEvent("Item_SizeMatch_T",s)},de=e=>{const t=(0,r.a)(),n={item_id:e.nmId,subject_id:e.subjectId,subject_parent_id:e.subjectParentId,supplier_id:e.supplierId,type:"fullsize",location:"Item"};t.sendEvent("Item_PriceDetails_Details_S",n)},pe=(e,t)=>{const n=(0,r.a)(),s={item_id:e.nmId,supplier_id:e.supplierId,subject_id:e.subjectId,subject_parent_id:e.subjectParentId,price:Number(e.salePrice),currency:e.currency,promo_time_end:t};n.sendEvent("Item_Timer_Mark_S",s)},he=(e,t,n)=>{const s=(0,r.a)();let i={};e&&(i={type:null!=n?n:"fullsize",item_id:e.nmId,supplier_id:e.supplierId,subject_id:e.subjectId,subject_parent_id:e.subjectParentId}),t&&(i=f(g({},i),{type:n,supplier_id:t,name:"Supplier_Share_T"})),s.sendEvent("Item_Share_T",i)},me=e=>{(0,r.a)().sendEvent("Resale_BottomSheet_T",{type:"Resale Label BS",option:e})},ge=()=>{(0,r.a)().sendEvent("Resale_BottomSheet_S",{type:"Resale Label BS"})},fe=e=>{(0,r.a)().saveState({l:"IBT",lw:"IT",t:e},!0)},be=(e,t)=>{const n=(0,r.a)();let s="";"click"===e&&(s="Item_Task_Mechanic_T"),"show"===e&&(s="Item_Task_Mechanic_S"),"all"===e&&(s="Item_Task_Mechanic_All_T");const i={item_id:t.nmId,supplier_id:t.supplierId,subject_id:t.subjectId,subject_parent_id:t.subjectParentId};n.sendEvent(s,i)},ye=(e,t,n)=>{const s=(0,r.a)(),i="click"===e?"Item_Task_Mechanic_List_T":"Item_Task_Mechanic_List_S",o={item_id:t.nmId,supplier_id:t.supplierId,subject_id:t.subjectId,subject_parent_id:t.subjectParentId,chance:n.rewardPoints,status:n.taskProgress.isCompleted,index:1,name:n.name};s.sendEvent(i,o)}},41752:function(e,t,n){"use strict";n.d(t,{$Q:function(){return s.$Q},BK:function(){return s.BK},N5:function(){return s.N5},Ov:function(){return s.Ov},bC:function(){return s.bC},d4:function(){return s.d4},g7:function(){return r.g7},hK:function(){return s.hK},jC:function(){return s.jC},jq:function(){return s.jq},kG:function(){return s.kG},wA:function(){return s.wA},x3:function(){return s.x3}});var r=n(72817),s=n(84286)},72817:function(e,t,n){"use strict";n.d(t,{g7:function(){return r}});var r=(e=>(e[e.ACCENT_SNIPPET=0]="ACCENT_SNIPPET",e[e.POINTS_FOR_REVIEWS=1]="POINTS_FOR_REVIEWS",e[e.GOOD_PRICE=3]="GOOD_PRICE",e[e.WBCLUB=4]="WBCLUB",e[e.CASHBACK=5]="CASHBACK",e[e.PRESCRIPTION=9]="PRESCRIPTION",e[e.ONLY_ONE_PURCHASE_PROMO=11]="ONLY_ONE_PURCHASE_PROMO",e[e.ORIGINAL=12]="ORIGINAL",e[e.INSURANCE=13]="INSURANCE",e[e.YOUR_SALE=14]="YOUR_SALE",e[e.PRE_ORDER=15]="PRE_ORDER",e[e.WHOLESALE_GOODS=16]="WHOLESALE_GOODS",e[e.SALE=20]="SALE",e[e.ISC2C=21]="ISC2C",e[e.NEW=22]="NEW",e[e.PROMO=23]="PROMO",e[e.QUANTITY=24]="QUANTITY",e))(r||{})},58775:function(e,t,n){"use strict";n.d(t,{ER:function(){return m},HK:function(){return f},Ov:function(){return g},Wg:function(){return s},Wq:function(){return r},Wx:function(){return p},Xi:function(){return c},Yt:function(){return u},bC:function(){return a},ft:function(){return h},jC:function(){return o},m:function(){return l},qQ:function(){return y},sS:function(){return b},tB:function(){return d},x3:function(){return i}});const r=[1,2,3,4,6,200,204,1327,1465,1513,1616,2273,3497,4607,4735],s=[213,1542,2605,2693,4733,4737,212,380,733,1675,2687,4738,4827,4932,214,2616,218,757,53,61,63,305,946,1161,1422,1439,1475,1487,2318,2379,2747,2920,3489,3490,3579,3766,4200,4256,4537,5154,5220,5222,5273,5094,5096,1339,836,5131,1542,5095,4021,4022,1338,2564],i=8242,o=[5352,2255],a=5105,l=60,c=6,u=4,d=2,p="i/v3/seller/premium.png",h=9;var m=(e=>(e[e["i/v3/seller/cupBronze.png"]=2]="i/v3/seller/cupBronze.png",e[e["i/v3/seller/cupSilver.png"]=3]="i/v3/seller/cupSilver.png",e[e["i/v3/seller/cupGold.png"]=4]="i/v3/seller/cupGold.png",e))(m||{});const g=[225188,181237,313828,231062,236960],f=320,b=100,y=.01},2831:function(e,t,n){"use strict";n.d(t,{$Q:function(){return E},BK:function(){return g},Fj:function(){return u},Jp:function(){return h},Ld:function(){return f},Mk:function(){return v},N5:function(){return T},PO:function(){return b},Qf:function(){return d},S8:function(){return C},XJ:function(){return O},aV:function(){return l},d4:function(){return p},hK:function(){return P},iB:function(){return _},jq:function(){return k},kG:function(){return c},pf:function(){return I},t7:function(){return y},wA:function(){return m},yg:function(){return S}});var r=n(82516),s=n(88927),i=n(74929),o=n(88166),a=n(58775);const l=e=>wb.xnm.isViewFlagSet(e,r._q.hasVideo),c=(e,t)=>!(20624===t)&&wb.xnm.isViewFlagSet(e,r._q.isOriginal),u=e=>wb.xnm.isViewFlagSet(e,r._q.isBestPrice),d=(e,t)=>{if(!t||t.length<a.m)return t;if(t.indexOf(e)<a.m)return t.slice(0,a.m);const n=[e];return n.push(...t.slice(0,a.m-1)),n},p=(e,t)=>{var n;let r=!0,s=null;return e.sizes&&(r=e.sizes.length<=2&&(null==(n=e.sizes)?void 0:n.every(e=>"0"===e.nm)),r||1===e.sizes.length?s=e.sizes.find(e=>!e.unavailable)||e.sizes[0]:null!=t&&(s=e.sizes.find(e=>e.ch===t))),{showSizes:!r,defaultSize:null!=s?s:null}},h=(e,t=a.Yt)=>{const n=[];if(!e)return[];for(let r=0;r<e.length;r++){const s=e[r].addedOptions.slice(0,t).filter(e=>"Цвет"!==e.property);if(n.push(...s),(t-=s.length)<1)break}return n},m=(e,t,n,r=!1)=>{var s,i,a,l,c,u,d,p;const h=null!=(i=null==(s=null==e?void 0:e.grouped_options)?void 0:s.map(e=>{var t;return{categoryName:e.group_name,addedOptions:null==(t=e.options)?void 0:t.map(e=>({property:e.name,subProperty:e.value}))}}))?i:[];let m=null==h?void 0:h.find(e=>"Основная информация"===(null==e?void 0:e.categoryName));m&&(null==m?void 0:m.addedOptions)||(m={categoryName:o.R.t("productCard.generalInfo"),addedOptions:[]},h.unshift(m)),r&&(null==(a=null==e?void 0:e.wholesale)?void 0:a.quantum)&&m.addedOptions.unshift({property:t("productCard.wholesaleQuantum"),subProperty:e.wholesale.quantum.toString()});let g=null==h?void 0:h.find(e=>"Дополнительная информация"===(null==e?void 0:e.categoryName));return g&&(null==g?void 0:g.addedOptions)||(g={categoryName:o.R.t("productCard.additionalInfo"),addedOptions:[]},h.push(g)),"ru"!==n||(null==(l=null==e?void 0:e.options)?void 0:l.find(e=>"Состав"===e.name))||null==(null==e?void 0:e.compositions)||g.addedOptions.unshift({property:t("productCard.structure"),subProperty:null==(c=null==e?void 0:e.compositions)?void 0:c.map(e=>e.value?`${e.name} ${e.value}%`:e.name).join("; ")}),"ru"!==n||(null==(u=null==e?void 0:e.options)?void 0:u.find(e=>"Комплектация"===e.name))||null==(null==e?void 0:e.contents)||g.addedOptions.push({property:t("productCard.equipment"),subProperty:e.contents}),"ru"!==n||(null==(d=null==e?void 0:e.options)?void 0:d.find(e=>"Пол"===e.name))||null==(null==e?void 0:e.kinds)||g.addedOptions.push({property:t("productCard.gender"),subProperty:e.kinds.join(", ")}),"ru"===n&&!(null==(p=null==e?void 0:e.options)?void 0:p.find(e=>"Сезон"===e.name))&&(null==e?void 0:e.season)&&g.addedOptions.push({property:t("productCard.season"),subProperty:e.season}),h.filter(e=>e.addedOptions.length>0)},g=(e,t)=>{let n=0;return n=(null==t?void 0:t.stocks)?t.stocks.reduce((e,t)=>n+=t.qty,0):e,n},f=(e,t,n,r,s=!1)=>{const i=g(t,n);return!!(s&&e>=1)||(e>=i||e>=r)},b=(e,t=[])=>{var n;const r=[];if(e.sizes_table&&(null==(n=e.sizes_table)?void 0:n.details_props)){const n=e.sizes_table.details_props.indexOf("RU"),s=e.sizes_table.details_props.indexOf("EU"),i={row:[]};let a=0;n>=0&&(i.row[a++]=o.R.t("common.russianSize")),i.row[a++]=o.R.t("common.manufactureSize");for(let t=0;t<e.sizes_table.details_props.length;t++){if(t===n||t===s)continue;const r=e.sizes_table.details_props[t];i.row[a++]=""!==r?r:"-"}r.push(i),t.forEach(t=>{var o;const a=e.sizes_table.values.find(e=>t.ch===e.chrt_id);if(a){let e=0;const i={chrtId:null!=(o=a.chrt_id)?o:0,row:[]};n>=0&&(i.row[e++]=a.details[n]),i.row[e++]=a.tech_size;const l=(-1!==n?1:0)+(-1!==s?1:0);if(a.details.length>l)for(let t=0;t<a.details.length;t++)t!==n&&t!==s&&(i.row[e++]=""!==a.details[t]?a.details[t]:"-");t.unavailable&&(i.isSoldOut=!0),r.push(i)}else{const e=[`${t.rusNm?t.rusNm:"-"}`,`${t.nm?t.nm:"-"}`];for(;e.length!=i.row.length;)e.push("-");const n={chrtId:t.ch,isSoldOut:t.unavailable,row:e};r.push(n)}})}return r},y=(e,t)=>{var n,r,s;const i=[],o=null==(r=null==(n=null==e?void 0:e.sizes_table)?void 0:n.values)?void 0:r.find(e=>e.chrt_id===t.ch);if((null==o?void 0:o.details)&&(null==(s=null==e?void 0:e.sizes_table.details_props)?void 0:s.length)===o.details.length)for(let t=0;t<e.sizes_table.details_props.length;t++){if("RU"===e.sizes_table.details_props[t]||"EU"===e.sizes_table.details_props[t])continue;const n={name:null==e?void 0:e.sizes_table.details_props[t],value:""!==o.details[t]?o.details[t]:"-"};i.push(n)}return i},v=(e,t)=>t?!S(e,t):!w(e),w=e=>{var t,n;return null!=(n=null==(t=e.sizes)?void 0:t.every(t=>S(e,t)))&&n},S=(e,t)=>!!(null==t?void 0:t.unavailable)||e.soldOut,_=(e,t,n)=>-1!==a.Wq.indexOf(t)&&-1===a.Wg.indexOf(e)&&!n,I=(e,t,n,r)=>`/catalog/${e}/feedbacks?imtId=${t}${n?`&size=${n}`:""}${r?"&isTrend=true":""}`,C=(e,t,n,r)=>`/catalog/${e}/questions?imtId=${t}${n?`&size=${n}`:""}${r?"&isTrend=true":""}`,k=e=>wb.xnm.isDtypeFlagSet(e.whDtype,r.iA.ShouldApplyDuty),P=(e,t)=>{const{totalQuantity:n,panelPromoId:r,isC2C:s}=e;if(r||s||!n&&!t)return!1;const i=g(n,t);return!(i>a.ft||0===i)},E=e=>{if(!e)return;const t=wb.xnm.isPreorderProduct(e);if(wb.global.settings.switches.enablePreorderProducts)return t;if(wb.global.settings.switches.enablePreorderProductsEmp){const e=(0,s.Z1)().userData.userData;return(e.isActiveEmployee||e.isEmployeeSynced)&&t}return!1},T=e=>{const t=e.replace(/\/\*[\s\S]*?\*\//g,"").replace(/\s+/g," ").trim();return t.startsWith("{")?n(t.slice(1,-1)):t.includes("{")?function(e){const t={};return e.split("}").filter(e=>e.trim()).forEach(e=>{const[r,...s]=e.split("{");if(r&&s.length>0){const e=r.trim(),i=s.join("{").trim();t[e]=n(i)}}),t}(t):n(t);function n(e){const t={};return e.split(";").filter(e=>e.trim()).forEach(e=>{const[n,r]=e.split(":").map(e=>e.trim());if(n&&void 0!==r){const e=n.replace(/-([a-z])/g,e=>e[1].toUpperCase());t[e]=r}}),t}},O=()=>{const e=(0,i.c)(),t=(0,s.u4)().balance;return e.isAuth&&!!t&&(1===t.walletTypeCode||2===t.walletTypeCode)}},84286:function(e,t,n){"use strict";n.d(t,{$Q:function(){return s.$Q},BK:function(){return s.BK},ER:function(){return r.ER},Fj:function(){return s.Fj},Jp:function(){return s.Jp},Ld:function(){return s.Ld},Mk:function(){return s.Mk},N5:function(){return s.N5},Ov:function(){return r.Ov},PO:function(){return s.PO},Qf:function(){return s.Qf},S8:function(){return s.S8},Wx:function(){return r.Wx},XJ:function(){return s.XJ},Xi:function(){return r.Xi},Yt:function(){return r.Yt},aV:function(){return s.aV},bC:function(){return r.bC},d4:function(){return s.d4},ft:function(){return r.ft},hK:function(){return s.hK},iB:function(){return s.iB},jC:function(){return r.jC},jq:function(){return s.jq},kG:function(){return s.kG},pf:function(){return s.pf},t7:function(){return s.t7},tB:function(){return r.tB},wA:function(){return s.wA},x3:function(){return r.x3},yg:function(){return s.yg}});var r=n(58775),s=n(2831)},87974:function(e,t,n){"use strict";n.d(t,{x:function(){return r}});Object.defineProperty;const r={NONE:0,VISUALLY_SIMILAR:1,SIMILAR:2,ALSO_BUY:3,TODAY_IS_TOP:4,MAYBE_YOU_INTEREST:5,BESTSELLERS:6,PERSONAL:7,RECOMMENDED_BY_NM:8,PROMO:9,SAME_BUY:10,RECENT:11}},52623:function(e,t,n){"use strict";n.d(t,{vK:function(){return i}});var r=n(90568);const s="walletCrypto",i=async()=>{let e=(0,r.getInstance)(s);return e||(e=await Promise.all([n.e(70973),n.e(74425),n.e(63089),n.e(71415)]).then(n.bind(n,35155)).then(e=>e.WalletCrypto),o(e)),e},o=e=>{(0,r.setInstance)(s,e)}},7838:function(e,t,n){"use strict";n.d(t,{$Q:function(){return a},Hl:function(){return o},bD:function(){return s},if:function(){return i},s8:function(){return r}});const r={Unknown:"unknown",Active:"active",Blocked:"blocked",BlockedSystem:"blocked_system",BlockedSystemClose:"blocked_system_close",BlockedUser:"blocked_user",Closed:"closed",Rejected:"rejected",Pending:"pending"},s={Unknown:"unknown",Anonymous:"anonymous",Verified:"verified",Account:"account"},i="_wallet-opened",o={walletLimit:"walletLimit",walletOrderLimit:"walletOrderLimit",walletVolumeLimit:"walletVolumeLimit"},a={UNKNOWN:0,ACTIVE:1,PENDING:2,CLOSED:3,BLOCKED_BY_BANK:4,REJECTED:5,BLOCKED_BY_USER:6}},64566:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});const r=()=>n.e(93590).then(n.bind(n,93590)).then(e=>e.InterestsCarouselsManager)},44325:function(e,t,n){"use strict";n.d(t,{MK:function(){return o},Xd:function(){return s},pP:function(){return r},uu:function(){return i},wT:function(){return a}});const r=Object.freeze({SALES_RULES:"/services/pravila-prodazhi",SALES_POLICY:"/services/pravila-polzovaniya-torgovoy-ploshchadkoy",LINKING_TERMS:"/services/account-linking-terms",PERSONAL_POLICY:"/services/politika-obrabotki-personalnyh-dannyh",TECH_RULES:"/services/pravila-primeneniya-rekomendatelnyh-tehnologiy",VIDEO_POLICY:"/services/politika-videonablyudeniya",PRIVACY_POLICY:"/services/politika-konfidentsialnosti"}),s=Object.freeze({[r.SALES_RULES]:"/rules-for-selling-goods",[r.SALES_POLICY]:"/consumers-offer",[r.LINKING_TERMS]:"/account-linking-terms",[r.PERSONAL_POLICY]:"/privacypolicy",[r.TECH_RULES]:"/rules-for-the-use-of-recommendation-technologies",[r.VIDEO_POLICY]:"/video-surveillance-policy",[r.PRIVACY_POLICY]:"/privacypolicy"}),i="https://legal.wildberries.",o=" ",a=50},88166:function(e,t,n){"use strict";n.d(t,{R:function(){return s}});var r=n(25002);const s=(0,r.getI18nService)().getUtils("website")},47184:function(e,t,n){"use strict";n.r(t),n.d(t,{animationFrameWithMinDelay:function(){return P},debounce:function(){return d},debounceLead:function(){return p},debounceTrail:function(){return h},deepMerge:function(){return c},deepMerge_v2:function(){return u},delay:function(){return S},delegator:function(){return y},getClientDt:function(){return I},isElementInViewport:function(){return _},isMobileBrowser:function(){return C},isNumber:function(){return k},loadCssAsync:function(){return T},loadJsAsync:function(){return E},lockPromise:function(){return b},moveToAnchor:function(){return O},nextTick:function(){return v},objectSerializer:function(){return a},once:function(){return f},repeat:function(){return g},scriptLoader:function(){return s},serializeToFormData:function(){return l},sleep:function(){return w},styleLoader:function(){return i},switchableLoadAsync:function(){return o},throttle:function(){return m}});var r=n(28288);const s={cache:{},onFirstExecution(){0===Object.keys(this.cache).length&&document.querySelectorAll("script[type='text/javascript']").forEach(e=>{if(""!==e.src){const t=e.src.replace(/https?:/,"");this.cache[t]=Promise.resolve()}})},require(e){const t=e.replace(new RegExp("^.*(?=\\/j)"),"");let n=this.cache[t];return null==n&&(this.onFirstExecution(),n=this.cache[t],null==n&&(n=this.cache[t]=o(e,this.loadScriptAsync))),n.catch(e=>(this.cache[t]=null,Promise.reject(e)))},loadScriptAsync(e){return new Promise((t,n)=>{try{const r=document.createElement("script");r.type="text/javascript",r.src=e,r.onload=t,r.onerror=n,document.body.appendChild(r)}catch(e){n(e)}})}},i={cashe:{},orinalStylesIncluded:!1,require(e){return new Promise((t,n)=>{this.orinalStylesIncluded||this.addOrinalStyles(),null==this.cashe[e]&&(this.cashe[e]=o(e,this.loadCssAsync)),this.cashe[e].then(t).catch(t=>{this.cashe[e]=null,n(t)})})},addOrinalStyles(){this.orinalStylesIncluded=!0,document.querySelectorAll("link[type='text/css']").forEach(e=>this.cashe[e.href.replace(/https?:/,"")]=Promise.resolve())},loadCssAsync(e){return new Promise((t,n)=>{var r;let s;if(navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.indexOf("Trident/")>0){const r=document.createElement("link");r.href=e,r.type="text/css",r.rel="stylesheet",r.onload=t,r.onerror=n,s=r}else{const r=document.createElement("style");r.onload=t,r.textContent=`@import "${e}"`,r.onload=t,r.onerror=n,s=r}null==(r=document.querySelector("head"))||r.appendChild(s)})}};async function o(e,t){return new Promise((n,s)=>{"/"===e[0]&&"/"!==e[1]&&(e=e.slice(1));const i=(0,r.urlSiteStatic)(e),o=(0,r.urlSiteStatic)(e,!0);t(i).then(e=>n()).catch(e=>t(o).then(e=>n()).catch(e=>s()))})}function a(e,t=new URLSearchParams,n=!1,r=!1){const s=(e,i)=>{r&&"boolean"==typeof i?null==t||t.append(e,i.toString()):"object"==typeof i&&null!=i?Object.entries(i).forEach(([t,n])=>{s(`${e}[${t}]`,n)}):n&&null==i||null==t||t.append(e,i)};return Object.entries(e).forEach(([e,t])=>s(e,t)),t}function l(e,t=new FormData){const n=(e,r="")=>{for(let s in e){const i=e[s];let o=s;r&&(o=Array.isArray(e)?`${r}[${s}]`:`${r}.${s}`),"boolean"==typeof i||"string"==typeof i||"number"==typeof i?t.append(o,i.toString()):"object"==typeof i&&n(i,o)}};return n(e),t}function c(...e){let t=e[0],n=e=>{for(let n in e)e.hasOwnProperty(n)&&("[object Object]"===Object.prototype.toString.call(e[n])&&null!=t[n]?t[n]=c(t[n],e[n]):t[n]=e[n])};for(let t=1;t<e.length;t++)n(e[t]);return t}function u(...e){let t=e[0],n=e=>{for(let n in e)e.hasOwnProperty(n)&&("[object Object]"===Object.prototype.toString.call(e[n])&&null!=t[n]?t[n]=u(t[n],e[n]):void 0!==e[n]&&(t[n]=e[n]))};for(let t=1;t<e.length;t++)n(e[t]);return t}const d=(e,t)=>{let n=null;return function(...r){n&&clearTimeout(n),n=setTimeout(()=>{e.apply(this,r),n=null},t)}},p=(e,t=300)=>{let n;return function(...r){n||e.apply(this,r),n&&clearTimeout(n),n=setTimeout(()=>n=null,t)}},h=(e,t=300)=>{let n;return function(...r){clearTimeout(n),n=setTimeout(()=>{e.apply(this,r)},t)}},m=(e,t)=>{let n,r,s=!1;return function i(...o){if(s)return n=o,void(r=this);e.apply(this,o),s=!0,setTimeout(function(){s=!1,n&&(i.apply(r,n),n=r=null)},t)}},g=(e,t,n,r)=>{let s=0,i=setInterval(function(){if(s>t)return clearInterval(i),void(r&&r());e(i)&&clearInterval(i),s++},n);return i},f=e=>{let t=!1;return function(...n){return t?void 0:(t=!0,e.apply(this,n))}},b=e=>{let t=null;return function(...n){return t||(t=e.apply(this,n).then(e=>e).finally(()=>t=null)),t}},y=(e,t)=>function(n){let r=null;n.target instanceof HTMLElement&&(r=n.target.closest(e)),null!=r&&t(n,r)},v=()=>Promise.resolve().then(()=>Promise.resolve()),w=e=>new Promise(t=>setTimeout(t,e)),S=(e,t)=>new Promise((n,r)=>setTimeout(()=>{try{t()&&n()}catch(e){r(e)}},e));function _(e,t,n){var r;const s=e.getBoundingClientRect();return n&&(n.threshold=null!=(r=n.threshold)?r:10,k(n.top))?s.top>=n.top-n.threshold&&s.top<=n.top+n.threshold:s.top>=0&&(t||s.left>=0)&&s.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&(t||s.right<=(window.innerWidth||document.documentElement.clientWidth))}function I(){const e=new Date,t=new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString();return t.slice(0,t.length-1)}function C(){if(void 0!==window._isMobileBrowser)return window._isMobileBrowser;let e=!1;var t;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),window._isMobileBrowser=e,window._isMobileBrowser}function k(e){return!isNaN(parseFloat(String(e)))&&isFinite(Number(e))}function P(e,t){const n=performance.now(),r=()=>performance.now()-n>e?t():window.requestAnimationFrame(r);window.requestAnimationFrame(r)}const E=s.require.bind(s),T=i.require.bind(i),O=function(...e){const t=arguments[0],n=e.find(e=>e instanceof Event||e instanceof jQuery.Event),r=arguments[1]instanceof Event||arguments[1]instanceof jQuery.Event||arguments[1],s=!(arguments[2]instanceof Event||arguments[2]instanceof jQuery.Event)&&arguments[2],i=arguments[3]instanceof Event||arguments[3]instanceof jQuery.Event||!arguments[3]?0:arguments[3];null==n||n.preventDefault(),null==n||n.stopPropagation(),null==n||n.stopImmediatePropagation();const o=document.getElementById(t);if(null==o)return void console.warn("anchor element doesnt exist");const a={top:0+i};function l(){"scrollBehavior"in document.documentElement.style?window.scrollTo({top:window.pageYOffset+o.getBoundingClientRect().top-i,left:0,behavior:r?"smooth":"auto"}):window.scrollTo(0,window.pageYOffset+o.getBoundingClientRect().top-i)}if(l(),s){const e=setInterval(()=>{_(o,!0,a)?clearInterval(e):l()},500)}}},34113:function(e,t,n){"use strict";n.d(t,{i:function(){return d}});var r=Object.defineProperty,s=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,a=(e,t,n)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,l=(e,t)=>{for(var n in t||(t={}))i.call(t,n)&&a(e,n,t[n]);if(s)for(var n of s(t))o.call(t,n)&&a(e,n,t[n]);return e},c=(e,t,n)=>a(e,"symbol"!=typeof t?t+"":t,n);const u={short:9e5,halfHour:18e5,normal:36e5};Object.freeze(u);const d={createStorageHelperItem:(e,t,n)=>new p(e,t,n),get cacheActivityType(){return u},supportIndexedDb:()=>null!=window.indexedDB,metadataTableName:e=>e+"_metadata",openDb:(e,t={})=>new Promise((n,r)=>{var s;const i=indexedDB.open(e,null!=(s=null==t?void 0:t.version)?s:1);i.onupgradeneeded=e=>{var n;null==(n=t.onupgradeneeded)||n.call(t,e.target.result)},i.onsuccess=e=>{n(e.target.result)},i.onerror=()=>{r(new Error(`[StorageHelper]: Database cannot be opened db_name=${e} error=${i.error}`))}}),setItem:(e,t,n)=>new Promise((r,s)=>{const i=e.transaction([t],"readwrite").objectStore(t).put(n);i.onsuccess=r,i.onerror=e=>{var t;console.error(null==(t=e.target.error)?void 0:t.message),s("Error while setting item from indexedDb")}}),addItem:(e,t,n,r)=>new Promise((s,i)=>{const o=e.transaction([t],"readwrite").objectStore(t).add(n);o.onsuccess=e=>s(e.target.result),o.onerror=e=>{var t;!r&&console.error(null==(t=e.target.error)?void 0:t.message),i("Error while setting item from indexedDb")}}),addItems:(e,t,n,r=0)=>{const s=[];if(r&&n.length>r)for(let o=0;o<Math.ceil(n.length/r);o++){const a=n.slice(o*r,(o+1)*r);s.push(i(e,t,a))}else s.push(i(e,t,n));return Promise.all(s);function i(e,t,n){return new Promise((r,s)=>{const i=e.transaction([t],"readwrite"),o=i.objectStore(t);i.onerror=e=>{var t;console.error(null==(t=e.target.error)?void 0:t.message),s("Error while setting items to indexedDb")},i.oncomplete=r;for(const e of n){o.put(e).onerror=e=>console.error(e)}})}},setItems:(e,t,n,r)=>new Promise((s,i)=>{let o=e.transaction([t],"readwrite"),a=o.objectStore(t);a.clear(),r.forEach(e=>{e.__expiredAt__=n,a.add(e)}),o.oncomplete=s,o.onerror=e=>{var t;console.error(null==(t=e.target.error)?void 0:t.message),i("Error while setting item from indexedDb")}}),getAll:(e,t)=>new Promise((n,r)=>{const s=e.transaction([t]).objectStore(t).getAll();s.onsuccess=e=>n(e.target.result),s.onerror=()=>r("Error while getting item from indexedDb")}),get:(e,t,n)=>new Promise((r,s)=>{const i=e.transaction([t]).objectStore(t).get(n);i.onsuccess=e=>r(e.target.result),i.onerror=()=>s("Error while getting item from indexedDb")}),getItem:(e,t,n)=>new Promise((r,s)=>{const i=e.transaction([t]).objectStore(t).get(n);i.onsuccess=s=>{const i=s.target.result;return i&&i.__expiredAt__<=Date.now()?(d.removeItem(e,t,n),r(null)):r(s.target.result)},i.onerror=()=>s("Error while getting item from indexedDb")}),removeItem:(e,t,n)=>new Promise((r,s)=>{const i=e.transaction([t],"readwrite").objectStore(t).delete(n);i.onsuccess=r,i.onerror=()=>s("Error while removing item from indexedDb")}),updateItem:(e,t,n,r)=>new Promise((s,i)=>{const o=e.transaction([t],"readwrite").objectStore(t).put(n,r);o.onsuccess=s,o.onerror=e=>{var t;console.error(null==(t=e.target.error)?void 0:t.message),i("Error while updating item in indexedDb")}}),clear:(e,t)=>new Promise((n,r)=>{const s=e.transaction([t],"readwrite").objectStore(t).clear();s.onsuccess=n,s.onerror=()=>r("Error while removing item from indexedDb")}),removeDb:e=>new Promise((t,n)=>{const r=indexedDB.deleteDatabase(e);r.onsuccess=t,r.onerror=()=>n("Error while removing database")}),exec:(e,t,n)=>{if("function"==typeof n)return new Promise((r,s)=>{const i=e.transaction([t]).objectStore(t),o=n(i);o.onsuccess=e=>r(e.target.result),o.onerror=()=>s("Error while getting item from indexedDb")})},withCursor:(e,t,n,r)=>new Promise((s,i)=>{let o=e.transaction([t],"readwrite").objectStore(t);n&&(o=o.index(n));const a=o.openCursor();a.onsuccess=e=>{const t=e.target.result;t?(r(t.key,t.value,t),t.continue()):s(void 0)},a.onerror=()=>i("Error while getting item from indexedDb")}),objectStorePromise:(e,t,n)=>new Promise((r,s)=>{const i=e.objectStore(t),o=n(i);o.onsuccess=e=>r(e.target.result),o.onerror=()=>s("Error while work on objectStore from indexedDb")}),withTransaction:(e,t,n)=>new Promise((r,s)=>{const i=e.transaction(t,"readwrite");n(i).then(e=>{}),i.oncomplete=()=>r(i),i.onerror=()=>s("Error while open transaction in indexedDb on :"+t.join(","))})};class p{constructor(e,t,n=1){if(c(this,"databaseName"),c(this,"databaseVersion"),c(this,"onupgradeneeded"),null==e||""==e)throw new Error("creating database without name is impossible");this.databaseName=e,this.databaseVersion=n,this.onupgradeneeded=t}updateCacheAsync(e,t,n,r,s){return s=l(l({},{saveAllDb:!1,getResultFunc:e=>e}),s),d.supportIndexedDb()?this.getItemFromDb(e,t,n,r,s):this.getItemFromLocalStorage(e,t,n,r,s)}getItemFromDb(e,t,n,r,s){let i;return d.openDb(this.databaseName,{version:this.databaseVersion,onupgradeneeded:this.onupgradeneeded}).then(n=>(i=n,d.getItem(i,e,t))).then(t=>null!=t?Promise.resolve(t):r().then(t=>{null!=t&&(s.saveAllDb?d.setItems(i,e,Date.now()+n,t):d.setItem(i,e,l({__expiredAt__:Date.now()+n},t)));const r=s.getResultFunc(t);return Promise.resolve(r)}))}getItemFromLocalStorage(e,t,n,r,s){var i;const o=s.saveAllDb?`${this.databaseName};${this.databaseVersion};${e}`:`${this.databaseName};${this.databaseVersion};${e};${t}`,a=localStorage.getItem(o),l=a?JSON.parse(a):null;if(l&&(null==l?void 0:l.__expiredAt__)>=Date.now()&&(!s.saveAllDb||!!(null==(i=l.items)?void 0:i.length))){const e=s.getResultFunc(s.saveAllDb?l.items:l);return Promise.resolve(e)}return r().then(e=>{const t=s.saveAllDb?{items:e,__expiredAt__:0}:e;return t.__expiredAt__=Date.now()+n,localStorage.setItem(o,JSON.stringify(t)),Promise.resolve(s.getResultFunc(e))})}}},63740:function(e,t,n){"use strict";n.d(t,{$:function(){return r}});const r=()=>{const e=navigator.userAgent||navigator.vendor||window.opera;return/android/i.test(e)?"Android":/iPad|iPhone|iPod/.test(e)?"iOS":"unknown"}},42044:function(e){var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=t},15864:function(e){var t,n;t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var n=[],r=0;r<e.length;r+=3)for(var s=e[r]<<16|e[r+1]<<8|e[r+2],i=0;i<4;i++)8*r+6*i<=8*e.length?n.push(t.charAt(s>>>6*(3-i)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,s=0;r<e.length;s=++r%4)0!=s&&n.push((t.indexOf(e.charAt(r-1))&Math.pow(2,-2*s+8)-1)<<2*s|t.indexOf(e.charAt(r))>>>6-2*s);return n}},e.exports=n},60669:function(e){function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},90532:function(e,t,n){var r,s,i,o,a;r=n(15864),s=n(42044).utf8,i=n(60669),o=n(42044).bin,(a=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?o.stringToBytes(e):s.stringToBytes(e):i(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var n=r.bytesToWords(e),l=8*e.length,c=1732584193,u=-271733879,d=-1732584194,p=271733878,h=0;h<n.length;h++)n[h]=16711935&(n[h]<<8|n[h]>>>24)|4278255360&(n[h]<<24|n[h]>>>8);n[l>>>5]|=128<<l%32,n[14+(l+64>>>9<<4)]=l;var m=a._ff,g=a._gg,f=a._hh,b=a._ii;for(h=0;h<n.length;h+=16){var y=c,v=u,w=d,S=p;c=m(c,u,d,p,n[h+0],7,-680876936),p=m(p,c,u,d,n[h+1],12,-389564586),d=m(d,p,c,u,n[h+2],17,606105819),u=m(u,d,p,c,n[h+3],22,-1044525330),c=m(c,u,d,p,n[h+4],7,-176418897),p=m(p,c,u,d,n[h+5],12,1200080426),d=m(d,p,c,u,n[h+6],17,-1473231341),u=m(u,d,p,c,n[h+7],22,-45705983),c=m(c,u,d,p,n[h+8],7,1770035416),p=m(p,c,u,d,n[h+9],12,-1958414417),d=m(d,p,c,u,n[h+10],17,-42063),u=m(u,d,p,c,n[h+11],22,-1990404162),c=m(c,u,d,p,n[h+12],7,1804603682),p=m(p,c,u,d,n[h+13],12,-40341101),d=m(d,p,c,u,n[h+14],17,-1502002290),c=g(c,u=m(u,d,p,c,n[h+15],22,1236535329),d,p,n[h+1],5,-165796510),p=g(p,c,u,d,n[h+6],9,-1069501632),d=g(d,p,c,u,n[h+11],14,643717713),u=g(u,d,p,c,n[h+0],20,-373897302),c=g(c,u,d,p,n[h+5],5,-701558691),p=g(p,c,u,d,n[h+10],9,38016083),d=g(d,p,c,u,n[h+15],14,-660478335),u=g(u,d,p,c,n[h+4],20,-405537848),c=g(c,u,d,p,n[h+9],5,568446438),p=g(p,c,u,d,n[h+14],9,-1019803690),d=g(d,p,c,u,n[h+3],14,-187363961),u=g(u,d,p,c,n[h+8],20,1163531501),c=g(c,u,d,p,n[h+13],5,-1444681467),p=g(p,c,u,d,n[h+2],9,-51403784),d=g(d,p,c,u,n[h+7],14,1735328473),c=f(c,u=g(u,d,p,c,n[h+12],20,-1926607734),d,p,n[h+5],4,-378558),p=f(p,c,u,d,n[h+8],11,-2022574463),d=f(d,p,c,u,n[h+11],16,1839030562),u=f(u,d,p,c,n[h+14],23,-35309556),c=f(c,u,d,p,n[h+1],4,-1530992060),p=f(p,c,u,d,n[h+4],11,1272893353),d=f(d,p,c,u,n[h+7],16,-155497632),u=f(u,d,p,c,n[h+10],23,-1094730640),c=f(c,u,d,p,n[h+13],4,681279174),p=f(p,c,u,d,n[h+0],11,-358537222),d=f(d,p,c,u,n[h+3],16,-722521979),u=f(u,d,p,c,n[h+6],23,76029189),c=f(c,u,d,p,n[h+9],4,-640364487),p=f(p,c,u,d,n[h+12],11,-421815835),d=f(d,p,c,u,n[h+15],16,530742520),c=b(c,u=f(u,d,p,c,n[h+2],23,-995338651),d,p,n[h+0],6,-198630844),p=b(p,c,u,d,n[h+7],10,1126891415),d=b(d,p,c,u,n[h+14],15,-1416354905),u=b(u,d,p,c,n[h+5],21,-57434055),c=b(c,u,d,p,n[h+12],6,1700485571),p=b(p,c,u,d,n[h+3],10,-1894986606),d=b(d,p,c,u,n[h+10],15,-1051523),u=b(u,d,p,c,n[h+1],21,-2054922799),c=b(c,u,d,p,n[h+8],6,1873313359),p=b(p,c,u,d,n[h+15],10,-30611744),d=b(d,p,c,u,n[h+6],15,-1560198380),u=b(u,d,p,c,n[h+13],21,1309151649),c=b(c,u,d,p,n[h+4],6,-145523070),p=b(p,c,u,d,n[h+11],10,-1120210379),d=b(d,p,c,u,n[h+2],15,718787259),u=b(u,d,p,c,n[h+9],21,-343485551),c=c+y>>>0,u=u+v>>>0,d=d+w>>>0,p=p+S>>>0}return r.endian([c,u,d,p])})._ff=function(e,t,n,r,s,i,o){var a=e+(t&n|~t&r)+(s>>>0)+o;return(a<<i|a>>>32-i)+t},a._gg=function(e,t,n,r,s,i,o){var a=e+(t&r|n&~r)+(s>>>0)+o;return(a<<i|a>>>32-i)+t},a._hh=function(e,t,n,r,s,i,o){var a=e+(t^n^r)+(s>>>0)+o;return(a<<i|a>>>32-i)+t},a._ii=function(e,t,n,r,s,i,o){var a=e+(n^(t|~r))+(s>>>0)+o;return(a<<i|a>>>32-i)+t},a._blocksize=16,a._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var n=r.wordsToBytes(a(e,t));return t&&t.asBytes?n:t&&t.asString?o.bytesToString(n):r.bytesToHex(n)}},40204:function(e,t,n){"use strict";n.d(t,{s:function(){return Mb},P:function(){return Ei}});const r=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,s=globalThis,i="9.46.0";function o(){return a(s),s}function a(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||i,t[i]=t[i]||{}}function l(e,t,n=s){const r=n.__SENTRY__=n.__SENTRY__||{},o=r[i]=r[i]||{};return o[e]||(o[e]=t())}const c=["debug","info","warn","error","log","assert","trace"],u={};function d(e){if(!("console"in s))return e();const t=s.console,n={},r=Object.keys(u);r.forEach(e=>{const r=u[e];n[e]=t[e],t[e]=r});try{return e()}finally{r.forEach(e=>{t[e]=n[e]})}}function p(){return m().enabled}function h(e,...t){r&&p()&&d(()=>{s.console[e](`Sentry Logger [${e}]:`,...t)})}function m(){return r?l("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const g={enable:function(){m().enabled=!0},disable:function(){m().enabled=!1},isEnabled:p,log:function(...e){h("log",...e)},warn:function(...e){h("warn",...e)},error:function(...e){h("error",...e)}},f="?",b=/\(error: (.*)\)/,y=/captureMessage|captureException/;function v(...e){const t=e.sort((e,t)=>e[0]-t[0]).map(e=>e[1]);return(e,n=0,r=0)=>{const s=[],i=e.split("\n");for(let e=n;e<i.length;e++){const n=i[e];if(n.length>1024)continue;const o=b.test(n)?n.replace(b,"$1"):n;if(!o.match(/\S*Error: /)){for(const e of t){const t=e(o);if(t){s.push(t);break}}if(s.length>=50+r)break}}return function(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(S(t).function||"")&&t.pop(),t.reverse(),y.test(S(t).function||"")&&(t.pop(),y.test(S(t).function||"")&&t.pop()),t.slice(0,50).map(e=>({...e,filename:e.filename||S(t).filename,function:e.function||f}))}(s.slice(r))}}function w(e){return Array.isArray(e)?v(...e):e}function S(e){return e[e.length-1]||{}}const _="<anonymous>";function I(e){try{return e&&"function"==typeof e&&e.name||_}catch{return _}}function C(e){const t=e.exception;if(t){const e=[];try{return t.values.forEach(t=>{t.stacktrace.frames&&e.push(...t.stacktrace.frames)}),e}catch{return}}}const k={},P={};function E(e,t){k[e]=k[e]||[],k[e].push(t)}function T(e,t){if(!P[e]){P[e]=!0;try{t()}catch(t){r&&g.error(`Error while instrumenting ${e}`,t)}}}function O(e,t){const n=e&&k[e];if(n)for(const s of n)try{s(t)}catch(t){r&&g.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${I(s)}\nError:`,t)}}let x=null;function M(e){const t="error";E(t,e),T(t,A)}function A(){x=s.onerror,s.onerror=function(e,t,n,r,s){return O("error",{column:r,error:s,line:n,msg:e,url:t}),!!x&&x.apply(this,arguments)},s.onerror.__SENTRY_INSTRUMENTED__=!0}let R=null;function D(e){const t="unhandledrejection";E(t,e),T(t,L)}function L(){R=s.onunhandledrejection,s.onunhandledrejection=function(e){return O("unhandledrejection",e),!R||R.apply(this,arguments)},s.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const B=Object.prototype.toString;function $(e){switch(B.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return K(e,Error)}}function N(e,t){return B.call(e)===`[object ${t}]`}function j(e){return N(e,"ErrorEvent")}function F(e){return N(e,"DOMError")}function U(e){return N(e,"String")}function W(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function H(e){return null===e||W(e)||"object"!=typeof e&&"function"!=typeof e}function V(e){return N(e,"Object")}function z(e){return typeof Event<"u"&&K(e,Event)}function q(e){return!(null==e||!e.then||"function"!=typeof e.then)}function K(e,t){try{return e instanceof t}catch{return!1}}function G(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}function J(e){return typeof Request<"u"&&K(e,Request)}const Y=s;function Q(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,s=[];let i=0,o=0;const a=" > ",l=a.length;let c;const u=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||80;for(;n&&i++<r&&(c=X(n,u),!("html"===c||i>1&&o+s.length*l+c.length>=d));)s.push(c),o+=c.length,n=n.parentNode;return s.reverse().join(a)}catch{return"<unknown>"}}function X(e,t){const n=e,r=[];if(null==n||!n.tagName)return"";if(Y.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const s=null!=t&&t.length?t.filter(e=>n.getAttribute(e)).map(e=>[e,n.getAttribute(e)]):null;if(null!=s&&s.length)s.forEach(e=>{r.push(`[${e[0]}="${e[1]}"]`)});else{n.id&&r.push(`#${n.id}`);const e=n.className;if(e&&U(e)){const t=e.split(/\s+/);for(const e of t)r.push(`.${e}`)}}const i=["aria-label","type","name","title","alt"];for(const e of i){const t=n.getAttribute(e);t&&r.push(`[${e}="${t}"]`)}return r.join("")}function Z(){try{return Y.document.location.href}catch{return""}}function ee(e){if(!Y.HTMLElement)return null;let t=e;for(let e=0;e<5;e++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}function te(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function ne(e,t){let n=e;const r=n.length;if(r<=150)return n;t>r&&(t=r);let s=Math.max(t-60,0);s<5&&(s=0);let i=Math.min(s+140,r);return i>r-5&&(i=r),i===r&&(s=Math.max(i-140,0)),n=n.slice(s,i),s>0&&(n=`'{snip} ${n}`),i<r&&(n+=" {snip}"),n}function re(e,t){if(!Array.isArray(e))return"";const n=[];for(let t=0;t<e.length;t++){const r=e[t];try{G(r)?n.push("[VueViewModel]"):n.push(String(r))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function se(e,t,n=!1){return!!U(e)&&(function(e){return N(e,"RegExp")}(t)?t.test(e):!!U(t)&&(n?e===t:e.includes(t)))}function ie(e,t=[],n=!1){return t.some(t=>se(e,t,n))}function oe(e,t,n){if(!(t in e))return;const s=e[t];if("function"!=typeof s)return;const i=n(s);"function"==typeof i&&le(i,s);try{e[t]=i}catch{r&&g.log(`Failed to replace method "${t}" in object`,e)}}function ae(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{r&&g.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function le(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,ae(e,"__sentry_original__",t)}catch{}}function ce(e){return e.__sentry_original__}function ue(e){if($(e))return{message:e.message,name:e.name,stack:e.stack,...pe(e)};if(z(e)){const t={type:e.type,target:de(e.target),currentTarget:de(e.currentTarget),...pe(e)};return typeof CustomEvent<"u"&&K(e,CustomEvent)&&(t.detail=e.detail),t}return e}function de(e){try{return function(e){return typeof Element<"u"&&K(e,Element)}(e)?Q(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function pe(e){if("object"==typeof e&&null!==e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function he(e=function(){const e=s;return e.crypto||e.msCrypto}()){let t=()=>16*Math.random();try{if(null!=e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");null!=e&&e.getRandomValues&&(t=()=>{const t=new Uint8Array(1);return e.getRandomValues(t),t[0]})}catch{}return"10000000100040008000100000000000".replace(/[018]/g,e=>(e^(15&t())>>e/4).toString(16))}function me(e){var t,n;return null==(n=null==(t=e.exception)?void 0:t.values)?void 0:n[0]}function ge(e){const{message:t,event_id:n}=e;if(t)return t;const r=me(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function fe(e,t,n){const r=e.exception=e.exception||{},s=r.values=r.values||[],i=s[0]=s[0]||{};i.value||(i.value=t||""),i.type||(i.type="Error")}function be(e,t){const n=me(e);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...t},t&&"data"in t){const e={...null==r?void 0:r.data,...t.data};n.mechanism.data=e}}function ye(e){if(function(e){try{return e.__sentry_captured__}catch{}}(e))return!0;try{ae(e,"__sentry_captured__",!0)}catch{}return!1}function ve(){return Date.now()/1e3}let we,Se;function _e(){return(we??(we=function(){const{performance:e}=s;if(null==e||!e.now||!e.timeOrigin)return ve;const t=e.timeOrigin;return()=>(t+e.now())/1e3}()))()}function Ie(){return Se||(Se=function(){var e;const{performance:t}=s;if(null==t||!t.now)return[void 0,"none"];const n=36e5,r=t.now(),i=Date.now(),o=t.timeOrigin?Math.abs(t.timeOrigin+r-i):n,a=o<n,l=null==(e=t.timing)?void 0:e.navigationStart,c="number"==typeof l?Math.abs(l+r-i):n;return a||c<n?o<=c?[t.timeOrigin,"timeOrigin"]:[l,"navigationStart"]:[i,"dateNow"]}()),Se[0]}function Ce(e){const t=_e(),n={sid:he(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return{sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}}}(n)};return e&&ke(n,e),n}function ke(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||_e(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:he()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function Pe(e,t,n=2){if(!t||"object"!=typeof t||n<=0)return t;if(e&&0===Object.keys(t).length)return e;const r={...e};for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=Pe(r[e],t[e],n-1));return r}function Ee(){return he()}function Te(){return he().substring(16)}const Oe="_sentrySpan";function xe(e,t){t?ae(e,Oe,t):delete e[Oe]}function Me(e){return e[Oe]}class Ae{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:Ee(),sampleRand:Math.random()}}clone(){const e=new Ae;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,xe(e,Me(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&ke(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e,n=t instanceof Ae?t.getScopeData():V(t)?e:void 0,{tags:r,extra:s,user:i,contexts:o,level:a,fingerprint:l=[],propagationContext:c}=n||{};return this._tags={...this._tags,...r},this._extra={...this._extra,...s},this._contexts={...this._contexts,...o},i&&Object.keys(i).length&&(this._user=i),a&&(this._level=a),l.length&&(this._fingerprint=l),c&&(this._propagationContext=c),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,xe(this,void 0),this._attachments=[],this.setPropagationContext({traceId:Ee(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(e,t){var n;const r="number"==typeof t?t:100;if(r<=0)return this;const s={timestamp:ve(),...e,message:e.message?te(e.message,2048):e.message};return this._breadcrumbs.push(s),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),null==(n=this._client)||n.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:Me(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=Pe(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const n=(null==t?void 0:t.event_id)||he();if(!this._client)return r&&g.warn("No client configured on scope - will not capture exception!"),n;const s=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:s,...t,event_id:n},this),n}captureMessage(e,t,n){const s=(null==n?void 0:n.event_id)||he();if(!this._client)return r&&g.warn("No client configured on scope - will not capture message!"),s;const i=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:i,...n,event_id:s},this),s}captureEvent(e,t){const n=(null==t?void 0:t.event_id)||he();return this._client?(this._client.captureEvent(e,{...t,event_id:n},this),n):(r&&g.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}class Re{constructor(e,t){let n,r;n=e||new Ae,r=t||new Ae,this._stack=[{scope:n}],this._isolationScope=r}withScope(e){const t=this._pushScope();let n;try{n=e(t)}catch(e){throw this._popScope(),e}return q(n)?n.then(e=>(this._popScope(),e),e=>{throw this._popScope(),e}):(this._popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function De(){const e=a(o());return e.stack=e.stack||new Re(l("defaultCurrentScope",()=>new Ae),l("defaultIsolationScope",()=>new Ae))}function Le(e){return De().withScope(e)}function Be(e,t){const n=De();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function $e(e){return De().withScope(()=>e(De().getIsolationScope()))}function Ne(e){const t=a(e);return t.acs?t.acs:{withIsolationScope:$e,withScope:Le,withSetScope:Be,withSetIsolationScope:(e,t)=>$e(t),getCurrentScope:()=>De().getScope(),getIsolationScope:()=>De().getIsolationScope()}}function je(){return Ne(o()).getCurrentScope()}function Fe(){return Ne(o()).getIsolationScope()}function Ue(){return l("globalScope",()=>new Ae)}function We(...e){const t=Ne(o());if(2===e.length){const[n,r]=e;return n?t.withSetScope(n,r):t.withScope(r)}return t.withScope(e[0])}function He(){return je().getClient()}function Ve(e){const t=e.getPropagationContext(),{traceId:n,parentSpanId:r,propagationSpanId:s}=t,i={trace_id:n,span_id:s||Te()};return r&&(i.parent_span_id=r),i}const ze="sentry.source",qe="sentry.sample_rate",Ke="sentry.previous_trace_sample_rate",Ge="sentry.op",Je="sentry.origin",Ye="sentry.idle_span_finish_reason",Qe="sentry.measurement_unit",Xe="sentry.measurement_value",Ze="sentry.custom_span_name",et="sentry.profile_id",tt="sentry.exclusive_time",nt="http.request.method",rt="url.full",st="sentry.link.type";function it(e){if(e<400&&e>=100)return{code:1};if(e>=400&&e<500)switch(e){case 401:return{code:2,message:"unauthenticated"};case 403:return{code:2,message:"permission_denied"};case 404:return{code:2,message:"not_found"};case 409:return{code:2,message:"already_exists"};case 413:return{code:2,message:"failed_precondition"};case 429:return{code:2,message:"resource_exhausted"};case 499:return{code:2,message:"cancelled"};default:return{code:2,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:2,message:"unimplemented"};case 503:return{code:2,message:"unavailable"};case 504:return{code:2,message:"deadline_exceeded"};default:return{code:2,message:"internal_error"}}return{code:2,message:"unknown_error"}}function ot(e,t){e.setAttribute("http.response.status_code",t);const n=it(t);"unknown_error"!==n.message&&e.setStatus(n)}const at="_sentryScope",lt="_sentryIsolationScope";function ct(e){return{scope:e[at],isolationScope:e[lt]}}const ut="sentry-",dt=/^sentry-/;function pt(e){const t=function(e){if(e&&(U(e)||Array.isArray(e)))return Array.isArray(e)?e.reduce((e,t)=>{const n=mt(t);return Object.entries(n).forEach(([t,n])=>{e[t]=n}),e},{}):mt(e)}(e);if(!t)return;const n=Object.entries(t).reduce((e,[t,n])=>{if(t.match(dt)){e[t.slice(7)]=n}return e},{});return Object.keys(n).length>0?n:void 0}function ht(e){if(!e)return;return function(e){if(0!==Object.keys(e).length)return Object.entries(e).reduce((e,[t,n],s)=>{const i=`${encodeURIComponent(t)}=${encodeURIComponent(n)}`,o=0===s?i:`${e},${i}`;return o.length>8192?(r&&g.warn(`Not adding key: ${t} with val: ${n} to baggage header due to exceeding baggage size limits.`),e):o},"")}(Object.entries(e).reduce((e,[t,n])=>(n&&(e[`${ut}${t}`]=n),e),{}))}function mt(e){return e.split(",").map(e=>e.split("=").map(e=>{try{return decodeURIComponent(e.trim())}catch{return}})).reduce((e,[t,n])=>(t&&n&&(e[t]=n),e),{})}function gt(e){if("boolean"==typeof e)return Number(e);const t="string"==typeof e?parseFloat(e):e;return"number"!=typeof t||isNaN(t)||t<0||t>1?void 0:t}const ft=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function bt(e,t){const n=function(e){if(!e)return;const t=e.match(ft);if(!t)return;let n;return"1"===t[3]?n=!0:"0"===t[3]&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}(e),r=pt(t);if(null==n||!n.traceId)return{traceId:Ee(),sampleRand:Math.random()};const s=function(e,t){const n=gt(null==t?void 0:t.sample_rand);if(void 0!==n)return n;const r=gt(null==t?void 0:t.sample_rate);return r&&void 0!==(null==e?void 0:e.parentSampled)?e.parentSampled?Math.random()*r:r+Math.random()*(1-r):Math.random()}(n,r);r&&(r.sample_rand=s.toString());const{traceId:i,parentSpanId:o,parentSampled:a}=n;return{traceId:i,parentSpanId:o,sampled:a,dsc:r||{},sampleRand:s}}function yt(e=Ee(),t=Te(),n){let r="";return void 0!==n&&(r=n?"-1":"-0"),`${e}-${t}${r}`}let vt=!1;function wt(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:s,parent_span_id:i,status:o,origin:a,links:l}=Pt(e);return{parent_span_id:i,span_id:t,trace_id:n,data:r,op:s,status:o,origin:a,links:l}}function St(e){const{spanId:t,traceId:n,isRemote:r}=e.spanContext(),s=r?t:Pt(e).parent_span_id,i=ct(e).scope;return{parent_span_id:s,span_id:r?(null==i?void 0:i.getPropagationContext().propagationSpanId)||Te():t,trace_id:n}}function _t(e){const{traceId:t,spanId:n}=e.spanContext();return yt(t,n,Et(e))}function It(e){if(e&&e.length>0)return e.map(({context:{spanId:e,traceId:t,traceFlags:n,...r},attributes:s})=>({span_id:e,trace_id:t,sampled:1===n,attributes:s,...r}))}function Ct(e){return"number"==typeof e?kt(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?kt(e.getTime()):_e()}function kt(e){return e>9999999999?e/1e3:e}function Pt(e){var t;if(function(e){return"function"==typeof e.getSpanJSON}(e))return e.getSpanJSON();const{spanId:n,traceId:r}=e.spanContext();if(function(e){const t=e;return!!(t.attributes&&t.startTime&&t.name&&t.endTime&&t.status)}(e)){const{attributes:s,startTime:i,name:o,endTime:a,status:l,links:c}=e;return{span_id:n,trace_id:r,data:s,description:o,parent_span_id:"parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?null==(t=e.parentSpanContext)?void 0:t.spanId:void 0,start_timestamp:Ct(i),timestamp:Ct(a)||void 0,status:Tt(l),op:s[Ge],origin:s[Je],links:It(c)}}return{span_id:n,trace_id:r,start_timestamp:0,data:{}}}function Et(e){const{traceFlags:t}=e.spanContext();return 1===t}function Tt(e){if(e&&0!==e.code)return 1===e.code?"ok":e.message||"unknown_error"}const Ot="_sentryChildSpans",xt="_sentryRootSpan";function Mt(e,t){const n=e[xt]||e;ae(t,xt,n),e[Ot]?e[Ot].add(t):ae(e,Ot,new Set([t]))}function At(e){const t=new Set;return function e(n){if(!t.has(n)&&Et(n)){t.add(n);const r=n[Ot]?Array.from(n[Ot]):[];for(const t of r)e(t)}}(e),Array.from(t)}function Rt(e){return e[xt]||e}function Dt(){const e=Ne(o());return e.getActiveSpan?e.getActiveSpan():Me(je())}function Lt(){vt||(d(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly.")}),vt=!0)}function Bt(e){var t;if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const n=e||(null==(t=He())?void 0:t.getOptions());return!(!n||null==n.tracesSampleRate&&!n.tracesSampler)}const $t="production",Nt=/^o(\d+)\./,jt=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Ft(e,t=!1){const{host:n,path:r,pass:s,port:i,projectId:o,protocol:a,publicKey:l}=e;return`${a}://${l}${t&&s?`:${s}`:""}@${n}${i?`:${i}`:""}/${r&&`${r}/`}${o}`}function Ut(e){const t=jt.exec(e);if(!t)return void d(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});const[n,r,s="",i="",o="",a=""]=t.slice(1);let l="",c=a;const u=c.split("/");if(u.length>1&&(l=u.slice(0,-1).join("/"),c=u.pop()),c){const e=c.match(/^\d+/);e&&(c=e[0])}return Wt({host:i,pass:s,path:l,projectId:c,port:o,protocol:n,publicKey:r})}function Wt(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Ht(e){const t="string"==typeof e?Ut(e):Wt(e);if(t&&function(e){if(!r)return!0;const{port:t,projectId:n,protocol:s}=e;return!(["protocol","publicKey","host","projectId"].find(t=>!e[t]&&(g.error(`Invalid Sentry Dsn: ${t} missing`),!0))||(n.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(s)?t&&isNaN(parseInt(t,10))&&(g.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(g.error(`Invalid Sentry Dsn: Invalid protocol ${s}`),1):(g.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),1)))}(t))return t}const Vt="_frozenDsc";function zt(e,t){ae(e,Vt,t)}function qt(e,t){const n=t.getOptions(),{publicKey:r,host:s}=t.getDsn()||{};let i;n.orgId?i=String(n.orgId):s&&(i=function(e){const t=e.match(Nt);return null==t?void 0:t[1]}(s));const o={environment:n.environment||$t,release:n.release,public_key:r,trace_id:e,org_id:i};return t.emit("createDsc",o),o}function Kt(e,t){const n=t.getPropagationContext();return n.dsc||qt(n.traceId,e)}function Gt(e){var t;const n=He();if(!n)return{};const r=Rt(e),s=Pt(r),i=s.data,o=r.spanContext().traceState,a=(null==o?void 0:o.get("sentry.sample_rate"))??i[qe]??i[Ke];function l(e){return("number"==typeof a||"string"==typeof a)&&(e.sample_rate=`${a}`),e}const c=r[Vt];if(c)return l(c);const u=null==o?void 0:o.get("sentry.dsc"),d=u&&pt(u);if(d)return l(d);const p=qt(e.spanContext().traceId,n),h=i[ze],m=s.description;return"url"!==h&&m&&(p.transaction=m),Bt()&&(p.sampled=String(Et(r)),p.sample_rand=(null==o?void 0:o.get("sentry.sample_rand"))??(null==(t=ct(r).scope)?void 0:t.getPropagationContext().sampleRand.toString())),l(p),n.emit("createDsc",p,r),p}function Jt(e,t=100,n=1/0){try{return Qt("",e,t,n)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function Yt(e,t=3,n=102400){const r=Jt(e,t);return function(e){return function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(e))}(r)>n?Yt(e,t-1,n):r}function Qt(e,t,n=1/0,r=1/0,s=function(){const e=new WeakSet;function t(t){return!!e.has(t)||(e.add(t),!1)}function n(t){e.delete(t)}return[t,n]}()){const[i,o]=s;if(null==t||["boolean","string"].includes(typeof t)||"number"==typeof t&&Number.isFinite(t))return t;const a=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(G(t))return"[VueViewModel]";if(function(e){return V(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}(t))return"[SyntheticEvent]";if("number"==typeof t&&!Number.isFinite(t))return`[${t}]`;if("function"==typeof t)return`[Function: ${I(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const n=function(e){const t=Object.getPrototypeOf(e);return null!=t&&t.constructor?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(e){return`**non-serializable** (${e})`}}(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const l="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===l)return a.replace("object ","");if(i(t))return"[Circular ~]";const c=t;if(c&&"function"==typeof c.toJSON)try{return Qt("",c.toJSON(),l-1,r,s)}catch{}const u=Array.isArray(t)?[]:{};let d=0;const p=ue(t);for(const e in p){if(!Object.prototype.hasOwnProperty.call(p,e))continue;if(d>=r){u[e]="[MaxProperties ~]";break}const t=p[e];u[e]=Qt(e,t,l-1,r,s),d++}return o(t),u}function Xt(e,t=[]){return[e,t]}function Zt(e,t){const[n,r]=e;return[n,[...r,t]]}function en(e,t){const n=e[1];for(const e of n){if(t(e,e[0].type))return!0}return!1}function tn(e,t){return en(e,(e,n)=>t.includes(n))}function nn(e){const t=a(s);return t.encodePolyfill?t.encodePolyfill(e):(new TextEncoder).encode(e)}function rn(e){const[t,n]=e;let r=JSON.stringify(t);function s(e){"string"==typeof r?r="string"==typeof e?r+e:[nn(r),e]:r.push("string"==typeof e?nn(e):e)}for(const e of n){const[t,n]=e;if(s(`\n${JSON.stringify(t)}\n`),"string"==typeof n||n instanceof Uint8Array)s(n);else{let e;try{e=JSON.stringify(n)}catch{e=JSON.stringify(Jt(n))}s(e)}}return"string"==typeof r?r:function(e){const t=e.reduce((e,t)=>e+t.length,0),n=new Uint8Array(t);let r=0;for(const t of e)n.set(t,r),r+=t.length;return n}(r)}function sn(e){let t="string"==typeof e?nn(e):e;function n(e){const n=t.subarray(0,e);return t=t.subarray(e+1),n}function r(){let e=t.indexOf(10);return e<0&&(e=t.length),JSON.parse(function(e){const t=a(s);return t.decodePolyfill?t.decodePolyfill(e):(new TextDecoder).decode(e)}(n(e)))}const i=r(),o=[];for(;t.length;){const e=r(),t="number"==typeof e.length?e.length:void 0;o.push([e,t?n(t):r()])}return[i,o]}function on(e){return[{type:"span"},e]}function an(e){const t="string"==typeof e.data?nn(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}const ln={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item"};function cn(e){return ln[e]}function un(e){if(null==e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function dn(e,t,n,r){var s;const i=null==(s=e.sdkProcessingMetadata)?void 0:s.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:Ft(r)},...i&&{trace:i}}}function pn(e){return new mn(t=>{t(e)})}function hn(e){return new mn((t,n)=>{n(e)})}class mn{constructor(e){this._state=0,this._handlers=[],this._runExecutor(e)}then(e,t){return new mn((n,r)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(e){r(e)}else n(t)},e=>{if(t)try{n(t(e))}catch(e){r(e)}else r(e)}]),this._executeHandlers()})}catch(e){return this.then(e=>e,e)}finally(e){return new mn((t,n)=>{let r,s;return this.then(t=>{s=!1,r=t,e&&e()},t=>{s=!0,r=t,e&&e()}).then(()=>{s?n(r):t(r)})})}_executeHandlers(){if(0===this._state)return;const e=this._handlers.slice();this._handlers=[],e.forEach(e=>{e[0]||(1===this._state&&e[1](this._value),2===this._state&&e[2](this._value),e[0]=!0)})}_runExecutor(e){const t=(e,t)=>{if(0===this._state){if(q(t))return void t.then(n,r);this._state=e,this._value=t,this._executeHandlers()}},n=e=>{t(1,e)},r=e=>{t(2,e)};try{e(n,r)}catch(e){r(e)}}}function gn(e,t,n,s=0){return new mn((i,o)=>{const a=e[s];if(null===t||"function"!=typeof a)i(t);else{const l=a({...t},n);r&&a.id&&null===l&&g.log(`Event processor "${a.id}" dropped event`),q(l)?l.then(t=>gn(e,t,n,s+1).then(i)).then(null,o):gn(e,l,n,s+1).then(i).then(null,o)}})}function fn(e,t){const{fingerprint:n,span:r,breadcrumbs:s,sdkProcessingMetadata:i}=t;(function(e,t){const{extra:n,tags:r,user:s,contexts:i,level:o,transactionName:a}=t;Object.keys(n).length&&(e.extra={...n,...e.extra}),Object.keys(r).length&&(e.tags={...r,...e.tags}),Object.keys(s).length&&(e.user={...s,...e.user}),Object.keys(i).length&&(e.contexts={...i,...e.contexts}),o&&(e.level=o),a&&"transaction"!==e.type&&(e.transaction=a)})(e,t),r&&function(e,t){e.contexts={trace:St(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:Gt(t),...e.sdkProcessingMetadata};const n=Rt(t),r=Pt(n).description;r&&!e.transaction&&"transaction"===e.type&&(e.transaction=r)}(e,r),function(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint.length||delete e.fingerprint}(e,n),function(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}(e,s),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,i)}function bn(e,t){const{extra:n,tags:r,user:s,contexts:i,level:o,sdkProcessingMetadata:a,breadcrumbs:l,fingerprint:c,eventProcessors:u,attachments:d,propagationContext:p,transactionName:h,span:m}=t;yn(e,"extra",n),yn(e,"tags",r),yn(e,"user",s),yn(e,"contexts",i),e.sdkProcessingMetadata=Pe(e.sdkProcessingMetadata,a,2),o&&(e.level=o),h&&(e.transactionName=h),m&&(e.span=m),l.length&&(e.breadcrumbs=[...e.breadcrumbs,...l]),c.length&&(e.fingerprint=[...e.fingerprint,...c]),u.length&&(e.eventProcessors=[...e.eventProcessors,...u]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...p}}function yn(e,t,n){e[t]=Pe(e[t],n,1)}let vn,wn,Sn;function _n(e){const t=s._sentryDebugIds;if(!t)return{};const n=Object.keys(t);return Sn&&n.length===wn||(wn=n.length,Sn=n.reduce((n,r)=>{vn||(vn={});const s=vn[r];if(s)n[s[0]]=s[1];else{const s=e(r);for(let e=s.length-1;e>=0;e--){const i=s[e],o=null==i?void 0:i.filename,a=t[r];if(o&&a){n[o]=a,vn[r]=[o,a];break}}}return n},{})),Sn}function In(e,t,n,r,s,i){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=e,l={...t,event_id:t.event_id||n.event_id||he(),timestamp:t.timestamp||ve()},c=n.integrations||e.integrations.map(e=>e.name);(function(e,t){const{environment:n,release:r,dist:s,maxValueLength:i=250}=t;e.environment=e.environment||n||$t,!e.release&&r&&(e.release=r),!e.dist&&s&&(e.dist=s);const o=e.request;null!=o&&o.url&&(o.url=te(o.url,i))})(l,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(l,c),s&&s.emit("applyFrameMetadata",t),void 0===t.type&&function(e,t){var n,r;const s=_n(t);null==(r=null==(n=e.exception)?void 0:n.values)||r.forEach(e=>{var t,n;null==(n=null==(t=e.stacktrace)?void 0:t.frames)||n.forEach(e=>{e.filename&&(e.debug_id=s[e.filename])})})}(l,e.stackParser);const u=function(e,t){if(!t)return e;const n=e?e.clone():new Ae;return n.update(t),n}(r,n.captureContext);n.mechanism&&be(l,n.mechanism);const d=s?s.getEventProcessors():[],p=Ue().getScopeData();if(i){bn(p,i.getScopeData())}if(u){bn(p,u.getScopeData())}const h=[...n.attachments||[],...p.attachments];h.length&&(n.attachments=h),fn(l,p);return gn([...d,...p.eventProcessors],l,n).then(e=>(e&&function(e){var t,n;const r={};if(null==(n=null==(t=e.exception)?void 0:t.values)||n.forEach(e=>{var t,n;null==(n=null==(t=e.stacktrace)?void 0:t.frames)||n.forEach(e=>{e.debug_id&&(e.abs_path?r[e.abs_path]=e.debug_id:e.filename&&(r[e.filename]=e.debug_id),delete e.debug_id)})}),0===Object.keys(r).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const s=e.debug_meta.images;Object.entries(r).forEach(([e,t])=>{s.push({type:"sourcemap",code_file:e,debug_id:t})})}(e),"number"==typeof o&&o>0?function(e,t,n){var r,s;if(!e)return null;const i={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(e=>({...e,...e.data&&{data:Jt(e.data,t,n)}}))},...e.user&&{user:Jt(e.user,t,n)},...e.contexts&&{contexts:Jt(e.contexts,t,n)},...e.extra&&{extra:Jt(e.extra,t,n)}};return null!=(r=e.contexts)&&r.trace&&i.contexts&&(i.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(i.contexts.trace.data=Jt(e.contexts.trace.data,t,n))),e.spans&&(i.spans=e.spans.map(e=>({...e,...e.data&&{data:Jt(e.data,t,n)}}))),null!=(s=e.contexts)&&s.flags&&i.contexts&&(i.contexts.flags=Jt(e.contexts.flags,3,n)),i}(e,o,a):e))}function Cn(e){if(e)return function(e){return e instanceof Ae||"function"==typeof e}(e)||function(e){return Object.keys(e).some(e=>kn.includes(e))}(e)?{captureContext:e}:e}const kn=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function Pn(e,t){return je().captureException(e,Cn(t))}function En(e,t){const n="string"==typeof t?t:void 0,r="string"!=typeof t?{captureContext:t}:void 0;return je().captureMessage(e,n,r)}function Tn(e,t){return je().captureEvent(e,t)}function On(e,t){Fe().setContext(e,t)}function xn(){return Fe().lastEventId()}function Mn(){const e=He();return!1!==(null==e?void 0:e.getOptions().enabled)&&!(null==e||!e.getTransport())}function An(e){Fe().addEventProcessor(e)}function Rn(e){const t=Fe(),n=je(),{userAgent:r}=s.navigator||{},i=Ce({user:n.getUser()||t.getUser(),...r&&{userAgent:r},...e}),o=t.getSession();return"ok"===(null==o?void 0:o.status)&&ke(o,{status:"exited"}),Dn(),t.setSession(i),i}function Dn(){const e=Fe(),t=je().getSession()||e.getSession();t&&function(e){let t={};"ok"===e.status&&(t={status:"exited"}),ke(e,t)}(t),Ln(),e.setSession()}function Ln(){const e=Fe(),t=He(),n=e.getSession();n&&t&&t.captureSession(n)}function Bn(e=!1){e?Dn():Ln()}function $n(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function Nn(e,t,n){return t||`${function(e){return`${$n(e)}${e.projectId}/envelope/`}(e)}?${function(e,t){const n={sentry_version:"7"};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(n).toString()}(e,n)}`}const jn=[];function Fn(e){const t=e.defaultIntegrations||[],n=e.integrations;let r;if(t.forEach(e=>{e.isDefaultInstance=!0}),Array.isArray(n))r=[...t,...n];else if("function"==typeof n){const e=n(t);r=Array.isArray(e)?e:[e]}else r=t;return function(e){const t={};return e.forEach(e=>{const{name:n}=e,r=t[n];r&&!r.isDefaultInstance&&e.isDefaultInstance||(t[n]=e)}),Object.values(t)}(r)}function Un(e,t){for(const n of t)null!=n&&n.afterAllSetup&&n.afterAllSetup(e)}function Wn(e,t,n){if(n[t.name])r&&g.log(`Integration skipped because it was already installed: ${t.name}`);else{if(n[t.name]=t,-1===jn.indexOf(t.name)&&"function"==typeof t.setupOnce&&(t.setupOnce(),jn.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),"function"==typeof t.preprocessEvent){const n=t.preprocessEvent.bind(t);e.on("preprocessEvent",(t,r)=>n(t,r,e))}if("function"==typeof t.processEvent){const n=t.processEvent.bind(t),r=Object.assign((t,r)=>n(t,r,e),{id:t.name});e.addEventProcessor(r)}r&&g.log(`Integration installed: ${t.name}`)}}function Hn(e){const t=He();t?t.addIntegration(e):r&&g.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`)}function Vn(e){const t=[];e.message&&t.push(e.message);try{const n=e.exception.values[e.exception.values.length-1];null!=n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`))}catch{}return t}const zn="Not capturing exception because it's already been captured.",qn="Discarded session because of missing or non-string release",Kn=Symbol.for("SentryInternalError"),Gn=Symbol.for("SentryDoNotSendEventError");function Jn(e){return{message:e,[Kn]:!0}}function Yn(e){return{message:e,[Gn]:!0}}function Qn(e){return!!e&&"object"==typeof e&&Kn in e}function Xn(e){return!!e&&"object"==typeof e&&Gn in e}class Zn{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=Ht(e.dsn):r&&g.warn("No DSN provided, client will not send events."),this._dsn){const t=Nn(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,n){const s=he();if(ye(e))return r&&g.log(zn),s;const i={event_id:s,...t};return this._process(this.eventFromException(e,i).then(e=>this._captureEvent(e,i,n))),i.event_id}captureMessage(e,t,n,r){const s={event_id:he(),...n},i=W(e)?e:String(e),o=H(e)?this.eventFromMessage(i,t,s):this.eventFromException(e,s);return this._process(o.then(e=>this._captureEvent(e,s,r))),s.event_id}captureEvent(e,t,n){const s=he();if(null!=t&&t.originalException&&ye(t.originalException))return r&&g.log(zn),s;const i={event_id:s,...t},o=e.sdkProcessingMetadata||{},a=o.capturedSpanScope,l=o.capturedSpanIsolationScope;return this._process(this._captureEvent(e,i,a||n,l)),i.event_id}captureSession(e){this.sendSession(e),ke(e,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.emit("flush"),this._isClientDoneProcessing(e).then(n=>t.flush(e).then(e=>n&&e))):pn(!0)}close(e){return this.flush(e).then(e=>(this.getOptions().enabled=!1,this.emit("close"),e))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some(({name:e})=>e.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const t=this._integrations[e.name];Wn(this,e,this._integrations),t||Un(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let n=function(e,t,n,r){const s=un(n),i=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,null==n?void 0:n.sdk);const o=dn(e,s,r,t);return delete e.sdkProcessingMetadata,Xt(o,[[{type:i},e]])}(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])n=Zt(n,an(e));const r=this.sendEnvelope(n);r&&r.then(t=>this.emit("afterSendEvent",e,t),null)}sendSession(e){const{release:t,environment:n=$t}=this._options;if("aggregates"in e){const s=e.attrs||{};if(!s.release&&!t)return void(r&&g.warn(qn));s.release=s.release||t,s.environment=s.environment||n,e.attrs=s}else{if(!e.release&&!t)return void(r&&g.warn(qn));e.release=e.release||t,e.environment=e.environment||n}this.emit("beforeSendSession",e);const s=function(e,t,n,r){const s=un(n);return Xt({sent_at:(new Date).toISOString(),...s&&{sdk:s},...!!r&&t&&{dsn:Ft(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(s)}recordDroppedEvent(e,t,n=1){if(this._options.sendClientReports){const s=`${e}:${t}`;r&&g.log(`Recording outcome: "${s}"${n>1?` (${n} times)`:""}`),this._outcomes[s]=(this._outcomes[s]||0)+n}}on(e,t){const n=this._hooks[e]=this._hooks[e]||[];return n.push(t),()=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)}}emit(e,...t){const n=this._hooks[e];n&&n.forEach(e=>e(...t))}sendEnvelope(e){return this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,e=>(r&&g.error("Error while sending envelope:",e),e)):(r&&g.error("Transport disabled"),pn({}))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(e,t){const n={};return t.forEach(t=>{t&&Wn(e,t,n)}),n}(this,e),Un(this,e)}_updateSessionFromEvent(e,t){var n;let r="fatal"===t.level,s=!1;const i=null==(n=t.exception)?void 0:n.values;if(i){s=!0;for(const e of i){const t=e.mechanism;if(!1===(null==t?void 0:t.handled)){r=!0;break}}}const o="ok"===e.status;(o&&0===e.errors||o&&r)&&(ke(e,{...r&&{status:"crashed"},errors:e.errors||Number(s||r)}),this.captureSession(e))}_isClientDoneProcessing(e){return new mn(t=>{let n=0;const r=setInterval(()=>{0==this._numProcessing?(clearInterval(r),t(!0)):(n+=1,e&&n>=e&&(clearInterval(r),t(!1)))},1)})}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,n,r){const s=this.getOptions(),i=Object.keys(this._integrations);return!t.integrations&&null!=i&&i.length&&(t.integrations=i),this.emit("preprocessEvent",e,t),e.type||r.setLastEventId(e.event_id||t.event_id),In(s,e,t,n,this,r).then(e=>{if(null===e)return e;this.emit("postprocessEvent",e,t),e.contexts={trace:Ve(n),...e.contexts};const r=Kt(this,n);return e.sdkProcessingMetadata={dynamicSamplingContext:r,...e.sdkProcessingMetadata},e})}_captureEvent(e,t={},n=je(),s=Fe()){return r&&er(e)&&g.log(`Captured error event \`${Vn(e)[0]||"<unknown>"}\``),this._processEvent(e,t,n,s).then(e=>e.event_id,e=>{r&&(Xn(e)?g.log(e.message):Qn(e)?g.warn(e.message):g.warn(e))})}_processEvent(e,t,n,r){const s=this.getOptions(),{sampleRate:i}=s,o=tr(e),a=er(e),l=e.type||"error",c=`before send for type \`${l}\``,u=typeof i>"u"?void 0:gt(i);if(a&&"number"==typeof u&&Math.random()>u)return this.recordDroppedEvent("sample_rate","error"),hn(Yn(`Discarding event because it's not included in the random sample (sampling rate = ${i})`));const d="replay_event"===l?"replay":l;return this._prepareEvent(e,t,n,r).then(e=>{if(null===e)throw this.recordDroppedEvent("event_processor",d),Yn("An event processor returned `null`, will not send event.");if(t.data&&!0===t.data.__sentry__)return e;const n=function(e,t,n,r){const{beforeSend:s,beforeSendTransaction:i,beforeSendSpan:o}=t;let a=n;if(er(a)&&s)return s(a,r);if(tr(a)){if(o){const e=o(function(e){var t;const{trace_id:n,parent_span_id:r,span_id:s,status:i,origin:o,data:a,op:l}=(null==(t=e.contexts)?void 0:t.trace)??{};return{data:a??{},description:e.transaction,op:l,parent_span_id:r,span_id:s??"",start_timestamp:e.start_timestamp??0,status:i,timestamp:e.timestamp,trace_id:n??"",origin:o,profile_id:null==a?void 0:a[et],exclusive_time:null==a?void 0:a[tt],measurements:e.measurements,is_segment:!0}}(a));if(e?a=Pe(n,function(e){return{type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:{...e.data,...e.profile_id&&{[et]:e.profile_id},...e.exclusive_time&&{[tt]:e.exclusive_time}}}},measurements:e.measurements}}(e)):Lt(),a.spans){const e=[];for(const t of a.spans){const n=o(t);n?e.push(n):(Lt(),e.push(t))}a.spans=e}}if(i){if(a.spans){const e=a.spans.length;a.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:e}}return i(a,r)}}return a}(0,s,e,t);return function(e,t){const n=`${t} must return \`null\` or a valid event.`;if(q(e))return e.then(e=>{if(!V(e)&&null!==e)throw Jn(n);return e},e=>{throw Jn(`${t} rejected with ${e}`)});if(!V(e)&&null!==e)throw Jn(n);return e}(n,c)}).then(s=>{var i;if(null===s){if(this.recordDroppedEvent("before_send",d),o){const t=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",t)}throw Yn(`${c} returned \`null\`, will not send event.`)}const l=n.getSession()||r.getSession();if(a&&l&&this._updateSessionFromEvent(l,s),o){const e=((null==(i=s.sdkProcessingMetadata)?void 0:i.spanCountBeforeProcessing)||0)-(s.spans?s.spans.length:0);e>0&&this.recordDroppedEvent("before_send","span",e)}const u=s.transaction_info;if(o&&u&&s.transaction!==e.transaction){const e="custom";s.transaction_info={...u,source:e}}return this.sendEvent(s,t),s}).then(null,e=>{throw Xn(e)||Qn(e)?e:(this.captureException(e,{data:{__sentry__:!0},originalException:e}),Jn(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`))})}_process(e){this._numProcessing++,e.then(e=>(this._numProcessing--,e),e=>(this._numProcessing--,e))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map(([e,t])=>{const[n,r]=e.split(":");return{reason:n,category:r,quantity:t}})}_flushOutcomes(){r&&g.log("Flushing outcomes...");const e=this._clearOutcomes();if(0===e.length)return void(r&&g.log("No outcomes to send"));if(!this._dsn)return void(r&&g.log("No dsn provided, will not send outcomes"));r&&g.log("Sending outcomes:",e);const t=function(e,t){return Xt(t?{dsn:t}:{},[[{type:"client_report"},{timestamp:ve(),discarded_events:e}]])}(e,this._options.tunnel&&Ft(this._dsn));this.sendEnvelope(t)}}function er(e){return void 0===e.type}function tr(e){return"transaction"===e.type}const nr={trace:1,debug:5,info:9,warn:13,error:17,fatal:21};function rr(e){return[{type:"log",item_count:e.length,content_type:"application/vnd.sentry.items.log+json"},{items:e}]}function sr(e,t,n,r=!0){n&&(!e[t]||r)&&(e[t]=n)}function ir(e,t){const n=cr(),r=lr(e);void 0===r?n.set(e,[t]):(n.set(e,[...r,t]),r.length>=100&&ar(e,r))}function or(e,t=He(),n=je(),s=ir){var i;if(!t)return void(r&&g.warn("No client available to capture log."));const{release:o,environment:a,enableLogs:l,beforeSendLog:c,_experiments:u}=t.getOptions();if(!(l??(null==u?void 0:u.enableLogs)))return void(r&&g.warn("logging option not enabled, log will not be captured."));const p=c??(null==u?void 0:u.beforeSendLog),[,h]=function(e,t){return t?We(t,()=>{const n=Dt(),r=n?St(n):Ve(t);return[n?Gt(n):Kt(e,t),r]}):[void 0,void 0]}(t,n),m={...e.attributes},{user:{id:f,email:b,username:y}}=function(e){const t=Ue().getScopeData();return bn(t,Fe().getScopeData()),bn(t,e.getScopeData()),t}(n);sr(m,"user.id",f,!1),sr(m,"user.email",b,!1),sr(m,"user.name",y,!1),sr(m,"sentry.release",o),sr(m,"sentry.environment",a);const{name:v,version:w}=(null==(i=t.getSdkMetadata())?void 0:i.sdk)??{};sr(m,"sentry.sdk.name",v),sr(m,"sentry.sdk.version",w);const S=e.message;if(W(S)){const{__sentry_template_string__:e,__sentry_template_values__:t=[]}=S;m["sentry.message.template"]=e,t.forEach((e,t)=>{m[`sentry.message.parameter.${t}`]=e})}const _=Me(n);sr(m,"sentry.trace.parent_span_id",null==_?void 0:_.spanContext().spanId);const I={...e,attributes:m};t.emit("beforeCaptureLog",I);const C=p?d(()=>p(I)):I;if(!C)return t.recordDroppedEvent("before_send","log_item",1),void(r&&g.warn("beforeSendLog returned null, log will not be captured."));const{level:k,message:P,attributes:E={},severityNumber:T}=C,O={timestamp:_e(),level:k,body:P,trace_id:null==h?void 0:h.trace_id,severity_number:T??nr[k],attributes:Object.keys(E).reduce((e,t)=>(e[t]=function(e){switch(typeof e){case"number":return Number.isInteger(e)?{value:e,type:"integer"}:{value:e,type:"double"};case"boolean":return{value:e,type:"boolean"};case"string":return{value:e,type:"string"};default:{let t="";try{t=JSON.stringify(e)??""}catch{}return{value:t,type:"string"}}}}(E[t]),e),{})};s(t,O),t.emit("afterCaptureLog",C)}function ar(e,t){const n=t??lr(e)??[];if(0===n.length)return;const r=e.getOptions(),s=function(e,t,n,r){const s={};return null!=t&&t.sdk&&(s.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(s.dsn=Ft(r)),Xt(s,[rr(e)])}(n,r._metadata,r.tunnel,e.getDsn());cr().set(e,[]),e.emit("flushLogs"),e.sendEnvelope(s)}function lr(e){return cr().get(e)}function cr(){return l("clientToLogBufferMap",()=>new WeakMap)}function ur(e){je().setClient(e)}const dr=Symbol.for("SentryBufferFullError");function pr(e){const t=[];function n(e){return t.splice(t.indexOf(e),1)[0]||Promise.resolve(void 0)}return{$:t,add:function(r){if(!(void 0===e||t.length<e))return hn(dr);const s=r();return-1===t.indexOf(s)&&t.push(s),s.then(()=>n(s)).then(null,()=>n(s).then(null,()=>{})),s},drain:function(e){return new mn((n,r)=>{let s=t.length;if(!s)return n(!0);const i=setTimeout(()=>{e&&e>0&&n(!1)},e);t.forEach(e=>{pn(e).then(()=>{--s||(clearTimeout(i),n(!0))},r)})})}}}function hr(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;const r=Date.parse(`${e}`);return isNaN(r)?6e4:r-t}function mr(e,t,n=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>n}function gr(e,{statusCode:t,headers:n},r=Date.now()){const s={...e},i=null==n?void 0:n["x-sentry-rate-limits"],o=null==n?void 0:n["retry-after"];if(i)for(const e of i.trim().split(",")){const[t,n,,,i]=e.split(":",5),o=parseInt(t,10),a=1e3*(isNaN(o)?60:o);if(n)for(const e of n.split(";"))"metric_bucket"===e?(!i||i.split(";").includes("custom"))&&(s[e]=r+a):s[e]=r+a;else s.all=r+a}else o?s.all=r+hr(o,r):429===t&&(s.all=r+6e4);return s}function fr(e,t,n=pr(e.bufferSize||64)){let s={};return{send:function(i){const o=[];if(en(i,(t,n)=>{const r=cn(n);mr(s,r)?e.recordDroppedEvent("ratelimit_backoff",r):o.push(t)}),0===o.length)return pn({});const a=Xt(i[0],o),l=t=>{en(a,(n,r)=>{e.recordDroppedEvent(t,cn(r))})};return n.add(()=>t({body:rn(a)}).then(e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&r&&g.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),s=gr(s,e),e),e=>{throw l("network_error"),r&&g.error("Encountered error running transport request:",e),e})).then(e=>e,e=>{if(e===dr)return r&&g.error("Skipped sending event because buffer is full."),l("queue_overflow"),pn({});throw e})},flush:e=>n.drain(e)}}function br(e){var t;void 0===(null==(t=e.user)?void 0:t.ip_address)&&(e.user={...e.user,ip_address:"{{auto}}"})}function yr(e){var t;"aggregates"in e?void 0===(null==(t=e.attrs)?void 0:t.ip_address)&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):void 0===e.ipAddress&&(e.ipAddress="{{auto}}")}function vr(e,t,n=[t],r="npm"){const s=e._metadata||{};s.sdk||(s.sdk={name:`sentry.javascript.${t}`,packages:n.map(e=>({name:`${r}:@sentry/${e}`,version:i})),version:i}),e._metadata=s}const wr=100;function Sr(e,t){const n=He(),r=Fe();if(!n)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:i=wr}=n.getOptions();if(i<=0)return;const o={timestamp:ve(),...e},a=s?d(()=>s(o,t)):o;null!==a&&(n.emit&&n.emit("beforeAddBreadcrumb",a,t),r.addBreadcrumb(a,i))}let _r;const Ir=new WeakMap,Cr=()=>({name:"FunctionToString",setupOnce(){_r=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=ce(this),n=Ir.has(He())&&void 0!==t?t:this;return _r.apply(n,e)}}catch{}},setup(e){Ir.set(e,!0)}}),kr=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,'can\'t redefine non-configurable property "solana"',"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],Pr=(e={})=>{let t;return{name:"EventFilters",setup(n){const r=n.getOptions();t=Tr(e,r)},processEvent(n,s,i){if(!t){const n=i.getOptions();t=Tr(e,n)}return function(e,t){if(e.type){if("transaction"===e.type&&function(e,t){if(null==t||!t.length)return!1;const n=e.transaction;return!!n&&ie(n,t)}(e,t.ignoreTransactions))return r&&g.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${ge(e)}`),!0}else{if(function(e,t){return!(null==t||!t.length)&&Vn(e).some(e=>ie(e,t))}(e,t.ignoreErrors))return r&&g.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${ge(e)}`),!0;if(function(e){var t,n;return!(null==(n=null==(t=e.exception)?void 0:t.values)||!n.length)&&(!e.message&&!e.exception.values.some(e=>e.stacktrace||e.type&&"Error"!==e.type||e.value))}(e))return r&&g.warn(`Event dropped due to not having an error message, error type or stacktrace.\nEvent: ${ge(e)}`),!0;if(function(e,t){if(null==t||!t.length)return!1;const n=Or(e);return!!n&&ie(n,t)}(e,t.denyUrls))return r&&g.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${ge(e)}.\nUrl: ${Or(e)}`),!0;if(!function(e,t){if(null==t||!t.length)return!0;const n=Or(e);return!n||ie(n,t)}(e,t.allowUrls))return r&&g.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${ge(e)}.\nUrl: ${Or(e)}`),!0}return!1}(n,t)?null:n}}},Er=(e={})=>({...Pr(e),name:"InboundFilters"});function Tr(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:kr],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]]}}function Or(e){var t,n;try{const r=[...(null==(t=e.exception)?void 0:t.values)??[]].reverse().find(e=>{var t,n,r;return void 0===(null==(t=e.mechanism)?void 0:t.parent_id)&&(null==(r=null==(n=e.stacktrace)?void 0:n.frames)?void 0:r.length)}),s=null==(n=null==r?void 0:r.stacktrace)?void 0:n.frames;return s?function(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(s):null}catch{return r&&g.error(`Cannot extract url for event ${ge(e)}`),null}}function xr(e,t,n,r,s,i){var o;if(null==(o=s.exception)||!o.values||!i||!K(i.originalException,Error))return;const a=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;a&&(s.exception.values=Mr(e,t,r,i.originalException,n,s.exception.values,a,0))}function Mr(e,t,n,r,s,i,o,a){if(i.length>=n+1)return i;let l=[...i];if(K(r[s],Error)){Ar(o,a);const i=e(t,r[s]),c=l.length;Rr(i,s,c,a),l=Mr(e,t,n,r[s],s,[i,...l],i,c)}return Array.isArray(r.errors)&&r.errors.forEach((r,i)=>{if(K(r,Error)){Ar(o,a);const c=e(t,r),u=l.length;Rr(c,`errors[${i}]`,u,a),l=Mr(e,t,n,r,s,[c,...l],c,u)}}),l}function Ar(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,..."AggregateError"===e.type&&{is_exception_group:!0},exception_id:t}}function Rr(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}function Dr(e){const t="console";E(t,e),T(t,Lr)}function Lr(){"console"in s&&c.forEach(function(e){e in s.console&&oe(s.console,e,function(t){return u[e]=t,function(...t){O("console",{args:t,level:e});const n=u[e];null==n||n.apply(s.console,t)}})})}function Br(e){return"warn"===e?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}const $r=()=>{let e;return{name:"Dedupe",processEvent(t){if(t.type)return t;try{if(function(e,t){return!!t&&!(!function(e,t){const n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!jr(e,t)||!Nr(e,t))}(e,t)&&!function(e,t){const n=Fr(t),r=Fr(e);return!!(n&&r&&n.type===r.type&&n.value===r.value&&jr(e,t)&&Nr(e,t))}(e,t))}(t,e))return r&&g.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}};function Nr(e,t){let n=C(e),r=C(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||r.length!==n.length)return!1;for(let e=0;e<r.length;e++){const t=r[e],s=n[e];if(t.filename!==s.filename||t.lineno!==s.lineno||t.colno!==s.colno||t.function!==s.function)return!1}return!0}function jr(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return n.join("")===r.join("")}catch{return!1}}function Fr(e){var t,n;return null==(n=null==(t=e.exception)?void 0:t.values)?void 0:n[0]}function Ur(e){return"isRelative"in e}function Wr(e,t){const n=e.indexOf("://")<=0&&0!==e.indexOf("//"),r=n?"thismessage:/":void 0;try{if("canParse"in URL&&!URL.canParse(e,r))return;const t=new URL(e,r);return n?{isRelative:n,pathname:t.pathname,search:t.search,hash:t.hash}:t}catch{}}function Hr(e){if(Ur(e))return e.pathname;const t=new URL(e);return t.search="",t.hash="",["80","443"].includes(t.port)&&(t.port=""),t.password&&(t.password="%filtered%"),t.username&&(t.username="%filtered%"),t.toString()}function Vr(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function zr(e){return e.split(/[?#]/,1)[0]}function qr(e){if(void 0!==e)return e>=400&&e<500?"warning":e>=500?"error":void 0}const Kr=s;function Gr(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Jr(){var e;if("string"==typeof EdgeRuntime)return!0;if(!function(){if(!("fetch"in Kr))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}())return!1;if(Gr(Kr.fetch))return!0;let t=!1;const n=Kr.document;if(n&&"function"==typeof n.createElement)try{const r=n.createElement("iframe");r.hidden=!0,n.head.appendChild(r),null!=(e=r.contentWindow)&&e.fetch&&(t=Gr(r.contentWindow.fetch)),n.head.removeChild(r)}catch(e){r&&g.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return t}function Yr(e,t){const n="fetch";E(n,e),T(n,()=>Qr(void 0,t))}function Qr(e,t=!1){t&&!Jr()||oe(s,"fetch",function(t){return function(...n){const r=new Error,{method:i,url:o}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,n]=e;return{url:es(t),method:Zr(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:es(t),method:Zr(t,"method")?String(t.method).toUpperCase():"GET"}}(n),a={args:n,fetchData:{method:i,url:o},startTimestamp:1e3*_e(),virtualError:r,headers:ts(n)};return e||O("fetch",{...a}),t.apply(s,n).then(async t=>(e?e(t):O("fetch",{...a,endTimestamp:1e3*_e(),response:t}),t),e=>{if(O("fetch",{...a,endTimestamp:1e3*_e(),error:e}),$(e)&&void 0===e.stack&&(e.stack=r.stack,ae(e,"framesToPop",1)),e instanceof TypeError&&("Failed to fetch"===e.message||"Load failed"===e.message||"NetworkError when attempting to fetch resource."===e.message))try{const t=new URL(a.fetchData.url);e.message=`${e.message} (${t.host})`}catch{}throw e})}})}function Xr(e){let t;try{t=e.clone()}catch{return}!async function(e,t){if(null!=e&&e.body){const n=e.body,r=n.getReader(),s=setTimeout(()=>{n.cancel().then(null,()=>{})},9e4);let i=!0;for(;i;){let e;try{e=setTimeout(()=>{n.cancel().then(null,()=>{})},5e3);const{done:s}=await r.read();clearTimeout(e),s&&(t(),i=!1)}catch{i=!1}finally{clearTimeout(e)}}clearTimeout(s),r.releaseLock(),n.cancel().then(null,()=>{})}}(t,()=>{O("fetch-body-resolved",{endTimestamp:1e3*_e(),response:e})})}function Zr(e,t){return!!e&&"object"==typeof e&&!!e[t]}function es(e){return"string"==typeof e?e:e?Zr(e,"url")?e.url:e.toString?e.toString():"":""}function ts(e){const[t,n]=e;try{if("object"==typeof n&&null!==n&&"headers"in n&&n.headers)return new Headers(n.headers);if(J(t))return new Headers(t.headers)}catch{}}const ns=s;let rs=0;function ss(){return rs>0}function is(e,t={}){if("function"!=typeof e)return e;try{const t=e.__sentry_wrapped__;if(t)return"function"==typeof t?t:e;if(ce(e))return e}catch{return e}const n=function(...n){try{const r=n.map(e=>is(e,t));return e.apply(this,r)}catch(e){throw rs++,setTimeout(()=>{rs--}),We(r=>{r.addEventProcessor(e=>(t.mechanism&&(fe(e,void 0),be(e,t.mechanism)),e.extra={...e.extra,arguments:n},e)),Pn(e)}),e}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}catch{}le(n,e),ae(e,"__sentry_wrapped__",n);try{Object.getOwnPropertyDescriptor(n,"name").configurable&&Object.defineProperty(n,"name",{get(){return e.name}})}catch{}return n}function os(){const e=Z(),{referrer:t}=ns.document||{},{userAgent:n}=ns.navigator||{};return{url:e,headers:{...t&&{Referer:t},...n&&{"User-Agent":n}}}}function as(e,t){const n=us(e,t),r={type:hs(t),value:ms(t)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function ls(e,t,n,r){const s=He(),i=null==s?void 0:s.getOptions().normalizeDepth,o=function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}}(t),a={__serialized__:Yt(t,i)};if(o)return{exception:{values:[as(e,o)]},extra:a};const l={exception:{values:[{type:z(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:vs(t,{isUnhandledRejection:r})}]},extra:a};if(n){const t=us(e,n);t.length&&(l.exception.values[0].stacktrace={frames:t})}return l}function cs(e,t){return{exception:{values:[as(e,t)]}}}function us(e,t){const n=t.stacktrace||t.stack||"",r=function(e){return e&&ds.test(e.message)?1:0}(t),s=function(e){return"number"==typeof e.framesToPop?e.framesToPop:0}(t);try{return e(n,r,s)}catch{}return[]}const ds=/Minified React error #\d+;/i;function ps(e){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"&&e instanceof WebAssembly.Exception}function hs(e){const t=null==e?void 0:e.name;return!t&&ps(e)?e.message&&Array.isArray(e.message)&&2==e.message.length?e.message[0]:"WebAssembly.Exception":t}function ms(e){const t=null==e?void 0:e.message;return ps(e)?Array.isArray(e.message)&&2==e.message.length?e.message[1]:"wasm exception":t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function gs(e,t,n,r){const s=bs(e,t,(null==n?void 0:n.syntheticException)||void 0,r);return be(s),s.level="error",null!=n&&n.event_id&&(s.event_id=n.event_id),pn(s)}function fs(e,t,n="info",r,s){const i=ys(e,t,(null==r?void 0:r.syntheticException)||void 0,s);return i.level=n,null!=r&&r.event_id&&(i.event_id=r.event_id),pn(i)}function bs(e,t,n,r,s){let i;if(j(t)&&t.error)return cs(e,t.error);if(F(t)||function(e){return N(e,"DOMException")}(t)){const s=t;if("stack"in t)i=cs(e,t);else{const t=s.name||(F(s)?"DOMError":"DOMException"),o=s.message?`${t}: ${s.message}`:t;i=ys(e,o,n,r),fe(i,o)}return"code"in s&&(i.tags={...i.tags,"DOMException.code":`${s.code}`}),i}return $(t)?cs(e,t):V(t)||z(t)?(i=ls(e,t,n,s),be(i,{synthetic:!0}),i):(i=ys(e,t,n,r),fe(i,`${t}`),be(i,{synthetic:!0}),i)}function ys(e,t,n,r){const s={};if(r&&n){const r=us(e,n);r.length&&(s.exception={values:[{value:t,stacktrace:{frames:r}}]}),be(s,{synthetic:!0})}if(W(t)){const{__sentry_template_string__:e,__sentry_template_values__:n}=t;return s.logentry={message:e,params:n},s}return s.message=t,s}function vs(e,{isUnhandledRejection:t}){const n=function(e,t=40){const n=Object.keys(ue(e));n.sort();const r=n[0];if(!r)return"[object has no keys]";if(r.length>=t)return te(r,t);for(let e=n.length;e>0;e--){const r=n.slice(0,e).join(", ");if(!(r.length>t))return e===n.length?r:te(r,t)}return""}(e),r=t?"promise rejection":"exception";return j(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:z(e)?`Event \`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}class ws extends Zn{constructor(e){const t=function(e){var t;return{release:"string"==typeof __SENTRY_RELEASE__?__SENTRY_RELEASE__:null==(t=ns.SENTRY_RELEASE)?void 0:t.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...e}}(e);vr(t,"browser",["browser"],ns.SENTRY_SDK_SOURCE||"npm"),super(t);const{sendDefaultPii:n,sendClientReports:r,enableLogs:s,_experiments:i}=this._options,o=s??(null==i?void 0:i.enableLogs);ns.document&&(r||o)&&ns.document.addEventListener("visibilitychange",()=>{"hidden"===ns.document.visibilityState&&(r&&this._flushOutcomes(),o&&ar(this))}),o&&(this.on("flush",()=>{ar(this)}),this.on("afterCaptureLog",()=>{this._logFlushIdleTimeout&&clearTimeout(this._logFlushIdleTimeout),this._logFlushIdleTimeout=setTimeout(()=>{ar(this)},5e3)})),n&&(this.on("postprocessEvent",br),this.on("beforeSendSession",yr))}eventFromException(e,t){return gs(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",n){return fs(this._options.stackParser,e,t,n,this._options.attachStacktrace)}_prepareEvent(e,t,n,r){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n,r)}}const Ss=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,_s=s;let Is,Cs,ks,Ps;function Es(e){E("dom",e),T("dom",Ts)}function Ts(){if(!_s.document)return;const e=O.bind(null,"dom"),t=Os(e,!0);_s.document.addEventListener("click",t,!1),_s.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(t=>{var n,r;const s=null==(n=_s[t])?void 0:n.prototype;null!=(r=null==s?void 0:s.hasOwnProperty)&&r.call(s,"addEventListener")&&(oe(s,"addEventListener",function(t){return function(n,r,s){if("click"===n||"keypress"==n)try{const r=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},i=r[n]=r[n]||{refCount:0};if(!i.handler){const r=Os(e);i.handler=r,t.call(this,n,r,s)}i.refCount++}catch{}return t.call(this,n,r,s)}}),oe(s,"removeEventListener",function(e){return function(t,n,r){if("click"===t||"keypress"==t)try{const n=this.__sentry_instrumentation_handlers__||{},s=n[t];s&&(s.refCount--,s.refCount<=0&&(e.call(this,t,s.handler,r),s.handler=void 0,delete n[t]),0===Object.keys(n).length&&delete this.__sentry_instrumentation_handlers__)}catch{}return e.call(this,t,n,r)}}))})}function Os(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=function(e){try{return e.target}catch{return null}}(n);if(function(e,t){return!("keypress"!==e||null!=t&&t.tagName&&("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable))}(n.type,r))return;ae(n,"_sentryCaptured",!0),r&&!r._sentryId&&ae(r,"_sentryId",he());const s="keypress"===n.type?"input":n.type;(function(e){if(e.type!==Cs)return!1;try{if(!e.target||e.target._sentryId!==ks)return!1}catch{}return!0})(n)||(e({event:n,name:s,global:t}),Cs=n.type,ks=r?r._sentryId:void 0),clearTimeout(Is),Is=_s.setTimeout(()=>{ks=void 0,Cs=void 0},1e3)}}function xs(e){const t="history";E(t,e),T(t,Ms)}function Ms(){function e(e){return function(...t){const n=t.length>2?t[2]:void 0;if(n){const r=Ps,s=function(e){try{return new URL(e,_s.location.origin).toString()}catch{return e}}(String(n));if(Ps=s,r===s)return e.apply(this,t);O("history",{from:r,to:s})}return e.apply(this,t)}}_s.addEventListener("popstate",()=>{const e=_s.location.href,t=Ps;Ps=e,t!==e&&O("history",{from:t,to:e})}),"history"in Kr&&Kr.history&&(oe(_s.history,"pushState",e),oe(_s.history,"replaceState",e))}const As={};function Rs(e){const t=As[e];if(t)return t;let n=_s[e];if(Gr(n))return As[e]=n.bind(_s);const r=_s.document;if(r&&"function"==typeof r.createElement)try{const t=r.createElement("iframe");t.hidden=!0,r.head.appendChild(t);const s=t.contentWindow;null!=s&&s[e]&&(n=s[e]),r.head.removeChild(t)}catch(t){Ss&&g.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,t)}return n&&(As[e]=n.bind(_s))}function Ds(e){As[e]=void 0}function Ls(...e){return Rs("setTimeout")(...e)}const Bs="__sentry_xhr_v3__";function $s(e){E("xhr",e),T("xhr",Ns)}function Ns(){if(!_s.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(e,t,n){const r=new Error,s=1e3*_e(),i=U(n[0])?n[0].toUpperCase():void 0,o=function(e){if(U(e))return e;try{return e.toString()}catch{}}(n[1]);if(!i||!o)return e.apply(t,n);t[Bs]={method:i,url:o,request_headers:{}},"POST"===i&&o.match(/sentry_key/)&&(t.__sentry_own_request__=!0);const a=()=>{const e=t[Bs];if(e&&4===t.readyState){try{e.status_code=t.status}catch{}O("xhr",{endTimestamp:1e3*_e(),startTimestamp:s,xhr:t,virtualError:r})}};return"onreadystatechange"in t&&"function"==typeof t.onreadystatechange?t.onreadystatechange=new Proxy(t.onreadystatechange,{apply(e,t,n){return a(),e.apply(t,n)}}):t.addEventListener("readystatechange",a),t.setRequestHeader=new Proxy(t.setRequestHeader,{apply(e,t,n){const[r,s]=n,i=t[Bs];return i&&U(r)&&U(s)&&(i.request_headers[r.toLowerCase()]=s),e.apply(t,n)}}),e.apply(t,n)}}),e.send=new Proxy(e.send,{apply(e,t,n){const r=t[Bs];if(!r)return e.apply(t,n);void 0!==n[0]&&(r.body=n[0]);return O("xhr",{startTimestamp:1e3*_e(),xhr:t}),e.apply(t,n)}})}function js(e,t=Rs("fetch")){let n=0,r=0;return fr(e,function(s){const i=s.body.length;n+=i,r++;const o={body:s.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};if(!t)return Ds("fetch"),hn("No fetch implementation available");try{return t(e.url,o).then(e=>(n-=i,r--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}}))}catch(e){return Ds("fetch"),n-=i,r--,hn(e)}})}function Fs(e,t,n,r){const s={filename:e,function:"<anonymous>"===t?f:t,in_app:!0};return void 0!==n&&(s.lineno=n),void 0!==r&&(s.colno=r),s}const Us=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Ws=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Hs=/\((\S*)(?::(\d+))(?::(\d+))\)/,Vs=[30,e=>{const t=Us.exec(e);if(t){const[,e,n,r]=t;return Fs(e,f,+n,+r)}const n=Ws.exec(e);if(n){if(n[2]&&0===n[2].indexOf("eval")){const e=Hs.exec(n[2]);e&&(n[2]=e[1],n[3]=e[2],n[4]=e[3])}const[e,t]=ni(n[1]||f,n[2]);return Fs(t,e,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}}],zs=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,qs=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Ks=[50,e=>{const t=zs.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=qs.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],n=t[1]||f;return[n,e]=ni(n,e),Fs(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],Gs=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Js=[40,e=>{const t=Gs.exec(e);return t?Fs(t[2],t[1]||f,+t[3],t[4]?+t[4]:void 0):void 0}],Ys=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,Qs=[10,e=>{const t=Ys.exec(e);return t?Fs(t[2],t[3]||f,+t[1]):void 0}],Xs=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,Zs=[20,e=>{const t=Xs.exec(e);return t?Fs(t[5],t[3]||t[4]||f,+t[1],+t[2]):void 0}],ei=[Vs,Ks],ti=v(...ei),ni=(e,t)=>{const n=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return n||r?[-1!==e.indexOf("@")?e.split("@")[0]:f,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},ri=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,si=1024,ii=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:"Breadcrumbs",setup(e){t.console&&Dr(function(e){return function(t){if(He()!==e)return;const n={category:"console",data:{arguments:t.args,logger:"console"},level:Br(t.level),message:re(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;n.message=`Assertion failed: ${re(t.args.slice(1)," ")||"console.assert"}`,n.data.arguments=t.args.slice(1)}Sr(n,{input:t.args,level:t.level})}}(e)),t.dom&&Es(function(e,t){return function(n){if(He()!==e)return;let r,s,i="object"==typeof t?t.serializeAttribute:void 0,o="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;o&&o>si&&(ri&&g.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${o} was configured. Sentry will use 1024 instead.`),o=si),"string"==typeof i&&(i=[i]);try{const e=n.event,t=function(e){return!!e&&!!e.target}(e)?e.target:e;r=Q(t,{keyAttrs:i,maxStringLength:o}),s=ee(t)}catch{r="<unknown>"}if(0===r.length)return;const a={category:`ui.${n.name}`,message:r};s&&(a.data={"ui.component_name":s}),Sr(a,{event:n.event,name:n.name,global:n.global})}}(e,t.dom)),t.xhr&&$s(function(e){return function(t){if(He()!==e)return;const{startTimestamp:n,endTimestamp:r}=t,s=t.xhr[Bs];if(!n||!r||!s)return;const{method:i,url:o,status_code:a,body:l}=s,c={method:i,url:o,status_code:a},u={xhr:t.xhr,input:l,startTimestamp:n,endTimestamp:r},d={category:"xhr",data:c,type:"http",level:qr(a)};e.emit("beforeOutgoingRequestBreadcrumb",d,u),Sr(d,u)}}(e)),t.fetch&&Yr(function(e){return function(t){if(He()!==e)return;const{startTimestamp:n,endTimestamp:r}=t;if(r&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.fetchData.method,t.fetchData.url,t.error){const s=t.fetchData,i={data:t.error,input:t.args,startTimestamp:n,endTimestamp:r},o={category:"fetch",data:s,level:"error",type:"http"};e.emit("beforeOutgoingRequestBreadcrumb",o,i),Sr(o,i)}else{const s=t.response,i={...t.fetchData,status_code:null==s?void 0:s.status};t.fetchData.request_body_size,t.fetchData.response_body_size,null==s||s.status;const o={input:t.args,response:s,startTimestamp:n,endTimestamp:r},a={category:"fetch",data:i,type:"http",level:qr(i.status_code)};e.emit("beforeOutgoingRequestBreadcrumb",a,o),Sr(a,o)}}}(e)),t.history&&xs(function(e){return function(t){if(He()!==e)return;let n=t.from,r=t.to;const s=Vr(ns.location.href);let i=n?Vr(n):void 0;const o=Vr(r);null!=i&&i.path||(i=s),s.protocol===o.protocol&&s.host===o.host&&(r=o.relative),s.protocol===i.protocol&&s.host===i.host&&(n=i.relative),Sr({category:"navigation",data:{from:n,to:r}})}}(e)),t.sentry&&e.on("beforeSendEvent",function(e){return function(t){He()===e&&Sr({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:ge(t)},{event:t})}}(e))}}};const oi=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],ai=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...e};return{name:"BrowserApiErrors",setupOnce(){t.setTimeout&&oe(ns,"setTimeout",li),t.setInterval&&oe(ns,"setInterval",li),t.requestAnimationFrame&&oe(ns,"requestAnimationFrame",ci),t.XMLHttpRequest&&"XMLHttpRequest"in ns&&oe(XMLHttpRequest.prototype,"send",ui);const e=t.eventTarget;e&&(Array.isArray(e)?e:oi).forEach(e=>function(e,t){var n,r;const s=null==(n=ns[e])?void 0:n.prototype;null!=(r=null==s?void 0:s.hasOwnProperty)&&r.call(s,"addEventListener")&&(oe(s,"addEventListener",function(n){return function(r,s,i){try{(function(e){return"function"==typeof e.handleEvent})(s)&&(s.handleEvent=is(s.handleEvent,{mechanism:{data:{function:"handleEvent",handler:I(s),target:e},handled:!1,type:"instrument"}}))}catch{}return t.unregisterOriginalCallbacks&&function(e,t,n){e&&"object"==typeof e&&"removeEventListener"in e&&"function"==typeof e.removeEventListener&&e.removeEventListener(t,n)}(this,r,s),n.apply(this,[r,is(s,{mechanism:{data:{function:"addEventListener",handler:I(s),target:e},handled:!1,type:"instrument"}}),i])}}),oe(s,"removeEventListener",function(e){return function(t,n,r){try{const s=n.__sentry_wrapped__;s&&e.call(this,t,s,r)}catch{}return e.call(this,t,n,r)}}))}(e,t))}}};function li(e){return function(...t){const n=t[0];return t[0]=is(n,{mechanism:{data:{function:I(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function ci(e){return function(t){return e.apply(this,[is(t,{mechanism:{data:{function:"requestAnimationFrame",handler:I(e)},handled:!1,type:"instrument"}})])}}function ui(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(e=>{e in n&&"function"==typeof n[e]&&oe(n,e,function(t){const n={mechanism:{data:{function:e,handler:I(t)},handled:!1,type:"instrument"}},r=ce(t);return r&&(n.mechanism.data.handler=I(r)),is(t,n)})}),e.apply(this,t)}}const di=()=>({name:"BrowserSession",setupOnce(){typeof ns.document>"u"?ri&&g.warn("Using the `browserSessionIntegration` in non-browser environments is not supported."):(Rn({ignoreDuration:!0}),Bn(),xs(({from:e,to:t})=>{void 0!==e&&e!==t&&(Rn({ignoreDuration:!0}),Bn())}))}}),pi=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:"GlobalHandlers",setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&(function(e){M(t=>{const{stackParser:n,attachStacktrace:r}=mi();if(He()!==e||ss())return;const{msg:s,url:i,line:o,column:a,error:l}=t,c=function(e,t,n,r){const s=e.exception=e.exception||{},i=s.values=s.values||[],o=i[0]=i[0]||{},a=o.stacktrace=o.stacktrace||{},l=a.frames=a.frames||[],c=r,u=n,d=U(t)&&t.length>0?t:Z();return 0===l.length&&l.push({colno:c,filename:d,function:f,in_app:!0,lineno:u}),e}(bs(n,l||s,void 0,r,!1),i,o,a);c.level="error",Tn(c,{originalException:l,mechanism:{handled:!1,type:"onerror"}})})}(e),hi("onerror")),t.onunhandledrejection&&(function(e){D(t=>{const{stackParser:n,attachStacktrace:r}=mi();if(He()!==e||ss())return;const s=function(e){if(H(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}(t),i=H(s)?function(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}(s):bs(n,s,void 0,r,!0);i.level="error",Tn(i,{originalException:s,mechanism:{handled:!1,type:"onunhandledrejection"}})})}(e),hi("onunhandledrejection"))}}};function hi(e){ri&&g.log(`Global Handler attached: ${e}`)}function mi(){const e=He();return(null==e?void 0:e.getOptions())||{stackParser:()=>[],attachStacktrace:!1}}const gi=()=>({name:"HttpContext",preprocessEvent(e){var t;if(!ns.navigator&&!ns.location&&!ns.document)return;const n=os(),r={...n.headers,...null==(t=e.request)?void 0:t.headers};e.request={...n,...e.request,headers:r}}}),fi=(e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:"LinkedErrors",preprocessEvent(e,r,s){xr(as,s.getOptions().stackParser,n,t,e,r)}}};function bi(){return!!function(){var e;if(typeof ns.window>"u")return!1;const t=ns;if(t.nw)return!1;const n=t.chrome||t.browser;if(null==(e=null==n?void 0:n.runtime)||!e.id)return!1;const r=Z(),s=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(ns===ns.top&&s.some(e=>r.startsWith(`${e}://`)))}()&&(ri&&d(()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}),!0)}function yi(e){return[Er(),Cr(),ai(),ii(),pi(),fi(),$r(),gi(),di()]}function vi(e={}){const t=!e.skipBrowserExtensionCheck&&bi(),n={...e,enabled:!t&&e.enabled,stackParser:w(e.stackParser||ti),integrations:Fn({integrations:e.integrations,defaultIntegrations:null==e.defaultIntegrations?yi():e.defaultIntegrations}),transport:e.transport||js};return function(e,t){!0===t.debug&&(r?g.enable():d(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),je().update(t.initialScope);const n=new e(t);return ur(n),n.init(),n}(ws,n)}var wi,Si={exports:{}},_i={};function Ii(){if(wi)return _i;wi=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h=Object.assign,m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function f(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},f.prototype=g.prototype;var y=b.prototype=new f;y.constructor=b,h(y,g.prototype),y.isPureReactComponent=!0;var v=Array.isArray,w=Object.prototype.hasOwnProperty,S={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function I(t,n,r){var s,i={},o=null,a=null;if(null!=n)for(s in void 0!==n.ref&&(a=n.ref),void 0!==n.key&&(o=""+n.key),n)w.call(n,s)&&!_.hasOwnProperty(s)&&(i[s]=n[s]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(s in l=t.defaultProps)void 0===i[s]&&(i[s]=l[s]);return{$$typeof:e,type:t,key:o,ref:a,props:i,_owner:S.current}}function C(t){return"object"==typeof t&&null!==t&&t.$$typeof===e}var k=/\/+/g;function P(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function E(n,r,s,i,o){var a=typeof n;("undefined"===a||"boolean"===a)&&(n=null);var l=!1;if(null===n)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(n.$$typeof){case e:case t:l=!0}}if(l)return o=o(l=n),n=""===i?"."+P(l,0):i,v(o)?(s="",null!=n&&(s=n.replace(k,"$&/")+"/"),E(o,r,s,"",function(e){return e})):null!=o&&(C(o)&&(o=function(t,n){return{$$typeof:e,type:t.type,key:n,ref:t.ref,props:t.props,_owner:t._owner}}(o,s+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(k,"$&/")+"/")+n)),r.push(o)),1;if(l=0,i=""===i?".":i+":",v(n))for(var c=0;c<n.length;c++){var u=i+P(a=n[c],c);l+=E(a,r,s,u,o)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=d&&e[d]||e["@@iterator"])?e:null}(n),"function"==typeof u)for(n=u.call(n),c=0;!(a=n.next()).done;)l+=E(a=a.value,r,s,u=i+P(a,c++),o);else if("object"===a)throw r=String(n),Error("Objects are not valid as a React child (found: "+("[object Object]"===r?"object with keys {"+Object.keys(n).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.");return l}function T(e,t,n){if(null==e)return e;var r=[],s=0;return E(e,r,"","",function(e){return t.call(n,e,s++)}),r}function O(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){(0===e._status||-1===e._status)&&(e._status=1,e._result=t)},function(t){(0===e._status||-1===e._status)&&(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var x={current:null},M={transition:null},A={ReactCurrentDispatcher:x,ReactCurrentBatchConfig:M,ReactCurrentOwner:S};function R(){throw Error("act(...) is not supported in production builds of React.")}return _i.Children={map:T,forEach:function(e,t,n){T(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},_i.Component=g,_i.Fragment=n,_i.Profiler=s,_i.PureComponent=b,_i.StrictMode=r,_i.Suspense=l,_i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A,_i.act=R,_i.cloneElement=function(t,n,r){if(null==t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=h({},t.props),i=t.key,o=t.ref,a=t._owner;if(null!=n){if(void 0!==n.ref&&(o=n.ref,a=S.current),void 0!==n.key&&(i=""+n.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in n)w.call(n,c)&&!_.hasOwnProperty(c)&&(s[c]=void 0===n[c]&&void 0!==l?l[c]:n[c])}var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:e,type:t.type,key:i,ref:o,props:s,_owner:a}},_i.createContext=function(e){return(e={$$typeof:o,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:i,_context:e},e.Consumer=e},_i.createElement=I,_i.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},_i.createRef=function(){return{current:null}},_i.forwardRef=function(e){return{$$typeof:a,render:e}},_i.isValidElement=C,_i.lazy=function(e){return{$$typeof:u,_payload:{_status:-1,_result:e},_init:O}},_i.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},_i.startTransition=function(e){var t=M.transition;M.transition={};try{e()}finally{M.transition=t}},_i.unstable_act=R,_i.useCallback=function(e,t){return x.current.useCallback(e,t)},_i.useContext=function(e){return x.current.useContext(e)},_i.useDebugValue=function(){},_i.useDeferredValue=function(e){return x.current.useDeferredValue(e)},_i.useEffect=function(e,t){return x.current.useEffect(e,t)},_i.useId=function(){return x.current.useId()},_i.useImperativeHandle=function(e,t,n){return x.current.useImperativeHandle(e,t,n)},_i.useInsertionEffect=function(e,t){return x.current.useInsertionEffect(e,t)},_i.useLayoutEffect=function(e,t){return x.current.useLayoutEffect(e,t)},_i.useMemo=function(e,t){return x.current.useMemo(e,t)},_i.useReducer=function(e,t,n){return x.current.useReducer(e,t,n)},_i.useRef=function(e){return x.current.useRef(e)},_i.useState=function(e){return x.current.useState(e)},_i.useSyncExternalStore=function(e,t,n){return x.current.useSyncExternalStore(e,t,n)},_i.useTransition=function(){return x.current.useTransition()},_i.version="18.3.1",_i}var Ci;var ki=(Ci||(Ci=1,Si.exports=Ii()),Si.exports);function Pi(e){const t={...e};return vr(t,"react"),On("react",{version:ki.version}),vi(t)}const Ei=({appName:e,appVersion:t,dsn:n,environment:r})=>{if(!n)return;const s=`${e}@${t||"unknown"}`;return Pi({...Ti(),dsn:n,release:s,environment:r})},Ti=()=>({integrations:e=>[...e,ii({history:!0,fetch:!0,dom:!0,xhr:!0,console:!1})],ignoreErrors:[/Loading chunk \d+ failed/i,/Chunk loading failed/i,/Loading CSS chunk \d+ failed/i,/script error/i,/NetworkError/i,/Failed to fetch/i,/ChunkLoadError/i,/AbortError: The play\(\) request was interrupted/i],denyUrls:[/chrome-extension:\/\//i,/moz-extension:\/\//i],sampleRate:1,tracesSampleRate:.1,normalizeDepth:5,maxBreadcrumbs:20});var Oi=Object.defineProperty,xi=Object.defineProperties,Mi=Object.getOwnPropertyDescriptors,Ai=Object.getOwnPropertySymbols,Ri=Object.prototype.hasOwnProperty,Di=Object.prototype.propertyIsEnumerable,Li=(e,t,n)=>t in e?Oi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Bi=(e,t)=>{for(var n in t||(t={}))Ri.call(t,n)&&Li(e,n,t[n]);if(Ai)for(var n of Ai(t))Di.call(t,n)&&Li(e,n,t[n]);return e},$i=(e,t)=>xi(e,Mi(t)),Ni=(e,t)=>{var n={};for(var r in e)Ri.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&Ai)for(var r of Ai(e))t.indexOf(r)<0&&Di.call(e,r)&&(n[r]=e[r]);return n};function ji(e,t){for(var n=0;n<t.length;n++){const r=t[n];if("string"!=typeof r&&!Array.isArray(r))for(const t in r)if("default"!==t&&!(t in e)){const n=Object.getOwnPropertyDescriptor(r,t);n&&Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:()=>r[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}let Fi=!1;function Ui(){function e(){const e=Dt(),t=e&&Rt(e);if(t){const e="internal_error";r&&g.log(`[Tracing] Root span: ${e} -> Global error occurred`),t.setStatus({code:2,message:e})}}Fi||(e.tag="sentry_tracingErrorCallback",Fi=!0,M(e),D(e))}class Wi{constructor(e={}){this._traceId=e.traceId||Ee(),this._spanId=e.spanId||Te()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:0}}end(e){}setAttribute(e,t){return this}setAttributes(e){return this}setStatus(e){return this}updateName(e){return this}isRecording(){return!1}addEvent(e,t,n){return this}addLink(e){return this}addLinks(e){return this}recordException(e,t){}}function Hi(e,t,n,s=Dt()){const i=s&&Rt(s);i&&(r&&g.log(`[Measurement] Setting measurement on root span: ${e} = ${t} ${n}`),i.addEvent(e,{[Xe]:t,[Qe]:n}))}function Vi(e){if(!e||0===e.length)return;const t={};return e.forEach(e=>{const n=e.attributes||{},r=n[Qe],s=n[Xe];"string"==typeof r&&"number"==typeof s&&(t[e.name]={value:s,unit:r})}),t}class zi{constructor(e={}){this._traceId=e.traceId||Ee(),this._spanId=e.spanId||Te(),this._startTime=e.startTimestamp||_e(),this._links=e.links,this._attributes={},this.setAttributes(Bi({[Je]:"manual",[Ge]:e.op},e.attributes)),this._name=e.name,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.endTimestamp&&(this._endTime=e.endTimestamp),this._events=[],this._isStandaloneSpan=e.isStandalone,this._endTime&&this._onSpanEnded()}addLink(e){return this._links?this._links.push(e):this._links=[e],this}addLinks(e){return this._links?this._links.push(...e):this._links=e,this}recordException(e,t){}spanContext(){const{_spanId:e,_traceId:t,_sampled:n}=this;return{spanId:e,traceId:t,traceFlags:n?1:0}}setAttribute(e,t){return void 0===t?delete this._attributes[e]:this._attributes[e]=t,this}setAttributes(e){return Object.keys(e).forEach(t=>this.setAttribute(t,e[t])),this}updateStartTime(e){this._startTime=Ct(e)}setStatus(e){return this._status=e,this}updateName(e){return this._name=e,this.setAttribute(ze,"custom"),this}end(e){this._endTime||(this._endTime=Ct(e),function(e){if(!r)return;const{description:t="< unknown name >",op:n="< unknown op >"}=Pt(e),{spanId:s}=e.spanContext(),i=`[Tracing] Finishing "${n}" ${Rt(e)===e?"root ":""}span "${t}" with ID ${s}`;g.log(i)}(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[Ge],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:Tt(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Je],profile_id:this._attributes[et],exclusive_time:this._attributes[tt],measurements:Vi(this._events),is_segment:this._isStandaloneSpan&&Rt(this)===this||void 0,segment_id:this._isStandaloneSpan?Rt(this).spanContext().spanId:void 0,links:It(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(e,t,n){r&&g.log("[Tracing] Adding an event to span:",e);const s=qi(t)?t:n||_e(),i=qi(t)?{}:t||{},o={name:e,time:Ct(s),attributes:i};return this._events.push(o),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const e=He();if(e&&e.emit("spanEnd",this),!this._isStandaloneSpan&&this!==Rt(this))return;if(this._isStandaloneSpan)return void(this._sampled?function(e){const t=He();if(!t)return;const n=e[1];if(!n||0===n.length)return void t.recordDroppedEvent("before_send","span");t.sendEnvelope(e)}(function(e,t){const n=Gt(e[0]),r=null==t?void 0:t.getDsn(),s=null==t?void 0:t.getOptions().tunnel,i={sent_at:(new Date).toISOString(),...(c=n,!!c.trace_id&&!!c.public_key&&{trace:n}),...!!s&&r&&{dsn:Ft(r)}},o=null==t?void 0:t.getOptions().beforeSendSpan,a=o?e=>{const t=Pt(e);return o(t)||(Lt(),t)}:Pt,l=[];var c;for(const t of e){const e=a(t);e&&l.push(on(e))}return Xt(i,l)}([this],e)):(r&&g.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),e&&e.recordDroppedEvent("sample_rate","span")));const t=this._convertSpanToTransaction();t&&(ct(this).scope||je()).captureEvent(t)}_convertSpanToTransaction(){var e;if(!Ki(Pt(this)))return;this._name||(r&&g.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:t,isolationScope:n}=ct(this),s=null==(e=null==t?void 0:t.getScopeData().sdkProcessingMetadata)?void 0:e.normalizedRequest;if(!0!==this._sampled)return;const i=At(this).filter(e=>{return e!==this&&!((t=e)instanceof zi&&t.isStandaloneSpan());var t}).map(e=>Pt(e)).filter(Ki),o=this._attributes[ze];delete this._attributes[Ze],i.forEach(e=>{delete e.data[Ze]});const a=Bi({contexts:{trace:wt(this)},spans:i.length>1e3?i.sort((e,t)=>e.start_timestamp-t.start_timestamp).slice(0,1e3):i,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:t,capturedSpanIsolationScope:n,dynamicSamplingContext:Gt(this)},request:s},o&&{transaction_info:{source:o}}),l=Vi(this._events);return l&&Object.keys(l).length&&(r&&g.log("[Measurements] Adding measurements to transaction event",JSON.stringify(l,void 0,2)),a.measurements=l),a}}function qi(e){return e&&"number"==typeof e||e instanceof Date||Array.isArray(e)}function Ki(e){return!!(e.start_timestamp&&e.timestamp&&e.span_id&&e.trace_id)}function Gi(e,t,n=()=>{}){let r;try{r=e()}catch(e){throw t(e),n(),e}return function(e,t,n){return q(e)?e.then(e=>(n(),e),e=>{throw t(e),n(),e}):(n(),e)}(r,t,n)}const Ji="__SENTRY_SUPPRESS_TRACING__";function Yi(e,t){const n=to();if(n.startSpan)return n.startSpan(e,t);const r=eo(e),{forceTransaction:s,parentSpan:i,scope:o}=e;return We(null==o?void 0:o.clone(),()=>so(i)(()=>{const n=je(),o=ro(n,i),a=e.onlyIfParent&&!o?new Wi:Zi({parentSpan:o,spanArguments:r,forceTransaction:s,scope:n});return xe(n,a),Gi(()=>t(a),()=>{const{status:e}=Pt(a);a.isRecording()&&(!e||"ok"===e)&&a.setStatus({code:2,message:"internal_error"})},()=>{a.end()})}))}function Qi(e){const t=to();if(t.startInactiveSpan)return t.startInactiveSpan(e);const n=eo(e),{forceTransaction:r,parentSpan:s}=e;return(e.scope?t=>We(e.scope,t):void 0!==s?e=>Xi(s,e):e=>e())(()=>{const t=je(),i=ro(t,s);return e.onlyIfParent&&!i?new Wi:Zi({parentSpan:i,spanArguments:n,forceTransaction:r,scope:t})})}function Xi(e,t){const n=to();return n.withActiveSpan?n.withActiveSpan(e,t):We(n=>(xe(n,e||void 0),t(n)))}function Zi({parentSpan:e,spanArguments:t,forceTransaction:n,scope:s}){if(!Bt()){const r=new Wi;if(n||!e){zt(r,Bi({sampled:"false",sample_rate:"0",transaction:t.name},Gt(r)))}return r}const i=Fe();let o;if(e&&!n)o=function(e,t,n){const{spanId:r,traceId:s}=e.spanContext(),i=!t.getScopeData().sdkProcessingMetadata[Ji]&&Et(e),o=i?new zi($i(Bi({},n),{parentSpanId:r,traceId:s,sampled:i})):new Wi({traceId:s});Mt(e,o);const a=He();return a&&(a.emit("spanStart",o),n.endTimestamp&&a.emit("spanEnd",o)),o}(e,s,t),Mt(e,o);else if(e){const n=Gt(e),{traceId:r,spanId:i}=e.spanContext(),a=Et(e);o=no(Bi({traceId:r,parentSpanId:i},t),s,a),zt(o,n)}else{const{traceId:e,dsc:n,parentSpanId:r,sampled:a}=Bi(Bi({},i.getPropagationContext()),s.getPropagationContext());o=no(Bi({traceId:e,parentSpanId:r},t),s,a),n&&zt(o,n)}return function(e){if(!r)return;const{description:t="< unknown name >",op:n="< unknown op >",parent_span_id:s}=Pt(e),{spanId:i}=e.spanContext(),o=Et(e),a=Rt(e),l=a===e,c=`[Tracing] Starting ${o?"sampled":"unsampled"} ${l?"root ":""}span`,u=[`op: ${n}`,`name: ${t}`,`ID: ${i}`];if(s&&u.push(`parent ID: ${s}`),!l){const{op:e,description:t}=Pt(a);u.push(`root ID: ${a.spanContext().spanId}`),e&&u.push(`root op: ${e}`),t&&u.push(`root description: ${t}`)}g.log(`${c}\n  ${u.join("\n  ")}`)}(o),function(e,t,n){e&&(ae(e,lt,n),ae(e,at,t))}(o,s,i),o}function eo(e){const t=Bi({isStandalone:(e.experimental||{}).standalone},e);if(e.startTime){const n=Bi({},t);return n.startTimestamp=Ct(e.startTime),delete n.startTime,n}return t}function to(){return Ne(o())}function no(e,t,n){var s,i;const o=He(),a=(null==o?void 0:o.getOptions())||{},{name:l=""}=e,c={spanAttributes:Bi({},e.attributes),spanName:l,parentSampled:n};null==o||o.emit("beforeSampling",c,{decision:!1});const u=null!=(s=c.parentSampled)?s:n,d=c.spanAttributes,p=t.getPropagationContext(),[h,m,f]=t.getScopeData().sdkProcessingMetadata[Ji]?[!1]:function(e,t,n){if(!Bt(e))return[!1];let s,i;"function"==typeof e.tracesSampler?(i=e.tracesSampler($i(Bi({},t),{inheritOrSampleWith:e=>"number"==typeof t.parentSampleRate?t.parentSampleRate:"boolean"==typeof t.parentSampled?Number(t.parentSampled):e})),s=!0):void 0!==t.parentSampled?i=t.parentSampled:typeof e.tracesSampleRate<"u"&&(i=e.tracesSampleRate,s=!0);const o=gt(i);if(void 0===o)return r&&g.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(i)} of type ${JSON.stringify(typeof i)}.`),[!1];if(!o)return r&&g.log("[Tracing] Discarding transaction because "+("function"==typeof e.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),[!1,o,s];const a=n<o;return a||r&&g.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(i)})`),[a,o,s]}(a,{name:l,parentSampled:u,attributes:d,parentSampleRate:gt(null==(i=p.dsc)?void 0:i.sample_rate)},p.sampleRand),b=new zi($i(Bi({},e),{attributes:Bi({[ze]:"custom",[qe]:void 0!==m&&f?m:void 0},d),sampled:h}));return!h&&o&&(r&&g.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),o.recordDroppedEvent("sample_rate","transaction")),o&&o.emit("spanStart",b),b}function ro(e,t){if(t)return t;if(null===t)return;const n=Me(e);if(!n)return;const r=He();return(r?r.getOptions():{}).parentSpanIsAlwaysRootSpan?Rt(n):n}function so(e){return void 0!==e?t=>Xi(e,t):e=>e()}const io={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3};function oo(e,t={}){const n=new Map;let s,i=!1,o="externalFinish",a=!t.disableAutoFinish;const l=[],{idleTimeout:c=io.idleTimeout,finalTimeout:u=io.finalTimeout,childSpanTimeout:d=io.childSpanTimeout,beforeSpanEnd:p}=t,h=He();if(!h||!Bt()){const e=new Wi;return zt(e,Bi({sample_rate:"0",sampled:"false"},Gt(e))),e}const m=je(),f=Dt(),b=function(e){const t=Qi(e);return xe(je(),t),r&&g.log("[Tracing] Started span is an idle span"),t}(e);function y(){s&&(clearTimeout(s),s=void 0)}function v(e){y(),s=setTimeout(()=>{!i&&0===n.size&&a&&(o="idleTimeout",b.end(e))},c)}function w(e){s=setTimeout(()=>{!i&&a&&(o="heartbeatFailed",b.end(e))},d)}function S(e){i=!0,n.clear(),l.forEach(e=>e()),xe(m,f);const t=Pt(b),{start_timestamp:s}=t;if(!s)return;t.data[Ye]||b.setAttribute(Ye,o),g.log(`[Tracing] Idle span "${t.op}" finished`);const a=At(b).filter(e=>e!==b);let d=0;a.forEach(t=>{t.isRecording()&&(t.setStatus({code:2,message:"cancelled"}),t.end(e),r&&g.log("[Tracing] Cancelling span since span ended early",JSON.stringify(t,void 0,2)));const n=Pt(t),{timestamp:s=0,start_timestamp:i=0}=n,o=i<=e,a=s-i<=(u+c)/1e3;if(r){const e=JSON.stringify(t,void 0,2);o?a||g.log("[Tracing] Discarding span since it finished after idle span final timeout",e):g.log("[Tracing] Discarding span since it happened after idle span was finished",e)}(!a||!o)&&(function(e,t){e[Ot]&&e[Ot].delete(t)}(b,t),d++)}),d>0&&b.setAttribute("sentry.idle_span_discarded_spans",d)}return b.end=new Proxy(b.end,{apply(e,t,n){if(p&&p(b),t instanceof Wi)return;const[r,...s]=n,i=Ct(r||_e()),o=At(b).filter(e=>e!==b);if(!o.length)return S(i),Reflect.apply(e,t,[i,...s]);const a=o.map(e=>Pt(e).timestamp).filter(e=>!!e),l=a.length?Math.max(...a):void 0,c=Pt(b).start_timestamp,d=Math.min(c?c+u/1e3:1/0,Math.max(c||-1/0,Math.min(i,l||1/0)));return S(d),Reflect.apply(e,t,[d,...s])}}),l.push(h.on("spanStart",e=>{i||e===b||Pt(e).timestamp||e instanceof zi&&e.isStandaloneSpan()||At(b).includes(e)&&function(e){y(),n.set(e,!0),w(_e()+d/1e3)}(e.spanContext().spanId)})),l.push(h.on("spanEnd",e=>{i||function(e){n.has(e)&&n.delete(e),0===n.size&&v(_e()+c/1e3)}(e.spanContext().spanId)})),l.push(h.on("idleSpanEnableAutoFinish",e=>{e===b&&(a=!0,v(),n.size&&w())})),t.disableAutoFinish||v(),setTimeout(()=>{i||(b.setStatus({code:2,message:"deadline_exceeded"}),o="finalTimeout",b.end())},u),b}const ao=5e3;function lo(e){function t(...e){r&&g.log("[Offline]:",...e)}return n=>{const r=e(n);if(!n.createStore)throw new Error("No `createStore` function was provided");const s=n.createStore(n);let i,o=ao;function a(e){i&&clearTimeout(i),i=setTimeout(async()=>{i=void 0;const e=await s.shift();e&&(t("Attempting to send previously queued event"),e[0].sent_at=(new Date).toISOString(),c(e,!0).catch(e=>{t("Failed to retry sending",e)}))},e),"number"!=typeof i&&i.unref&&i.unref()}function l(){i||(a(o),o=Math.min(2*o,36e5))}async function c(e,i=!1){var c,u;if(!i&&tn(e,["replay_event","replay_recording"]))return await s.push(e),a(100),{};try{if(n.shouldSend&&!1===await n.shouldSend(e))throw new Error("Envelope not sent because `shouldSend` callback returned false");const t=await r.send(e);let s=100;if(t)if(null!=(c=t.headers)&&c["retry-after"])s=hr(t.headers["retry-after"]);else if(null!=(u=t.headers)&&u["x-sentry-rate-limits"])s=6e4;else if((t.statusCode||0)>=400)return t;return a(s),o=ao,t}catch(r){if(await function(e,t,r){return!tn(e,["client_report"])&&(!n.shouldStore||n.shouldStore(e,t,r))}(e,r,o))return i?await s.unshift(e):await s.push(e),l(),t("Error sending. Event queued.",r),{};throw r}}return n.flushAtStartup&&l(),{send:c,flush:e=>(void 0===e&&(o=ao,a(100)),r.flush(e))}}}function co(e,t){let n;return en(e,(e,r)=>(t.includes(r)&&(n=Array.isArray(e)?e[1]:void 0),!!n)),n}function uo(e,t){const n=null==t?void 0:t.getDsn(),r=null==t?void 0:t.getOptions().tunnel;return function(e,t){return!!t&&e.includes(t.host)}(e,n)||function(e,t){return!!t&&po(e)===po(t)}(e,r)}function po(e){return"/"===e[e.length-1]?e.slice(0,-1):e}function ho(e,...t){const n=new String(String.raw(e,...t));return n.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=t,n}const mo=ho;function go(e={}){const t=e.client||He();if(!Mn()||!t)return{};const n=Ne(o());if(n.getTraceData)return n.getTraceData(e);const r=e.scope||je(),s=e.span||Dt(),i=s?_t(s):function(e){const{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return yt(t,r,n)}(r),a=ht(s?Gt(s):Kt(t,r));return ft.test(i)?{"sentry-trace":i,baggage:a}:(g.warn("Invalid sentry-trace data. Cannot generate trace data"),{})}const fo=new Map,bo=new Set;function yo(e,t){return function(e){if(s._sentryModuleMetadata)for(const t of Object.keys(s._sentryModuleMetadata)){const n=s._sentryModuleMetadata[t];if(bo.has(t))continue;bo.add(t);const r=e(t);for(const e of r.reverse())if(e.filename){fo.set(e.filename,n);break}}}(e),fo.get(t)}function vo(e,t){try{t.exception.values.forEach(t=>{if(t.stacktrace)for(const n of t.stacktrace.frames||[]){if(!n.filename||n.module_metadata)continue;const t=yo(e,n.filename);t&&(n.module_metadata=t)}})}catch(e){}}function wo(e){try{e.exception.values.forEach(e=>{if(e.stacktrace)for(const t of e.stacktrace.frames||[])delete t.module_metadata})}catch(e){}}const So=()=>({name:"ModuleMetadata",setup(e){e.on("beforeEnvelope",e=>{en(e,(e,t)=>{if("event"===t){const t=Array.isArray(e)?e[1]:void 0;t&&(wo(t),e[1]=t)}})}),e.on("applyFrameMetadata",t=>{if(t.type)return;vo(e.getOptions().stackParser,t)})}}),_o=(e={})=>{var t;const n=e.levels||c,r=null==(t=e.handled)||t;return{name:"CaptureConsole",setup(e){"console"in s&&Dr(({args:t,level:s})=>{He()!==e||!n.includes(s)||function(e,t,n){const r={level:Br(t),extra:{arguments:e}};We(s=>{if(s.addEventProcessor(e=>(e.logger="console",be(e,{handled:n,type:"console"}),e)),"assert"===t){if(!e[0]){const t=`Assertion failed: ${re(e.slice(1)," ")||"console.assert"}`;s.setExtra("arguments",e.slice(1)),En(t,r)}return}const i=e.find(e=>e instanceof Error);if(i)return void Pn(i,r);En(re(e," "),r)})}(t,s,r)})}}};const Io=(e={})=>{const{depth:t=3,captureErrorCause:n=!0}=e;return{name:"ExtraErrorData",processEvent(e,s,i){const{maxValueLength:o=250}=i.getOptions();return function(e,t={},n,s,i){if(!t.originalException||!$(t.originalException))return e;const o=t.originalException.name||t.originalException.constructor.name,a=function(e,t,n){try{const r=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],s={};for(const t of Object.keys(e)){if(-1!==r.indexOf(t))continue;const i=e[t];s[t]=$(i)||"string"==typeof i?te(`${i}`,n):i}if(t&&void 0!==e.cause&&(s.cause=$(e.cause)?e.cause.toString():e.cause),"function"==typeof e.toJSON){const t=e.toJSON();for(const e of Object.keys(t)){const n=t[e];s[e]=$(n)?n.toString():n}}return s}catch(e){r&&g.error("Unable to extract extra data from the Error object:",e)}return null}(t.originalException,s,i);if(a){const t=Bi({},e.contexts),r=Jt(a,n);return V(r)&&(ae(r,"__sentry_skip_normalization__",!0),t[o]=r),$i(Bi({},e),{contexts:t})}return e}(e,s,t,n,o)}}};const Co=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function ko(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){const s=r>=0?e[r]:"/";s&&(t=`${s}/${t}`,n="/"===s.charAt(0))}return t=function(e,t){let n=0;for(let t=e.length-1;t>=0;t--){const r=e[t];"."===r?e.splice(t,1):".."===r?(e.splice(t,1),n++):n&&(e.splice(t,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}(t.split("/").filter(e=>!!e),!n).join("/"),(n?"/":"")+t||"."}function Po(e){let t=0;for(;t<e.length&&""===e[t];t++);let n=e.length-1;for(;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}function Eo(e,t){return function(e){const t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=Co.exec(t);return n?n.slice(1):[]}(e)[2]||""}const To=(e={})=>{const t=e.root,n=e.prefix||"app:///",r="window"in s&&!!s.window,i=e.iteratee||function({isBrowser:e,root:t,prefix:n}){return r=>{if(!r.filename)return r;const s=/^[a-zA-Z]:\\/.test(r.filename)||r.filename.includes("\\")&&!r.filename.includes("/"),i=/^\//.test(r.filename);if(e){if(t){const e=r.filename;0===e.indexOf(t)&&(r.filename=e.replace(t,n))}}else if(s||i){const e=s?r.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):r.filename,i=t?function(e,t){e=ko(e).slice(1),t=ko(t).slice(1);const n=Po(e.split("/")),r=Po(t.split("/")),s=Math.min(n.length,r.length);let i=s;for(let e=0;e<s;e++)if(n[e]!==r[e]){i=e;break}let o=[];for(let e=i;e<n.length;e++)o.push("..");return o=o.concat(r.slice(i)),o.join("/")}(t,e):Eo(e);r.filename=`${n}${i}`}return r}}({isBrowser:r,root:t,prefix:n});function o(e){var t;return $i(Bi({},e),{frames:null==(t=null==e?void 0:e.frames)?void 0:t.map(e=>i(e))})}return{name:"RewriteFrames",processEvent(e){let t=e;return e.exception&&Array.isArray(e.exception.values)&&(t=function(e){try{return $i(Bi({},e),{exception:$i(Bi({},e.exception),{values:e.exception.values.map(e=>Bi(Bi({},e),e.stacktrace&&{stacktrace:o(e.stacktrace)}))})})}catch(t){return e}}(t)),t}}};const Oo=["reauthenticate","signInAnonymously","signInWithOAuth","signInWithIdToken","signInWithOtp","signInWithPassword","signInWithSSO","signOut","signUp","verifyOtp"],xo=["createUser","deleteUser","listUsers","getUserById","updateUserById","inviteUserByEmail"],Mo={eq:"eq",neq:"neq",gt:"gt",gte:"gte",lt:"lt",lte:"lte",like:"like","like(all)":"likeAllOf","like(any)":"likeAnyOf",ilike:"ilike","ilike(all)":"ilikeAllOf","ilike(any)":"ilikeAnyOf",is:"is",in:"in",cs:"contains",cd:"containedBy",sr:"rangeGt",nxl:"rangeGte",sl:"rangeLt",nxr:"rangeLte",adj:"rangeAdjacent",ov:"overlaps",fts:"",plfts:"plain",phfts:"phrase",wfts:"websearch",not:"not"},Ao=["select","insert","upsert","update","delete"];function Ro(e){try{e.__SENTRY_INSTRUMENTED__=!0}catch(e){}}function Do(e){try{return e.__SENTRY_INSTRUMENTED__}catch(e){return!1}}function Lo(e,t){if(""===t||"*"===t)return"select(*)";if("select"===e)return`select(${t})`;if("or"===e||e.endsWith(".or"))return`${e}${t}`;const[n,...r]=t.split(".");let s;return s=null!=n&&n.startsWith("fts")?"textSearch":null!=n&&n.startsWith("plfts")?"textSearch[plain]":null!=n&&n.startsWith("phfts")?"textSearch[phrase]":null!=n&&n.startsWith("wfts")?"textSearch[websearch]":n&&Mo[n]||"filter",`${s}(${e}, ${r.join(".")})`}function Bo(e,t=!1){return new Proxy(e,{apply(n,r,s){return Yi({name:`auth ${t?"(admin) ":""}${e.name}`,attributes:{[Je]:"auto.db.supabase",[Ge]:"db","db.system":"postgresql","db.operation":`auth.${t?"admin.":""}${e.name}`}},e=>Reflect.apply(n,r,s).then(t=>(t&&"object"==typeof t&&"error"in t&&t.error?(e.setStatus({code:2}),Pn(t.error,{mechanism:{handled:!1}})):e.setStatus({code:1}),e.end(),t)).catch(t=>{throw e.setStatus({code:2}),e.end(),Pn(t,{mechanism:{handled:!1}}),t}).then(...s))}})}function $o(e){Do(e.prototype.from)||(e.prototype.from=new Proxy(e.prototype.from,{apply(e,t,n){const s=Reflect.apply(e,t,n);return function(e){for(const t of Ao)Do(e.prototype[t])||(e.prototype[t]=new Proxy(e.prototype[t],{apply(e,n,s){const i=Reflect.apply(e,n,s),o=i.constructor;return r&&g.log(`Instrumenting ${t} operation's PostgRESTFilterBuilder`),No(o),i}}),Ro(e.prototype[t]))}(s.constructor),s}}),Ro(e.prototype.from))}function No(e){Do(e.prototype.then)||(e.prototype.then=new Proxy(e.prototype.then,{apply(e,t,n){var r;const s=Ao,i=t,o=function(e,t={}){var n;switch(e){case"GET":return"select";case"POST":return null!=(n=t.Prefer)&&n.includes("resolution=")?"upsert":"insert";case"PATCH":return"update";case"DELETE":return"delete";default:return"<unknown-op>"}}(i.method,i.headers);if(!s.includes(o)||null==(r=null==i?void 0:i.url)||!r.pathname||"string"!=typeof i.url.pathname)return Reflect.apply(e,t,n);const a=i.url.pathname.split("/"),l=a.length>0?a[a.length-1]:"",c=[];for(const[e,t]of i.url.searchParams.entries())c.push(Lo(e,t));const u=Object.create(null);if(V(i.body))for(const[e,t]of Object.entries(i.body))u[e]=t;const d=`${"select"===o?"":`${o}${u?"(...) ":""}`}${c.join(" ")} from(${l})`,p={"db.table":l,"db.schema":i.schema,"db.url":i.url.origin,"db.sdk":i.headers["X-Client-Info"],"db.system":"postgresql","db.operation":o,[Je]:"auto.db.supabase",[Ge]:"db"};return c.length&&(p["db.query"]=c),Object.keys(u).length&&(p["db.body"]=u),Yi({name:d,attributes:p},r=>Reflect.apply(e,t,[]).then(e=>{if(r&&(e&&"object"==typeof e&&"status"in e&&ot(r,e.status||500),r.end()),e.error){const t=new Error(e.error.message);e.error.code&&(t.code=e.error.code),e.error.details&&(t.details=e.error.details);const n={};c.length&&(n.query=c),Object.keys(u).length&&(n.body=u),Pn(t,{contexts:{supabase:n}})}const t={type:"supabase",category:`db.${o}`,message:d},n={};return c.length&&(n.query=c),Object.keys(u).length&&(n.body=u),Object.keys(n).length&&(t.data=n),Sr(t),e},e=>{throw r&&(ot(r,500),r.end()),e}).then(...n))}}),Ro(e.prototype.then))}const jo=e=>{if(!e)return void(r&&g.warn("Supabase integration was not installed because no Supabase client was provided."));$o(e.constructor===Function?e:e.constructor),function(e){const t=e.auth;if(t&&!Do(e.auth)){for(const n of Oo){const r=t[n];r&&"function"==typeof e.auth[n]&&(e.auth[n]=Bo(r))}for(const n of xo){const r=t.admin[n];r&&"function"==typeof e.auth.admin[n]&&(e.auth.admin[n]=Bo(r,!0))}Ro(e.auth)}}(e)},Fo=e=>(e=>({setupOnce(){jo(e)},name:"Supabase"}))(e.supabaseClient);function Uo(e){return $i(Bi({},e),{path:"path"in e&&Array.isArray(e.path)?e.path.join("."):void 0,keys:"keys"in e?JSON.stringify(e.keys):void 0,unionErrors:"unionErrors"in e?JSON.stringify(e.unionErrors):void 0})}function Wo(e){return e.map(e=>"number"==typeof e?"<array>":e).join(".")}function Ho(e){const t=new Set;for(const n of e.issues){const e=Wo(n.path);e.length>0&&t.add(e)}const n=Array.from(t);if(0===n.length){let t="variable";if(e.issues.length>0){const n=e.issues[0];void 0!==n&&"expected"in n&&"string"==typeof n.expected&&(t=n.expected)}return`Failed to validate ${t}`}return`Failed to validate keys: ${te(n.join(", "),100)}`}function Vo(e,t=!1,n,r){var s;if(null==(s=n.exception)||!s.values||!r.originalException||!function(e){return $(e)&&"ZodError"===e.name&&Array.isArray(e.issues)}(r.originalException)||0===r.originalException.issues.length)return n;try{const s=(t?r.originalException.issues:r.originalException.issues.slice(0,e)).map(Uo);return t&&(Array.isArray(r.attachments)||(r.attachments=[]),r.attachments.push({filename:"zod_issues.json",data:JSON.stringify({issues:s})})),$i(Bi({},n),{exception:$i(Bi({},n.exception),{values:[$i(Bi({},n.exception.values[0]),{value:Ho(r.originalException)}),...n.exception.values.slice(1)]}),extra:$i(Bi({},n.extra),{"zoderror.issues":s.slice(0,e)})})}catch(e){return $i(Bi({},n),{extra:$i(Bi({},n.extra),{"zoderrors sentry integration parse error":{message:"an exception was thrown while processing ZodError within applyZodErrorsToEvent()",error:e instanceof Error?`${e.name}: ${e.message}\n${e.stack}`:"unknown"}})})}}const zo=(e={})=>{var t;const n=null!=(t=e.limit)?t:10;return{name:"ZodErrors",processEvent(t,r){return Vo(n,e.saveZodIssuesAsAttachment,t,r)}}},qo=e=>({name:"ThirdPartyErrorsFilter",setup(e){e.on("beforeEnvelope",e=>{en(e,(e,t)=>{if("event"===t){const t=Array.isArray(e)?e[1]:void 0;t&&(wo(t),e[1]=t)}})}),e.on("applyFrameMetadata",t=>{if(t.type)return;vo(e.getOptions().stackParser,t)})},processEvent(t){const n=function(e){const t=C(e);if(t)return t.filter(e=>!!e.filename).map(e=>e.module_metadata?Object.keys(e.module_metadata).filter(e=>e.startsWith(Ko)).map(e=>e.slice(Ko.length)):[])}(t);if(n){if(n["drop-error-if-contains-third-party-frames"===e.behaviour||"apply-tag-if-contains-third-party-frames"===e.behaviour?"some":"every"](t=>!t.some(t=>e.filterKeys.includes(t)))){if("drop-error-if-contains-third-party-frames"===e.behaviour||"drop-error-if-exclusively-contains-third-party-frames"===e.behaviour)return null;t.tags=$i(Bi({},t.tags),{third_party_code:!0})}}return t}});const Ko="_sentryBundlerPluginAppKey:",Go="flag.evaluation.";function Jo(e){const t=je().getScopeData().contexts.flags,n=t?t.values:[];return n.length&&(void 0===e.contexts&&(e.contexts={}),e.contexts.flags={values:[...n]}),e}function Yo(e,t,n=100){const s=je().getScopeData().contexts;s.flags||(s.flags={values:[]});!function(e,t,n,s){if("boolean"!=typeof n)return;if(e.length>s)return void(r&&g.error(`[Feature Flags] insertToFlagBuffer called on a buffer larger than maxSize=${s}`));const i=e.findIndex(e=>e.flag===t);-1!==i&&e.splice(i,1),e.length===s&&e.shift(),e.push({flag:t,result:n})}(s.flags.values,e,t,n)}function Qo(e,t,n=10){if("boolean"!=typeof t)return;const r=Dt();if(!r)return;const s=Pt(r).data;(`${Go}${e}`in s||Object.keys(s).filter(e=>e.startsWith(Go)).length<n)&&r.setAttribute(`${Go}${e}`,t)}const Xo=()=>({name:"FeatureFlags",processEvent(e,t,n){return Jo(e)},addFeatureFlag(e,t){Yo(e,t),Qo(e,t)}});function Zo(e,t,n,r,s="auto.http.browser"){if(!e.fetchData)return;const{method:i,url:o}=e.fetchData,a=Bt()&&t(o);if(e.endTimestamp&&a){const t=e.fetchData.__span;if(!t)return;const n=r[t];return void(n&&(function(e,t){var n,r;if(t.response){ot(e,t.response.status);const s=null==(r=null==(n=t.response)?void 0:n.headers)?void 0:r.get("content-length");if(s){const t=parseInt(s);t>0&&e.setAttribute("http.response_content_length",t)}}else t.error&&e.setStatus({code:2,message:"internal_error"});e.end()}(n,e),delete r[t]))}const l=!!Dt(),c=a&&l?Qi(function(e,t,n){const r=Wr(e);return{name:r?`${t} ${Hr(r)}`:t,attributes:ta(e,r,t,n)}}(o,i,s)):new Wi;if(e.fetchData.__span=c.spanContext().spanId,r[c.spanContext().spanId]=c,n(e.fetchData.url)){const t=e.args[0],n=e.args[1]||{},r=function(e,t,n){const r=go({span:n}),s=r["sentry-trace"],i=r.baggage;if(!s)return;const o=t.headers||(J(e)?e.headers:void 0);if(o){if(function(e){return typeof Headers<"u"&&K(e,Headers)}(o)){const e=new Headers(o);if(e.get("sentry-trace")||e.set("sentry-trace",s),i){const t=e.get("baggage");t?ea(t)||e.set("baggage",`${t},${i}`):e.set("baggage",i)}return e}if(Array.isArray(o)){const e=[...o];o.find(e=>"sentry-trace"===e[0])||e.push(["sentry-trace",s]);const t=o.find(e=>"baggage"===e[0]&&ea(e[1]));return i&&!t&&e.push(["baggage",i]),e}{const e="sentry-trace"in o?o["sentry-trace"]:void 0,t="baggage"in o?o.baggage:void 0,n=t?Array.isArray(t)?[...t]:[t]:[],r=t&&(Array.isArray(t)?t.find(e=>ea(e)):ea(t));return i&&!r&&n.push(i),$i(Bi({},o),{"sentry-trace":null!=e?e:s,baggage:n.length>0?n.join(","):void 0})}}return Bi({},r)}(t,n,Bt()&&l?c:void 0);r&&(e.args[1]=n,n.headers=r)}const u=He();if(u){const t={input:e.args,response:e.response,startTimestamp:e.startTimestamp,endTimestamp:e.endTimestamp};u.emit("beforeOutgoingRequestSpan",c,t)}return c}function ea(e){return e.split(",").some(e=>e.trim().startsWith(ut))}function ta(e,t,n,r){const s={url:e,type:"fetch","http.method":n,[Je]:r,[Ge]:"http.client"};return t&&(Ur(t)||(s["http.url"]=t.href,s["server.address"]=t.host),t.search&&(s["http.query"]=t.search),t.hash&&(s["http.fragment"]=t.hash)),s}function na(e,t={},n=je()){const{message:r,name:s,email:i,url:o,source:a,associatedEventId:l,tags:c}=e,u={contexts:{feedback:{contact_email:i,name:s,message:r,url:o,source:a,associated_event_id:l}},type:"feedback",level:"info",tags:c},d=(null==n?void 0:n.getClient())||He();return d&&d.emit("beforeSendFeedback",u,t),n.captureEvent(u,t)}const ra={[Je]:"auto.console.logging"},sa=(e={})=>{const t=e.levels||c;return{name:"ConsoleLogs",setup(e){const{enableLogs:n,_experiments:s,normalizeDepth:i=3,normalizeMaxBreadth:o=1e3}=e.getOptions();(null!=n?n:null==s?void 0:s.enableLogs)?Dr(({args:n,level:r})=>{if(He()!==e||!t.includes(r))return;if("assert"===r){if(!n[0]){const e=n.slice(1);or({level:"error",message:e.length>0?`Assertion failed: ${ia(e,i,o)}`:"Assertion failed",attributes:ra})}return}const s="log"===r;or({level:s?"info":r,message:ia(n,i,o),severityNumber:s?10:void 0,attributes:ra})}):r&&g.warn("`enableLogs` is not enabled, ConsoleLogs integration disabled")}}};function ia(e,t,n){return"util"in s&&"function"==typeof s.util.format?s.util.format(...e):function(e,t,n){return e.map(e=>H(e)?String(e):JSON.stringify(Jt(e,t,n))).join(" ")}(e,t,n)}function oa(){return!(typeof __SENTRY_BROWSER_BUNDLE__<"u"&&__SENTRY_BROWSER_BUNDLE__)&&"[object process]"===Object.prototype.toString.call(typeof process<"u"?process:0)}function aa(){return typeof window<"u"&&(!oa()||function(){const e=s.process;return"renderer"===(null==e?void 0:e.type)}())}const la=s,ca=la.document,ua=la.navigator,da="Report a Bug",pa=(e,t={includeReplay:!0})=>{if(!e.message)throw new Error("Unable to submit feedback with empty message");const n=He();if(!n)throw new Error("No client setup, cannot send feedback.");e.tags&&Object.keys(e.tags).length&&je().setTags(e.tags);const r=na(Bi({source:"api",url:Z()},e),t);return new Promise((e,t)=>{const s=setTimeout(()=>t("Unable to determine if Feedback was correctly sent."),3e4),i=n.on("afterSendEvent",(n,o)=>{if(n.event_id===r)return clearTimeout(s),i(),o&&"number"==typeof o.statusCode&&o.statusCode>=200&&o.statusCode<300?e(r):o&&"number"==typeof o.statusCode&&0===o.statusCode?t("Unable to send Feedback. This is because of network issues, or because you are using an ad-blocker."):o&&"number"==typeof o.statusCode&&403===o.statusCode?t("Unable to send Feedback. This could be because this domain is not in your list of allowed domains."):t("Unable to send Feedback. This could be because of network issues, or because you are using an ad-blocker")})})},ha=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function ma(e,t){return $i(Bi(Bi({},e),t),{tags:Bi(Bi({},e.tags),t.tags),onFormOpen:()=>{var n,r;null==(n=t.onFormOpen)||n.call(t),null==(r=e.onFormOpen)||r.call(e)},onFormClose:()=>{var n,r;null==(n=t.onFormClose)||n.call(t),null==(r=e.onFormClose)||r.call(e)},onSubmitSuccess:(n,r)=>{var s,i;null==(s=t.onSubmitSuccess)||s.call(t,n,r),null==(i=e.onSubmitSuccess)||i.call(e,n,r)},onSubmitError:n=>{var r,s;null==(r=t.onSubmitError)||r.call(t,n),null==(s=e.onSubmitError)||s.call(e,n)},onFormSubmitted:()=>{var n,r;null==(n=t.onFormSubmitted)||n.call(t),null==(r=e.onFormSubmitted)||r.call(e)},themeDark:Bi(Bi({},e.themeDark),t.themeDark),themeLight:Bi(Bi({},e.themeLight),t.themeLight)})}function ga(e,t){return Object.entries(t).forEach(([t,n])=>{e.setAttributeNS(null,t,n)}),e}function fa({triggerLabel:e,triggerAriaLabel:t,shadow:n,styleNonce:r}){const s=ca.createElement("button");if(s.type="button",s.className="widget__actor",s.ariaHidden="false",s.ariaLabel=t||e||da,s.appendChild(function(){const e=e=>la.document.createElementNS("http://www.w3.org/2000/svg",e),t=ga(e("svg"),{width:"20",height:"20",viewBox:"0 0 20 20",fill:"var(--actor-color, var(--foreground))"}),n=ga(e("g"),{clipPath:"url(#clip0_57_80)"}),r=ga(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(r);const s=e("defs"),i=ga(e("clipPath"),{id:"clip0_57_80"}),o=ga(e("rect"),{width:"20",height:"20",fill:"white"});return i.appendChild(o),s.appendChild(i),t.appendChild(s).appendChild(i).appendChild(o),t}()),e){const t=ca.createElement("span");t.appendChild(ca.createTextNode(e)),s.appendChild(t)}const i=function(e){const t=ca.createElement("style");return t.textContent='\n.widget__actor {\n  position: fixed;\n  z-index: var(--z-index);\n  margin: var(--page-margin);\n  inset: var(--actor-inset);\n\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 16px;\n\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 600;\n  line-height: 1.14em;\n  text-decoration: none;\n\n  background: var(--actor-background, var(--background));\n  border-radius: var(--actor-border-radius, 1.7em/50%);\n  border: var(--actor-border, var(--border));\n  box-shadow: var(--actor-box-shadow, var(--box-shadow));\n  color: var(--actor-color, var(--foreground));\n  fill: var(--actor-color, var(--foreground));\n  cursor: pointer;\n  opacity: 1;\n  transition: transform 0.2s ease-in-out;\n  transform: translate(0, 0) scale(1);\n}\n.widget__actor[aria-hidden="true"] {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n  transform: translate(0, 16px) scale(0.98);\n}\n\n.widget__actor:hover {\n  background: var(--actor-hover-background, var(--background));\n  filter: var(--interactive-filter);\n}\n\n.widget__actor svg {\n  width: 1.14em;\n  height: 1.14em;\n}\n\n@media (max-width: 600px) {\n  .widget__actor span {\n    display: none;\n  }\n}\n',e&&t.setAttribute("nonce",e),t}(r);return{el:s,appendToDom(){n.appendChild(i),n.appendChild(s)},removeFromDom(){s.remove(),i.remove()},show(){s.ariaHidden="false"},hide(){s.ariaHidden="true"}}}const ba="rgba(88, 74, 192, 1)",ya={foreground:"#2b2233",background:"#ffffff",accentForeground:"white",accentBackground:ba,successColor:"#268d75",errorColor:"#df3338",border:"1.5px solid rgba(41, 35, 47, 0.13)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(95%)"},va={foreground:"#ebe6ef",background:"#29232f",accentForeground:"white",accentBackground:ba,successColor:"#2da98c",errorColor:"#f55459",border:"1.5px solid rgba(235, 230, 239, 0.15)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(150%)"};function wa(e){return`\n  --foreground: ${e.foreground};\n  --background: ${e.background};\n  --accent-foreground: ${e.accentForeground};\n  --accent-background: ${e.accentBackground};\n  --success-color: ${e.successColor};\n  --error-color: ${e.errorColor};\n  --border: ${e.border};\n  --box-shadow: ${e.boxShadow};\n  --outline: ${e.outline};\n  --interactive-filter: ${e.interactiveFilter};\n  `}const Sa=({lazyLoadIntegration:e,getModalIntegration:t,getScreenshotIntegration:n})=>({id:r="sentry-feedback",autoInject:s=!0,showBranding:i=!0,isEmailRequired:o=!1,isNameRequired:a=!1,showEmail:l=!0,showName:c=!0,enableScreenshot:u=!0,useSentryUser:d={email:"email",name:"username"},tags:p,styleNonce:h,scriptNonce:m,colorScheme:f="system",themeLight:b={},themeDark:y={},addScreenshotButtonLabel:v="Add a screenshot",cancelButtonLabel:w="Cancel",confirmButtonLabel:S="Confirm",emailLabel:_="Email",emailPlaceholder:I="your.email@example.org",formTitle:C="Report a Bug",isRequiredLabel:k="(required)",messageLabel:P="Description",messagePlaceholder:E="What's the bug? What did you expect?",nameLabel:T="Name",namePlaceholder:O="Your Name",removeScreenshotButtonLabel:x="Remove screenshot",submitButtonLabel:M="Send Bug Report",successMessageText:A="Thank you for your report!",triggerLabel:R=da,triggerAriaLabel:D="",onFormOpen:L,onFormClose:B,onSubmitSuccess:$,onSubmitError:N,onFormSubmitted:j}={})=>{const F={id:r,autoInject:s,showBranding:i,isEmailRequired:o,isNameRequired:a,showEmail:l,showName:c,enableScreenshot:u,useSentryUser:d,tags:p,styleNonce:h,scriptNonce:m,colorScheme:f,themeDark:y,themeLight:b,triggerLabel:R,triggerAriaLabel:D,cancelButtonLabel:w,submitButtonLabel:M,confirmButtonLabel:S,formTitle:C,emailLabel:_,emailPlaceholder:I,messageLabel:P,messagePlaceholder:E,nameLabel:T,namePlaceholder:O,successMessageText:A,isRequiredLabel:k,addScreenshotButtonLabel:v,removeScreenshotButtonLabel:x,onFormClose:B,onFormOpen:L,onSubmitError:N,onSubmitSuccess:$,onFormSubmitted:j};let U=null,W=[];const H=e=>{if(!U){const t=ca.createElement("div");t.id=String(e.id),ca.body.appendChild(t),U=t.attachShadow({mode:"open"}),U.appendChild(function({colorScheme:e,themeDark:t,themeLight:n,styleNonce:r}){const s=ca.createElement("style");return s.textContent=`\n:host {\n  --font-family: system-ui, 'Helvetica Neue', Arial, sans-serif;\n  --font-size: 14px;\n  --z-index: 100000;\n\n  --page-margin: 16px;\n  --inset: auto 0 0 auto;\n  --actor-inset: var(--inset);\n\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n\n  ${"system"!==e?"color-scheme: only light;":""}\n\n  ${wa("dark"===e?Bi(Bi({},va),t):Bi(Bi({},ya),n))}\n}\n\n${"system"===e?`\n@media (prefers-color-scheme: dark) {\n  :host {\n    ${wa(Bi(Bi({},va),t))}\n  }\n}`:""}\n}\n`,r&&s.setAttribute("nonce",r),s}(e))}return U},V=async r=>{const s=r.enableScreenshot&&!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(ua.userAgent)||/Macintosh/i.test(ua.userAgent)&&ua.maxTouchPoints&&ua.maxTouchPoints>1||!isSecureContext);let i,o;try{i=(t?t():await e("feedbackModalIntegration",m))(),Hn(i)}catch(e){throw ha&&g.error("[Feedback] Error when trying to load feedback integrations. Try using `feedbackSyncIntegration` in your `Sentry.init`."),new Error("[Feedback] Missing feedback modal integration!")}try{const t=s?n?n():await e("feedbackScreenshotIntegration",m):void 0;t&&(o=t(),Hn(o))}catch(e){ha&&g.error("[Feedback] Missing feedback screenshot integration. Proceeding without screenshots.")}const a=i.createDialog({options:$i(Bi({},r),{onFormClose:()=>{var e;null==a||a.close(),null==(e=r.onFormClose)||e.call(r)},onFormSubmitted:()=>{var e;null==a||a.close(),null==(e=r.onFormSubmitted)||e.call(r)}}),screenshotIntegration:o,sendFeedback:pa,shadow:H(r)});return a},z=(e,t={})=>{const n=ma(F,t),r="string"==typeof e?ca.querySelector(e):"function"==typeof e.addEventListener?e:null;if(!r)throw ha&&g.error("[Feedback] Unable to attach to target element"),new Error("Unable to attach to target element");let s=null;const i=async()=>{s||(s=await V($i(Bi({},n),{onFormSubmitted:()=>{var e;null==s||s.removeFromDom(),null==(e=n.onFormSubmitted)||e.call(n)}}))),s.appendToDom(),s.open()};r.addEventListener("click",i);const o=()=>{W=W.filter(e=>e!==o),null==s||s.removeFromDom(),s=null,r.removeEventListener("click",i)};return W.push(o),o},q=(e={})=>{const t=ma(F,e),n=H(t),r=fa({triggerLabel:t.triggerLabel,triggerAriaLabel:t.triggerAriaLabel,shadow:n,styleNonce:h});return z(r.el,$i(Bi({},t),{onFormOpen(){r.hide()},onFormClose(){r.show()},onFormSubmitted(){r.show()}})),r};return{name:"Feedback",setupOnce(){!aa()||!F.autoInject||("loading"===ca.readyState?ca.addEventListener("DOMContentLoaded",()=>q().appendToDom()):q().appendToDom())},attachTo:z,createWidget(e={}){const t=q(ma(F,e));return t.appendToDom(),t},async createForm(e={}){return V(ma(F,e))},remove(){var e;U&&(null==(e=U.parentElement)||e.remove(),U=null),W.forEach(e=>e()),W=[]}}};var _a,Ia,Ca,ka,Pa,Ea,Ta,Oa={},xa=[],Ma=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Aa=Array.isArray;function Ra(e,t){for(var n in t)e[n]=t[n];return e}function Da(e){var t=e.parentNode;t&&t.removeChild(e)}function La(e,t,n){var r,s,i,o={};for(i in t)"key"==i?r=t[i]:"ref"==i?s=t[i]:o[i]=t[i];if(arguments.length>2&&(o.children=arguments.length>3?_a.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(i in e.defaultProps)void 0===o[i]&&(o[i]=e.defaultProps[i]);return Ba(e,o,r,s,null)}function Ba(e,t,n,r,s){var i={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null!=s?s:++Ca,__i:-1,__u:0};return null==s&&null!=Ia.vnode&&Ia.vnode(i),i}function $a(e){return e.children}function Na(e,t){this.props=e,this.context=t}function ja(e,t){if(null==t)return e.__?ja(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?ja(e):null}function Fa(e,t,n){var r,s=e.__v,i=s.__e,o=e.__P;if(o)return(r=Ra({},s)).__v=s.__v+1,Ia.vnode&&Ia.vnode(r),Qa(o,r,s,e.__n,void 0!==o.ownerSVGElement,32&s.__u?[i]:null,t,null!=i?i:ja(s),!!(32&s.__u),n),r.__.__k[r.__i]=r,r.__d=void 0,r.__e!=i&&Ua(r),r}function Ua(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return Ua(e)}}function Wa(e){(!e.__d&&(e.__d=!0)&&ka.push(e)&&!Ha.__r++||Pa!==Ia.debounceRendering)&&((Pa=Ia.debounceRendering)||Ea)(Ha)}function Ha(){var e,t,n,r=[],s=[];for(ka.sort(Ta);e=ka.shift();)e.__d&&(n=ka.length,t=Fa(e,r,s)||t,0===n||ka.length>n?(Xa(r,t,s),s.length=r.length=0,t=void 0,ka.sort(Ta)):t&&Ia.__c&&Ia.__c(t,xa));t&&Xa(r,t,s),Ha.__r=0}function Va(e,t,n,r,s,i,o,a,l,c,u){var d,p,h,m,g,f=r&&r.__k||xa,b=t.length;for(n.__d=l,function(e,t,n){var r,s,i,o,a,l=t.length,c=n.length,u=c,d=0;for(e.__k=[],r=0;r<l;r++)null!=(s=e.__k[r]=null==(s=t[r])||"boolean"==typeof s||"function"==typeof s?null:"string"==typeof s||"number"==typeof s||"bigint"==typeof s||s.constructor==String?Ba(null,s,null,null,s):Aa(s)?Ba($a,{children:s},null,null,null):void 0===s.constructor&&s.__b>0?Ba(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s)?(s.__=e,s.__b=e.__b+1,a=qa(s,n,o=r+d,u),s.__i=a,i=null,-1!==a&&(u--,(i=n[a])&&(i.__u|=131072)),null==i||null===i.__v?(-1==a&&d--,"function"!=typeof s.type&&(s.__u|=65536)):a!==o&&(a===o+1?d++:a>o?u>l-o?d+=a-o:d--:d=a<o&&a==o-1?a-o:0,a!==r+d&&(s.__u|=65536))):(i=n[r])&&null==i.key&&i.__e&&(i.__e==e.__d&&(e.__d=ja(i)),el(i,i,!1),n[r]=null,u--);if(u)for(r=0;r<c;r++)null!=(i=n[r])&&!(131072&i.__u)&&(i.__e==e.__d&&(e.__d=ja(i)),el(i,i))}(n,t,f),l=n.__d,d=0;d<b;d++)null!=(h=n.__k[d])&&"boolean"!=typeof h&&"function"!=typeof h&&(p=-1===h.__i?Oa:f[h.__i]||Oa,h.__i=d,Qa(e,h,p,s,i,o,a,l,c,u),m=h.__e,h.ref&&p.ref!=h.ref&&(p.ref&&Za(p.ref,null,h),u.push(h.ref,h.__c||m,h)),null==g&&null!=m&&(g=m),65536&h.__u||p.__k===h.__k?l=za(h,l,e):"function"==typeof h.type&&void 0!==h.__d?l=h.__d:m&&(l=m.nextSibling),h.__d=void 0,h.__u&=-196609);n.__d=l,n.__e=g}function za(e,t,n){var r,s;if("function"==typeof e.type){for(r=e.__k,s=0;r&&s<r.length;s++)r[s]&&(r[s].__=e,t=za(r[s],t,n));return t}e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8===t.nodeType);return t}function qa(e,t,n,r){var s=e.key,i=e.type,o=n-1,a=n+1,l=t[n];if(null===l||l&&s==l.key&&i===l.type)return n;if(r>(null==l||131072&l.__u?0:1))for(;o>=0||a<t.length;){if(o>=0){if((l=t[o])&&!(131072&l.__u)&&s==l.key&&i===l.type)return o;o--}if(a<t.length){if((l=t[a])&&!(131072&l.__u)&&s==l.key&&i===l.type)return a;a++}}return-1}function Ka(e,t,n){"-"===t[0]?e.setProperty(t,null!=n?n:""):e[t]=null==n?"":"number"!=typeof n||Ma.test(t)?n:n+"px"}function Ga(e,t,n,r,s){var i;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||Ka(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||Ka(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])i=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r?n.u=r.u:(n.u=Date.now(),e.addEventListener(t,i?Ya:Ja,i)):e.removeEventListener(t,i?Ya:Ja,i);else{if(s)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==t&&"height"!==t&&"href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&"rowSpan"!==t&&"colSpan"!==t&&"role"!==t&&t in e)try{e[t]=null!=n?n:"";break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,n))}}function Ja(e){if(this.l){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(Ia.event?Ia.event(e):e)}}function Ya(e){if(this.l)return this.l[e.type+!0](Ia.event?Ia.event(e):e)}function Qa(e,t,n,r,s,i,o,a,l,c){var u,d,p,h,m,g,f,b,y,v,w,S,_,I,C,k=t.type;if(void 0!==t.constructor)return null;128&n.__u&&(l=!!(32&n.__u),i=[a=t.__e=n.__e]),(u=Ia.__b)&&u(t);e:if("function"==typeof k)try{if(b=t.props,y=(u=k.contextType)&&r[u.__c],v=u?y?y.props.value:u.__:r,n.__c?f=(d=t.__c=n.__c).__=d.__E:("prototype"in k&&k.prototype.render?t.__c=d=new k(b,v):(t.__c=d=new Na(b,v),d.constructor=k,d.render=tl),y&&y.sub(d),d.props=b,d.state||(d.state={}),d.context=v,d.__n=r,p=d.__d=!0,d.__h=[],d._sb=[]),null==d.__s&&(d.__s=d.state),null!=k.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=Ra({},d.__s)),Ra(d.__s,k.getDerivedStateFromProps(b,d.__s))),h=d.props,m=d.state,d.__v=t,p)null==k.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==k.getDerivedStateFromProps&&b!==h&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(b,v),!d.__e&&(null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(b,d.__s,v)||t.__v===n.__v)){for(t.__v!==n.__v&&(d.props=b,d.state=d.__s,d.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(e){e&&(e.__=t)}),w=0;w<d._sb.length;w++)d.__h.push(d._sb[w]);d._sb=[],d.__h.length&&o.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(b,d.__s,v),null!=d.componentDidUpdate&&d.__h.push(function(){d.componentDidUpdate(h,m,g)})}if(d.context=v,d.props=b,d.__P=e,d.__e=!1,S=Ia.__r,_=0,"prototype"in k&&k.prototype.render){for(d.state=d.__s,d.__d=!1,S&&S(t),u=d.render(d.props,d.state,d.context),I=0;I<d._sb.length;I++)d.__h.push(d._sb[I]);d._sb=[]}else do{d.__d=!1,S&&S(t),u=d.render(d.props,d.state,d.context),d.state=d.__s}while(d.__d&&++_<25);d.state=d.__s,null!=d.getChildContext&&(r=Ra(Ra({},r),d.getChildContext())),p||null==d.getSnapshotBeforeUpdate||(g=d.getSnapshotBeforeUpdate(h,m)),Va(e,Aa(C=null!=u&&u.type===$a&&null==u.key?u.props.children:u)?C:[C],t,n,r,s,i,o,a,l,c),d.base=t.__e,t.__u&=-161,d.__h.length&&o.push(d),f&&(d.__E=d.__=null)}catch(e){t.__v=null,l||null!=i?(t.__e=a,t.__u|=l?160:32,i[i.indexOf(a)]=null):(t.__e=n.__e,t.__k=n.__k),Ia.__e(e,t,n)}else null==i&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=function(e,t,n,r,s,i,o,a,l){var c,u,d,p,h,m,g,f=n.props,b=t.props,y=t.type;if("svg"===y&&(s=!0),null!=i)for(c=0;c<i.length;c++)if((h=i[c])&&"setAttribute"in h==!!y&&(y?h.localName===y:3===h.nodeType)){e=h,i[c]=null;break}if(null==e){if(null===y)return document.createTextNode(b);e=s?document.createElementNS("http://www.w3.org/2000/svg",y):document.createElement(y,b.is&&b),i=null,a=!1}if(null===y)f===b||a&&e.data===b||(e.data=b);else{if(i=i&&_a.call(e.childNodes),f=n.props||Oa,!a&&null!=i)for(f={},c=0;c<e.attributes.length;c++)f[(h=e.attributes[c]).name]=h.value;for(c in f)h=f[c],"children"==c||("dangerouslySetInnerHTML"==c?d=h:"key"===c||c in b||Ga(e,c,null,h,s));for(c in b)h=b[c],"children"==c?p=h:"dangerouslySetInnerHTML"==c?u=h:"value"==c?m=h:"checked"==c?g=h:"key"===c||a&&"function"!=typeof h||f[c]===h||Ga(e,c,h,f[c],s);if(u)a||d&&(u.__html===d.__html||u.__html===e.innerHTML)||(e.innerHTML=u.__html),t.__k=[];else if(d&&(e.innerHTML=""),Va(e,Aa(p)?p:[p],t,n,r,s&&"foreignObject"!==y,i,o,i?i[0]:n.__k&&ja(n,0),a,l),null!=i)for(c=i.length;c--;)null!=i[c]&&Da(i[c]);a||(c="value",void 0!==m&&(m!==e[c]||"progress"===y&&!m||"option"===y&&m!==f[c])&&Ga(e,c,m,f[c],!1),c="checked",void 0!==g&&g!==e[c]&&Ga(e,c,g,f[c],!1))}return e}(n.__e,t,n,r,s,i,o,l,c);(u=Ia.diffed)&&u(t)}function Xa(e,t,n){for(var r=0;r<n.length;r++)Za(n[r],n[++r],n[++r]);Ia.__c&&Ia.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(e){Ia.__e(e,t.__v)}})}function Za(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){Ia.__e(e,n)}}function el(e,t,n){var r,s;if(Ia.unmount&&Ia.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||Za(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){Ia.__e(e,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(s=0;s<r.length;s++)r[s]&&el(r[s],t,n||"function"!=typeof e.type);n||null==e.__e||Da(e.__e),e.__=e.__e=e.__d=void 0}function tl(e,t,n){return this.constructor(e,n)}_a=xa.slice,Ia={__e:function(e,t,n,r){for(var s,i,o;t=t.__;)if((s=t.__c)&&!s.__)try{if((i=s.constructor)&&null!=i.getDerivedStateFromError&&(s.setState(i.getDerivedStateFromError(e)),o=s.__d),null!=s.componentDidCatch&&(s.componentDidCatch(e,r||{}),o=s.__d),o)return s.__E=s}catch(t){e=t}throw e}},Ca=0,Na.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=Ra({},this.state),"function"==typeof e&&(e=e(Ra({},n),this.props)),e&&Ra(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),Wa(this))},Na.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Wa(this))},Na.prototype.render=$a,ka=[],Ea="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ta=function(e,t){return e.__v.__b-t.__v.__b},Ha.__r=0;var nl,rl,sl,il,ol=0,al=[],ll=[],cl=Ia,ul=cl.__b,dl=cl.__r,pl=cl.diffed,hl=cl.__c,ml=cl.unmount,gl=cl.__;function fl(e,t){cl.__h&&cl.__h(rl,e,ol||t),ol=0;var n=rl.__H||(rl.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:ll}),n.__[e]}function bl(e){return ol=1,yl(Tl,e)}function yl(e,t,n){var r=fl(nl++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):Tl(void 0,t),function(e){var t=r.__N?r.__N[0]:r.__[0],n=r.t(t,e);t!==n&&(r.__N=[n,r.__[1]],r.__c.setState({}))}],r.__c=rl,!rl.u)){var s=function(e,t,n){if(!r.__c.__H)return!0;var s=r.__c.__H.__.filter(function(e){return!!e.__c});if(s.every(function(e){return!e.__N}))return!i||i.call(this,e,t,n);var o=!1;return s.forEach(function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(o=!0)}}),!(!o&&r.__c.props===e)&&(!i||i.call(this,e,t,n))};rl.u=!0;var i=rl.shouldComponentUpdate,o=rl.componentWillUpdate;rl.componentWillUpdate=function(e,t,n){if(this.__e){var r=i;i=void 0,s(e,t,n),i=r}o&&o.call(this,e,t,n)},rl.shouldComponentUpdate=s}return r.__N||r.__}function vl(e,t){var n=fl(nl++,4);!cl.__s&&El(n.__H,t)&&(n.__=e,n.i=t,rl.__h.push(n))}function wl(e,t){var n=fl(nl++,7);return El(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function Sl(e,t){return ol=8,wl(function(){return e},t)}function _l(){for(var e;e=al.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(kl),e.__H.__h.forEach(Pl),e.__H.__h=[]}catch(t){e.__H.__h=[],cl.__e(t,e.__v)}}cl.__b=function(e){rl=null,ul&&ul(e)},cl.__=function(e,t){t.__k&&t.__k.__m&&(e.__m=t.__k.__m),gl&&gl(e,t)},cl.__r=function(e){dl&&dl(e),nl=0;var t=(rl=e.__c).__H;t&&(sl===rl?(t.__h=[],rl.__h=[],t.__.forEach(function(e){e.__N&&(e.__=e.__N),e.__V=ll,e.__N=e.i=void 0})):(t.__h.forEach(kl),t.__h.forEach(Pl),t.__h=[],nl=0)),sl=rl},cl.diffed=function(e){pl&&pl(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==al.push(t)&&il===cl.requestAnimationFrame||((il=cl.requestAnimationFrame)||Cl)(_l)),t.__H.__.forEach(function(e){e.i&&(e.__H=e.i),e.__V!==ll&&(e.__=e.__V),e.i=void 0,e.__V=ll})),sl=rl=null},cl.__c=function(e,t){t.some(function(e){try{e.__h.forEach(kl),e.__h=e.__h.filter(function(e){return!e.__||Pl(e)})}catch(n){t.some(function(e){e.__h&&(e.__h=[])}),t=[],cl.__e(n,e.__v)}}),hl&&hl(e,t)},cl.unmount=function(e){ml&&ml(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(e){try{kl(e)}catch(e){t=e}}),n.__H=void 0,t&&cl.__e(t,n.__v))};var Il="function"==typeof requestAnimationFrame;function Cl(e){var t,n=function(){clearTimeout(r),Il&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);Il&&(t=requestAnimationFrame(n))}function kl(e){var t=rl,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),rl=t}function Pl(e){var t=rl;e.__c=e.__(),rl=t}function El(e,t){return!e||e.length!==t.length||t.some(function(t,n){return t!==e[n]})}function Tl(e,t){return"function"==typeof t?t(e):t}const Ol=Object.defineProperty({__proto__:null,useCallback:Sl,useContext:function(e){var t=rl.context[e.__c],n=fl(nl++,9);return n.c=e,t?(null==n.__&&(n.__=!0,t.sub(rl)),t.props.value):e.__},useDebugValue:function(e,t){cl.useDebugValue&&cl.useDebugValue(t?t(e):e)},useEffect:function(e,t){var n=fl(nl++,3);!cl.__s&&El(n.__H,t)&&(n.__=e,n.i=t,rl.__H.__h.push(n))},useErrorBoundary:function(e){var t=fl(nl++,10),n=bl();return t.__=e,rl.componentDidCatch||(rl.componentDidCatch=function(e,r){t.__&&t.__(e,r),n[1](e)}),[n[0],function(){n[1](void 0)}]},useId:function(){var e=fl(nl++,11);if(!e.__){for(var t=rl.__v;null!==t&&!t.__m&&null!==t.__;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__},useImperativeHandle:function(e,t,n){ol=6,vl(function(){return"function"==typeof e?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},null==n?n:n.concat(e))},useLayoutEffect:vl,useMemo:wl,useReducer:yl,useRef:function(e){return ol=5,wl(function(){return{current:e}},[])},useState:bl},Symbol.toStringTag,{value:"Module"});function xl(){const e=e=>ca.createElementNS("http://www.w3.org/2000/svg",e),t=ga(e("svg"),{width:"32",height:"30",viewBox:"0 0 72 66",fill:"inherit"}),n=ga(e("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});return t.appendChild(n),t}function Ml({options:e}){const t=wl(()=>({__html:xl().outerHTML}),[]);return La("h2",{class:"dialog__header"},La("span",{class:"dialog__title"},e.formTitle),e.showBranding?La("a",{class:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer",dangerouslySetInnerHTML:t}):null)}function Al(e,t){const n=e.get(t);return"string"==typeof n?n.trim():""}function Rl({options:e,defaultEmail:t,defaultName:n,onFormClose:r,onSubmit:s,onSubmitSuccess:i,onSubmitError:o,showEmail:a,showName:l,screenshotInput:c}){const{tags:u,addScreenshotButtonLabel:d,removeScreenshotButtonLabel:p,cancelButtonLabel:h,emailLabel:m,emailPlaceholder:f,isEmailRequired:b,isNameRequired:y,messageLabel:v,messagePlaceholder:w,nameLabel:S,namePlaceholder:_,submitButtonLabel:I,isRequiredLabel:C}=e,[k,P]=bl(!1),[E,T]=bl(null),[O,x]=bl(!1),M=null==c?void 0:c.input,[A,R]=bl(null),D=Sl(e=>{R(e),x(!1)},[]),L=Sl(e=>{const t=function(e,t){const n=[];return t.isNameRequired&&!e.name&&n.push(t.nameLabel),t.isEmailRequired&&!e.email&&n.push(t.emailLabel),e.message||n.push(t.messageLabel),n}(e,{emailLabel:m,isEmailRequired:b,isNameRequired:y,messageLabel:v,nameLabel:S});return t.length>0?T(`Please enter in the following required fields: ${t.join(", ")}`):T(null),0===t.length},[m,b,y,v,S]),B=Sl(async e=>{P(!0);try{if(e.preventDefault(),!(e.target instanceof HTMLFormElement))return;const t=new FormData(e.target),n=await(c&&O?c.value():void 0),r={name:Al(t,"name"),email:Al(t,"email"),message:Al(t,"message"),attachments:n?[n]:void 0};if(!L(r))return;try{const e=await s({name:r.name,email:r.email,message:r.message,source:"widget",tags:u},{attachments:r.attachments});i(r,e)}catch(e){ha&&g.error(e),T(e),o(e)}}finally{P(!1)}},[c&&O,i,o]);return La("form",{class:"form",onSubmit:B},M&&O?La(M,{onError:D}):null,La("fieldset",{class:"form__right","data-sentry-feedback":!0,disabled:k},La("div",{class:"form__top"},E?La("div",{class:"form__error-container"},E):null,l?La("label",{for:"name",class:"form__label"},La(Dl,{label:S,isRequiredLabel:C,isRequired:y}),La("input",{class:"form__input",defaultValue:n,id:"name",name:"name",placeholder:_,required:y,type:"text"})):La("input",{"aria-hidden":!0,value:n,name:"name",type:"hidden"}),a?La("label",{for:"email",class:"form__label"},La(Dl,{label:m,isRequiredLabel:C,isRequired:b}),La("input",{class:"form__input",defaultValue:t,id:"email",name:"email",placeholder:f,required:b,type:"email"})):La("input",{"aria-hidden":!0,value:t,name:"email",type:"hidden"}),La("label",{for:"message",class:"form__label"},La(Dl,{label:v,isRequiredLabel:C,isRequired:!0}),La("textarea",{autoFocus:!0,class:"form__input form__input--textarea",id:"message",name:"message",placeholder:w,required:!0,rows:5})),M?La("label",{for:"screenshot",class:"form__label"},La("button",{class:"btn btn--default",disabled:k,type:"button",onClick:()=>{R(null),x(e=>!e)}},O?p:d),A?La("div",{class:"form__error-container"},A.message):null):null),La("div",{class:"btn-group"},La("button",{class:"btn btn--primary",disabled:k,type:"submit"},I),La("button",{class:"btn btn--default",disabled:k,type:"button",onClick:r},h))))}function Dl({label:e,isRequired:t,isRequiredLabel:n}){return La("span",{class:"form__label__text"},e,t&&La("span",{class:"form__label__text--required"},n))}function Ll(){const e=e=>la.document.createElementNS("http://www.w3.org/2000/svg",e),t=ga(e("svg"),{width:"16",height:"17",viewBox:"0 0 16 17",fill:"inherit"}),n=ga(e("g"),{clipPath:"url(#clip0_57_156)"}),r=ga(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),s=ga(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(s,r);const i=e("defs"),o=ga(e("clipPath"),{id:"clip0_57_156"}),a=ga(e("rect"),{width:"16",height:"16",fill:"white",transform:"translate(0 0.5)"});return o.appendChild(a),i.appendChild(o),t.appendChild(i).appendChild(o).appendChild(a),t}function Bl(e){var t=e,{open:n,onFormSubmitted:r}=t,s=Ni(t,["open","onFormSubmitted"]);const i=s.options,o=wl(()=>({__html:Ll().outerHTML}),[]),[a,l]=bl(null),c=Sl(()=>{a&&(clearTimeout(a),l(null)),r()},[a]),u=Sl((e,t)=>{s.onSubmitSuccess(e,t),l(setTimeout(()=>{r(),l(null)},5e3))},[r]);return La($a,null,a?La("div",{class:"success__position",onClick:c},La("div",{class:"success__content"},i.successMessageText,La("span",{class:"success__icon",dangerouslySetInnerHTML:o}))):La("dialog",{class:"dialog",onClick:i.onFormClose,open:n},La("div",{class:"dialog__position"},La("div",{class:"dialog__content",onClick:e=>{e.stopPropagation()}},La(Ml,{options:i}),La(Rl,$i(Bi({},s),{onSubmitSuccess:u}))))))}const $l=()=>({name:"FeedbackModal",setupOnce(){},createDialog:({options:e,screenshotIntegration:t,sendFeedback:n,shadow:r})=>{const s=r,i=e.useSentryUser,o=function(){const e=je().getUser(),t=Fe().getUser(),n=Ue().getUser();return e&&Object.keys(e).length?e:t&&Object.keys(t).length?t:n}(),a=ca.createElement("div"),l=function(e){const t=ca.createElement("style");return t.textContent="\n:host {\n  --dialog-inset: var(--inset);\n}\n\n\n.dialog {\n  position: fixed;\n  z-index: var(--z-index);\n  margin: 0;\n  inset: 0;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0;\n  height: 100vh;\n  width: 100vw;\n\n  color: var(--dialog-color, var(--foreground));\n  fill: var(--dialog-color, var(--foreground));\n  line-height: 1.75em;\n\n  background-color: rgba(0, 0, 0, 0.05);\n  border: none;\n  inset: 0;\n  opacity: 1;\n  transition: opacity 0.2s ease-in-out;\n}\n\n.dialog__position {\n  position: fixed;\n  z-index: var(--z-index);\n  inset: var(--dialog-inset);\n  padding: var(--page-margin);\n  display: flex;\n  max-height: calc(100vh - (2 * var(--page-margin)));\n}\n@media (max-width: 600px) {\n  .dialog__position {\n    inset: var(--page-margin);\n    padding: 0;\n  }\n}\n\n.dialog__position:has(.editor) {\n  inset: var(--page-margin);\n  padding: 0;\n}\n\n.dialog:not([open]) {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n.dialog:not([open]) .dialog__content {\n  transform: translate(0, -16px) scale(0.98);\n}\n\n.dialog__content {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  padding: var(--dialog-padding, 24px);\n  max-width: 100%;\n  width: 100%;\n  max-height: 100%;\n  overflow: auto;\n\n  background: var(--dialog-background, var(--background));\n  border-radius: var(--dialog-border-radius, 20px);\n  border: var(--dialog-border, var(--border));\n  box-shadow: var(--dialog-box-shadow, var(--box-shadow));\n  transform: translate(0, 0) scale(1);\n  transition: transform 0.2s ease-in-out;\n}\n\n\n\n.dialog__header {\n  display: flex;\n  gap: 4px;\n  justify-content: space-between;\n  font-weight: var(--dialog-header-weight, 600);\n  margin: 0;\n}\n.dialog__title {\n  align-self: center;\n  width: var(--form-width, 272px);\n}\n\n@media (max-width: 600px) {\n  .dialog__title {\n    width: auto;\n  }\n}\n\n.dialog__position:has(.editor) .dialog__title {\n  width: auto;\n}\n\n\n.brand-link {\n  display: inline-flex;\n}\n.brand-link:focus-visible {\n  outline: var(--outline);\n}\n\n\n.form {\n  display: flex;\n  overflow: auto;\n  flex-direction: row;\n  gap: 16px;\n  flex: 1 0;\n}\n\n.form fieldset {\n  border: none;\n  margin: 0;\n  padding: 0;\n}\n\n.form__right {\n  flex: 0 0 auto;\n  display: flex;\n  overflow: auto;\n  flex-direction: column;\n  justify-content: space-between;\n  gap: 20px;\n  width: var(--form-width, 100%);\n}\n\n.dialog__position:has(.editor) .form__right {\n  width: var(--form-width, 272px);\n}\n\n.form__top {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.form__error-container {\n  color: var(--error-color);\n  fill: var(--error-color);\n}\n\n.form__label {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  margin: 0px;\n}\n\n.form__label__text {\n  display: flex;\n  gap: 4px;\n  align-items: center;\n}\n\n.form__label__text--required {\n  font-size: 0.85em;\n}\n\n.form__input {\n  font-family: inherit;\n  line-height: inherit;\n  background: transparent;\n  box-sizing: border-box;\n  border: var(--input-border, var(--border));\n  border-radius: var(--input-border-radius, 6px);\n  color: var(--input-color, inherit);\n  fill: var(--input-color, inherit);\n  font-size: var(--input-font-size, inherit);\n  font-weight: var(--input-font-weight, 500);\n  padding: 6px 12px;\n}\n\n.form__input::placeholder {\n  opacity: 0.65;\n  color: var(--input-placeholder-color, inherit);\n  filter: var(--interactive-filter);\n}\n\n.form__input:focus-visible {\n  outline: var(--input-focus-outline, var(--outline));\n}\n\n.form__input--textarea {\n  font-family: inherit;\n  resize: vertical;\n}\n\n.error {\n  color: var(--error-color);\n  fill: var(--error-color);\n}\n\n\n.btn-group {\n  display: grid;\n  gap: 8px;\n}\n\n.btn {\n  line-height: inherit;\n  border: var(--button-border, var(--border));\n  border-radius: var(--button-border-radius, 6px);\n  cursor: pointer;\n  font-family: inherit;\n  font-size: var(--button-font-size, inherit);\n  font-weight: var(--button-font-weight, 600);\n  padding: var(--button-padding, 6px 16px);\n}\n.btn[disabled] {\n  opacity: 0.6;\n  pointer-events: none;\n}\n\n.btn--primary {\n  color: var(--button-primary-color, var(--accent-foreground));\n  fill: var(--button-primary-color, var(--accent-foreground));\n  background: var(--button-primary-background, var(--accent-background));\n  border: var(--button-primary-border, var(--border));\n  border-radius: var(--button-primary-border-radius, 6px);\n  font-weight: var(--button-primary-font-weight, 500);\n}\n.btn--primary:hover {\n  color: var(--button-primary-hover-color, var(--accent-foreground));\n  fill: var(--button-primary-hover-color, var(--accent-foreground));\n  background: var(--button-primary-hover-background, var(--accent-background));\n  filter: var(--interactive-filter);\n}\n.btn--primary:focus-visible {\n  background: var(--button-primary-hover-background, var(--accent-background));\n  filter: var(--interactive-filter);\n  outline: var(--button-primary-focus-outline, var(--outline));\n}\n\n.btn--default {\n  color: var(--button-color, var(--foreground));\n  fill: var(--button-color, var(--foreground));\n  background: var(--button-background, var(--background));\n  border: var(--button-border, var(--border));\n  border-radius: var(--button-border-radius, 6px);\n  font-weight: var(--button-font-weight, 500);\n}\n.btn--default:hover {\n  color: var(--button-color, var(--foreground));\n  fill: var(--button-color, var(--foreground));\n  background: var(--button-hover-background, var(--background));\n  filter: var(--interactive-filter);\n}\n.btn--default:focus-visible {\n  background: var(--button-hover-background, var(--background));\n  filter: var(--interactive-filter);\n  outline: var(--button-focus-outline, var(--outline));\n}\n\n\n.success__position {\n  position: fixed;\n  inset: var(--dialog-inset);\n  padding: var(--page-margin);\n  z-index: var(--z-index);\n}\n.success__content {\n  background: var(--success-background, var(--background));\n  border: var(--success-border, var(--border));\n  border-radius: var(--success-border-radius, 1.7em/50%);\n  box-shadow: var(--success-box-shadow, var(--box-shadow));\n  font-weight: var(--success-font-weight, 600);\n  color: var(--success-color);\n  fill: var(--success-color);\n  padding: 12px 24px;\n  line-height: 1.75em;\n\n  display: grid;\n  align-items: center;\n  grid-auto-flow: column;\n  gap: 6px;\n  cursor: default;\n}\n\n.success__icon {\n  display: flex;\n}\n\n",e&&t.setAttribute("nonce",e),t}(e.styleNonce);let c="";const u={get el(){return a},appendToDom(){!s.contains(l)&&!s.contains(a)&&(s.appendChild(l),s.appendChild(a))},removeFromDom(){a.remove(),l.remove(),ca.body.style.overflow=c},open(){var t,n;p(!0),null==(t=e.onFormOpen)||t.call(e),null==(n=He())||n.emit("openFeedbackWidget"),c=ca.body.style.overflow,ca.body.style.overflow="hidden"},close(){p(!1),ca.body.style.overflow=c}},d=null==t?void 0:t.createInput({h:La,hooks:Ol,dialog:u,options:e}),p=t=>{!function(e,t){var n,r,s;Ia.__&&Ia.__(e,t),n=t.__k,r=[],s=[],Qa(t,e=t.__k=La($a,null,[e]),n||Oa,Oa,void 0!==t.ownerSVGElement,n?null:t.firstChild?_a.call(t.childNodes):null,r,n?n.__e:t.firstChild,!1,s),e.__d=void 0,Xa(r,e,s)}(La(Bl,{options:e,screenshotInput:d,showName:e.showName||e.isNameRequired,showEmail:e.showEmail||e.isEmailRequired,defaultName:i&&(null==o?void 0:o[i.name])||"",defaultEmail:i&&(null==o?void 0:o[i.email])||"",onFormClose:()=>{var t;p(!1),null==(t=e.onFormClose)||t.call(e)},onSubmit:n,onSubmitSuccess:(t,n)=>{var r;p(!1),null==(r=e.onSubmitSuccess)||r.call(e,t,n)},onSubmitError:t=>{var n;null==(n=e.onSubmitError)||n.call(e,t)},onFormSubmitted:()=>{var t;null==(t=e.onFormSubmitted)||t.call(e)},open:t}),a)};return u}});function Nl(e){const t=ca.createElement("style"),n="#1A141F",r="#302735";return t.textContent=`\n.editor {\n  display: flex;\n  flex-grow: 1;\n  flex-direction: column;\n}\n\n.editor__image-container {\n  justify-items: center;\n  padding: 15px;\n  position: relative;\n  height: 100%;\n  border-radius: var(--menu-border-radius, 6px);\n\n  background-color: ${n};\n  background-image: repeating-linear-gradient(\n      -145deg,\n      transparent,\n      transparent 8px,\n      ${n} 8px,\n      ${n} 11px\n    ),\n    repeating-linear-gradient(\n      -45deg,\n      transparent,\n      transparent 15px,\n      ${r} 15px,\n      ${r} 16px\n    );\n}\n\n.editor__canvas-container {\n  width: 100%;\n  height: 100%;\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.editor__canvas-container > * {\n  object-fit: contain;\n  position: absolute;\n}\n\n.editor__tool-container {\n  padding-top: 8px;\n  display: flex;\n  justify-content: center;\n}\n\n.editor__tool-bar {\n  display: flex;\n  gap: 8px;\n}\n\n.editor__tool {\n  display: flex;\n  padding: 8px 12px;\n  justify-content: center;\n  align-items: center;\n  border: var(--button-border, var(--border));\n  border-radius: var(--button-border-radius, 6px);\n  background: var(--button-background, var(--background));\n  color: var(--button-color, var(--foreground));\n}\n\n.editor__tool--active {\n  background: var(--button-primary-background, var(--accent-background));\n  color: var(--button-primary-color, var(--accent-foreground));\n}\n\n.editor__rect {\n  position: absolute;\n  z-index: 2;\n}\n\n.editor__rect button {\n  opacity: 0;\n  position: absolute;\n  top: -12px;\n  right: -12px;\n  cursor: pointer;\n  padding: 0;\n  z-index: 3;\n  border: none;\n  background: none;\n}\n\n.editor__rect:hover button {\n  opacity: 1;\n}\n`,e&&t.setAttribute("nonce",e),t}function jl({hooks:e}){return function({onBeforeScreenshot:t,onScreenshot:n,onAfterScreenshot:r,onError:s}){const i=function(){var t;const[n,r]=e.useState(null!=(t=la.devicePixelRatio)?t:1);return e.useEffect(()=>{const e=()=>{r(la.devicePixelRatio)},t=matchMedia(`(resolution: ${la.devicePixelRatio}dppx)`);return t.addEventListener("change",e),()=>{t.removeEventListener("change",e)}},[]),n}();e.useEffect(()=>{(async()=>{t();const e=await ua.mediaDevices.getDisplayMedia({video:{width:la.innerWidth*i,height:la.innerHeight*i},audio:!1,monitorTypeSurfaces:"exclude",preferCurrentTab:!0,selfBrowserSurface:"include",surfaceSwitching:"exclude"}),s=ca.createElement("video");await new Promise((t,r)=>{s.srcObject=e,s.onloadedmetadata=()=>{n(s,i),e.getTracks().forEach(e=>e.stop()),t()},s.play().catch(r)}),r()})().catch(s)},[])}}function Fl(e,t,n){if(!e)return;const r=e.getContext("2d",t);r&&n(e,r)}function Ul(e,t){Fl(e,{alpha:!0},(e,n)=>{n.drawImage(t,0,0,t.width,t.height,0,0,e.width,e.height)})}function Wl(e,t,n){Fl(e,{alpha:!0},(e,r)=>{n.length&&(r.fillStyle="rgba(0, 0, 0, 0.25)",r.fillRect(0,0,e.width,e.height)),n.forEach(e=>{!function(e,t,n){switch(e.type){case"highlight":t.shadowColor="rgba(0, 0, 0, 0.7)",t.shadowBlur=50,t.fillStyle=n,t.fillRect(e.x-1,e.y-1,e.w+2,e.h+2),t.clearRect(e.x,e.y,e.w,e.h);break;case"hide":t.fillStyle="rgb(0, 0, 0)",t.fillRect(e.x,e.y,e.w,e.h)}}(e,r,t)})})}function Hl({h:e,hooks:t,outputBuffer:n,dialog:r,options:s}){const i=jl({hooks:t}),o=function({h:e}){return function({action:t,setAction:n}){return e("div",{class:"editor__tool-container"},e("div",{class:"editor__tool-bar"},e("button",{type:"button",class:"editor__tool "+("highlight"===t?"editor__tool--active":""),onClick:()=>{n("highlight"===t?"":"highlight")}},"Highlight"),e("button",{type:"button",class:"editor__tool "+("hide"===t?"editor__tool--active":""),onClick:()=>{n("hide"===t?"":"hide")}},"Hide")))}}({h:e}),a=function({h:e}){return function(){return e("svg",{"data-test-id":"icon-close",viewBox:"0 0 16 16",fill:"#2B2233",height:"25px",width:"25px"},e("circle",{r:"7",cx:"8",cy:"8",fill:"white"}),e("path",{strokeWidth:"1.5",d:"M8,16a8,8,0,1,1,8-8A8,8,0,0,1,8,16ZM8,1.53A6.47,6.47,0,1,0,14.47,8,6.47,6.47,0,0,0,8,1.53Z"}),e("path",{strokeWidth:"1.5",d:"M5.34,11.41a.71.71,0,0,1-.53-.22.74.74,0,0,1,0-1.06l5.32-5.32a.75.75,0,0,1,1.06,1.06L5.87,11.19A.74.74,0,0,1,5.34,11.41Z"}),e("path",{strokeWidth:"1.5",d:"M10.66,11.41a.74.74,0,0,1-.53-.22L4.81,5.87A.75.75,0,0,1,5.87,4.81l5.32,5.32a.74.74,0,0,1,0,1.06A.71.71,0,0,1,10.66,11.41Z"}))}}({h:e}),l={__html:Nl(s.styleNonce).innerText},c=r.el.style,u=({screenshot:r})=>{const[i,c]=t.useState("highlight"),[u,d]=t.useState([]),p=t.useRef(null),h=t.useRef(null),m=t.useRef(null),g=t.useRef(null),[f,b]=t.useState(1),y=t.useMemo(()=>{const e=ca.getElementById(s.id);if(!e)return"white";const t=getComputedStyle(e);return t.getPropertyValue("--button-primary-background")||t.getPropertyValue("--accent-background")},[s.id]);t.useLayoutEffect(()=>{const e=()=>{const t=p.current;t&&(Fl(r.canvas,{alpha:!1},e=>{const n=Math.min(t.clientWidth/e.width,t.clientHeight/e.height);b(n)}),(0===t.clientHeight||0===t.clientWidth)&&setTimeout(e,0))};return e(),la.addEventListener("resize",e),()=>{la.removeEventListener("resize",e)}},[r]);const v=t.useCallback((e,t)=>{Fl(e,{alpha:!0},(e,n)=>{n.scale(t,t),e.width=r.canvas.width,e.height=r.canvas.height})},[r]);t.useEffect(()=>{v(h.current,r.dpi),Ul(h.current,r.canvas)},[r]),t.useEffect(()=>{v(m.current,r.dpi),Fl(m.current,{alpha:!0},(e,t)=>{t.clearRect(0,0,e.width,e.height)}),Wl(m.current,y,u)},[u,y]),t.useEffect(()=>{v(n,r.dpi),Ul(n,r.canvas),Fl(ca.createElement("canvas"),{alpha:!0},(e,t)=>{t.scale(r.dpi,r.dpi),e.width=r.canvas.width,e.height=r.canvas.height,Wl(e,y,u),Ul(n,e)})},[u,r,y]);const w=t.useCallback(e=>t=>{t.preventDefault(),t.stopPropagation(),d(t=>{const n=[...t];return n.splice(e,1),n})},[]),S={width:r.canvas.width*f+"px",height:r.canvas.height*f+"px"},_=e=>{e.stopPropagation()};return e("div",{class:"editor"},e("style",{nonce:s.styleNonce,dangerouslySetInnerHTML:l}),e("div",{class:"editor__image-container"},e("div",{class:"editor__canvas-container",ref:p},e("canvas",{ref:h,id:"background",style:S}),e("canvas",{ref:m,id:"foreground",style:S}),e("div",{ref:g,onMouseDown:e=>{if(!i||!g.current)return;const t=g.current.getBoundingClientRect(),n={type:i,x:e.offsetX/f,y:e.offsetY/f},r=(e,n)=>{const r=(n.clientX-t.x)/f,s=(n.clientY-t.y)/f;return{type:e.type,x:Math.min(e.x,r),y:Math.min(e.y,s),w:Math.abs(r-e.x),h:Math.abs(s-e.y)}},s=e=>{Fl(m.current,{alpha:!0},(e,t)=>{t.clearRect(0,0,e.width,e.height)}),Wl(m.current,y,[...u,r(n,e)])},o=e=>{const t=r(n,e);t.w*f>=1&&t.h*f>=1&&d(e=>[...e,t]),ca.removeEventListener("mousemove",s),ca.removeEventListener("mouseup",o)};ca.addEventListener("mousemove",s),ca.addEventListener("mouseup",o)},style:S},u.map((t,n)=>e("div",{key:n,class:"editor__rect",style:{top:t.y*f+"px",left:t.x*f+"px",width:t.w*f+"px",height:t.h*f+"px"}},e("button",{"aria-label":"Remove",onClick:w(n),onMouseDown:_,onMouseUp:_,type:"button"},e(a,null))))))),e(o,{action:i,setAction:c}))};return function({onError:r}){const[s,o]=t.useState();return i({onBeforeScreenshot:t.useCallback(()=>{c.display="none"},[]),onScreenshot:t.useCallback((e,t)=>{Fl(ca.createElement("canvas"),{alpha:!1},(n,r)=>{r.scale(t,t),n.width=e.videoWidth,n.height=e.videoHeight,r.drawImage(e,0,0,n.width,n.height),o({canvas:n,dpi:t})}),n.width=e.videoWidth,n.height=e.videoHeight},[]),onAfterScreenshot:t.useCallback(()=>{c.display="block"},[]),onError:t.useCallback(e=>{c.display="block",r(e)},[])}),s?e(u,{screenshot:s}):e("div",null)}}const Vl=()=>({name:"FeedbackScreenshot",setupOnce(){},createInput:({h:e,hooks:t,dialog:n,options:r})=>{const s=ca.createElement("canvas");return{input:Hl({h:e,hooks:t,outputBuffer:s,dialog:n,options:r}),value:async()=>{const e=await new Promise(e=>{s.toBlob(e,"image/png")});if(e)return{data:new Uint8Array(await e.arrayBuffer()),filename:"screenshot.png",contentType:"application/png"}}}}}),zl={replayIntegration:"replay",replayCanvasIntegration:"replay-canvas",feedbackIntegration:"feedback",feedbackModalIntegration:"feedback-modal",feedbackScreenshotIntegration:"feedback-screenshot",captureConsoleIntegration:"captureconsole",contextLinesIntegration:"contextlines",linkedErrorsIntegration:"linkederrors",dedupeIntegration:"dedupe",extraErrorDataIntegration:"extraerrordata",graphqlClientIntegration:"graphqlclient",httpClientIntegration:"httpclient",reportingObserverIntegration:"reportingobserver",rewriteFramesIntegration:"rewriteframes",browserProfilingIntegration:"browserprofiling",moduleMetadataIntegration:"modulemetadata"},ql=ns;async function Kl(e,t){const n=zl[e],r=ql.Sentry=ql.Sentry||{};if(!n)throw new Error(`Cannot lazy load integration: ${e}`);const s=r[e];if("function"==typeof s&&!("_isShim"in s))return s;const o=function(e){var t;const n=He(),r=(null==(t=null==n?void 0:n.getOptions())?void 0:t.cdnBaseUrl)||"https://browser.sentry-cdn.com";return new URL(`/${i}/${e}.min.js`,r).toString()}(n),a=ns.document.createElement("script");a.src=o,a.crossOrigin="anonymous",a.referrerPolicy="strict-origin",t&&a.setAttribute("nonce",t);const l=new Promise((e,t)=>{a.addEventListener("load",()=>e()),a.addEventListener("error",t)}),c=ns.document.currentScript,u=ns.document.body||ns.document.head||(null==c?void 0:c.parentElement);if(!u)throw new Error(`Could not find parent element to insert lazy-loaded ${e} script`);u.appendChild(a);try{await l}catch(t){throw new Error(`Error when loading integration: ${e}`)}const d=r[e];if("function"!=typeof d)throw new Error(`Could not load integration: ${e}`);return d}const Gl=Sa({lazyLoadIntegration:Kl}),Jl=Sa({getModalIntegration:()=>$l,getScreenshotIntegration:()=>Vl});function Yl(e,t,n,r){or({level:e,message:t,attributes:n,severityNumber:r})}const Ql=Object.freeze(Object.defineProperty({__proto__:null,debug:function(e,t){Yl("debug",e,t)},error:function(e,t){Yl("error",e,t)},fatal:function(e,t){Yl("fatal",e,t)},fmt:mo,info:function(e,t){Yl("info",e,t)},trace:function(e,t){Yl("trace",e,t)},warn:function(e,t){Yl("warn",e,t)}},Symbol.toStringTag,{value:"Module"})),Xl=(e,t,n,r)=>{let s,i;return o=>{t.value>=0&&(o||r)&&(i=t.value-(null!=s?s:0),(i||void 0===s)&&(s=t.value,t.delta=i,t.rating=((e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good")(t.value,n),e(t)))}},Zl=(e=!0)=>{var t,n;const r=null==(n=null==(t=_s.performance)?void 0:t.getEntriesByType)?void 0:n.call(t,"navigation")[0];if(!e||r&&r.responseStart>0&&r.responseStart<performance.now())return r},ec=()=>{var e;const t=Zl();return null!=(e=null==t?void 0:t.activationStart)?e:0},tc=(e,t=-1)=>{var n,r;const s=Zl();let i="navigate";return s&&(null!=(n=_s.document)&&n.prerendering||ec()>0?i="prerender":null!=(r=_s.document)&&r.wasDiscarded?i="restore":s.type&&(i=s.type.replace(/_/g,"-"))),{name:e,value:t,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:i}},nc=new WeakMap;function rc(e,t){return nc.get(e)||nc.set(e,new t),nc.get(e)}class sc{constructor(){sc.prototype.__init.call(this),sc.prototype.__init2.call(this)}__init(){this._sessionValue=0}__init2(){this._sessionEntries=[]}_processEntry(e){var t;if(e.hadRecentInput)return;const n=this._sessionEntries[0],r=this._sessionEntries[this._sessionEntries.length-1];this._sessionValue&&n&&r&&e.startTime-r.startTime<1e3&&e.startTime-n.startTime<5e3?(this._sessionValue+=e.value,this._sessionEntries.push(e)):(this._sessionValue=e.value,this._sessionEntries=[e]),null==(t=this._onAfterProcessingUnexpectedShift)||t.call(this,e)}}const ic=(e,t,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver(e=>{Promise.resolve().then(()=>{t(e.getEntries())})});return r.observe(Bi({type:e,buffered:!0},n)),r}}catch(e){}},oc=e=>{let t=!1;return()=>{t||(e(),t=!0)}};let ac=-1;const lc=e=>{"hidden"===_s.document.visibilityState&&ac>-1&&(ac="visibilitychange"===e.type?e.timeStamp:0,cc())},cc=()=>{removeEventListener("visibilitychange",lc,!0),removeEventListener("prerenderingchange",lc,!0)},uc=()=>{var e,t;if(_s.document&&ac<0){const n=ec();ac=null!=(e=_s.document.prerendering||null==(t=globalThis.performance.getEntriesByType("visibility-state").filter(e=>"hidden"===e.name&&e.startTime>n)[0])?void 0:t.startTime)?e:(()=>{var e,t;return"hidden"!==(null==(e=_s.document)?void 0:e.visibilityState)||null!=(t=_s.document)&&t.prerendering?1/0:0})(),addEventListener("visibilitychange",lc,!0),addEventListener("prerenderingchange",lc,!0)}return{get firstHiddenTime(){return ac}}},dc=e=>{var t;null!=(t=_s.document)&&t.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()},pc=[1800,3e3],hc=[.1,.25],mc=(e,t={})=>{((e,t={})=>{dc(()=>{const n=uc(),r=tc("FCP");let s;const i=ic("paint",e=>{for(const t of e)"first-contentful-paint"===t.name&&(i.disconnect(),t.startTime<n.firstHiddenTime&&(r.value=Math.max(t.startTime-ec(),0),r.entries.push(t),s(!0)))});i&&(s=Xl(e,r,pc,t.reportAllChanges))})})(oc(()=>{var n,r,s;const i=tc("CLS",0);let o;const a=rc(t,sc),l=e=>{for(const t of e)a._processEntry(t);a._sessionValue>i.value&&(i.value=a._sessionValue,i.entries=a._sessionEntries,o())},c=ic("layout-shift",l);c&&(o=Xl(e,i,hc,t.reportAllChanges),null==(n=_s.document)||n.addEventListener("visibilitychange",()=>{var e;"hidden"===(null==(e=_s.document)?void 0:e.visibilityState)&&(l(c.takeRecords()),o(!0))}),null==(s=null==(r=_s)?void 0:r.setTimeout)||s.call(r,o))}))},gc=e=>{const t=t=>{var n;("pagehide"===t.type||"hidden"===(null==(n=_s.document)?void 0:n.visibilityState))&&e(t)};_s.document&&(addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0))},fc=[100,300];let bc=0,yc=1/0,vc=0;const wc=e=>{e.forEach(e=>{e.interactionId&&(yc=Math.min(yc,e.interactionId),vc=Math.max(vc,e.interactionId),bc=vc?(vc-yc)/7+1:0)})};let Sc;const _c=()=>Sc?bc:performance.interactionCount||0;let Ic=0;class Cc{constructor(){Cc.prototype.__init.call(this),Cc.prototype.__init2.call(this)}__init(){this._longestInteractionList=[]}__init2(){this._longestInteractionMap=new Map}_resetInteractions(){Ic=_c(),this._longestInteractionList.length=0,this._longestInteractionMap.clear()}_estimateP98LongestInteraction(){const e=Math.min(this._longestInteractionList.length-1,Math.floor((_c()-Ic)/50));return this._longestInteractionList[e]}_processEntry(e){var t,n;if(null==(t=this._onBeforeProcessingEntry)||t.call(this,e),!e.interactionId&&"first-input"!==e.entryType)return;const r=this._longestInteractionList.at(-1);let s=this._longestInteractionMap.get(e.interactionId);if(s||this._longestInteractionList.length<10||e.duration>r._latency){if(s?e.duration>s._latency?(s.entries=[e],s._latency=e.duration):e.duration===s._latency&&e.startTime===s.entries[0].startTime&&s.entries.push(e):(s={id:e.interactionId,entries:[e],_latency:e.duration},this._longestInteractionMap.set(s.id,s),this._longestInteractionList.push(s)),this._longestInteractionList.sort((e,t)=>t._latency-e._latency),this._longestInteractionList.length>10){const e=this._longestInteractionList.splice(10);for(const t of e)this._longestInteractionMap.delete(t.id)}null==(n=this._onAfterProcessingINPCandidate)||n.call(this,s)}}}const kc=e=>{var t;const n=_s.requestIdleCallback||_s.setTimeout;"hidden"===(null==(t=_s.document)?void 0:t.visibilityState)?e():(n(e=oc(e)),gc(e))},Pc=[200,500],Ec=(e,t={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&dc(()=>{var n;"interactionCount"in performance||Sc||(Sc=ic("event",wc,{type:"event",buffered:!0,durationThreshold:0}));const r=tc("INP");let s;const i=rc(t,Cc),o=e=>{kc(()=>{for(const t of e)i._processEntry(t);const t=i._estimateP98LongestInteraction();t&&t._latency!==r.value&&(r.value=t._latency,r.entries=t.entries,s())})},a=ic("event",o,{durationThreshold:null!=(n=t.durationThreshold)?n:40});s=Xl(e,r,Pc,t.reportAllChanges),a&&(a.observe({type:"first-input",buffered:!0}),gc(()=>{o(a.takeRecords()),s(!0)}))})};class Tc{_processEntry(e){var t;null==(t=this._onBeforeProcessingEntry)||t.call(this,e)}}const Oc=[2500,4e3],xc=[800,1800],Mc=e=>{var t,n;null!=(t=_s.document)&&t.prerendering?dc(()=>Mc(e)):"complete"!==(null==(n=_s.document)?void 0:n.readyState)?addEventListener("load",()=>Mc(e),!0):setTimeout(e)},Ac={},Rc={};let Dc,Lc,Bc,$c,Nc;function jc(e,t=!1){return Yc("cls",e,zc,Dc,t)}function Fc(e,t=!1){return Yc("lcp",e,Kc,Bc,t)}function Uc(e){return Yc("fid",e,qc,Lc)}function Wc(e){return Yc("inp",e,Jc,Nc)}function Hc(e,t){return Qc(e,t),Rc[e]||(function(e){const t={};"event"===e&&(t.durationThreshold=0),ic(e,t=>{Vc(e,{entries:t})},t)}(e),Rc[e]=!0),Xc(e,t)}function Vc(e,t){const n=Ac[e];if(null!=n&&n.length)for(const r of n)try{r(t)}catch(t){Ss&&g.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${I(r)}\nError:`,t)}}function zc(){return mc(e=>{Vc("cls",{metric:e}),Dc=e},{reportAllChanges:!0})}function qc(){return((e,t={})=>{dc(()=>{const n=uc(),r=tc("FID");let s;const i=e=>{e.startTime<n.firstHiddenTime&&(r.value=e.processingStart-e.startTime,r.entries.push(e),s(!0))},o=e=>{e.forEach(i)},a=ic("first-input",o);s=Xl(e,r,fc,t.reportAllChanges),a&&gc(oc(()=>{o(a.takeRecords()),a.disconnect()}))})})(e=>{Vc("fid",{metric:e}),Lc=e})}function Kc(){return((e,t={})=>{dc(()=>{const n=uc(),r=tc("LCP");let s;const i=rc(t,Tc),o=e=>{t.reportAllChanges||(e=e.slice(-1));for(const t of e)i._processEntry(t),t.startTime<n.firstHiddenTime&&(r.value=Math.max(t.startTime-ec(),0),r.entries=[t],s())},a=ic("largest-contentful-paint",o);if(a){s=Xl(e,r,Oc,t.reportAllChanges);const n=oc(()=>{o(a.takeRecords()),a.disconnect(),s(!0)});for(const e of["keydown","click","visibilitychange"])_s.document&&addEventListener(e,()=>kc(n),{capture:!0,once:!0})}})})(e=>{Vc("lcp",{metric:e}),Bc=e},{reportAllChanges:!0})}function Gc(){return((e,t={})=>{const n=tc("TTFB"),r=Xl(e,n,xc,t.reportAllChanges);Mc(()=>{const e=Zl();e&&(n.value=Math.max(e.responseStart-ec(),0),n.entries=[e],r(!0))})})(e=>{Vc("ttfb",{metric:e}),$c=e})}function Jc(){return Ec(e=>{Vc("inp",{metric:e}),Nc=e})}function Yc(e,t,n,r,s=!1){let i;return Qc(e,t),Rc[e]||(i=n(),Rc[e]=!0),r&&t({metric:r}),Xc(e,t,s?i:void 0)}function Qc(e,t){Ac[e]=Ac[e]||[],Ac[e].push(t)}function Xc(e,t,n){return()=>{n&&n();const r=Ac[e];if(!r)return;const s=r.indexOf(t);-1!==s&&r.splice(s,1)}}function Zc(e){return"number"==typeof e&&isFinite(e)}function eu(e,t,n,r){var s=Ni(r,[]);const i=Pt(e).start_timestamp;return i&&i>t&&"function"==typeof e.updateStartTime&&e.updateStartTime(t),Xi(e,()=>{const e=Qi(Bi({startTime:t},s));return e&&e.end(n),e})}function tu(e){var t;const n=He();if(!n)return;const{name:r,transaction:s,attributes:i,startTime:o}=e,{release:a,environment:l,sendDefaultPii:c}=n.getOptions(),u=n.getIntegrationByName("Replay"),d=null==u?void 0:u.getReplayId(),p=je(),h=p.getUser(),m=void 0!==h?h.email||h.id||h.ip_address:void 0;let g;try{g=p.getScopeData().contexts.profile.profile_id}catch(e){}return Qi({name:r,attributes:Bi({release:a,environment:l,user:m||void 0,profile_id:g||void 0,replay_id:d||void 0,transaction:s,"user_agent.original":null==(t=_s.navigator)?void 0:t.userAgent,"client.address":c?"{{auto}}":void 0},i),startTime:o,experimental:{standalone:!0}})}function nu(){return _s.addEventListener&&_s.performance}function ru(e){return e/1e3}function su(e){let t="unknown",n="unknown",r="";for(const s of e){if("/"===s){[t,n]=e.split("/");break}if(!isNaN(Number(s))){t="h"===r?"http":r,n=e.split(r)[1];break}r+=s}return r===e&&(t=r),{name:t,version:n}}function iu(e){try{return PerformanceObserver.supportedEntryTypes.includes(e)}catch(e){return!1}}function ou(e,t){let n,r=!1;function s(e){!r&&n&&t(e,n),r=!0}gc(()=>{s("pagehide")});const i=e.on("beforeStartNavigationSpan",(e,t)=>{null!=t&&t.isRedirect||(s("navigation"),null==i||i(),null==o||o())}),o=e.on("afterStartPageLoadSpan",e=>{n=e.spanContext().spanId,null==o||o()})}function au(e){let t,n=0;if(!iu("layout-shift"))return;const r=jc(({metric:e})=>{const r=e.entries[e.entries.length-1];r&&(n=e.value,t=r)},!0);ou(e,(e,s)=>{(function(e,t,n,r){var s;Ss&&g.log(`Sending CLS span (${e})`);const i=ru((Ie()||0)+((null==t?void 0:t.startTime)||0)),o=je().getScopeData().transactionName,a=t?Q(null==(s=t.sources[0])?void 0:s.node):"Layout shift",l={[Je]:"auto.http.browser.cls",[Ge]:"ui.webvital.cls",[tt]:(null==t?void 0:t.duration)||0,"sentry.pageload.span_id":n,"sentry.report_event":r};null!=t&&t.sources&&t.sources.forEach((e,t)=>{l[`cls.source.${t+1}`]=Q(e.node)});const c=tu({name:a,transaction:o,attributes:l,startTime:i});c&&(c.addEvent("cls",{[Qe]:"",[Xe]:e}),c.end(i))})(n,t,s,e),r()})}function lu(e){let t,n=0;if(!iu("largest-contentful-paint"))return;const r=Fc(({metric:e})=>{const r=e.entries[e.entries.length-1];r&&(n=e.value,t=r)},!0);ou(e,(e,s)=>{(function(e,t,n,r){Ss&&g.log(`Sending LCP span (${e})`);const s=ru((Ie()||0)+((null==t?void 0:t.startTime)||0)),i=je().getScopeData().transactionName,o=t?Q(t.element):"Largest contentful paint",a={[Je]:"auto.http.browser.lcp",[Ge]:"ui.webvital.lcp",[tt]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};t&&(t.element&&(a["lcp.element"]=Q(t.element)),t.id&&(a["lcp.id"]=t.id),t.url&&(a["lcp.url"]=t.url.trim().slice(0,200)),null!=t.loadTime&&(a["lcp.loadTime"]=t.loadTime),null!=t.renderTime&&(a["lcp.renderTime"]=t.renderTime),null!=t.size&&(a["lcp.size"]=t.size));const l=tu({name:o,transaction:i,attributes:a,startTime:s});l&&(l.addEvent("lcp",{[Qe]:"millisecond",[Xe]:e}),l.end(s))})(n,t,s,e),r()})}let cu,uu,du=0,pu={};function hu({recordClsStandaloneSpans:e,recordLcpStandaloneSpans:t,client:n}){const r=nu();if(r&&Ie()){r.mark&&_s.performance.mark("sentry-tracing-init");const s=Uc(({metric:e})=>{const t=e.entries[e.entries.length-1];if(!t)return;const n=ru(Ie()),r=ru(t.startTime);pu.fid={value:e.value,unit:"millisecond"},pu["mark.fid"]={value:n+r,unit:"second"}}),i=t?lu(n):Fc(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(pu.lcp={value:e.value,unit:"millisecond"},cu=t)},!0),o=function(e){return Yc("ttfb",e,Gc,$c)}(({metric:e})=>{e.entries[e.entries.length-1]&&(pu.ttfb={value:e.value,unit:"millisecond"})}),a=e?au(n):jc(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(pu.cls={value:e.value,unit:""},uu=t)},!0);return()=>{s(),null==i||i(),o(),null==a||a()}}return()=>{}}function mu(e,t){const n=nu(),r=Ie();if(null==n||!n.getEntries||!r)return;const s=ru(r),i=n.getEntries(),{op:o,start_timestamp:a}=Pt(e);if(i.slice(du).forEach(n=>{const r=ru(n.startTime),i=ru(Math.max(0,n.duration));if(!("navigation"===o&&a&&s+r<a))switch(n.entryType){case"navigation":!function(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{gu(e,t,r,n)}),gu(e,t,"secureConnection",n,"TLS/SSL"),gu(e,t,"fetch",n,"cache"),gu(e,t,"domainLookup",n,"DNS"),function(e,t,n){const r=n+ru(t.requestStart),s=n+ru(t.responseEnd),i=n+ru(t.responseStart);t.responseEnd&&(eu(e,r,s,{op:"browser.request",name:t.name,attributes:{[Je]:"auto.ui.browser.metrics"}}),eu(e,i,s,{op:"browser.response",name:t.name,attributes:{[Je]:"auto.ui.browser.metrics"}}))}(e,t,n)}(e,n,s);break;case"mark":case"paint":case"measure":{!function(e,t,n,r,s,i){if(["mark","measure"].includes(t.entryType)&&ie(t.name,i))return;const o=Zl(!1),a=ru(o?o.requestStart:0),l=s+Math.max(n,a),c=s+n,u=c+r,d={[Je]:"auto.resource.browser.metrics"};l!==c&&(d["sentry.browser.measure_happened_before_request"]=!0,d["sentry.browser.measure_start_time"]=l),function(e,t){try{const n=t.detail;if(!n)return;if("object"==typeof n){for(const[t,r]of Object.entries(n))if(r&&H(r))e[`sentry.browser.measure.detail.${t}`]=r;else if(void 0!==r)try{e[`sentry.browser.measure.detail.${t}`]=JSON.stringify(r)}catch(e){}return}if(H(n))return void(e["sentry.browser.measure.detail"]=n);try{e["sentry.browser.measure.detail"]=JSON.stringify(n)}catch(e){}}catch(e){}}(d,t),l<=u&&eu(e,l,u,{name:t.name,op:t.entryType,attributes:d})}(e,n,r,i,s,t.ignorePerformanceApiSpans);const o=uc(),a=n.startTime<o.firstHiddenTime;"first-paint"===n.name&&a&&(pu.fp={value:n.startTime,unit:"millisecond"}),"first-contentful-paint"===n.name&&a&&(pu.fcp={value:n.startTime,unit:"millisecond"});break}case"resource":!function(e,t,n,r,s,i,o){if("xmlhttprequest"===t.initiatorType||"fetch"===t.initiatorType)return;const a=t.initiatorType?`resource.${t.initiatorType}`:"resource.other";if(null!=o&&o.includes(a))return;const l=Vr(n),c={[Je]:"auto.resource.browser.metrics"};fu(c,t,"transferSize","http.response_transfer_size"),fu(c,t,"encodedBodySize","http.response_content_length"),fu(c,t,"decodedBodySize","http.decoded_response_content_length");const u=t.deliveryType;null!=u&&(c["http.response_delivery_type"]=u);const d=t.renderBlockingStatus;if(d&&(c["resource.render_blocking_status"]=d),l.protocol&&(c["url.scheme"]=l.protocol.split(":").pop()),l.host&&(c["server.address"]=l.host),c["url.same_origin"]=n.includes(_s.location.origin),null!=t.nextHopProtocol){const{name:e,version:n}=su(t.nextHopProtocol);c["network.protocol.name"]=e,c["network.protocol.version"]=n}const p=i+r,h=p+s;eu(e,p,h,{name:n.replace(_s.location.origin,""),op:a,attributes:c})}(e,n,n.name,r,i,s,t.ignoreResourceSpans)}}),du=Math.max(i.length-1,0),function(e){const t=_s.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&e.setAttribute("connectionType",n.type),Zc(n.rtt)&&(pu["connection.rtt"]={value:n.rtt,unit:"millisecond"})),Zc(t.deviceMemory)&&e.setAttribute("deviceMemory",`${t.deviceMemory} GB`),Zc(t.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(t.hardwareConcurrency))}(e),"pageload"===o){!function(e){const t=Zl(!1);if(!t)return;const{responseStart:n,requestStart:r}=t;r<=n&&(e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}(pu);const n=pu["mark.fid"];n&&pu.fid&&(eu(e,n.value,n.value+ru(pu.fid.value),{name:"first input delay",op:"ui.action",attributes:{[Je]:"auto.ui.browser.metrics"}}),delete pu["mark.fid"]),t.recordClsOnPageloadSpan||delete pu.cls,t.recordLcpOnPageloadSpan||delete pu.lcp,Object.entries(pu).forEach(([e,t])=>{Hi(e,t.value,t.unit)}),e.setAttribute("performance.timeOrigin",s),e.setAttribute("performance.activationStart",ec()),function(e,t){cu&&t.recordLcpOnPageloadSpan&&(cu.element&&e.setAttribute("lcp.element",Q(cu.element)),cu.id&&e.setAttribute("lcp.id",cu.id),cu.url&&e.setAttribute("lcp.url",cu.url.trim().slice(0,200)),null!=cu.loadTime&&e.setAttribute("lcp.loadTime",cu.loadTime),null!=cu.renderTime&&e.setAttribute("lcp.renderTime",cu.renderTime),e.setAttribute("lcp.size",cu.size)),null!=uu&&uu.sources&&t.recordClsOnPageloadSpan&&uu.sources.forEach((t,n)=>e.setAttribute(`cls.source.${n+1}`,Q(t.node)))}(e,t)}cu=void 0,uu=void 0,pu={}}function gu(e,t,n,r,s=n){const i=function(e){return"secureConnection"===e?"connectEnd":"fetch"===e?"domainLookupStart":`${e}End`}(n),o=t[i],a=t[`${n}Start`];!a||!o||eu(e,r+ru(a),r+ru(o),{op:`browser.${s}`,name:t.name,attributes:Bi({[Je]:"auto.ui.browser.metrics"},"redirect"===n&&null!=t.redirectCount?{"http.redirect_count":t.redirectCount}:{})})}function fu(e,t,n,r){const s=t[n];null!=s&&s<2147483647&&(e[r]=s)}const bu=({entries:e})=>{const t=Dt(),n=t?Rt(t):void 0,r=n?Pt(n).description:je().getScopeData().transactionName;e.forEach(e=>{var t,n;const s=e;if(!s.identifier)return;const i=s.name,o=s.renderTime,a=s.loadTime,[l,c]=a?[ru(a),"load-time"]:o?[ru(o),"render-time"]:[_e(),"entry-emission"],u="image-paint"===i?ru(Math.max(0,(null!=o?o:0)-(null!=a?a:0))):0,d={[Je]:"auto.ui.browser.elementtiming",[Ge]:"ui.elementtiming",[ze]:"component","sentry.span_start_time_source":c,"sentry.transaction_name":r,"element.id":s.id,"element.type":(null==(n=null==(t=s.element)?void 0:t.tagName)?void 0:n.toLowerCase())||"unknown","element.size":s.naturalWidth&&s.naturalHeight?`${s.naturalWidth}x${s.naturalHeight}`:void 0,"element.render_time":o,"element.load_time":a,"element.url":s.url||void 0,"element.identifier":s.identifier,"element.paint_type":i};Yi({name:`element[${s.identifier}]`,attributes:d,startTime:l,onlyIfParent:!0},e=>{e.end(l+u)})})};function yu(e){return new URLSearchParams(e).toString()}function vu(e,t=g){try{if("string"==typeof e)return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[yu(e)];if(!e)return[void 0]}catch(n){return Ss&&t.error(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return Ss&&t.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function wu(e=[]){if(2===e.length&&"object"==typeof e[1])return e[1].body}const Su=[],_u=new Map;function Iu(){if(nu()&&Ie()){const e=Wc(ku);return()=>{e()}}return()=>{}}const Cu={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};const ku=({metric:e})=>{if(null==e.value)return;const t=ru(e.value);if(t>60)return;const n=e.entries.find(t=>t.duration===e.value&&Cu[t.name]);if(!n)return;const{interactionId:r}=n,s=Cu[n.name],i=ru(Ie()+n.startTime),o=Dt(),a=o?Rt(o):void 0,l=(null!=r?_u.get(r):void 0)||a,c=l?Pt(l).description:je().getScopeData().transactionName,u=tu({name:Q(n.target),transaction:c,attributes:{[Je]:"auto.http.browser.inp",[Ge]:`ui.interaction.${s}`,[tt]:n.duration},startTime:i});u&&(u.addEvent("inp",{[Qe]:"millisecond",[Xe]:e.value}),u.end(i+t))};function Pu(e={}){const t=ns.document,n=(null==t?void 0:t.head)||(null==t?void 0:t.body);if(!n)return void(ri&&g.error("[showReportDialog] Global document not defined"));const r=je(),s=He(),i=null==s?void 0:s.getDsn();if(!i)return void(ri&&g.error("[showReportDialog] DSN not configured"));const o=$i(Bi({},e),{user:Bi(Bi({},r.getUser()),e.user),eventId:e.eventId||xn()}),a=ns.document.createElement("script");a.async=!0,a.crossOrigin="anonymous",a.src=function(e,t){const n=Ht(e);if(!n)return"";const r=`${$n(n)}embed/error-page/`;let s=`dsn=${Ft(n)}`;for(const e in t)if("dsn"!==e&&"onClose"!==e)if("user"===e){const e=t.user;if(!e)continue;e.name&&(s+=`&name=${encodeURIComponent(e.name)}`),e.email&&(s+=`&email=${encodeURIComponent(e.email)}`)}else s+=`&${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`;return`${r}?${s}`}(i,o);const{onLoad:l,onClose:c}=o;if(l&&(a.onload=l),c){const e=t=>{if("__sentry_reportdialog_closed__"===t.data)try{c()}finally{ns.removeEventListener("message",e)}};ns.addEventListener("message",e)}n.appendChild(a)}const Eu=s,Tu=new WeakMap,Ou=(e={})=>{const t=e.types||["crash","deprecation","intervention"];function n(e){if(Tu.has(He()))for(const t of e)We(e=>{e.setExtra("url",t.url);const n=`ReportingObserver [${t.type}]`;let r="No details available";if(t.body){const n={};for(const e in t.body)n[e]=t.body[e];if(e.setExtra("body",n),"crash"===t.type){const e=t.body;r=[e.crashId||"",e.reason||""].join(" ").trim()||r}else r=t.body.message||r}En(`${n}: ${r}`)})}return{name:"ReportingObserver",setupOnce(){"ReportingObserver"in Kr&&new Eu.ReportingObserver(n,{buffered:!0,types:t}).observe()},setup(e){Tu.set(e,!0)}}},xu=(e={})=>{const t=Bi({failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/]},e);return{name:"HttpClient",setup(e){(function(e,t){Jr()&&Yr(n=>{if(He()!==e)return;const{response:r,args:s,error:i,virtualError:o}=n,[a,l]=s;r&&function(e,t,n,r,s){if(Du(e,n.status,n.url)){const e=function(e,t){return!t&&e instanceof Request||e instanceof Request&&e.bodyUsed?e:new Request(e,t)}(t,r);let i,o,a,l;Bu()&&([i,a]=Mu("Cookie",e),[o,l]=Mu("Set-Cookie",n));Tn(Lu({url:e.url,method:e.method,status:n.status,requestHeaders:i,responseHeaders:o,requestCookies:a,responseCookies:l,error:s}))}}(t,a,r,l,i||o)},!1)})(e,t),function(e,t){"XMLHttpRequest"in s&&$s(n=>{if(He()!==e)return;const{error:r,virtualError:s}=n,i=n.xhr,o=i[Bs];if(!o)return;const{method:a,request_headers:l}=o;try{!function(e,t,n,r,s){if(Du(e,t.status,t.responseURL)){let e,i,o;if(Bu()){try{const e=t.getResponseHeader("Set-Cookie")||t.getResponseHeader("set-cookie")||void 0;e&&(i=Ru(e))}catch(e){}try{o=function(e){const t=e.getAllResponseHeaders();return t?t.split("\r\n").reduce((e,t)=>{const[n,r]=t.split(": ");return n&&r&&(e[n]=r),e},{}):{}}(t)}catch(e){}e=r}Tn(Lu({url:t.responseURL,method:n,status:t.status,requestHeaders:e,responseHeaders:o,responseCookies:i,error:s}))}}(t,i,a,l,r||s)}catch(e){ri&&g.warn("Error while extracting response event form XHR response",e)}})}(e,t)}}};function Mu(e,t){const n=function(e){const t={};return e.forEach((e,n)=>{t[n]=e}),t}(t.headers);let r;try{const t=n[e]||n[e.toLowerCase()]||void 0;t&&(r=Ru(t))}catch(e){}return[n,r]}function Au(e){if(e){const t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}function Ru(e){return e.split("; ").reduce((e,t)=>{const[n,r]=t.split("=");return n&&r&&(e[n]=r),e},{})}function Du(e,t,n){return function(e,t){return e.some(e=>"number"==typeof e?e===t:t>=e[0]&&t<=e[1])}(e.failedRequestStatusCodes,t)&&function(e,t){return e.some(e=>"string"==typeof e?t.includes(e):e.test(t))}(e.failedRequestTargets,n)&&!uo(n,He())}function Lu(e){const t=He(),n=t&&e.error&&e.error instanceof Error?e.error.stack:void 0,r=n&&t?t.getOptions().stackParser(n,0,1):void 0,s=`HTTP Client Error with status code: ${e.status}`,i={message:s,exception:{values:[{type:"Error",value:s,stacktrace:r?{frames:r}:void 0}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:Au(e.responseHeaders)}}};return be(i,{type:"http.client",handled:!1}),i}function Bu(){const e=He();return!!e&&!!e.getOptions().sendDefaultPii}const $u=s,Nu=(e={})=>{const t=null!=e.frameContextLines?e.frameContextLines:7;return{name:"ContextLines",processEvent(e){return function(e,t){var n;const r=$u.document,s=$u.location&&zr($u.location.href);if(!r||!s)return e;const i=null==(n=e.exception)?void 0:n.values;if(null==i||!i.length)return e;const o=r.documentElement.innerHTML;if(!o)return e;const a=["<!DOCTYPE html>","<html>",...o.split("\n"),"</html>"];return i.forEach(e=>{const n=e.stacktrace;null!=n&&n.frames&&(n.frames=n.frames.map(e=>function(e,t,n,r){return e.filename!==n||!e.lineno||!t.length||function(e,t,n=5){if(void 0===t.lineno)return;const r=e.length,s=Math.max(Math.min(r-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,s-n),s).map(e=>ne(e,0));const i=Math.min(r-1,s);t.context_line=ne(e[i],t.colno||0),t.post_context=e.slice(Math.min(s+1,r),s+1+n).map(e=>ne(e,0))}(t,e,r),e}(e,a,s,t)))}),e}(e,t)}}};function ju(e){const{query:t,operationName:n}=e,{operationName:r=n,operationType:s}=function(e){const t=/^(?:\s*)(query|mutation|subscription)(?:\s*)(\w+)(?:\s*)[{(]/,n=/^(?:\s*)(query|mutation|subscription)(?:\s*)[{(]/,r=e.match(t);if(r)return{operationType:r[1],operationName:r[2]};const s=e.match(n);return s?{operationType:s[1],operationName:void 0}:{operationType:void 0,operationName:void 0}}(t);return r?`${s} ${r}`:`${s}`}function Fu(e){let t;if("xhr"in e){const n=e.xhr[Bs];t=n&&vu(n.body)[0]}else{t=vu(wu(e.input))[0]}return t}function Uu(e){let t;try{const n=JSON.parse(e);n.query&&(t=n)}finally{return t}}const Wu=e=>({name:"GraphQLClient",setup(t){(function(e,t){e.on("beforeOutgoingRequestSpan",(e,n)=>{const r=Pt(e).data||{};if("http.client"!==r[Ge])return;const s=r[rt]||r["http.url"],i=r[nt]||r["http.method"];if(!U(s)||!U(i))return;const{endpoints:o}=t,a=ie(s,o),l=Fu(n);if(a&&l){const t=Uu(l);if(t){const n=ju(t);e.updateName(`${i} ${s} (${n})`),e.setAttribute("graphql.document",l)}}})})(t,e),function(e,t){e.on("beforeOutgoingRequestBreadcrumb",(e,n)=>{const{category:r,type:s,data:i}=e;if("http"===s&&("fetch"===r||"xhr"===r)){const e=null==i?void 0:i.url,{endpoints:r}=t,s=ie(e,r),o=Fu(n);if(s&&i&&o){const e=Uu(o);if(!i.graphql&&e){const t=ju(e);i["graphql.document"]=e.query,i["graphql.operation"]=t}}}})}(t,e)}}),Hu=s,Vu="sentryReplaySession",zu="Unable to send Replay",qu=15e4,Ku=5e3,Gu=2e7,Ju=36e5;var Yu=Object.defineProperty,Qu=(e,t,n)=>((e,t,n)=>t in e?Yu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n),Xu=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(Xu||{});function Zu(e){const t=null==e?void 0:e.host;return(null==t?void 0:t.shadowRoot)===e}function ed(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function td(e){try{const t=e.rules||e.cssRules;return t?function(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),e}(Array.from(t,nd).join("")):null}catch(e){return null}}function nd(e){let t;if(function(e){return"styleSheet"in e}(e))try{t=td(e.styleSheet)||function(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return""===e.layerName?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}(e)}catch(e){}else if(function(e){return"selectorText"in e}(e)){let t=e.cssText;const n=e.selectorText.includes(":"),r="string"==typeof e.style.all&&e.style.all;if(r&&(t=function(e){let t="";for(let n=0;n<e.style.length;n++){const r=e.style,s=r[n],i=r.getPropertyPriority(s);t+=`${s}:${r.getPropertyValue(s)}${i?" !important":""};`}return`${e.selectorText} { ${t} }`}(e)),n&&(t=function(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}(t)),n||r)return t}return t||e.cssText}let rd=class{constructor(){Qu(this,"idNodeMap",new Map),Qu(this,"nodeMetaMap",new WeakMap)}getId(e){var t,n;return e&&null!=(t=null==(n=this.getMeta(e))?void 0:n.id)?t:-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach(e=>this.removeNodeFromMap(e))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)}replace(e,t){const n=this.getNode(e);if(n){const e=this.nodeMetaMap.get(n);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function sd({maskInputOptions:e,tagName:t,type:n}){return"OPTION"===t&&(t="SELECT"),!!(e[t.toLowerCase()]||n&&e[n]||"password"===n||"INPUT"===t&&!n&&e.text)}function id({isMasked:e,element:t,value:n,maskInputFn:r}){let s=n||"";return e?(r&&(s=r(s,t)),"*".repeat(s.length)):s}function od(e){return e.toLowerCase()}function ad(e){return e.toUpperCase()}const ld="__rrweb_original__";function cd(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?od(t):null}function ud(e,t,n){return"INPUT"!==t||"radio"!==n&&"checkbox"!==n?e.value:e.getAttribute("value")||""}function dd(e,t){var n;let r;try{r=new URL(e,null!=t?t:window.location.href)}catch(e){return null}const s=r.pathname.match(/\.([0-9a-z]+)(?:$)/i);return null!=(n=null==s?void 0:s[1])?n:null}const pd={};function hd(e){const t=pd[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const s=t.contentWindow;s&&s[e]&&(r=s[e]),n.head.removeChild(t)}catch(e){}return pd[e]=r.bind(window)}function md(...e){return hd("setTimeout")(...e)}function gd(...e){return hd("clearTimeout")(...e)}function fd(e){try{return e.contentDocument}catch(e){}}let bd=1;const yd=new RegExp("[^a-z0-9-_:]");function vd(){return bd++}let wd,Sd;const _d=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,Id=/^(?:[a-z+]+:)?\/\//i,Cd=/^www\..*/i,kd=/^(data:)([^,]*),(.*)/i;function Pd(e,t){return(e||"").replace(_d,(e,n,r,s,i,o)=>{const a=r||i||o,l=n||s||"";if(!a)return e;if(Id.test(a)||Cd.test(a))return`url(${l}${a}${l})`;if(kd.test(a))return`url(${l}${a}${l})`;if("/"===a[0])return`url(${l}${function(e){let t="";return t=e.indexOf("//")>-1?e.split("/").slice(0,3).join("/"):e.split("/")[0],t=t.split("?")[0],t}(t)+a}${l})`;const c=t.split("/"),u=a.split("/");c.pop();for(const e of u)"."!==e&&(".."===e?c.pop():c.push(e));return`url(${l}${c.join("/")}${l})`})}const Ed=/^[^ \t\n\r\u000c]+/,Td=/^[, \t\n\r\u000c]+/;const Od=new WeakMap;function xd(e,t){return t&&""!==t.trim()?Ad(e,t):t}function Md(e){return!("svg"!==e.tagName&&!e.ownerSVGElement)}function Ad(e,t){let n=Od.get(e);if(n||(n=e.createElement("a"),Od.set(e,n)),t){if(t.startsWith("blob:")||t.startsWith("data:"))return t}else t="";return n.setAttribute("href",t),n.href}function Rd(e,t,n,r,s,i){return r&&("src"===n||"href"===n&&("use"!==t||"#"!==r[0])||"xlink:href"===n&&"#"!==r[0]||"background"===n&&("table"===t||"td"===t||"th"===t)?xd(e,r):"srcset"===n?function(e,t){if(""===t.trim())return t;let n=0;function r(e){let r;const s=e.exec(t.substring(n));return s?(r=s[0],n+=r.length,r):""}const s=[];for(;r(Td),!(n>=t.length);){let i=r(Ed);if(","===i.slice(-1))i=xd(e,i.substring(0,i.length-1)),s.push(i);else{let r="";i=xd(e,i);let o=!1;for(;;){const e=t.charAt(n);if(""===e){s.push((i+r).trim());break}if(o)")"===e&&(o=!1);else{if(","===e){n+=1,s.push((i+r).trim());break}"("===e&&(o=!0)}r+=e,n+=1}}}return s.join(", ")}(e,r):"style"===n?Pd(r,Ad(e)):"object"===t&&"data"===n?xd(e,r):"function"==typeof i?i(n,r,s):r)}function Dd(e,t,n){return("video"===e||"audio"===e)&&"autoplay"===t}function Ld(e,t,n,r){try{if(r&&e.matches(r))return!1;if("string"==typeof t){if(e.classList.contains(t))return!0}else for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}if(n)return e.matches(n)}catch(e){}return!1}function Bd(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:Bd(e.parentNode,t,n,r+1)}function $d(e,t){return n=>{const r=n;if(null===r)return!1;try{if(e)if("string"==typeof e){if(r.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}(r,e))return!0;return!(!t||!r.matches(t))}catch(e){return!1}}}function Nd(e,t,n,r,s,i){try{const o=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===o)return!1;if("INPUT"===o.tagName){const e=o.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(e))return!0}let a=-1,l=-1;if(i){if(l=Bd(o,$d(r,s)),l<0)return!0;a=Bd(o,$d(t,n),l>=0?l:1/0)}else{if(a=Bd(o,$d(t,n)),a<0)return!1;l=Bd(o,$d(r,s),a>=0?a:1/0)}return a>=0?!(l>=0)||a<=l:!(l>=0)&&!!i}catch(e){}return!!i}function jd(e,t){const{doc:n,mirror:r,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:a,maskAttributeFn:l,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:p,inlineStylesheet:h,maskInputOptions:m={},maskTextFn:g,maskInputFn:f,dataURLOptions:b={},inlineImages:y,recordCanvas:v,keepIframeSrcFn:w,newlyAddedElement:S=!1}=t,_=function(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return 1===n?void 0:n}(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:Xu.Document,childNodes:[],compatMode:e.compatMode}:{type:Xu.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:Xu.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:_};case e.ELEMENT_NODE:return function(e,t){const{doc:n,blockClass:r,blockSelector:s,unblockSelector:i,inlineStylesheet:o,maskInputOptions:a={},maskAttributeFn:l,maskInputFn:c,dataURLOptions:u={},inlineImages:d,recordCanvas:p,keepIframeSrcFn:h,newlyAddedElement:m=!1,rootId:g,maskTextClass:f,unmaskTextClass:b,maskTextSelector:y,unmaskTextSelector:v}=t,w=Ld(e,r,s,i),S=function(e){if(e instanceof HTMLFormElement)return"form";const t=od(e.tagName);return yd.test(t)?"div":t}(e);let _={};const I=e.attributes.length;for(let t=0;t<I;t++){const r=e.attributes[t];r.name&&!Dd(S,r.name,r.value)&&(_[r.name]=Rd(n,S,od(r.name),r.value,e,l))}if("link"===S&&o){const t=Array.from(n.styleSheets).find(t=>t.href===e.href);let r=null;t&&(r=td(t)),r&&(_.rel=null,_.href=null,_.crossorigin=null,_._cssText=Pd(r,t.href))}if("style"===S&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const t=td(e.sheet);t&&(_._cssText=Pd(t,Ad(n)))}if("input"===S||"textarea"===S||"select"===S||"option"===S){const t=e,n=cd(t),r=ud(t,ad(S),n),s=t.checked;if("submit"!==n&&"button"!==n&&r){const e=Nd(t,f,y,b,v,sd({type:n,tagName:ad(S),maskInputOptions:a}));_.value=id({isMasked:e,element:t,value:r,maskInputFn:c})}s&&(_.checked=s)}if("option"===S&&(e.selected&&!a.select?_.selected=!0:delete _.selected),"canvas"===S&&p)if("2d"===e.__context)(function(e){const t=e.getContext("2d");if(!t)return!0;for(let n=0;n<e.width;n+=50)for(let r=0;r<e.height;r+=50){const s=t.getImageData,i=ld in s?s[ld]:s;if(new Uint32Array(i.call(t,n,r,Math.min(50,e.width-n),Math.min(50,e.height-r)).data.buffer).some(e=>0!==e))return!1}return!0})(e)||(_.rr_dataURL=e.toDataURL(u.type,u.quality));else if(!("__context"in e)){const t=e.toDataURL(u.type,u.quality),r=n.createElement("canvas");r.width=e.width,r.height=e.height;t!==r.toDataURL(u.type,u.quality)&&(_.rr_dataURL=t)}if("img"===S&&d){wd||(wd=n.createElement("canvas"),Sd=wd.getContext("2d"));const t=e,r=t.currentSrc||t.getAttribute("src")||"<unknown-src>",s=t.crossOrigin,i=()=>{t.removeEventListener("load",i);try{wd.width=t.naturalWidth,wd.height=t.naturalHeight,Sd.drawImage(t,0,0),_.rr_dataURL=wd.toDataURL(u.type,u.quality)}catch(e){if("anonymous"!==t.crossOrigin)return t.crossOrigin="anonymous",void(t.complete&&0!==t.naturalWidth?i():t.addEventListener("load",i));console.warn(`Cannot inline img src=${r}! Error: ${e}`)}"anonymous"===t.crossOrigin&&(s?_.crossOrigin=s:t.removeAttribute("crossorigin"))};t.complete&&0!==t.naturalWidth?i():t.addEventListener("load",i)}if(("audio"===S||"video"===S)&&(_.rr_mediaState=e.paused?"paused":"played",_.rr_mediaCurrentTime=e.currentTime),m||(e.scrollLeft&&(_.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(_.rr_scrollTop=e.scrollTop)),w){const{width:t,height:n}=e.getBoundingClientRect();_={class:_.class,rr_width:`${t}px`,rr_height:`${n}px`}}let C;"iframe"===S&&!h(_.src)&&(!w&&!fd(e)&&(_.rr_src=_.src),delete _.src);try{customElements.get(S)&&(C=!0)}catch(e){}return{type:Xu.Element,tagName:S,attributes:_,childNodes:[],isSVG:Md(e)||void 0,needBlock:w,rootId:g,isCustom:C}}(e,{doc:n,blockClass:s,blockSelector:i,unblockSelector:o,inlineStylesheet:h,maskAttributeFn:l,maskInputOptions:m,maskInputFn:f,dataURLOptions:b,inlineImages:y,recordCanvas:v,keepIframeSrcFn:w,newlyAddedElement:S,rootId:_,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:p});case e.TEXT_NODE:return function(e,t){var n;const{maskAllText:r,maskTextClass:s,unmaskTextClass:i,maskTextSelector:o,unmaskTextSelector:a,maskTextFn:l,maskInputOptions:c,maskInputFn:u,rootId:d}=t,p=e.parentNode&&e.parentNode.tagName;let h=e.textContent;const m="STYLE"===p||void 0,g="SCRIPT"===p||void 0,f="TEXTAREA"===p||void 0;if(m&&h){try{e.nextSibling||e.previousSibling||null!=(n=e.parentNode.sheet)&&n.cssRules&&(h=td(e.parentNode.sheet))}catch(t){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${t}`,e)}h=Pd(h,Ad(t.doc))}g&&(h="SCRIPT_PLACEHOLDER");const b=Nd(e,s,o,i,a,r);if(!m&&!g&&!f&&h&&b&&(h=l?l(h,e.parentElement):h.replace(/[\S]/g,"*")),f&&h&&(c.textarea||b)&&(h=u?u(h,e.parentNode):h.replace(/[\S]/g,"*")),"OPTION"===p&&h){h=id({isMasked:Nd(e,s,o,i,a,sd({type:null,tagName:p,maskInputOptions:c})),element:e,value:h,maskInputFn:u})}return{type:Xu.Text,textContent:h||"",isStyle:m,rootId:d}}(e,{doc:n,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:p,maskTextFn:g,maskInputOptions:m,maskInputFn:f,rootId:_});case e.CDATA_SECTION_NODE:return{type:Xu.CDATA,textContent:"",rootId:_};case e.COMMENT_NODE:return{type:Xu.Comment,textContent:e.textContent||"",rootId:_};default:return!1}}function Fd(e){return null==e?"":e.toLowerCase()}function Ud(e,t){const{doc:n,mirror:r,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:a,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:p=!1,inlineStylesheet:h=!0,maskInputOptions:m={},maskAttributeFn:g,maskTextFn:f,maskInputFn:b,slimDOMOptions:y,dataURLOptions:v={},inlineImages:w=!1,recordCanvas:S=!1,onSerialize:_,onIframeLoad:I,iframeLoadTimeout:C=5e3,onStylesheetLoad:k,stylesheetLoadTimeout:P=5e3,keepIframeSrcFn:E=()=>!1,newlyAddedElement:T=!1}=t;let{preserveWhiteSpace:O=!0}=t;const x=jd(e,{doc:n,mirror:r,blockClass:s,blockSelector:i,maskAllText:a,unblockSelector:o,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,inlineStylesheet:h,maskInputOptions:m,maskAttributeFn:g,maskTextFn:f,maskInputFn:b,dataURLOptions:v,inlineImages:w,recordCanvas:S,keepIframeSrcFn:E,newlyAddedElement:T});if(!x)return console.warn(e,"not serialized"),null;let M;M=r.hasNode(e)?r.getId(e):function(e,t){if(t.comment&&e.type===Xu.Comment)return!0;if(e.type===Xu.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&"js"===dd(e.attributes.href)))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(Fd(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===Fd(e.attributes.name)||"icon"===Fd(e.attributes.rel)||"apple-touch-icon"===Fd(e.attributes.rel)||"shortcut icon"===Fd(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&Fd(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(Fd(e.attributes.property).match(/^(og|twitter|fb):/)||Fd(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===Fd(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===Fd(e.attributes.name)||"googlebot"===Fd(e.attributes.name)||"bingbot"===Fd(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===Fd(e.attributes.name)||"generator"===Fd(e.attributes.name)||"framework"===Fd(e.attributes.name)||"publisher"===Fd(e.attributes.name)||"progid"===Fd(e.attributes.name)||Fd(e.attributes.property).match(/^article:/)||Fd(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===Fd(e.attributes.name)||"yandex-verification"===Fd(e.attributes.name)||"csrf-token"===Fd(e.attributes.name)||"p:domain_verify"===Fd(e.attributes.name)||"verify-v1"===Fd(e.attributes.name)||"verification"===Fd(e.attributes.name)||"shopify-checkout-api-token"===Fd(e.attributes.name)))return!0}}return!1}(x,y)||!O&&x.type===Xu.Text&&!x.isStyle&&!x.textContent.replace(/^\s+|\s+$/gm,"").length?-2:vd();const A=Object.assign(x,{id:M});if(r.add(e,A),-2===M)return null;_&&_(e);let R=!p;if(A.type===Xu.Element){R=R&&!A.needBlock,delete A.needBlock;const t=e.shadowRoot;t&&ed(t)&&(A.isShadowHost=!0)}if((A.type===Xu.Document||A.type===Xu.Element)&&R){y.headWhitespace&&A.type===Xu.Element&&"head"===A.tagName&&(O=!1);const t={doc:n,mirror:r,blockClass:s,blockSelector:i,maskAllText:a,unblockSelector:o,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:p,inlineStylesheet:h,maskInputOptions:m,maskAttributeFn:g,maskTextFn:f,maskInputFn:b,slimDOMOptions:y,dataURLOptions:v,inlineImages:w,recordCanvas:S,preserveWhiteSpace:O,onSerialize:_,onIframeLoad:I,iframeLoadTimeout:C,onStylesheetLoad:k,stylesheetLoadTimeout:P,keepIframeSrcFn:E};for(const n of Array.from(e.childNodes)){const e=Ud(n,t);e&&A.childNodes.push(e)}if(function(e){return e.nodeType===e.ELEMENT_NODE}(e)&&e.shadowRoot)for(const n of Array.from(e.shadowRoot.childNodes)){const r=Ud(n,t);r&&(ed(e.shadowRoot)&&(r.isShadow=!0),A.childNodes.push(r))}}return e.parentNode&&Zu(e.parentNode)&&ed(e.parentNode)&&(A.isShadow=!0),A.type===Xu.Element&&"iframe"===A.tagName&&!Ld(e,s,i,o)&&function(e,t,n){const r=e.contentWindow;if(!r)return;let s,i=!1;try{s=r.document.readyState}catch(e){return}if("complete"!==s){const r=md(()=>{i||(t(),i=!0)},n);return void e.addEventListener("load",()=>{gd(r),i=!0,t()})}const o="about:blank";if(r.location.href!==o||e.src===o||""===e.src)return md(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}(e,()=>{const t=fd(e);if(t&&I){const n=Ud(t,{doc:t,mirror:r,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:a,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:h,maskInputOptions:m,maskAttributeFn:g,maskTextFn:f,maskInputFn:b,slimDOMOptions:y,dataURLOptions:v,inlineImages:w,recordCanvas:S,preserveWhiteSpace:O,onSerialize:_,onIframeLoad:I,iframeLoadTimeout:C,onStylesheetLoad:k,stylesheetLoadTimeout:P,keepIframeSrcFn:E});n&&I(e,n)}},C),A.type===Xu.Element&&"link"===A.tagName&&"string"==typeof A.attributes.rel&&("stylesheet"===A.attributes.rel||"preload"===A.attributes.rel&&"string"==typeof A.attributes.href&&"css"===dd(A.attributes.href))&&function(e,t,n){let r,s=!1;try{r=e.sheet}catch(e){return}if(r)return;const i=md(()=>{s||(t(),s=!0)},n);e.addEventListener("load",()=>{gd(i),s=!0,t()})}(e,()=>{if(k){const t=Ud(e,{doc:n,mirror:r,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:a,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:h,maskInputOptions:m,maskAttributeFn:g,maskTextFn:f,maskInputFn:b,slimDOMOptions:y,dataURLOptions:v,inlineImages:w,recordCanvas:S,preserveWhiteSpace:O,onSerialize:_,onIframeLoad:I,iframeLoadTimeout:C,onStylesheetLoad:k,stylesheetLoadTimeout:P,keepIframeSrcFn:E});t&&k(e,t)}},P),A}function Wd(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const Hd="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let Vd={map:{},getId(){return console.error(Hd),-1},getNode(){return console.error(Hd),null},removeNodeFromMap(){console.error(Hd)},has(){return console.error(Hd),!1},reset(){console.error(Hd)}};function zd(e,t,n={}){let r=null,s=0;return function(...i){const o=Date.now();!s&&!1===n.leading&&(s=o);const a=t-(o-s),l=this;a<=0||a>t?(r&&(function(...e){dp("clearTimeout")(...e)}(r),r=null),s=o,e.apply(l,i)):!r&&!1!==n.trailing&&(r=pp(()=>{s=!1===n.leading?0:Date.now(),r=null,e.apply(l,i)},a))}}function qd(e,t,n,r,s=window){const i=s.Object.getOwnPropertyDescriptor(e,t);return s.Object.defineProperty(e,t,r?n:{set(e){pp(()=>{n.set.call(this,e)},0),i&&i.set&&i.set.call(this,e)}}),()=>qd(e,t,i||{},!0)}function Kd(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],s=n(r);return"function"==typeof s&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=s,()=>{e[t]=r}}catch(e){return()=>{}}}typeof window<"u"&&window.Proxy&&window.Reflect&&(Vd=new Proxy(Vd,{get(e,t,n){return"map"===t&&console.error(Hd),Reflect.get(e,t,n)}}));let Gd=Date.now;function Jd(e){var t,n,r,s,i,o;const a=e.document;return{left:a.scrollingElement?a.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:(null==a?void 0:a.documentElement.scrollLeft)||(null==(n=null==(t=null==a?void 0:a.body)?void 0:t.parentElement)?void 0:n.scrollLeft)||(null==(r=null==a?void 0:a.body)?void 0:r.scrollLeft)||0,top:a.scrollingElement?a.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:(null==a?void 0:a.documentElement.scrollTop)||(null==(i=null==(s=null==a?void 0:a.body)?void 0:s.parentElement)?void 0:i.scrollTop)||(null==(o=null==a?void 0:a.body)?void 0:o.scrollTop)||0}}function Yd(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Qd(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Xd(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch(e){return null}}function Zd(e,t,n,r,s){if(!e)return!1;const i=Xd(e);if(!i)return!1;const o=$d(t,n);if(!s){const e=r&&i.matches(r);return o(i)&&!e}const a=Bd(i,o);let l=-1;return!(a<0)&&(r&&(l=Bd(i,$d(null,r))),a>-1&&l<0||a<l)}function ep(e,t){return-2===t.getId(e)}function tp(e,t){if(Zu(e))return!1;const n=t.getId(e);return!t.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||tp(e.parentNode,t))}function np(e){return!!e.changedTouches}function rp(e,t){return!("IFRAME"!==e.nodeName||!t.getMeta(e))}function sp(e,t){return!("LINK"!==e.nodeName||e.nodeType!==e.ELEMENT_NODE||!e.getAttribute||"stylesheet"!==e.getAttribute("rel")||!t.getMeta(e))}function ip(e){return!(null==e||!e.shadowRoot)}/[1-9][0-9]{12}/.test(Date.now().toString())||(Gd=()=>(new Date).getTime());class op{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){var t;return null!=(t=this.styleIDMap.get(e))?t:-1}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let n;return n=void 0===t?this.id++:t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function ap(e){var t,n;let r=null;return(null==(n=null==(t=e.getRootNode)?void 0:t.call(e))?void 0:n.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(r=e.getRootNode().host),r}function lp(e){const t=e.ownerDocument;if(!t)return!1;const n=function(e){let t,n=e;for(;t=ap(n);)n=t;return n}(e);return t.contains(n)}function cp(e){const t=e.ownerDocument;return!!t&&(t.contains(e)||lp(e))}const up={};function dp(e){const t=up[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const s=t.contentWindow;s&&s[e]&&(r=s[e]),n.head.removeChild(t)}catch(e){}return up[e]=r.bind(window)}function pp(...e){return dp("setTimeout")(...e)}var hp=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(hp||{}),mp=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(mp||{}),gp=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(gp||{}),fp=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(fp||{}),bp=(e=>(e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e))(bp||{});function yp(e){try{return e.contentDocument}catch(e){}}function vp(e){return"__ln"in e}class wp{constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let n=0;n<e;n++)t=(null==t?void 0:t.next)||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&vp(e.previousSibling)){const n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&vp(e.nextSibling)&&e.nextSibling.__ln.previous){const n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;null===t.next&&(this.tail=t),this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const Sp=(e,t)=>`${e}@${t}`;class _p{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],t=new Set,n=new wp,r=e=>{let t=e,n=-2;for(;-2===n;)t=t&&t.nextSibling,n=t&&this.mirror.getId(t);return n},s=s=>{if(!s.parentNode||!cp(s))return;const i=Zu(s.parentNode)?this.mirror.getId(ap(s)):this.mirror.getId(s.parentNode),o=r(s);if(-1===i||-1===o)return n.addNode(s);const a=Ud(s,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:e=>{rp(e,this.mirror)&&!Zd(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(e),sp(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),ip(s)&&this.shadowDomManager.addShadowRoot(s.shadowRoot,this.doc)},onIframeLoad:(e,t)=>{Zd(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(e,t),e.contentWindow&&this.canvasManager.addWindow(e.contentWindow),this.shadowDomManager.observeAttachShadow(e))},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)}});a&&(e.push({parentId:i,nextId:o,node:a}),t.add(a.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const e of this.movedSet)Cp(this.removes,e,this.mirror)&&!this.movedSet.has(e.parentNode)||s(e);for(const e of this.addedSet)!kp(this.droppedSet,e)&&!Cp(this.removes,e,this.mirror)||kp(this.movedSet,e)?s(e):this.droppedSet.add(e);let i=null;for(;n.length;){let e=null;if(i){const t=this.mirror.getId(i.value.parentNode),n=r(i.value);-1!==t&&-1!==n&&(e=i)}if(!e){let t=n.tail;for(;t;){const n=t;if(t=t.previous,n){const t=this.mirror.getId(n.value.parentNode);if(-1===r(n.value))continue;if(-1!==t){e=n;break}{const t=n.value;if(t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const r=t.parentNode.host;if(-1!==this.mirror.getId(r)){e=n;break}}}}}}if(!e){for(;n.head;)n.removeNode(n.head.value);break}i=e.previous,n.removeNode(e.value),s(e.value)}const o={texts:this.texts.map(e=>({id:this.mirror.getId(e.node),value:e.value})).filter(e=>!t.has(e.id)).filter(e=>this.mirror.has(e.id)),attributes:this.attributes.map(e=>{const{attributes:t}=e;if("string"==typeof t.style){const n=JSON.stringify(e.styleDiff),r=JSON.stringify(e._unchangedStyles);n.length<t.style.length&&(n+r).split("var(").length===t.style.split("var(").length&&(t.style=e.styleDiff)}return{id:this.mirror.getId(e.node),attributes:t}}).filter(e=>!t.has(e.id)).filter(e=>this.mirror.has(e.id)),removes:this.removes,adds:e};!o.texts.length&&!o.attributes.length&&!o.removes.length&&!o.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(o))},this.processMutation=e=>{if(!ep(e.target,this.mirror))switch(e.type){case"characterData":{const t=e.target.textContent;!Zd(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&t!==e.oldValue&&this.texts.push({value:Nd(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&t?this.maskTextFn?this.maskTextFn(t,Xd(e.target)):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const t=e.target;let n=e.attributeName,r=e.target.getAttribute(n);if("value"===n){const n=cd(t),s=t.tagName;r=ud(t,s,n);const i=sd({maskInputOptions:this.maskInputOptions,tagName:s,type:n});r=id({isMasked:Nd(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,i),element:t,value:r,maskInputFn:this.maskInputFn})}if(Zd(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||r===e.oldValue)return;let s=this.attributeMap.get(e.target);if("IFRAME"===t.tagName&&"src"===n&&!this.keepIframeSrcFn(r)){if(yp(t))return;n="rr_src"}if(s||(s={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(s),this.attributeMap.set(e.target,s)),"type"===n&&"INPUT"===t.tagName&&"password"===(e.oldValue||"").toLowerCase()&&t.setAttribute("data-rr-is-password","true"),!Dd(t.tagName,n)&&(s.attributes[n]=Rd(this.doc,od(t.tagName),od(n),r,t,this.maskAttributeFn),"style"===n)){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(e){this.unattachedDoc=this.doc}const n=this.unattachedDoc.createElement("span");e.oldValue&&n.setAttribute("style",e.oldValue);for(const e of Array.from(t.style)){const r=t.style.getPropertyValue(e),i=t.style.getPropertyPriority(e);r!==n.style.getPropertyValue(e)||i!==n.style.getPropertyPriority(e)?s.styleDiff[e]=""===i?r:[r,i]:s._unchangedStyles[e]=[r,i]}for(const e of Array.from(n.style))""===t.style.getPropertyValue(e)&&(s.styleDiff[e]=!1)}break}case"childList":if(Zd(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;e.addedNodes.forEach(t=>this.genAdds(t,e.target)),e.removedNodes.forEach(t=>{const n=this.mirror.getId(t),r=Zu(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);Zd(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||ep(t,this.mirror)||!function(e,t){return-1!==t.getId(e)}(t,this.mirror)||(this.addedSet.has(t)?(Ip(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&-1===n||tp(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[Sp(n,r)]?Ip(this.movedSet,t):this.removes.push({parentId:r,id:n,isShadow:!(!Zu(e.target)||!ed(e.target))||void 0})),this.mapRemoves.push(t))})}},this.genAdds=(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!this.addedSet.has(e)&&!this.movedSet.has(e)){if(this.mirror.hasNode(e)){if(ep(e,this.mirror))return;this.movedSet.add(e);let n=null;t&&this.mirror.hasNode(t)&&(n=this.mirror.getId(t)),n&&-1!==n&&(this.movedMap[Sp(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);Zd(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(e.childNodes.forEach(e=>this.genAdds(e)),ip(e)&&e.shadowRoot.childNodes.forEach(t=>{this.processedNodeManager.add(t,this),this.genAdds(t,e)}))}}}init(e){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(t=>{this[t]=e[t]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function Ip(e,t){e.delete(t),t.childNodes.forEach(t=>Ip(e,t))}function Cp(e,t,n){return 0!==e.length&&function(e,t,n){let r=t.parentNode;for(;r;){const t=n.getId(r);if(e.some(e=>e.id===t))return!0;r=r.parentNode}return!1}(e,t,n)}function kp(e,t){return 0!==e.size&&Pp(e,t)}function Pp(e,t){const{parentNode:n}=t;return!!n&&(!!e.has(n)||Pp(e,n))}let Ep;const Tp=e=>Ep?(...t)=>{try{return e(...t)}catch(e){if(Ep&&!0===Ep(e))return()=>{};throw e}}:e,Op=[];function xp(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(e){}return e&&e.target}function Mp(e,t){var n,r;const s=new _p;Op.push(s),s.init(e);let i=window.MutationObserver||window.__rrMutationObserver;const o=null==(r=null==(n=null==window?void 0:window.Zone)?void 0:n.__symbol__)?void 0:r.call(n,"MutationObserver");o&&window[o]&&(i=window[o]);const a=new i(Tp(t=>{e.onMutation&&!1===e.onMutation(t)||s.processMutations.bind(s)(t)}));return a.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),a}function Ap({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,sampling:o}){if(!1===o.mouseInteraction)return()=>{};const a=!0===o.mouseInteraction||void 0===o.mouseInteraction?{}:o.mouseInteraction,l=[];let c=null;return Object.keys(gp).filter(e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==a[e]).forEach(o=>{let a=od(o);const u=(t=>o=>{const a=xp(o);if(Zd(a,r,s,i,!0))return;let l=null,u=t;if("pointerType"in o){switch(o.pointerType){case"mouse":l=fp.Mouse;break;case"touch":l=fp.Touch;break;case"pen":l=fp.Pen}l===fp.Touch?gp[t]===gp.MouseDown?u="TouchStart":gp[t]===gp.MouseUp&&(u="TouchEnd"):fp.Pen}else np(o)&&(l=fp.Touch);null!==l?(c=l,(u.startsWith("Touch")&&l===fp.Touch||u.startsWith("Mouse")&&l===fp.Mouse)&&(l=null)):gp[t]===gp.Click&&(l=c,c=null);const d=np(o)?o.changedTouches[0]:o;if(!d)return;const p=n.getId(a),{clientX:h,clientY:m}=d;Tp(e)(Bi({type:gp[u],id:p,x:h,y:m},null!==l&&{pointerType:l}))})(o);if(window.PointerEvent)switch(gp[o]){case gp.MouseDown:case gp.MouseUp:a=a.replace("mouse","pointer");break;case gp.TouchStart:case gp.TouchEnd:return}l.push(Wd(a,u,t))}),Tp(()=>{l.forEach(e=>e())})}function Rp({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,sampling:o}){return Wd("scroll",Tp(zd(Tp(o=>{const a=xp(o);if(!a||Zd(a,r,s,i,!0))return;const l=n.getId(a);if(a===t&&t.defaultView){const n=Jd(t.defaultView);e({id:l,x:n.left,y:n.top})}else e({id:l,x:a.scrollLeft,y:a.scrollTop})}),o.scroll||100)),t)}const Dp=["INPUT","TEXTAREA","SELECT"],Lp=new WeakMap;function Bp({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,ignoreClass:o,ignoreSelector:a,maskInputOptions:l,maskInputFn:c,sampling:u,userTriggeredOnInput:d,maskTextClass:p,unmaskTextClass:h,maskTextSelector:m,unmaskTextSelector:g}){function f(e){let n=xp(e);const u=e.isTrusted,f=n&&ad(n.tagName);if("OPTION"===f&&(n=n.parentElement),!n||!f||Dp.indexOf(f)<0||Zd(n,r,s,i,!0))return;const y=n;if(y.classList.contains(o)||a&&y.matches(a))return;const v=cd(n);let w=ud(y,f,v),S=!1;const _=sd({maskInputOptions:l,tagName:f,type:v}),I=Nd(n,p,m,h,g,_);("radio"===v||"checkbox"===v)&&(S=n.checked),w=id({isMasked:I,element:n,value:w,maskInputFn:c}),b(n,d?{text:w,isChecked:S,userTriggered:u}:{text:w,isChecked:S});const C=n.name;"radio"===v&&C&&S&&t.querySelectorAll(`input[type="radio"][name="${C}"]`).forEach(e=>{if(e!==n){const t=id({isMasked:I,element:e,value:ud(e,f,v),maskInputFn:c});b(e,d?{text:t,isChecked:!S,userTriggered:!1}:{text:t,isChecked:!S})}})}function b(t,r){const s=Lp.get(t);if(!s||s.text!==r.text||s.isChecked!==r.isChecked){Lp.set(t,r);const s=n.getId(t);Tp(e)($i(Bi({},r),{id:s}))}}const y=("last"===u.input?["change"]:["input","change"]).map(e=>Wd(e,Tp(f),t)),v=t.defaultView;if(!v)return()=>{y.forEach(e=>e())};const w=v.Object.getOwnPropertyDescriptor(v.HTMLInputElement.prototype,"value"),S=[[v.HTMLInputElement.prototype,"value"],[v.HTMLInputElement.prototype,"checked"],[v.HTMLSelectElement.prototype,"value"],[v.HTMLTextAreaElement.prototype,"value"],[v.HTMLSelectElement.prototype,"selectedIndex"],[v.HTMLOptionElement.prototype,"selected"]];return w&&w.set&&y.push(...S.map(e=>qd(e[0],e[1],{set(){Tp(f)({target:this,isTrusted:!1})}},!1,v))),Tp(()=>{y.forEach(e=>e())})}function $p(e){return function(e,t){if(Up("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||Up("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||Up("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||Up("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){const n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else if(e.parentStyleSheet){const n=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(n)}return t}(e,[])}function Np(e,t,n){let r,s;return e?(e.ownerNode?r=t.getId(e.ownerNode):s=n.getId(e),{styleId:s,id:r}):{}}function jp({mirror:e,stylesheetManager:t},n){var r,s,i;let o=null;o="#document"===n.nodeName?e.getId(n):e.getId(n.host);const a="#document"===n.nodeName?null==(r=n.defaultView)?void 0:r.Document:null==(i=null==(s=n.ownerDocument)?void 0:s.defaultView)?void 0:i.ShadowRoot,l=null!=a&&a.prototype?Object.getOwnPropertyDescriptor(null==a?void 0:a.prototype,"adoptedStyleSheets"):void 0;return null!==o&&-1!==o&&a&&l?(Object.defineProperty(n,"adoptedStyleSheets",{configurable:l.configurable,enumerable:l.enumerable,get(){var e;return null==(e=l.get)?void 0:e.call(this)},set(e){var n;const r=null==(n=l.set)?void 0:n.call(this,e);if(null!==o&&-1!==o)try{t.adoptStyleSheets(e,o)}catch(e){}return r}}),Tp(()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:l.configurable,enumerable:l.enumerable,get:l.get,set:l.set})})):()=>{}}function Fp(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};let r;e.recordDOM&&(r=Mp(e,e.doc));const s=function({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(!1===t.mousemove)return()=>{};const s="number"==typeof t.mousemove?t.mousemove:50,i="number"==typeof t.mousemoveCallback?t.mousemoveCallback:500;let o,a=[];const l=zd(Tp(t=>{const n=Date.now()-o;e(a.map(e=>(e.timeOffset-=n,e)),t),a=[],o=null}),i),c=Tp(zd(Tp(e=>{const t=xp(e),{clientX:n,clientY:s}=np(e)?e.changedTouches[0]:e;o||(o=Gd()),a.push({x:n,y:s,id:r.getId(t),timeOffset:Gd()-o}),l(typeof DragEvent<"u"&&e instanceof DragEvent?mp.Drag:e instanceof MouseEvent?mp.MouseMove:mp.TouchMove)}),s,{trailing:!1})),u=[Wd("mousemove",c,n),Wd("touchmove",c,n),Wd("drag",c,n)];return Tp(()=>{u.forEach(e=>e())})}(e),i=Ap(e),o=Rp(e),a=function({viewportResizeCb:e},{win:t}){let n=-1,r=-1;return Wd("resize",Tp(zd(Tp(()=>{const t=Yd(),s=Qd();(n!==t||r!==s)&&(e({width:Number(s),height:Number(t)}),n=t,r=s)}),200)),t)}(e,{win:n}),l=Bp(e),c=function({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:s,sampling:i,doc:o}){const a=Tp(o=>zd(Tp(i=>{const a=xp(i);if(!a||Zd(a,t,n,r,!0))return;const{currentTime:l,volume:c,muted:u,playbackRate:d}=a;e({type:o,id:s.getId(a),currentTime:l,volume:c,muted:u,playbackRate:d})}),i.media||500)),l=[Wd("play",a(bp.Play),o),Wd("pause",a(bp.Pause),o),Wd("seeked",a(bp.Seeked),o),Wd("volumechange",a(bp.VolumeChange),o),Wd("ratechange",a(bp.RateChange),o)];return Tp(()=>{l.forEach(e=>e())})}(e);let u=()=>{},d=()=>{},p=()=>{},h=()=>{};e.recordDOM&&(u=function({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const s=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(s,{apply:Tp((r,s,i)=>{const[o,a]=i,{id:l,styleId:c}=Np(s,t,n.styleMirror);return(l&&-1!==l||c&&-1!==c)&&e({id:l,styleId:c,adds:[{rule:o,index:a}]}),r.apply(s,i)})});const i=r.CSSStyleSheet.prototype.deleteRule;let o,a;r.CSSStyleSheet.prototype.deleteRule=new Proxy(i,{apply:Tp((r,s,i)=>{const[o]=i,{id:a,styleId:l}=Np(s,t,n.styleMirror);return(a&&-1!==a||l&&-1!==l)&&e({id:a,styleId:l,removes:[{index:o}]}),r.apply(s,i)})}),r.CSSStyleSheet.prototype.replace&&(o=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(o,{apply:Tp((r,s,i)=>{const[o]=i,{id:a,styleId:l}=Np(s,t,n.styleMirror);return(a&&-1!==a||l&&-1!==l)&&e({id:a,styleId:l,replace:o}),r.apply(s,i)})})),r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:Tp((r,s,i)=>{const[o]=i,{id:a,styleId:l}=Np(s,t,n.styleMirror);return(a&&-1!==a||l&&-1!==l)&&e({id:a,styleId:l,replaceSync:o}),r.apply(s,i)})}));const l={};Wp("CSSGroupingRule")?l.CSSGroupingRule=r.CSSGroupingRule:(Wp("CSSMediaRule")&&(l.CSSMediaRule=r.CSSMediaRule),Wp("CSSConditionRule")&&(l.CSSConditionRule=r.CSSConditionRule),Wp("CSSSupportsRule")&&(l.CSSSupportsRule=r.CSSSupportsRule));const c={};return Object.entries(l).forEach(([r,s])=>{c[r]={insertRule:s.prototype.insertRule,deleteRule:s.prototype.deleteRule},s.prototype.insertRule=new Proxy(c[r].insertRule,{apply:Tp((r,s,i)=>{const[o,a]=i,{id:l,styleId:c}=Np(s.parentStyleSheet,t,n.styleMirror);return(l&&-1!==l||c&&-1!==c)&&e({id:l,styleId:c,adds:[{rule:o,index:[...$p(s),a||0]}]}),r.apply(s,i)})}),s.prototype.deleteRule=new Proxy(c[r].deleteRule,{apply:Tp((r,s,i)=>{const[o]=i,{id:a,styleId:l}=Np(s.parentStyleSheet,t,n.styleMirror);return(a&&-1!==a||l&&-1!==l)&&e({id:a,styleId:l,removes:[{index:[...$p(s),o]}]}),r.apply(s,i)})})}),Tp(()=>{r.CSSStyleSheet.prototype.insertRule=s,r.CSSStyleSheet.prototype.deleteRule=i,o&&(r.CSSStyleSheet.prototype.replace=o),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(l).forEach(([e,t])=>{t.prototype.insertRule=c[e].insertRule,t.prototype.deleteRule=c[e].deleteRule})})}(e,{win:n}),d=jp(e,e.doc),p=function({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:s}){const i=s.CSSStyleDeclaration.prototype.setProperty;s.CSSStyleDeclaration.prototype.setProperty=new Proxy(i,{apply:Tp((s,o,a)=>{var l;const[c,u,d]=a;if(n.has(c))return i.apply(o,[c,u,d]);const{id:p,styleId:h}=Np(null==(l=o.parentRule)?void 0:l.parentStyleSheet,t,r.styleMirror);return(p&&-1!==p||h&&-1!==h)&&e({id:p,styleId:h,set:{property:c,value:u,priority:d},index:$p(o.parentRule)}),s.apply(o,a)})});const o=s.CSSStyleDeclaration.prototype.removeProperty;return s.CSSStyleDeclaration.prototype.removeProperty=new Proxy(o,{apply:Tp((s,i,a)=>{var l;const[c]=a;if(n.has(c))return o.apply(i,[c]);const{id:u,styleId:d}=Np(null==(l=i.parentRule)?void 0:l.parentStyleSheet,t,r.styleMirror);return(u&&-1!==u||d&&-1!==d)&&e({id:u,styleId:d,remove:{property:c},index:$p(i.parentRule)}),s.apply(i,a)})}),Tp(()=>{s.CSSStyleDeclaration.prototype.setProperty=i,s.CSSStyleDeclaration.prototype.removeProperty=o})}(e,{win:n}),e.collectFonts&&(h=function({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],s=new WeakMap,i=n.FontFace;n.FontFace=function(e,t,n){const r=new i(e,t,n);return s.set(r,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),r};const o=Kd(t.fonts,"add",function(t){return function(n){return pp(Tp(()=>{const t=s.get(n);t&&(e(t),s.delete(n))}),0),t.apply(this,[n])}});return r.push(()=>{n.FontFace=i}),r.push(o),Tp(()=>{r.forEach(e=>e())})}(e)));const m=function(e){const{doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,selectionCb:o}=e;let a=!0;const l=Tp(()=>{const e=t.getSelection();if(!e||a&&null!=e&&e.isCollapsed)return;a=e.isCollapsed||!1;const l=[],c=e.rangeCount||0;for(let t=0;t<c;t++){const o=e.getRangeAt(t),{startContainer:a,startOffset:c,endContainer:u,endOffset:d}=o;Zd(a,r,s,i,!0)||Zd(u,r,s,i,!0)||l.push({start:n.getId(a),startOffset:c,end:n.getId(u),endOffset:d})}o({ranges:l})});return l(),Wd("selectionchange",l)}(e),g=function({doc:e,customElementCb:t}){const n=e.defaultView;return n&&n.customElements?Kd(n.customElements,"define",function(e){return function(n,r,s){try{t({define:{name:n}})}catch(e){}return e.apply(this,[n,r,s])}}):()=>{}}(e),f=[];for(const t of e.plugins)f.push(t.observer(t.callback,n,t.options));return Tp(()=>{Op.forEach(e=>e.reset()),null==r||r.disconnect(),s(),i(),o(),a(),l(),c(),u(),d(),p(),h(),m(),g(),f.forEach(e=>e())})}function Up(e){return typeof window[e]<"u"}function Wp(e){return!!(typeof window[e]<"u"&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class Hp{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,t,n,r){const s=n||this.getIdToRemoteIdMap(e),i=r||this.getRemoteIdToIdMap(e);let o=s.get(t);return o||(o=this.generateIdFn(),s.set(t,o),i.set(o,t)),o}getIds(e,t){const n=this.getIdToRemoteIdMap(e),r=this.getRemoteIdToIdMap(e);return t.map(t=>this.getId(e,t,n,r))}getRemoteId(e,t,n){const r=n||this.getRemoteIdToIdMap(e);if("number"!=typeof t)return t;return r.get(t)||-1}getRemoteIds(e,t){const n=this.getRemoteIdToIdMap(e);return t.map(t=>this.getRemoteId(e,t,n))}reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}class Vp{constructor(){this.crossOriginIframeMirror=new Hp(vd),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class zp{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new Hp(vd),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Hp(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){var n,r;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&(null==(n=e.contentWindow)||n.addEventListener("message",this.handleMessage.bind(this))),null==(r=this.loadListener)||r.call(this,e);const s=yp(e);s&&s.adoptedStyleSheets&&s.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(s.adoptedStyleSheets,this.mirror.getId(s))}handleMessage(e){const t=e;if("rrweb"!==t.data.type||t.origin!==t.data.origin||!e.source)return;const n=this.crossOriginIframeMap.get(e.source);if(!n)return;const r=this.transformCrossOriginEvent(n,t.data.event);r&&this.wrappedEmit(r,t.data.isCheckout)}transformCrossOriginEvent(e,t){var n;switch(t.type){case hp.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);const n=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,n),this.patchRootIdOnNode(t.data.node,n),{timestamp:t.timestamp,type:hp.IncrementalSnapshot,data:{source:mp.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case hp.Meta:case hp.Load:case hp.DomContentLoaded:return!1;case hp.Plugin:return t;case hp.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case hp.IncrementalSnapshot:switch(t.data.source){case mp.Mutation:return t.data.adds.forEach(t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(t.node,e);const n=this.crossOriginIframeRootIdMap.get(e);n&&this.patchRootIdOnNode(t.node,n)}),t.data.removes.forEach(t=>{this.replaceIds(t,e,["parentId","id"])}),t.data.attributes.forEach(t=>{this.replaceIds(t,e,["id"])}),t.data.texts.forEach(t=>{this.replaceIds(t,e,["id"])}),t;case mp.Drag:case mp.TouchMove:case mp.MouseMove:return t.data.positions.forEach(t=>{this.replaceIds(t,e,["id"])}),t;case mp.ViewportResize:return!1;case mp.MediaInteraction:case mp.MouseInteraction:case mp.Scroll:case mp.CanvasMutation:case mp.Input:return this.replaceIds(t.data,e,["id"]),t;case mp.StyleSheetRule:case mp.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case mp.Font:return t;case mp.Selection:return t.data.ranges.forEach(t=>{this.replaceIds(t,e,["start","end"])}),t;case mp.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),null==(n=t.data.styles)||n.forEach(t=>{this.replaceStyleIds(t,e,["styleId"])}),t}}return!1}replace(e,t,n,r){for(const s of r)!Array.isArray(t[s])&&"number"!=typeof t[s]||(Array.isArray(t[s])?t[s]=e.getIds(n,t[s]):t[s]=e.getId(n,t[s]));return t}replaceIds(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}replaceStyleIds(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach(e=>{this.replaceIdOnNode(e,t)})}patchRootIdOnNode(e,t){e.type!==Xu.Document&&!e.rootId&&(e.rootId=t),"childNodes"in e&&e.childNodes.forEach(e=>{this.patchRootIdOnNode(e,t)})}}class qp{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class Kp{constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!ed(e)||this.shadowDoms.has(e))return;this.shadowDoms.add(e),this.bypassOptions.canvasManager.addShadowRoot(e);const n=Mp($i(Bi({},this.bypassOptions),{doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e);this.restoreHandlers.push(()=>n.disconnect()),this.restoreHandlers.push(Rp($i(Bi({},this.bypassOptions),{scrollCb:this.scrollCb,doc:e,mirror:this.mirror}))),pp(()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(jp({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))},0)}observeAttachShadow(e){const t=yp(e),n=function(e){try{return e.contentWindow}catch(e){}}(e);!t||!n||this.patchAttachShadow(n.Element,t)}patchAttachShadow(e,t){const n=this;this.restoreHandlers.push(Kd(e.prototype,"attachShadow",function(e){return function(r){const s=e.call(this,r);return this.shadowRoot&&cp(this)&&n.addShadowRoot(this.shadowRoot,t),s}}))}reset(){this.restoreHandlers.forEach(e=>{try{e()}catch(e){}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}}for(var Gp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Jp=typeof Uint8Array>"u"?[]:new Uint8Array(256),Yp=0;Yp<64;Yp++)Jp[Gp.charCodeAt(Yp)]=Yp;class Qp{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}}class Xp{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new op,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(0===e.length)return;const n={id:t,styleIds:[]},r=[];for(const t of e){let e;this.styleMirror.has(t)?e=this.styleMirror.getId(t):(e=this.styleMirror.add(t),r.push({styleId:e,rules:Array.from(t.rules||CSSRule,(e,t)=>({rule:nd(e),index:t}))})),n.styleIds.push(e)}r.length>0&&(n.styles=r),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class Zp{constructor(){this.nodeMap=new WeakMap,this.active=!1}inOtherBuffer(e,t){const n=this.nodeMap.get(e);return n&&Array.from(n).some(e=>e!==t)}add(e,t){this.active||(this.active=!0,function(...e){dp("requestAnimationFrame")(...e)}(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}destroy(){}}let eh,th;var nh;try{if(2!==Array.from([1],e=>2*e)[0]){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=(null==(nh=e.contentWindow)?void 0:nh.Array.from)||Array.from,document.body.removeChild(e)}}catch(oh){console.debug("Unable to override Array.from",oh)}const rh=new rd;function sh(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:s="rr-block",blockSelector:i=null,unblockSelector:o=null,ignoreClass:a="rr-ignore",ignoreSelector:l=null,maskAllText:c=!1,maskTextClass:u="rr-mask",unmaskTextClass:d=null,maskTextSelector:p=null,unmaskTextSelector:h=null,inlineStylesheet:m=!0,maskAllInputs:g,maskInputOptions:f,slimDOMOptions:b,maskAttributeFn:y,maskInputFn:v,maskTextFn:w,maxCanvasSize:S=null,packFn:_,sampling:I={},dataURLOptions:C={},mousemoveWait:k,recordDOM:P=!0,recordCanvas:E=!1,recordCrossOriginIframes:T=!1,recordAfter:O=("DOMContentLoaded"===e.recordAfter?e.recordAfter:"load"),userTriggeredOnInput:x=!1,collectFonts:M=!1,inlineImages:A=!1,plugins:R,keepIframeSrcFn:D=()=>!1,ignoreCSSAttributes:L=new Set([]),errorHandler:B,onMutation:$,getCanvasManager:N}=e;!function(e){Ep=e}(B);const j=!T||window.parent===window;let F=!1;if(!j)try{window.parent.document&&(F=!1)}catch(e){F=!0}if(j&&!t)throw new Error("emit function is required");if(!j&&!F)return()=>{};void 0!==k&&void 0===I.mousemove&&(I.mousemove=k),rh.reset();const U=!0===g?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:void 0!==f?f:{},W=!0===b||"all"===b?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===b,headMetaDescKeywords:"all"===b}:b||{};!function(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let t=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do{if(this===t)return!0}while(t=t&&t.parentNode);return!1})}();let H,V=0;const z=e=>{for(const t of R||[])t.eventProcessor&&(e=t.eventProcessor(e));return _&&!F&&(e=_(e)),e};eh=(e,s)=>{var i;const o=e;if(o.timestamp=Gd(),null!=(i=Op[0])&&i.isFrozen()&&o.type!==hp.FullSnapshot&&!(o.type===hp.IncrementalSnapshot&&o.data.source===mp.Mutation)&&Op.forEach(e=>e.unfreeze()),j)null==t||t(z(o),s);else if(F){const e={type:"rrweb",event:z(o),origin:window.location.origin,isCheckout:s};window.parent.postMessage(e,"*")}if(o.type===hp.FullSnapshot)H=o,V=0;else if(o.type===hp.IncrementalSnapshot){if(o.data.source===mp.Mutation&&o.data.isAttachIframe)return;V++;const e=r&&V>=r,t=n&&H&&o.timestamp-H.timestamp>n;(e||t)&&ee(!0)}};const q=e=>{eh({type:hp.IncrementalSnapshot,data:Bi({source:mp.Mutation},e)})},K=e=>eh({type:hp.IncrementalSnapshot,data:Bi({source:mp.Scroll},e)}),G=e=>eh({type:hp.IncrementalSnapshot,data:Bi({source:mp.CanvasMutation},e)}),J=new Xp({mutationCb:q,adoptedStyleSheetCb:e=>eh({type:hp.IncrementalSnapshot,data:Bi({source:mp.AdoptedStyleSheet},e)})}),Y="boolean"==typeof __RRWEB_EXCLUDE_IFRAME__&&__RRWEB_EXCLUDE_IFRAME__?new Vp:new zp({mirror:rh,mutationCb:q,stylesheetManager:J,recordCrossOriginIframes:T,wrappedEmit:eh});for(const e of R||[])e.getMirror&&e.getMirror({nodeMirror:rh,crossOriginIframeMirror:Y.crossOriginIframeMirror,crossOriginIframeStyleMirror:Y.crossOriginIframeStyleMirror});const Q=new Zp,X=function(e,t){try{return e?e(t):new Qp}catch(e){return console.warn("Unable to initialize CanvasManager"),new Qp}}(N,{mirror:rh,win:window,mutationCb:e=>eh({type:hp.IncrementalSnapshot,data:Bi({source:mp.CanvasMutation},e)}),recordCanvas:E,blockClass:s,blockSelector:i,unblockSelector:o,maxCanvasSize:S,sampling:I.canvas,dataURLOptions:C,errorHandler:B}),Z="boolean"==typeof __RRWEB_EXCLUDE_SHADOW_DOM__&&__RRWEB_EXCLUDE_SHADOW_DOM__?new qp:new Kp({mutationCb:q,scrollCb:K,bypassOptions:{onMutation:$,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,inlineStylesheet:m,maskInputOptions:U,dataURLOptions:C,maskAttributeFn:y,maskTextFn:w,maskInputFn:v,recordCanvas:E,inlineImages:A,sampling:I,slimDOMOptions:W,iframeManager:Y,stylesheetManager:J,canvasManager:X,keepIframeSrcFn:D,processedNodeManager:Q},mirror:rh}),ee=(e=!1)=>{if(!P)return;eh({type:hp.Meta,data:{href:window.location.href,width:Qd(),height:Yd()}},e),J.reset(),Z.init(),Op.forEach(e=>e.lock());const t=function(e,t){const{mirror:n=new rd,blockClass:r="rr-block",blockSelector:s=null,unblockSelector:i=null,maskAllText:o=!1,maskTextClass:a="rr-mask",unmaskTextClass:l=null,maskTextSelector:c=null,unmaskTextSelector:u=null,inlineStylesheet:d=!0,inlineImages:p=!1,recordCanvas:h=!1,maskAllInputs:m=!1,maskAttributeFn:g,maskTextFn:f,maskInputFn:b,slimDOM:y=!1,dataURLOptions:v,preserveWhiteSpace:w,onSerialize:S,onIframeLoad:_,iframeLoadTimeout:I,onStylesheetLoad:C,stylesheetLoadTimeout:k,keepIframeSrcFn:P=()=>!1}=t||{};return Ud(e,{doc:e,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,maskAllText:o,maskTextClass:a,unmaskTextClass:l,maskTextSelector:c,unmaskTextSelector:u,skipChild:!1,inlineStylesheet:d,maskInputOptions:!0===m?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:!1===m?{}:m,maskAttributeFn:g,maskTextFn:f,maskInputFn:b,slimDOMOptions:!0===y||"all"===y?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===y,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===y?{}:y,dataURLOptions:v,inlineImages:p,recordCanvas:h,preserveWhiteSpace:w,onSerialize:S,onIframeLoad:_,iframeLoadTimeout:I,onStylesheetLoad:C,stylesheetLoadTimeout:k,keepIframeSrcFn:P,newlyAddedElement:!1})}(document,{mirror:rh,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,inlineStylesheet:m,maskAllInputs:U,maskAttributeFn:y,maskInputFn:v,maskTextFn:w,slimDOM:W,dataURLOptions:C,recordCanvas:E,inlineImages:A,onSerialize:e=>{rp(e,rh)&&Y.addIframe(e),sp(e,rh)&&J.trackLinkElement(e),ip(e)&&Z.addShadowRoot(e.shadowRoot,document)},onIframeLoad:(e,t)=>{Y.attachIframe(e,t),e.contentWindow&&X.addWindow(e.contentWindow),Z.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{J.attachLinkElement(e,t)},keepIframeSrcFn:D});if(!t)return console.warn("Failed to snapshot the document");eh({type:hp.FullSnapshot,data:{node:t,initialOffset:Jd(window)}}),Op.forEach(e=>e.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&J.adoptStyleSheets(document.adoptedStyleSheets,rh.getId(document))};th=ee;try{const e=[],t=e=>{var t;return Tp(Fp)({onMutation:$,mutationCb:q,mousemoveCb:(e,t)=>eh({type:hp.IncrementalSnapshot,data:{source:t,positions:e}}),mouseInteractionCb:e=>eh({type:hp.IncrementalSnapshot,data:Bi({source:mp.MouseInteraction},e)}),scrollCb:K,viewportResizeCb:e=>eh({type:hp.IncrementalSnapshot,data:Bi({source:mp.ViewportResize},e)}),inputCb:e=>eh({type:hp.IncrementalSnapshot,data:Bi({source:mp.Input},e)}),mediaInteractionCb:e=>eh({type:hp.IncrementalSnapshot,data:Bi({source:mp.MediaInteraction},e)}),styleSheetRuleCb:e=>eh({type:hp.IncrementalSnapshot,data:Bi({source:mp.StyleSheetRule},e)}),styleDeclarationCb:e=>eh({type:hp.IncrementalSnapshot,data:Bi({source:mp.StyleDeclaration},e)}),canvasMutationCb:G,fontCb:e=>eh({type:hp.IncrementalSnapshot,data:Bi({source:mp.Font},e)}),selectionCb:e=>{eh({type:hp.IncrementalSnapshot,data:Bi({source:mp.Selection},e)})},customElementCb:e=>{eh({type:hp.IncrementalSnapshot,data:Bi({source:mp.CustomElement},e)})},blockClass:s,ignoreClass:a,ignoreSelector:l,maskAllText:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,maskInputOptions:U,inlineStylesheet:m,sampling:I,recordDOM:P,recordCanvas:E,inlineImages:A,userTriggeredOnInput:x,collectFonts:M,doc:e,maskAttributeFn:y,maskInputFn:v,maskTextFn:w,keepIframeSrcFn:D,blockSelector:i,unblockSelector:o,slimDOMOptions:W,dataURLOptions:C,mirror:rh,iframeManager:Y,stylesheetManager:J,shadowDomManager:Z,processedNodeManager:Q,canvasManager:X,ignoreCSSAttributes:L,plugins:(null==(t=null==R?void 0:R.filter(e=>e.observer))?void 0:t.map(e=>({observer:e.observer,options:e.options,callback:t=>eh({type:hp.Plugin,data:{plugin:e.name,payload:t}})})))||[]},{})};Y.addLoadListener(n=>{try{e.push(t(n.contentDocument))}catch(e){console.warn(e)}});const n=()=>{ee(),e.push(t(document))};return"interactive"===document.readyState||"complete"===document.readyState?n():(e.push(Wd("DOMContentLoaded",()=>{eh({type:hp.DomContentLoaded,data:{}}),"DOMContentLoaded"===O&&n()})),e.push(Wd("load",()=>{eh({type:hp.Load,data:{}}),"load"===O&&n()},window))),()=>{e.forEach(e=>e()),Q.destroy(),th=void 0,Ep=void 0}}catch(e){console.warn(e)}}var ih,oh;sh.mirror=rh,sh.takeFullSnapshot=function(e){if(!th)throw new Error("please take full snapshot after start recording");th(e)},(oh=ih||(ih={}))[oh.NotStarted=0]="NotStarted",oh[oh.Running=1]="Running",oh[oh.Stopped=2]="Stopped";function ah(e){return e>9999999999?e:1e3*e}function lh(e){return e>9999999999?e/1e3:e}function ch(e,t){"sentry.transaction"!==t.category&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate(()=>(e.throttledAddEvent({type:hp.Custom,timestamp:1e3*(t.timestamp||0),data:{tag:"breadcrumb",payload:Jt(t,10,1e3)}}),"console"===t.category)))}function uh(e){return e.closest("button,a")||e}function dh(e){const t=ph(e);return t&&t instanceof Element?uh(t):t}function ph(e){return function(e){return"object"==typeof e&&!!e&&"target"in e}(e)?e.target:e}let hh;function mh(e){return hh||(hh=[],oe(Hu,"open",function(e){return function(...t){if(hh)try{hh.forEach(e=>e())}catch(e){}return e.apply(Hu,t)}})),hh.push(e),()=>{const t=hh?hh.indexOf(e):-1;t>-1&&hh.splice(t,1)}}const gh=new Set([mp.Mutation,mp.StyleSheetRule,mp.StyleDeclaration,mp.AdoptedStyleSheet,mp.CanvasMutation,mp.Selection,mp.MediaInteraction]);class fh{constructor(e,t,n=ch){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=t.timeout/1e3,this._threshold=t.threshold/1e3,this._scrollTimeout=t.scrollTimeout/1e3,this._replay=e,this._ignoreSelector=t.ignoreSelector,this._addBreadcrumbEvent=n}addListeners(){const e=mh(()=>{this._lastMutation=yh()});this._teardown=()=>{e(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(e,t){if(function(e,t){return!!(!bh.includes(e.tagName)||"INPUT"===e.tagName&&!["submit","button"].includes(e.getAttribute("type")||"")||"A"===e.tagName&&(e.hasAttribute("download")||e.hasAttribute("target")&&"_self"!==e.getAttribute("target"))||t&&e.matches(t))}(t,this._ignoreSelector)||!function(e){return!(!e.data||"number"!=typeof e.data.nodeId||!e.timestamp)}(e))return;const n={timestamp:lh(e.timestamp),clickBreadcrumb:e,clickCount:0,node:t};this._clicks.some(e=>e.node===n.node&&Math.abs(e.timestamp-n.timestamp)<1)||(this._clicks.push(n),1===this._clicks.length&&this._scheduleCheckClicks())}registerMutation(e=Date.now()){this._lastMutation=lh(e)}registerScroll(e=Date.now()){this._lastScroll=lh(e)}registerClick(e){const t=uh(e);this._handleMultiClick(t)}_handleMultiClick(e){this._getClicks(e).forEach(e=>{e.clickCount++})}_getClicks(e){return this._clicks.filter(t=>t.node===e)}_checkClicks(){const e=[],t=yh();this._clicks.forEach(n=>{!n.mutationAfter&&this._lastMutation&&(n.mutationAfter=n.timestamp<=this._lastMutation?this._lastMutation-n.timestamp:void 0),!n.scrollAfter&&this._lastScroll&&(n.scrollAfter=n.timestamp<=this._lastScroll?this._lastScroll-n.timestamp:void 0),n.timestamp+this._timeout<=t&&e.push(n)});for(const t of e){const e=this._clicks.indexOf(t);e>-1&&(this._generateBreadcrumbs(t),this._clicks.splice(e,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(e){const t=this._replay,n=e.scrollAfter&&e.scrollAfter<=this._scrollTimeout,r=e.mutationAfter&&e.mutationAfter<=this._threshold,s=!n&&!r,{clickCount:i,clickBreadcrumb:o}=e;if(s){const n=1e3*Math.min(e.mutationAfter||this._timeout,this._timeout),r=n<1e3*this._timeout?"mutation":"timeout",s={type:"default",message:o.message,timestamp:o.timestamp,category:"ui.slowClickDetected",data:$i(Bi({},o.data),{url:Hu.location.href,route:t.getCurrentRoute(),timeAfterClickMs:n,endReason:r,clickCount:i||1})};return void this._addBreadcrumbEvent(t,s)}if(i>1){const e={type:"default",message:o.message,timestamp:o.timestamp,category:"ui.multiClick",data:$i(Bi({},o.data),{url:Hu.location.href,route:t.getCurrentRoute(),clickCount:i,metric:!0})};this._addBreadcrumbEvent(t,e)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=Ls(()=>this._checkClicks(),1e3)}}const bh=["A","BUTTON","INPUT"];function yh(){return Date.now()/1e3}function vh(e,t){try{if(!function(e){return 3===e.type}(t))return;const{source:n}=t.data;if(gh.has(n)&&e.registerMutation(t.timestamp),n===mp.Scroll&&e.registerScroll(t.timestamp),function(e){return e.data.source===mp.MouseInteraction}(t)){const{type:n,id:r}=t.data,s=sh.mirror.getNode(r);s instanceof HTMLElement&&n===gp.Click&&e.registerClick(s)}}catch(e){}}function wh(e){return Bi({timestamp:Date.now()/1e3,type:"default"},e)}var Sh=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(Sh||{});const _h=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function Ih(e){const t={};!e["data-sentry-component"]&&e["data-sentry-element"]&&(e["data-sentry-component"]=e["data-sentry-element"]);for(const n in e)if(_h.has(n)){let r=n;("data-testid"===n||"data-test-id"===n)&&(r="testId"),t[r]=e[n]}return t}const Ch=e=>t=>{if(!e.isEnabled())return;const n=function(e){const{target:t,message:n}=function(e){const t="click"===e.name;let n,r=null;try{r=t?dh(e.event):ph(e.event),n=Q(r,{maxStringLength:200})||"<unknown>"}catch(e){n="<unknown>"}return{target:r,message:n}}(e);return wh(Bi({category:`ui.${e.name}`},kh(t,n)))}(t);if(!n)return;const r="click"===t.name,s=r?t.event:void 0;r&&e.clickDetector&&null!=s&&s.target&&!s.altKey&&!s.metaKey&&!s.ctrlKey&&!s.shiftKey&&function(e,t,n){e.handleClick(t,n)}(e.clickDetector,n,dh(t.event)),ch(e,n)};function kh(e,t){const n=sh.mirror.getId(e),r=n&&sh.mirror.getNode(n),s=r&&sh.mirror.getMeta(r),i=s&&function(e){return e.type===Sh.Element}(s)?s:null;return{message:t,data:i?{nodeId:n,node:{id:n,tagName:i.tagName,textContent:Array.from(i.childNodes).map(e=>e.type===Sh.Text&&e.textContent).filter(Boolean).map(e=>e.trim()).join(""),attributes:Ih(i.attributes)}}:{}}}function Ph(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=function(e){const{metaKey:t,shiftKey:n,ctrlKey:r,altKey:s,key:i,target:o}=e;if(!o||function(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable}(o)||!i)return null;const a=t||r||s,l=1===i.length;if(!a&&l)return null;const c=Q(o,{maxStringLength:200})||"<unknown>",u=kh(o,c);return wh({category:"ui.keyDown",message:c,data:$i(Bi({},u.data),{metaKey:t,shiftKey:n,ctrlKey:r,altKey:s,key:i})})}(t);n&&ch(e,n)}const Eh={resource:function(e){const{entryType:t,initiatorType:n,name:r,responseEnd:s,startTime:i,decodedBodySize:o,encodedBodySize:a,responseStatus:l,transferSize:c}=e;return["fetch","xmlhttprequest"].includes(n)?null:{type:`${t}.${n}`,start:xh(i),end:xh(s),name:r,data:{size:c,statusCode:l,decodedBodySize:o,encodedBodySize:a}}},paint:function(e){const{duration:t,entryType:n,name:r,startTime:s}=e,i=xh(s);return{type:n,name:r,start:i,end:i+t,data:void 0}},navigation:function(e){const{entryType:t,name:n,decodedBodySize:r,duration:s,domComplete:i,encodedBodySize:o,domContentLoadedEventStart:a,domContentLoadedEventEnd:l,domInteractive:c,loadEventStart:u,loadEventEnd:d,redirectCount:p,startTime:h,transferSize:m,type:g}=e;return 0===s?null:{type:`${t}.${g}`,start:xh(h),end:xh(i),name:n,data:{size:m,decodedBodySize:r,encodedBodySize:o,duration:s,domInteractive:c,domContentLoadedEventStart:a,domContentLoadedEventEnd:l,loadEventStart:u,loadEventEnd:d,domComplete:i,redirectCount:p}}}};function Th(e,t){return({metric:n})=>{t.replayPerformanceEntries.push(e(n))}}function Oh(e){const t=Eh[e.entryType];return t?t(e):null}function xh(e){return((Ie()||Hu.performance.timeOrigin)+e)/1e3}function Mh(e){const t=e.entries[e.entries.length-1];return Bh(e,"largest-contentful-paint",null!=t&&t.element?[t.element]:void 0)}function Ah(e){return void 0!==e.sources}function Rh(e){const t=[],n=[];for(const r of e.entries)if(Ah(r)){const e=[];for(const t of r.sources)if(t.node){n.push(t.node);const r=sh.mirror.getId(t.node);r&&e.push(r)}t.push({value:r.value,nodeIds:e.length?e:void 0})}return Bh(e,"cumulative-layout-shift",n,t)}function Dh(e){const t=e.entries[e.entries.length-1];return Bh(e,"first-input-delay",null!=t&&t.target?[t.target]:void 0)}function Lh(e){const t=e.entries[e.entries.length-1];return Bh(e,"interaction-to-next-paint",null!=t&&t.target?[t.target]:void 0)}function Bh(e,t,n,r){const s=e.value,i=e.rating,o=xh(s);return{type:"web-vital",name:t,start:o,end:o,data:{value:s,size:s,rating:i,nodeIds:n?n.map(e=>sh.mirror.getId(e)):void 0,attributions:r}}}const $h=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;const Nh=["log","warn","error"],jh="[Replay] ";function Fh(e,t="info"){Sr({category:"console",data:{logger:"replay"},level:t,message:`${jh}${e}`},{level:t})}const Uh=function(){let e=!1,t=!1;const n={exception:()=>{},infoTick:()=>{},setConfig:n=>{e=!!n.captureExceptions,t=!!n.traceInternals}};return $h?(Nh.forEach(e=>{n[e]=(...n)=>{g[e](jh,...n),t&&Fh(n.join(""),Br(e))}}),n.exception=(r,...s)=>{s.length&&n.error&&n.error(...s),g.error(jh,r),e?Pn(r):t&&Fh(r,"error")},n.infoTick=(...e)=>{g.log(jh,...e),t&&setTimeout(()=>Fh(e[0]),0)}):Nh.forEach(e=>{n[e]=()=>{}}),n}();class Wh extends Error{constructor(){super("Event buffer exceeded maximum size of 20000000.")}}class Hh{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(e){const t=JSON.stringify(e).length;if(this._totalSize+=t,this._totalSize>Gu)throw new Wh;this.events.push(e)}finish(){return new Promise(e=>{const t=this.events;this.clear(),e(JSON.stringify(t))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const e=this.events.map(e=>e.timestamp).sort()[0];return e?ah(e):null}}class Vh{constructor(e){this._worker=e,this._id=0}ensureReady(){return this._ensureReadyPromise||(this._ensureReadyPromise=new Promise((e,t)=>{this._worker.addEventListener("message",({data:n})=>{n.success?e():t()},{once:!0}),this._worker.addEventListener("error",e=>{t(e)},{once:!0})})),this._ensureReadyPromise}destroy(){$h&&Uh.log("Destroying compression worker"),this._worker.terminate()}postMessage(e,t){const n=this._getAndIncrementId();return new Promise((r,s)=>{const i=({data:t})=>{const o=t;if(o.method===e&&o.id===n){if(this._worker.removeEventListener("message",i),!o.success)return $h&&Uh.error("Error in compression worker: ",o.response),void s(new Error("Error in compression worker"));r(o.response)}};this._worker.addEventListener("message",i),this._worker.postMessage({id:n,method:e,arg:t})})}_getAndIncrementId(){return this._id++}}class zh{constructor(e){this._worker=new Vh(e),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(e){const t=ah(e.timestamp);(!this._earliestTimestamp||t<this._earliestTimestamp)&&(this._earliestTimestamp=t);const n=JSON.stringify(e);return this._totalSize+=n.length,this._totalSize>Gu?Promise.reject(new Wh):this._sendEventToWorker(n)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,e=>{$h&&Uh.exception(e,'Sending "clear" message to worker failed',e)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(e){return this._worker.postMessage("addEvent",e)}async _finishRequest(){const e=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,e}}class qh{constructor(e){this._fallback=new Hh,this._compression=new zh(e),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get waitForCheckout(){return this._used.waitForCheckout}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(e){this._used.hasCheckout=e}set waitForCheckout(e){this._used.waitForCheckout=e}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(e){return this._used.addEvent(e)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(e){return void($h&&Uh.exception(e,"Failed to load the compression worker, falling back to simple buffer"))}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:e,hasCheckout:t,waitForCheckout:n}=this._fallback,r=[];for(const t of e)r.push(this._compression.addEvent(t));this._compression.hasCheckout=t,this._compression.waitForCheckout=n,this._used=this._compression;try{await Promise.all(r),this._fallback.clear()}catch(e){$h&&Uh.exception(e,"Failed to add events when switching buffers.")}}}function Kh({useCompression:e,workerUrl:t}){if(e&&window.Worker){const e=function(e){try{const t=e||(typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?function(){const e=new Blob(['var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(t,e){for(var i=new n(31),s=0;s<31;++s)i[s]=e+=1<<t[s-1];var a=new r(i[30]);for(s=1;s<30;++s)for(var o=i[s];o<i[s+1];++o)a[o]=o-i[s]<<5|s;return{b:i,r:a}},o=a(e,2),h=o.b,f=o.r;h[28]=258,f[258]=28;for(var l=a(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,s=0,a=new n(r);s<i;++s)t[s]&&++a[t[s]-1];var o,h=new n(r);for(s=1;s<r;++s)h[s]=h[s-1]+a[s-1]<<1;if(e){o=new n(1<<r);var f=15-r;for(s=0;s<i;++s)if(t[s])for(var l=s<<4|t[s],c=r-t[s],v=h[t[s]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>f]=l}else for(o=new n(i),s=0;s<i;++s)t[s]&&(o[s]=u[h[t[s]-1]++]>>15-t[s]);return o},p=new t(288);for(c=0;c<144;++c)p[c]=8;for(c=144;c<256;++c)p[c]=9;for(c=256;c<280;++c)p[c]=7;for(c=280;c<288;++c)p[c]=8;var g=new t(32);for(c=0;c<32;++c)g[c]=5;var w=d(p,9,0),y=d(g,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},_=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},x=function(r,e){for(var i=[],s=0;s<r.length;++s)r[s]&&i.push({s:s,f:r[s]});var a=i.length,o=i.slice();if(!a)return{t:F,l:0};if(1==a){var h=new t(i[0].s+1);return h[i[0].s]=1,{t:h,l:1}}i.sort(function(t,n){return t.f-n.f}),i.push({s:-1,f:25001});var f=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:f.f+l.f,l:f,r:l};c!=a-1;)f=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:f.f+l.f,l:f,r:l};var d=o[0].s;for(s=1;s<a;++s)o[s].s>d&&(d=o[s].s);var p=new n(d+1),g=A(i[c-1],p,0);if(g>e){s=0;var w=0,y=g-e,m=1<<y;for(o.sort(function(t,n){return p[n.s]-p[t.s]||t.f-n.f});s<a;++s){var b=o[s].s;if(!(p[b]>e))break;w+=m-(1<<g-p[b]),p[b]=e}for(w>>=y;w>0;){var M=o[s].s;p[M]<e?w-=1<<e-p[M]++-1:++s}for(;s>=0&&w;--s){var E=o[s].s;p[E]==e&&(--p[E],++w)}g=e}return{t:new t(p),l:g}},A=function(t,n,r){return-1==t.s?Math.max(A(t.l,n,r+1),A(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,s=t[0],a=1,o=function(t){e[i++]=t},h=1;h<=r;++h)if(t[h]==s&&h!=r)++a;else{if(!s&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(s),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(s);a=1,s=t[h]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<e;++s)t[i+s+4]=r[s];return 8*(i+4+e)},U=function(t,r,a,o,h,f,l,u,c,v,m){z(r,m++,a),++h[256];for(var b=x(h,15),M=b.t,E=b.l,A=x(f,15),U=A.t,C=A.l,F=D(M),I=F.c,S=F.n,L=D(U),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=x(q,7),H=G.t,J=G.l,K=19;K>4&&!H[s[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(h,p)+T(f,g)+l,X=T(h,M)+T(f,U)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(U,C,0),R=U;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[s[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=w,P=p,Q=y,R=g;for(B=0;B<u;++B){var rt=o[B];if(rt>255){_(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;_(r,m,Q[et]),m+=R[et],et>3&&(_(r,m,rt>>5&8191),m+=i[et])}else _(r,m,N[rt]),m+=P[rt]}return _(r,m,N[256]),m+P[256]},C=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,s=0|r.length,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=e+=r[a];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(s,a,o,h,u){if(!u&&(u={l:1},a.dictionary)){var c=a.dictionary.subarray(-32768),v=new t(c.length+s.length);v.set(c),v.set(s,c.length),s=v,u.w=c.length}return function(s,a,o,h,u,c){var v=c.z||s.length,d=new t(h+v+5*(1+Math.ceil(v/7e3))+u),p=d.subarray(h,d.length-u),g=c.l,w=7&(c.r||0);if(a){w&&(p[0]=c.r>>3);for(var y=C[a-1],M=y>>13,E=8191&y,z=(1<<o)-1,_=c.p||new n(32768),x=c.h||new n(z+1),A=Math.ceil(o/3),D=2*A,T=function(t){return(s[t]^s[t+1]<<A^s[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=x[H];if(_[J]=K,x[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!g)){w=U(s,p,0,F,I,S,O,q,G,j-G,w),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(s[j+Q]==s[j+Q-W]){for(var $=0;$<Z&&s[j+$]==s[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-_[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=_[J])&32767}if(R){F[q++]=268435456|f[Q]<<18|l[R];var it=31&f[Q],st=31&l[R];O+=e[it]+i[st],++I[257+it],++S[st],B=j+Q,++L}else F[q++]=s[j],++I[s[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=s[j],++I[s[j]];w=U(s,p,g,F,I,S,O,q,G,j-G,w),g||(c.r=7&w|p[w/8|0]<<3,w-=7,c.h=x,c.p=_,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+g;j+=65535){var at=j+65535;at>=v&&(p[w/8|0]=g,at=v),w=k(p,w+1,s.subarray(j,at))}c.i=v}return b(d,0,h+m(w)+u)}(s,null==a.level?6:a.level,null==a.mem?u.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(s.length)))):20:12+a.mem,o,h,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var s=this.b.length-this.s.z;this.b.set(n.subarray(0,s),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(s),32768),this.s.z=n.length-s+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n.prototype.flush=function(){this.ondata||E(5),this.s.l&&E(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,s=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),a=s.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(s,n),O(s,a-8,r.d()),O(s,a-4,e),s}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t.prototype.flush=function(){j.prototype.flush.call(this)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(G)return G.encode(n);for(var e=n.length,i=new t(n.length+(n.length>>1)),s=0,a=function(t){i[s++]=t},o=0;o<e;++o){if(s+5>i.length){var h=new t(s+8+(e-o<<1));h.set(i),i=h}var f=n.charCodeAt(o);f<128||r?a(f):f<2048?(a(192|f>>6),a(128|63&f)):f>55295&&f<57344?(a(240|(f=65536+(1047552&f)|1023&n.charCodeAt(++o))>>18),a(128|f>>12&63),a(128|f>>6&63),a(128|63&f)):(a(224|f>>12),a(128|f>>6&63),a(128|63&f))}return b(i,0,s)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J((t,n)=>{this.deflate.push(t,n)}),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}}),postMessage({id:void 0,method:"init",success:!0,response:void 0});']);return URL.createObjectURL(e)}():"");if(!t)return;$h&&Uh.log("Using compression worker"+(e?` from ${e}`:""));const n=new Worker(t);return new qh(n)}catch(e){$h&&Uh.exception(e,"Failed to create compression worker")}}(t);if(e)return e}return $h&&Uh.log("Using simple buffer"),new Hh}function Gh(){try{return"sessionStorage"in Hu&&!!Hu.sessionStorage}catch(e){return!1}}function Jh(e){(function(){if(Gh())try{Hu.sessionStorage.removeItem(Vu)}catch(e){}})(),e.session=void 0}function Yh(e){return void 0!==e&&Math.random()<e}function Qh(e){if(Gh())try{Hu.sessionStorage.setItem(Vu,JSON.stringify(e))}catch(e){}}function Xh(e){const t=Date.now();return{id:e.id||he(),started:e.started||t,lastActivity:e.lastActivity||t,segmentId:e.segmentId||0,sampled:e.sampled,previousSessionId:e.previousSessionId}}function Zh({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){const s=function(e,t){return Yh(e)?"session":!!t&&"buffer"}(e,t),i=Xh({sampled:s,previousSessionId:r});return n&&Qh(i),i}function em(e,t,n=+new Date){return null===e||void 0===t||t<0||0!==t&&e+t<=n}function tm(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return em(e.started,t,r)||em(e.lastActivity,n,r)}function nm(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!(!tm(e,{sessionIdleExpire:t,maxReplayDuration:n})||"buffer"===e.sampled&&0===e.segmentId)}function rm({sessionIdleExpire:e,maxReplayDuration:t,previousSessionId:n},r){const s=r.stickySession&&function(){if(!Gh())return null;try{const e=Hu.sessionStorage.getItem(Vu);if(!e)return null;const t=JSON.parse(e);return $h&&Uh.infoTick("Loading existing session"),Xh(t)}catch(e){return null}}();return s?nm(s,{sessionIdleExpire:e,maxReplayDuration:t})?($h&&Uh.infoTick("Session in sessionStorage is expired, creating new one..."),Zh(r,{previousSessionId:s.id})):s:($h&&Uh.infoTick("Creating new session"),Zh(r,{previousSessionId:n}))}function sm(e,t,n){return!!om(e,t)&&(im(e,t,n),!0)}async function im(e,t,n){const{eventBuffer:r}=e;if(!r||r.waitForCheckout&&!n)return null;const s="buffer"===e.recordingMode;try{n&&s&&r.clear(),n&&(r.hasCheckout=!0,r.waitForCheckout=!1);const i=function(e,t){try{if("function"==typeof t&&function(e){return e.type===hp.Custom}(e))return t(e)}catch(e){return $h&&Uh.exception(e,"An error occurred in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return e}(t,e.getOptions().beforeAddRecordingEvent);return i?await r.addEvent(i):void 0}catch(t){const n=t&&t instanceof Wh,i=n?"addEventSizeExceeded":"addEvent";if(n&&s)return r.clear(),r.waitForCheckout=!0,null;e.handleException(t),await e.stop({reason:i});const o=He();o&&o.recordDroppedEvent("internal_sdk_error","replay")}}function om(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=ah(t.timestamp);return!(n+e.timeouts.sessionIdlePause<Date.now())&&(!(n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration)||($h&&Uh.infoTick(`Skipping event with timestamp ${n} because it is after maxReplayDuration`),!1))}function am(e){return!e.type}function lm(e){return"transaction"===e.type}function cm(e){return"feedback"===e.type}function um(e){return(t,n)=>{if(!e.isEnabled()||!am(t)&&!lm(t))return;const r=null==n?void 0:n.statusCode;if(!(!r||r<200||r>=300)){if(lm(t))return void function(e,t){var n,r;const s=e.getContext();null!=(r=null==(n=t.contexts)?void 0:n.trace)&&r.trace_id&&s.traceIds.size<100&&s.traceIds.add(t.contexts.trace.trace_id)}(e,t);!function(e,t){const n=e.getContext();if(t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id),"buffer"!==e.recordingMode||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:r}=e.getOptions();"function"==typeof r&&!r(t)||Ls(async()=>{try{await e.sendBufferedReplayOrFlush()}catch(t){e.handleException(t)}})}(e,t)}}}function dm(e){return t=>{!e.isEnabled()||!am(t)||function(e,t){var n,r,s;const i=null==(s=null==(r=null==(n=t.exception)?void 0:n.values)?void 0:r[0])?void 0:s.value;if("string"==typeof i&&(i.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||i.match(/(does not match server-rendered HTML|Hydration failed because)/i))){ch(e,wh({category:"replay.hydrate-error",data:{url:Z()}}))}}(e,t)}}function pm(e){const t=He();t&&t.on("beforeAddBreadcrumb",t=>function(e,t){if(!e.isEnabled()||!hm(t))return;const n=function(e){return!hm(e)||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui.")?null:"console"===e.category?function(e){var t;const n=null==(t=e.data)?void 0:t.arguments;if(!Array.isArray(n)||0===n.length)return wh(e);let r=!1;const s=n.map(e=>{if(!e)return e;if("string"==typeof e)return e.length>Ku?(r=!0,`${e.slice(0,Ku)}…`):e;if("object"==typeof e)try{const t=Jt(e,7);return JSON.stringify(t).length>Ku?(r=!0,`${JSON.stringify(t,null,2).slice(0,Ku)}…`):t}catch(e){}return e});return wh($i(Bi({},e),{data:Bi($i(Bi({},e.data),{arguments:s}),r?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{})}))}(e):wh(e)}(t);n&&ch(e,n)}(e,t))}function hm(e){return!!e.category}function mm(){const e=je().getPropagationContext().dsc;e&&delete e.replay_id;const t=Dt();if(t){delete Gt(t).replay_id}}function gm(e){return Object.assign((t,n)=>!e.isEnabled()||e.isPaused()?t:function(e){return"replay_event"===e.type}(t)?(delete t.breadcrumbs,t):am(t)||lm(t)||cm(t)?e.checkAndHandleExpiredSession()?cm(t)?(e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),function(e,t){e.triggerUserActivity(),e.addUpdate(()=>!t.timestamp||(e.throttledAddEvent({type:hp.Custom,timestamp:1e3*t.timestamp,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1))}(e,t),t):function(e,t){var n,r,s;return!(e.type||null==(r=null==(n=e.exception)?void 0:n.values)||!r.length||null==(s=t.originalException)||!s.__rrweb__)}(t,n)&&!e.getOptions()._experiments.captureExceptions?($h&&Uh.log("Ignoring error from rrweb internals",t),null):((function(e,t){return!("buffer"!==e.recordingMode||t.message===zu||!t.exception||t.type)&&Yh(e.getOptions().errorSampleRate)}(e,t)||"session"===e.recordingMode)&&(t.tags=$i(Bi({},t.tags),{replayId:e.getSessionId()})),t):(mm(),t):t,{id:"Replay"})}function fm(e,t){return t.map(({type:t,start:n,end:r,name:s,data:i})=>{const o=e.throttledAddEvent({type:hp.Custom,timestamp:n,data:{tag:"performanceSpan",payload:{op:t,description:s,startTimestamp:n,endTimestamp:r,data:i}}});return"string"==typeof o?Promise.resolve(null):o})}function bm(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}(t);null!==n&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate(()=>(fm(e,[n]),!1)))}}function ym(e,t){e.isEnabled()&&null!==t&&(function(e,t){return(!$h||!e.getOptions()._experiments.traceInternals)&&uo(t,He())}(e,t.name)||e.addUpdate(()=>(fm(e,[t]),!0)))}function vm(e){if(!e)return;const t=new TextEncoder;try{if("string"==typeof e)return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=yu(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch(e){}}function wm(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function Sm(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n=Bi({},e._meta),r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function _m(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:r,url:s,method:i,statusCode:o,request:a,response:l}=t;return{type:e,start:n/1e3,end:r/1e3,name:s,data:{method:i,statusCode:o,request:a,response:l}}}function Im(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function Cm(e,t,n){if(!t&&0===Object.keys(e).length)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const r={headers:e,size:t},{body:s,warnings:i}=function(e){if(!e||"string"!=typeof e)return{body:e};const t=e.length>qu,n=function(e){const t=e[0],n=e[e.length-1];return"["===t&&"]"===n||"{"===t&&"}"===n}(e);if(t){const t=e.slice(0,qu);return n?{body:t,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${t}…`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch(e){}return{body:e}}(n);return r.body=s,null!=i&&i.length&&(r._meta={warnings:i}),r}function km(e,t){return Object.entries(e).reduce((n,[r,s])=>{const i=r.toLowerCase();return t.includes(i)&&e[r]&&(n[i]=s),n},{})}function Pm(e,t){const n=function(e,t=Hu.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(Hu.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const r=n.href;return!e.endsWith("/")&&r.endsWith("/")?r.slice(0,-1):r}(e);return ie(n,t)}async function Em(e,t,n){try{const r=await async function(e,t,n){const r=Date.now(),{startTimestamp:s=r,endTimestamp:i=r}=t,{url:o,method:a,status_code:l=0,request_body_size:c,response_body_size:u}=e.data,d=Pm(o,n.networkDetailAllowUrls)&&!Pm(o,n.networkDetailDenyUrls),p=d?function({networkCaptureBodies:e,networkRequestHeaders:t},n,r){const s=n?function(e,t){return 1===e.length&&"string"!=typeof e[0]?Om(e[0],t):2===e.length?Om(e[1],t):{}}(n,t):{};if(!e)return Cm(s,r,void 0);const i=wu(n),[o,a]=vu(i,Uh),l=Cm(s,r,o);return a?Sm(l,a):l}(n,t.input,c):Im(c),h=await async function(e,{networkCaptureBodies:t,networkResponseHeaders:n},r,s){if(!e&&void 0!==s)return Im(s);const i=r?Tm(r.headers,n):{};if(!r||!t&&void 0!==s)return Cm(i,s,void 0);const[o,a]=await async function(e){const t=function(e){try{return e.clone()}catch(e){$h&&Uh.exception(e,"Failed to clone response body")}}(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{return[await xm(t)]}catch(e){return e instanceof Error&&e.message.indexOf("Timeout")>-1?($h&&Uh.warn("Parsing text body from response timed out"),[void 0,"BODY_PARSE_TIMEOUT"]):($h&&Uh.exception(e,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"])}}(r),l=function(e,{networkCaptureBodies:t,responseBodySize:n,captureDetails:r,headers:s}){try{const i=null!=e&&e.length&&void 0===n?vm(e):n;return r?Cm(s,i,t?e:void 0):Im(i)}catch(e){return $h&&Uh.exception(e,"Failed to serialize response body"),Cm(s,n,void 0)}}(o,{networkCaptureBodies:t,responseBodySize:s,captureDetails:e,headers:i});return a?Sm(l,a):l}(d,n,t.response,u);return{startTimestamp:s,endTimestamp:i,url:o,method:a,statusCode:l,request:p,response:h}}(e,t,n),s=_m("resource.fetch",r);ym(n.replay,s)}catch(e){$h&&Uh.exception(e,"Failed to capture fetch breadcrumb")}}function Tm(e,t){const n={};return t.forEach(t=>{e.get(t)&&(n[t]=e.get(t))}),n}function Om(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?Tm(n,t):Array.isArray(n)?{}:km(n,t):{}}function xm(e){return new Promise((t,n)=>{const r=Ls(()=>n(new Error("Timeout while trying to read response body")),500);(async function(e){return await e.text()})(e).then(e=>t(e),e=>n(e)).finally(()=>clearTimeout(r))})}async function Mm(e,t,n){try{const r=function(e,t,n){const r=Date.now(),{startTimestamp:s=r,endTimestamp:i=r,input:o,xhr:a}=t,{url:l,method:c,status_code:u=0,request_body_size:d,response_body_size:p}=e.data;if(!l)return null;if(!a||!Pm(l,n.networkDetailAllowUrls)||Pm(l,n.networkDetailDenyUrls)){return{startTimestamp:s,endTimestamp:i,url:l,method:c,statusCode:u,request:Im(d),response:Im(p)}}const h=a[Bs],m=h?km(h.request_headers,n.networkRequestHeaders):{},g=km(function(e){const t=e.getAllResponseHeaders();return t?t.split("\r\n").reduce((e,t)=>{const[n,r]=t.split(": ");return r&&(e[n.toLowerCase()]=r),e},{}):{}}(a),n.networkResponseHeaders),[f,b]=n.networkCaptureBodies?vu(o,Uh):[void 0],[y,v]=n.networkCaptureBodies?function(e){const t=[];try{return[e.responseText]}catch(e){t.push(e)}try{return function(e,t){try{if("string"==typeof e)return[e];if(e instanceof Document)return[e.body.outerHTML];if("json"===t&&e&&"object"==typeof e)return[JSON.stringify(e)];if(!e)return[void 0]}catch(t){return $h&&Uh.exception(t,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return $h&&Uh.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}(e.response,e.responseType)}catch(e){t.push(e)}return $h&&Uh.warn("Failed to get xhr response body",...t),[void 0]}(a):[void 0],w=Cm(m,d,f),S=Cm(g,p,y);return{startTimestamp:s,endTimestamp:i,url:l,method:c,statusCode:u,request:b?Sm(w,b):w,response:v?Sm(S,v):S}}(e,t,n),s=_m("resource.xhr",r);ym(n.replay,s)}catch(e){$h&&Uh.exception(e,"Failed to capture xhr breadcrumb")}}function Am(e,t){const{xhr:n,input:r}=t;if(!n)return;const s=vm(r),i=n.getResponseHeader("content-length")?wm(n.getResponseHeader("content-length")):function(e,t){try{return vm("json"===t&&e&&"object"==typeof e?JSON.stringify(e):e)}catch(e){return}}(n.response,n.responseType);void 0!==s&&(e.data.request_body_size=s),void 0!==i&&(e.data.response_body_size=i)}function Rm(e){const t=He();try{const{networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:s,networkRequestHeaders:i,networkResponseHeaders:o}=e.getOptions(),a={replay:e,networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:s,networkRequestHeaders:i,networkResponseHeaders:o};t&&t.on("beforeAddBreadcrumb",(e,t)=>function(e,t,n){if(t.data)try{(function(e){return"xhr"===e.category})(t)&&function(e){return null==e?void 0:e.xhr}(n)&&(Am(t,n),Mm(t,n,e)),function(e){return"fetch"===e.category}(t)&&function(e){return null==e?void 0:e.response}(n)&&(function(e,t){const{input:n,response:r}=t,s=vm(n?wu(n):void 0),i=r?wm(r.headers.get("content-length")):void 0;void 0!==s&&(e.data.request_body_size=s),void 0!==i&&(e.data.response_body_size=i)}(t,n),Em(t,n,e))}catch(e){$h&&Uh.exception(e,"Error when enriching network breadcrumb")}}(a,e,t))}catch(e){}}function Dm(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,s=Date.now()/1e3;return{type:"memory",name:"memory",start:s,end:s,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function Lm(e,t,n){return function(e,t,n){let r,s,i;const o=null!=n&&n.maxWait?Math.max(n.maxWait,t):0,a=(null==n?void 0:n.setTimeoutImpl)||setTimeout;function l(){return c(),r=e(),r}function c(){void 0!==s&&clearTimeout(s),void 0!==i&&clearTimeout(i),s=i=void 0}function u(){return s&&clearTimeout(s),s=a(l,t),o&&void 0===i&&(i=a(l,o)),r}return u.cancel=c,u.flush=function(){return void 0!==s||void 0!==i?l():r},u}(e,t,$i(Bi({},n),{setTimeoutImpl:Ls}))}const Bm=s.navigator;function $m(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession())return void($h&&Uh.warn("Received replay event after session expired."));const s=r||!t;t=!0,e.clickDetector&&vh(e.clickDetector,n),e.addUpdate(()=>{if("buffer"===e.recordingMode&&s&&e.setInitialState(),!sm(e,n,s))return!0;if(!s)return!1;const t=e.session;if(function(e,t){!t||!e.session||0!==e.session.segmentId||sm(e,function(e){const t=e.getOptions();return{type:hp.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:!!e.eventBuffer&&"worker"===e.eventBuffer.type,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}(e),!1)}(e,s),"buffer"===e.recordingMode&&t&&e.eventBuffer){const n=e.eventBuffer.getEarliestTimestamp();n&&($h&&Uh.log(`Updating session start time to earliest event in buffer to ${new Date(n)}`),t.started=n,e.getOptions().stickySession&&Qh(t))}return null!=t&&t.previousSessionId||"session"===e.recordingMode&&e.flush(),!0})}}async function Nm({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:s,session:i}){const o=function({recordingData:e,headers:t}){let n;const r=`${JSON.stringify(t)}\n`;if("string"==typeof e)n=`${r}${e}`;else{const t=(new TextEncoder).encode(r);n=new Uint8Array(t.length+e.length),n.set(t),n.set(e,t.length)}return n}({recordingData:e,headers:{segment_id:n}}),{urls:a,errorIds:l,traceIds:c,initialTimestamp:u}=r,d=He(),p=je(),h=null==d?void 0:d.getTransport(),m=null==d?void 0:d.getDsn();if(!(d&&h&&m&&i.sampled))return pn({});const g={type:"replay_event",replay_start_timestamp:u/1e3,timestamp:s/1e3,error_ids:l,trace_ids:c,urls:a,replay_id:t,segment_id:n,replay_type:i.sampled},f=await async function({client:e,scope:t,replayId:n,event:r}){const s={event_id:n,integrations:"object"!=typeof e._integrations||null===e._integrations||Array.isArray(e._integrations)?void 0:Object.keys(e._integrations)};e.emit("preprocessEvent",r,s);const i=await In(e.getOptions(),r,s,t,e,Fe());if(!i)return null;e.emit("postprocessEvent",i,s),i.platform=i.platform||"javascript";const o=e.getSdkMetadata(),{name:a,version:l}=(null==o?void 0:o.sdk)||{};return i.sdk=$i(Bi({},i.sdk),{name:a||"sentry.javascript.unknown",version:l||"0.0.0"}),i}({scope:p,client:d,replayId:t,event:g});if(!f)return d.recordDroppedEvent("event_processor","replay"),$h&&Uh.log("An event processor returned `null`, will not send event."),pn({});delete f.sdkProcessingMetadata;const b=function(e,t,n,r){return Xt(dn(e,un(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:"string"==typeof t?(new TextEncoder).encode(t).length:t.length},t]])}(f,o,m,d.getOptions().tunnel);let y;try{y=await h.send(b)}catch(e){const t=new Error(zu);try{t.cause=e}catch(e){}throw t}if("number"==typeof y.statusCode&&(y.statusCode<200||y.statusCode>=300))throw new jm(y.statusCode);const v=gr({},y);if(mr(v,"replay"))throw new Fm(v);return y}class jm extends Error{constructor(e){super(`Transport returned status code ${e}`)}}class Fm extends Error{constructor(e){super("Rate limit hit"),this.rateLimits=e}}async function Um(e,t={count:0,interval:5e3}){const{recordingData:n,onError:r}=e;if(n.length)try{return await Nm(e),!0}catch(n){if(n instanceof jm||n instanceof Fm)throw n;if(On("Replays",{_retryCount:t.count}),r&&r(n),t.count>=3){const e=new Error(`${zu} - max retries exceeded`);try{e.cause=n}catch(e){}throw e}return t.interval*=++t.count,new Promise((n,r)=>{Ls(async()=>{try{await Um(e,t),n(!0)}catch(e){r(e)}},t.interval)})}}const Wm="__THROTTLED";function Hm(e,t,n){const r=new Map;let s=!1;return(...i)=>{const o=Math.floor(Date.now()/1e3);if((e=>{const t=e-n;r.forEach((e,n)=>{n<t&&r.delete(n)})})(o),[...r.values()].reduce((e,t)=>e+t,0)>=t){const e=s;return s=!0,e?"__SKIPPED":Wm}s=!1;const a=r.get(o)||0;return r.set(o,a+1),e(...i)}}class Vm{constructor({options:e,recordingOptions:t}){this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:3e5,sessionIdleExpire:9e5},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=t,this._options=e,this._debouncedFlush=Lm(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=Hm((e,t)=>function(e,t,n){return om(e,t)?im(e,t,n):Promise.resolve(null)}(this,e,t),300,5);const{slowClickTimeout:n,slowClickIgnoreSelectors:r}=this.getOptions(),s=n?{threshold:Math.min(3e3,n),timeout:n,scrollTimeout:300,ignoreSelector:r?r.join(","):""}:void 0;if(s&&(this.clickDetector=new fh(this,s)),$h){const t=e._experiments;Uh.setConfig({captureExceptions:!!t.captureExceptions,traceInternals:!!t.traceInternals})}this._handleVisibilityChange=()=>{"visible"===Hu.document.visibilityState?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()},this._handleWindowBlur=()=>{const e=wh({category:"ui.blur"});this._doChangeToBackgroundTasks(e)},this._handleWindowFocus=()=>{const e=wh({category:"ui.focus"});this._doChangeToForegroundTasks(e)},this._handleKeyboardEvent=e=>{Ph(this,e)}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}handleException(e){$h&&Uh.exception(e),this._options.onError&&this._options.onError(e)}initializeSampling(e){const{errorSampleRate:t,sessionSampleRate:n}=this._options,r=t<=0&&n<=0;if(this._requiresManualStart=r,!r){if(this._initializeSessionForSampling(e),!this.session)return void($h&&Uh.exception(new Error("Unable to initialize and create session")));!1!==this.session.sampled&&(this.recordingMode="buffer"===this.session.sampled&&0===this.session.segmentId?"buffer":"session",$h&&Uh.infoTick(`Starting replay in ${this.recordingMode} mode`),this._initializeRecording())}}start(){if(this._isEnabled&&"session"===this.recordingMode)return void($h&&Uh.log("Recording is already in progress"));if(this._isEnabled&&"buffer"===this.recordingMode)return void($h&&Uh.log("Buffering is in progress, call `flush()` to save the replay"));$h&&Uh.infoTick("Starting replay in session mode"),this._updateUserActivity();const e=rm({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=e,this.recordingMode="session",this._initializeRecording()}startBuffering(){if(this._isEnabled)return void($h&&Uh.log("Buffering is in progress, call `flush()` to save the replay"));$h&&Uh.infoTick("Starting replay in buffer mode");const e=rm({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=e,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const n=this._canvas;this._stopRecording=sh(Bi($i(Bi($i(Bi(Bi({},this._recordingOptions),"buffer"===this.recordingMode?{checkoutEveryNms:6e4}:this._options._experiments.continuousCheckout&&{checkoutEveryNms:Math.max(36e4,this._options._experiments.continuousCheckout)}),{emit:$m(this)}),/iPhone|iPad|iPod/i.test(null!=(e=null==Bm?void 0:Bm.userAgent)?e:"")||/Macintosh/i.test(null!=(t=null==Bm?void 0:Bm.userAgent)?t:"")&&null!=Bm&&Bm.maxTouchPoints&&(null==Bm?void 0:Bm.maxTouchPoints)>1?{sampling:{mousemove:!1}}:{}),{onMutation:this._onMutationHandler.bind(this)}),n?{recordCanvas:n.recordCanvas,getCanvasManager:n.getCanvasManager,sampling:n.sampling,dataURLOptions:n.dataURLOptions}:{}))}catch(e){this.handleException(e)}var e,t}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(e){return this.handleException(e),!1}}async stop({forceFlush:e=!1,reason:t}={}){var n;if(this._isEnabled){this._isEnabled=!1,this.recordingMode="buffer";try{$h&&Uh.log("Stopping Replay"+(t?` triggered by ${t}`:"")),mm(),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),e&&await this._flush({force:!0}),null==(n=this.eventBuffer)||n.destroy(),this.eventBuffer=null,Jh(this)}catch(e){this.handleException(e)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),$h&&Uh.log("Pausing replay"))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),$h&&Uh.log("Resuming replay"))}async sendBufferedReplayOrFlush({continueRecording:e=!0}={}){if("session"===this.recordingMode)return this.flushImmediate();const t=Date.now();$h&&Uh.log("Converting buffer to session"),await this.flushImmediate();const n=this.stopRecording();!e||!n||"session"!==this.recordingMode&&(this.recordingMode="session",this.session&&(this._updateUserActivity(t),this._updateSessionActivity(t),this._maybeSaveSession()),this.startRecording())}addUpdate(e){const t=e();"buffer"===this.recordingMode||!this._isEnabled||!0!==t&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),this._stopRecording)this.checkAndHandleExpiredSession(),this._updateSessionActivity();else{if(!this._checkSession())return;this.resume()}}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return"buffer"===this.recordingMode?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){var e;return null==(e=this.session)?void 0:e.id}checkAndHandleExpiredSession(){if(!(this._lastActivity&&em(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&"session"===this.session.sampled))return!!this._checkSession();this.pause()}setInitialState(){const e=`${Hu.location.pathname}${Hu.location.hash}${Hu.location.search}`,t=`${Hu.location.origin}${e}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=t,this._context.initialTimestamp=Date.now(),this._context.urls.push(t)}throttledAddEvent(e,t){const n=this._throttledAddEvent(e,t);if(n===Wm){const e=wh({category:"replay.throttled"});this.addUpdate(()=>!sm(this,{type:5,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e,metric:!0}}))}return n}getCurrentRoute(){const e=this.lastActiveSpan||Dt(),t=e&&Rt(e),n=(t&&Pt(t).data||{})[ze];if(t&&n&&["route","custom"].includes(n))return Pt(t).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=Kh({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(e){const t=this._options.errorSampleRate>0,n=rm({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:e},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:t});this.session=n}_checkSession(){if(!this.session)return!1;const e=this.session;return!nm(e,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})||(this._refreshSession(e),!1)}async _refreshSession(e){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(e.id))}_addListeners(){try{Hu.document.addEventListener("visibilitychange",this._handleVisibilityChange),Hu.addEventListener("blur",this._handleWindowBlur),Hu.addEventListener("focus",this._handleWindowFocus),Hu.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(function(e){const t=He();Es(Ch(e)),xs(bm(e)),pm(e),Rm(e),An(gm(e)),t&&(t.on("beforeSendEvent",dm(e)),t.on("afterSendEvent",um(e)),t.on("createDsc",t=>{const n=e.getSessionId();n&&e.isEnabled()&&"session"===e.recordingMode&&e.checkAndHandleExpiredSession()&&(t.replay_id=n)}),t.on("spanStart",t=>{e.lastActiveSpan=t}),t.on("spanEnd",t=>{e.lastActiveSpan=t}),t.on("beforeSendFeedback",async(t,n)=>{var r;const s=e.getSessionId();null!=n&&n.includeReplay&&e.isEnabled()&&s&&null!=(r=t.contexts)&&r.feedback&&("api"===t.contexts.feedback.source&&await e.sendBufferedReplayOrFlush(),t.contexts.feedback.replay_id=s)}),t.on("openFeedbackWidget",async()=>{await e.sendBufferedReplayOrFlush()}))}(this),this._hasInitializedCoreListeners=!0)}catch(e){this.handleException(e)}this._performanceCleanupCallback=function(e){function t(t){e.performanceEntries.includes(t)||e.performanceEntries.push(t)}function n({entries:e}){e.forEach(t)}const r=[];return["navigation","paint","resource"].forEach(e=>{r.push(Hc(e,n))}),r.push(Fc(Th(Mh,e)),jc(Th(Rh,e)),Uc(Th(Dh,e)),Wc(Th(Lh,e))),()=>{r.forEach(e=>e())}}(this)}_removeListeners(){try{Hu.document.removeEventListener("visibilitychange",this._handleVisibilityChange),Hu.removeEventListener("blur",this._handleWindowBlur),Hu.removeEventListener("focus",this._handleWindowFocus),Hu.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(e){this.handleException(e)}}_doChangeToBackgroundTasks(e){!this.session||tm(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(e&&this._createCustomBreadcrumb(e),this.conditionalFlush())}_doChangeToForegroundTasks(e){this.session&&(this.checkAndHandleExpiredSession()?e&&this._createCustomBreadcrumb(e):$h&&Uh.log("Document has become active, but session has expired"))}_updateUserActivity(e=Date.now()){this._lastActivity=e}_updateSessionActivity(e=Date.now()){this.session&&(this.session.lastActivity=e,this._maybeSaveSession())}_createCustomBreadcrumb(e){this.addUpdate(()=>{this.throttledAddEvent({type:hp.Custom,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e}})})}_addPerformanceEntries(){let e=function(e){return e.map(Oh).filter(Boolean)}(this.performanceEntries).concat(this.replayPerformanceEntries);if(this.performanceEntries=[],this.replayPerformanceEntries=[],this._requiresManualStart){const t=this._context.initialTimestamp/1e3;e=e.filter(e=>e.start>=t)}return Promise.all(fm(this,e))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:e,eventBuffer:t}=this;if(!e||!t||this._requiresManualStart||e.segmentId)return;const n=t.getEarliestTimestamp();n&&n<this._context.initialTimestamp&&(this._context.initialTimestamp=n)}_popEventContext(){const e={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),e}async _runFlush(){var e;const t=this.getSessionId();if(this.session&&this.eventBuffer&&t){if(await this._addPerformanceEntries(),null!=(e=this.eventBuffer)&&e.hasEvents&&(await async function(e){try{return Promise.all(fm(e,[Dm(Hu.performance.memory)]))}catch(e){return[]}}(this),this.eventBuffer&&t===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const e=Date.now();if(e-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const n=this._popEventContext(),r=this.session.segmentId++;this._maybeSaveSession();const s=await this.eventBuffer.finish();await Um({replayId:t,recordingData:s,segmentId:r,eventContext:n,session:this.session,timestamp:e,onError:e=>this.handleException(e)})}catch(e){this.handleException(e),this.stop({reason:"sendReplay"});const t=He();if(t){const n=e instanceof Fm?"ratelimit_backoff":"send_error";t.recordDroppedEvent(n,"replay")}}}else $h&&Uh.error("No session or eventBuffer found to flush.")}async _flush({force:e=!1}={}){if(!this._isEnabled&&!e)return;if(!this.checkAndHandleExpiredSession())return void($h&&Uh.error("Attempting to finish replay event after session expired."));if(!this.session)return;const t=this.session.started,n=Date.now()-t;this._debouncedFlush.cancel();const r=n<this._options.minReplayDuration,s=n>this._options.maxReplayDuration+5e3;if(r||s)return $h&&Uh.log(`Session duration (${Math.floor(n/1e3)}s) is too ${r?"short":"long"}, not sending replay.`),void(r&&this._debouncedFlush());const i=this.eventBuffer;i&&0===this.session.segmentId&&!i.hasCheckout&&$h&&Uh.log("Flushing initial segment without checkout.");const o=!!this._flushLock;this._flushLock||(this._flushLock=this._runFlush());try{await this._flushLock}catch(e){this.handleException(e)}finally{this._flushLock=void 0,o&&this._debouncedFlush()}}_maybeSaveSession(){this.session&&this._options.stickySession&&Qh(this.session)}_onMutationHandler(e){const{ignoreMutations:t}=this._options._experiments;if(null!=t&&t.length&&e.some(e=>{const n=function(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch(e){return null}}(e.target),r=t.join(",");return null==n?void 0:n.matches(r)}))return!1;const n=e.length,r=this._options.mutationLimit,s=r&&n>r;if(n>this._options.mutationBreadcrumbLimit||s){const e=wh({category:"replay.mutations",data:{count:n,limit:s}});this._createCustomBreadcrumb(e)}return!s||(this.stop({reason:"mutationLimit",forceFlush:"session"===this.recordingMode}),!1)}}function zm(e,t){return[...e,...t].join(",")}const qm='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',Km=["content-length","content-type","accept"];let Gm=!1;class Jm{constructor({flushMinDelay:e=5e3,flushMaxDelay:t=5500,minReplayDuration:n=4999,maxReplayDuration:r=36e5,stickySession:s=!0,useCompression:i=!0,workerUrl:o,_experiments:a={},maskAllText:l=!0,maskAllInputs:c=!0,blockAllMedia:u=!0,mutationBreadcrumbLimit:d=750,mutationLimit:p=1e4,slowClickTimeout:h=7e3,slowClickIgnoreSelectors:m=[],networkDetailAllowUrls:g=[],networkDetailDenyUrls:f=[],networkCaptureBodies:b=!0,networkRequestHeaders:y=[],networkResponseHeaders:v=[],mask:w=[],maskAttributes:S=["title","placeholder","aria-label"],unmask:_=[],block:I=[],unblock:C=[],ignore:k=[],maskFn:P,beforeAddRecordingEvent:E,beforeErrorSampling:T,onError:O}={}){this.name="Replay";const x=function({mask:e,unmask:t,block:n,unblock:r,ignore:s}){return{maskTextSelector:zm(e,[".sentry-mask","[data-sentry-mask]"]),unmaskTextSelector:zm(t,[]),blockSelector:zm(n,[".sentry-block","[data-sentry-block]","base","iframe[srcdoc]:not([src])"]),unblockSelector:zm(r,[]),ignoreSelector:zm(s,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}({mask:w,unmask:_,block:I,unblock:C,ignore:k});if(this._recordingOptions=$i(Bi({maskAllInputs:c,maskAllText:l,maskInputOptions:{password:!0},maskTextFn:P,maskInputFn:P,maskAttributeFn:(e,t,n)=>function({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:s,value:i}){return!r||s.unmaskTextSelector&&e.matches(s.unmaskTextSelector)?i:n.includes(t)||"value"===t&&"INPUT"===e.tagName&&["submit","button"].includes(e.getAttribute("type")||"")?i.replace(/[\S]/g,"*"):i}({maskAttributes:S,maskAllText:l,privacyOptions:x,key:e,value:t,el:n})},x),{slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:e=>{try{e.__rrweb__=!0}catch(e){}},recordCrossOriginIframes:!!a.recordCrossOriginIframes}),this._initialOptions={flushMinDelay:e,flushMaxDelay:t,minReplayDuration:Math.min(n,15e3),maxReplayDuration:Math.min(r,Ju),stickySession:s,useCompression:i,workerUrl:o,blockAllMedia:u,maskAllInputs:c,maskAllText:l,mutationBreadcrumbLimit:d,mutationLimit:p,slowClickTimeout:h,slowClickIgnoreSelectors:m,networkDetailAllowUrls:g,networkDetailDenyUrls:f,networkCaptureBodies:b,networkRequestHeaders:Ym(y),networkResponseHeaders:Ym(v),beforeAddRecordingEvent:E,beforeErrorSampling:T,onError:O,_experiments:a},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${qm}`:qm),this._isInitialized&&aa())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return Gm}set _isInitialized(e){Gm=e}afterAllSetup(e){!aa()||this._replay||(this._setup(e),this._initialize(e))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:"session"===this._replay.recordingMode}):Promise.resolve()}flush(e){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(e):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(){var e;if(null!=(e=this._replay)&&e.isEnabled())return this._replay.getSessionId()}getRecordingMode(){var e;if(null!=(e=this._replay)&&e.isEnabled())return this._replay.recordingMode}_initialize(e){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(e),this._replay.initializeSampling())}_setup(e){const t=function(e,t){const n=t.getOptions(),r=Bi({sessionSampleRate:0,errorSampleRate:0},e),s=gt(n.replaysSessionSampleRate),i=gt(n.replaysOnErrorSampleRate);return null==s&&null==i&&d(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),null!=s&&(r.sessionSampleRate=s),null!=i&&(r.errorSampleRate=i),r}(this._initialOptions,e);this._replay=new Vm({options:t,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(e){try{const t=e.getIntegrationByName("ReplayCanvas");if(!t)return;this._replay._canvas=t.getOptions()}catch(e){}}}function Ym(e){return[...Km,...e.map(e=>e.toLowerCase())]}var Qm=Object.defineProperty,Xm=(e,t,n)=>((e,t,n)=>t in e?Qm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class Zm{constructor(){Xm(this,"idNodeMap",new Map),Xm(this,"nodeMetaMap",new WeakMap)}getId(e){var t,n;return e&&null!=(t=null==(n=this.getMeta(e))?void 0:n.id)?t:-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach(e=>this.removeNodeFromMap(e))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)}replace(e,t){const n=this.getNode(e);if(n){const e=this.nodeMetaMap.get(n);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function eg(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:eg(e.parentNode,t,n,r+1)}function tg(e,t){return n=>{const r=n;if(null===r)return!1;try{if(e)if("string"==typeof e){if(r.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}(r,e))return!0;return!(!t||!r.matches(t))}catch(e){return!1}}}const ng="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let rg={map:{},getId(){return console.error(ng),-1},getNode(){return console.error(ng),null},removeNodeFromMap(){console.error(ng)},has(){return console.error(ng),!1},reset(){console.error(ng)}};function sg(e,t,n,r,s=window){const i=s.Object.getOwnPropertyDescriptor(e,t);return s.Object.defineProperty(e,t,r?n:{set(e){ug(()=>{n.set.call(this,e)},0),i&&i.set&&i.set.call(this,e)}}),()=>sg(e,t,i||{},!0)}function ig(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],s=n(r);return"function"==typeof s&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=s,()=>{e[t]=r}}catch(e){return()=>{}}}function og(e,t,n,r,s){if(!e)return!1;const i=function(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch(e){return null}}(e);if(!i)return!1;const o=eg(i,tg(t,n));let a=-1;return!(o<0)&&(r&&(a=eg(i,tg(null,r))),o>-1&&a<0||o<a)}typeof window<"u"&&window.Proxy&&window.Reflect&&(rg=new Proxy(rg,{get(e,t,n){return"map"===t&&console.error(ng),Reflect.get(e,t,n)}})),Date.now().toString();const ag={};function lg(e){const t=ag[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const s=t.contentWindow;s&&s[e]&&(r=s[e]),n.head.removeChild(t)}catch(e){}return ag[e]=r.bind(window)}function cg(...e){return lg("requestAnimationFrame")(...e)}function ug(...e){return lg("setTimeout")(...e)}var dg=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(dg||{});let pg;const hg=e=>pg?(...t)=>{try{return e(...t)}catch(e){if(pg&&!0===pg(e))return()=>{};throw e}}:e;for(var mg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",gg=typeof Uint8Array>"u"?[]:new Uint8Array(256),fg=0;fg<64;fg++)gg[mg.charCodeAt(fg)]=fg;const bg=new Map;const yg=(e,t,n)=>{if(!e||!Sg(e,t)&&"object"!=typeof e)return;const r=function(e,t){let n=bg.get(e);return n||(n=new Map,bg.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}(n,e.constructor.name);let s=r.indexOf(e);return-1===s&&(s=r.length,r.push(e)),s};function vg(e,t,n){if(e instanceof Array)return e.map(e=>vg(e,t,n));if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){const t=e.constructor.name,n=function(e){var t,n=new Uint8Array(e),r=n.length,s="";for(t=0;t<r;t+=3)s+=mg[n[t]>>2],s+=mg[(3&n[t])<<4|n[t+1]>>4],s+=mg[(15&n[t+1])<<2|n[t+2]>>6],s+=mg[63&n[t+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s}(e);return{rr_type:t,base64:n}}if(e instanceof DataView)return{rr_type:e.constructor.name,args:[vg(e.buffer,t,n),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){const t=e.constructor.name,{src:n}=e;return{rr_type:t,src:n}}if(e instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:e.toDataURL()}}if(e instanceof ImageData)return{rr_type:e.constructor.name,args:[vg(e.data,t,n),e.width,e.height]};if(Sg(e,t)||"object"==typeof e){return{rr_type:e.constructor.name,index:yg(e,t,n)}}return e}const wg=(e,t,n)=>e.map(e=>vg(e,t,n)),Sg=(e,t)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(e=>"function"==typeof t[e]).find(n=>e instanceof t[n]);function _g(e,t,n,r,s){const i=[];try{const o=ig(e.HTMLCanvasElement.prototype,"getContext",function(e){return function(i,...o){if(!og(this,t,n,r)){const e=function(e){return"experimental-webgl"===e?"webgl":e}(i);if("__context"in this||(this.__context=e),s&&["webgl","webgl2"].includes(e))if(o[0]&&"object"==typeof o[0]){const e=o[0];e.preserveDrawingBuffer||(e.preserveDrawingBuffer=!0)}else o.splice(0,1,{preserveDrawingBuffer:!0})}return e.apply(this,[i,...o])}});i.push(o)}catch(e){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{i.forEach(e=>e())}}function Ig(e,t,n,r,s,i,o,a){const l=[],c=Object.getOwnPropertyNames(e);for(const o of c)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(o))try{if("function"!=typeof e[o])continue;const c=ig(e,o,function(e){return function(...l){const c=e.apply(this,l);if(yg(c,a,this),"tagName"in this.canvas&&!og(this.canvas,r,s,i)){const e=wg(l,a,this),r={type:t,property:o,args:e};n(this.canvas,r)}return c}});l.push(c)}catch(r){const s=sg(e,o,{set(e){n(this.canvas,{type:t,property:o,args:[e],setter:!0})}});l.push(s)}return l}class Cg{constructor(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.shadowDoms=new Set,this.windowsSet=new WeakSet,this.windows=[],this.restoreHandlers=[],this.frozen=!1,this.locked=!1,this.snapshotInProgressMap=new Map,this.worker=null,this.lastSnapshotTime=0,this.processMutation=(e,t)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)};const{sampling:t="all",win:n,blockClass:r,blockSelector:s,unblockSelector:i,maxCanvasSize:o,recordCanvas:a,dataURLOptions:l,errorHandler:c}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,this.options=e,c&&function(e){pg=e}(c),(a&&"number"==typeof t||e.enableManualSnapshot)&&(this.worker=this.initFPSWorker()),this.addWindow(n),!e.enableManualSnapshot&&hg(()=>{a&&"all"===t&&(this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher()),a&&"number"==typeof t&&this.initCanvasFPSObserver(t,r,s,i,o,{dataURLOptions:l})})()}reset(){var e;this.pendingCanvasMutations.clear(),this.restoreHandlers.forEach(e=>{try{e()}catch(e){}}),this.restoreHandlers=[],this.windowsSet=new WeakSet,this.windows=[],this.shadowDoms=new Set,null==(e=this.worker)||e.terminate(),this.worker=null,this.snapshotInProgressMap=new Map}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}addWindow(e){const{sampling:t="all",blockClass:n,blockSelector:r,unblockSelector:s,recordCanvas:i,enableManualSnapshot:o}=this.options;if(!this.windowsSet.has(e)){if(o)return this.windowsSet.add(e),void this.windows.push(new WeakRef(e));hg(()=>{if(i&&"all"===t&&this.initCanvasMutationObserver(e,n,r,s),i&&"number"==typeof t){const t=_g(e,n,r,s,!0);this.restoreHandlers.push(()=>{t()})}})(),this.windowsSet.add(e),this.windows.push(new WeakRef(e))}}addShadowRoot(e){this.shadowDoms.add(new WeakRef(e))}resetShadowRoots(){this.shadowDoms=new Set}initFPSWorker(){const e=new Worker(function(){const e=new Blob(['for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};']);return URL.createObjectURL(e)}());return e.onmessage=e=>{const t=e.data,{id:n}=t;if(this.snapshotInProgressMap.set(n,!1),!("base64"in t))return;const{base64:r,type:s,width:i,height:o}=t;this.mutationCb({id:n,type:dg["2D"],commands:[{property:"clearRect",args:[0,0,i,o]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:r}],type:s}]},0,0,i,o]}]})},e}initCanvasFPSObserver(e,t,n,r,s,i){const o=this.takeSnapshot(!1,e,t,n,r,s,i.dataURLOptions);this.restoreHandlers.push(()=>{cancelAnimationFrame(o)})}initCanvasMutationObserver(e,t,n,r){const s=_g(e,t,n,r,!1),i=function(e,t,n,r,s){const i=[],o=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const a of o)try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[a])continue;const o=ig(t.CanvasRenderingContext2D.prototype,a,function(i){return function(...o){return og(this.canvas,n,r,s)||ug(()=>{const n=wg(o,t,this);e(this.canvas,{type:dg["2D"],property:a,args:n})},0),i.apply(this,o)}});i.push(o)}catch(n){const r=sg(t.CanvasRenderingContext2D.prototype,a,{set(t){e(this.canvas,{type:dg["2D"],property:a,args:[t],setter:!0})}});i.push(r)}return()=>{i.forEach(e=>e())}}(this.processMutation.bind(this),e,t,n,r),o=function(e,t,n,r,s){const i=[];return i.push(...Ig(t.WebGLRenderingContext.prototype,dg.WebGL,e,n,r,s,0,t)),typeof t.WebGL2RenderingContext<"u"&&i.push(...Ig(t.WebGL2RenderingContext.prototype,dg.WebGL2,e,n,r,s,0,t)),()=>{i.forEach(e=>e())}}(this.processMutation.bind(this),e,t,n,r,this.mirror);this.restoreHandlers.push(()=>{s(),i(),o()})}snapshot(e){const{options:t}=this,n=this.takeSnapshot(!0,"all"===t.sampling?2:t.sampling||2,t.blockClass,t.blockSelector,t.unblockSelector,t.maxCanvasSize,t.dataURLOptions,e);this.restoreHandlers.push(()=>{cancelAnimationFrame(n)})}takeSnapshot(e,t,n,r,s,i,o,a){const l=1e3/t;let c;const u=e=>{if(e)return[e];const t=[],i=e=>{e.querySelectorAll("canvas").forEach(e=>{og(e,n,r,s)||t.push(e)})};for(const e of this.windows){const t=e.deref();let n;try{n=t&&t.document}catch(e){}n&&i(n)}for(const e of this.shadowDoms){const t=e.deref();t&&i(t)}return t},d=t=>{if(this.windows.length){if(this.lastSnapshotTime&&t-this.lastSnapshotTime<l)return void(c=cg(d));this.lastSnapshotTime=t,u(a).forEach(t=>{var n;if(!this.mirror.hasNode(t))return;const r=this.mirror.getId(t);if(!this.snapshotInProgressMap.get(r)&&t.width&&t.height){if(this.snapshotInProgressMap.set(r,!0),!e&&["webgl","webgl2"].includes(t.__context)){const e=t.getContext(t.__context);!1===(null==(n=null==e?void 0:e.getContextAttributes())?void 0:n.preserveDrawingBuffer)&&e.clear(e.COLOR_BUFFER_BIT)}createImageBitmap(t).then(e=>{var n;null==(n=this.worker)||n.postMessage({id:r,bitmap:e,width:t.width,height:t.height,dataURLOptions:o,maxCanvasSize:i},[e])}).catch(e=>{hg(()=>{throw e})()})}}),e||(c=cg(d))}};return c=cg(d),c}startPendingCanvasMutationFlusher(){cg(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const e=t=>{this.rafStamps.latestId=t,cg(e)};cg(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((e,t)=>{const n=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,n)}),cg(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(e);if(!n||-1===t)return;const r=n.map(e=>{const t=e,{type:n}=t;return Ni(t,["type"])}),{type:s}=n[0];this.mutationCb({id:t,type:s,commands:r}),this.pendingCanvasMutations.delete(e)}}var kg,Pg;try{if(2!==Array.from([1],e=>2*e)[0]){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=(null==(kg=e.contentWindow)?void 0:kg.Array.from)||Array.from,document.body.removeChild(e)}}catch(oh){console.debug("Unable to override Array.from",oh)}new Zm,function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"}(Pg||(Pg={}));const Eg={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},Tg=1280,Og=(e={})=>{const[t,n]=e.maxCanvasSize||[],r={quality:e.quality||"medium",enableManualSnapshot:e.enableManualSnapshot,maxCanvasSize:[t?Math.min(t,Tg):Tg,n?Math.min(n,Tg):Tg]};let s;const i=new Promise(e=>s=e);return{name:"ReplayCanvas",getOptions(){const{quality:e,enableManualSnapshot:t,maxCanvasSize:n}=r;return Bi({enableManualSnapshot:t,recordCanvas:!0,getCanvasManager:e=>{const r=new Cg($i(Bi({},e),{enableManualSnapshot:t,maxCanvasSize:n,errorHandler:e=>{try{"object"==typeof e&&(e.__rrweb__=!0)}catch(e){}}}));return s(r),r}},Eg[e]||Eg.medium)},async snapshot(e){(await i).snapshot(e)}}};function xg(e=0){return((Ie()||performance.timeOrigin)+e)/1e3}const Mg=new WeakMap,Ag=new Map,Rg={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function Dg(e,t){const{traceFetch:n,traceXHR:r,trackFetchStreamPerformance:s,shouldCreateSpanForRequest:i,enableHTTPTimings:o,tracePropagationTargets:a,onRequestSpanStart:l}=Bi(Bi({},Rg),t),c="function"==typeof i?i:e=>!0,u=e=>function(e,t){const n=Z();if(n){let r,s;try{r=new URL(e,n),s=new URL(n).origin}catch(e){return!1}const i=r.origin===s;return t?ie(r.toString(),t)||i&&ie(r.pathname,t):i}{const n=!!e.match(/^\/(?!\/)/);return t?ie(e,t):n}}(e,a),d={};n&&(e.addEventProcessor(e=>("transaction"===e.type&&e.spans&&e.spans.forEach(e=>{if("http.client"===e.op){const t=Ag.get(e.span_id);t&&(e.timestamp=t/1e3,Ag.delete(e.span_id))}}),e)),s&&function(e){const t="fetch-body-resolved";E(t,e),T(t,()=>Qr(Xr))}(e=>{if(e.response){const t=Mg.get(e.response);t&&e.endTimestamp&&Ag.set(t,e.endTimestamp)}}),Yr(e=>{const t=Zo(e,c,u,d);if(e.response&&e.fetchData.__span&&Mg.set(e.response,e.fetchData.__span),t){const n=Bg(e.fetchData.url),r=n?Vr(n).host:void 0;t.setAttributes({"http.url":n,"server.address":r}),o&&Lg(t),null==l||l(t,{headers:e.headers})}})),r&&$s(e=>{var t;const n=function(e,t,n,r){const s=e.xhr,i=null==s?void 0:s[Bs];if(!s||s.__sentry_own_request__||!i)return;const{url:o,method:a}=i,l=Bt()&&t(o);if(e.endTimestamp&&l){const e=s.__sentry_xhr_span_id__;if(!e)return;const t=r[e];return void(t&&void 0!==i.status_code&&(ot(t,i.status_code),t.end(),delete r[e]))}const c=Bg(o),u=Vr(c||o),d=zr(o),p=!!Dt(),h=l&&p?Qi({name:`${a} ${d}`,attributes:Bi(Bi({url:o,type:"xhr","http.method":a,"http.url":c,"server.address":null==u?void 0:u.host,[Je]:"auto.http.browser",[Ge]:"http.client"},(null==u?void 0:u.search)&&{"http.query":null==u?void 0:u.search}),(null==u?void 0:u.hash)&&{"http.fragment":null==u?void 0:u.hash})}):new Wi;s.__sentry_xhr_span_id__=h.spanContext().spanId,r[s.__sentry_xhr_span_id__]=h,n(o)&&function(e,t){const{"sentry-trace":n,baggage:r}=go({span:t});n&&function(e,t,n){var r;const s=null==(r=e.__sentry_xhr_v3__)?void 0:r.request_headers;if(null==s||!s["sentry-trace"])try{if(e.setRequestHeader("sentry-trace",t),n){const t=null==s?void 0:s.baggage;(!t||!function(e){return e.split(",").some(e=>e.trim().startsWith("sentry-"))}(t))&&e.setRequestHeader("baggage",n)}}catch(e){}}(e,n,r)}(s,Bt()&&p?h:void 0);const m=He();return m&&m.emit("beforeOutgoingRequestSpan",h,e),h}(e,c,u,d);if(n){let r;o&&Lg(n);try{r=new Headers(null==(t=e.xhr.__sentry_xhr_v3__)?void 0:t.request_headers)}catch(e){}null==l||l(n,{headers:r})}})}function Lg(e){const{url:t}=Pt(e).data;if(!t||"string"!=typeof t)return;const n=Hc("resource",({entries:r})=>{r.forEach(r=>{(function(e){return"resource"===e.entryType&&"initiatorType"in e&&"string"==typeof e.nextHopProtocol&&("fetch"===e.initiatorType||"xmlhttprequest"===e.initiatorType)})(r)&&r.name.endsWith(t)&&(function(e){const t=[];if(null!=e.nextHopProtocol){const{name:n,version:r}=su(e.nextHopProtocol);t.push(["network.protocol.version",r],["network.protocol.name",n])}return Ie()?[...t,["http.request.redirect_start",xg(e.redirectStart)],["http.request.fetch_start",xg(e.fetchStart)],["http.request.domain_lookup_start",xg(e.domainLookupStart)],["http.request.domain_lookup_end",xg(e.domainLookupEnd)],["http.request.connect_start",xg(e.connectStart)],["http.request.secure_connection_start",xg(e.secureConnectionStart)],["http.request.connection_end",xg(e.connectEnd)],["http.request.request_start",xg(e.requestStart)],["http.request.response_start",xg(e.responseStart)],["http.request.response_end",xg(e.responseEnd)]]:t}(r).forEach(t=>e.setAttribute(...t)),setTimeout(n))})})}function Bg(e){try{return new URL(e,ns.location.origin).href}catch(e){return}}const $g="sentry_previous_trace",Ng="sentry.previous_trace";function jg(e,{linkPreviousTrace:t,consistentTraceSampling:n}){const r="session-storage"===t;let s=r?function(){var e;try{const t=null==(e=ns.sessionStorage)?void 0:e.getItem($g);return JSON.parse(t)}catch(e){return}}():void 0;e.on("spanStart",e=>{if(Rt(e)!==e)return;const t=je().getPropagationContext();s=function(e,t,n){const r=Pt(t);function s(){var e,t,s;try{return null!=(e=Number(null==(t=n.dsc)?void 0:t.sample_rate))?e:Number(null==(s=r.data)?void 0:s[qe])}catch(e){return 0}}const i={spanContext:t.spanContext(),startTimestamp:r.start_timestamp,sampleRate:s(),sampleRand:n.sampleRand};if(!e)return i;const o=e.spanContext;return o.traceId===r.trace_id?e:(Date.now()/1e3-e.startTimestamp<=3600&&(ri&&g.log(`Adding previous_trace ${o} link to span ${Bi({op:r.op},t.spanContext())}`),t.addLink({context:o,attributes:{[st]:"previous_trace"}}),t.setAttribute(Ng,`${o.traceId}-${o.spanId}-${Fg(o)?1:0}`)),i)}(s,e,t),r&&function(e){try{ns.sessionStorage.setItem($g,JSON.stringify(e))}catch(e){ri&&g.warn("Could not store previous trace in sessionStorage",e)}}(s)});let i=!0;n&&e.on("beforeSampling",e=>{if(!s)return;const t=je(),n=t.getPropagationContext();i&&n.parentSpanId?i=!1:(t.setPropagationContext($i(Bi({},n),{dsc:$i(Bi({},n.dsc),{sample_rate:String(s.sampleRate),sampled:String(Fg(s.spanContext))}),sampleRand:s.sampleRand})),e.parentSampled=Fg(s.spanContext),e.parentSampleRate=s.sampleRate,e.spanAttributes=$i(Bi({},e.spanAttributes),{[Ke]:s.sampleRate}))})}function Fg(e){return 1===e.traceFlags}const Ug=Bi($i(Bi({},io),{instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,enableElementTiming:!0,ignoreResourceSpans:[],ignorePerformanceApiSpans:[],detectRedirects:!0,linkPreviousTrace:"in-memory",consistentTraceSampling:!1,_experiments:{}}),Rg),Wg=(e={})=>{const t={name:void 0,source:void 0},n=ns.document,{enableInp:r,enableElementTiming:i,enableLongTask:o,enableLongAnimationFrame:a,_experiments:{enableInteractions:l,enableStandaloneClsSpans:c,enableStandaloneLcpSpans:u},beforeStartSpan:d,idleTimeout:p,finalTimeout:h,childSpanTimeout:m,markBackgroundSpan:f,traceFetch:b,traceXHR:y,trackFetchStreamPerformance:v,shouldCreateSpanForRequest:w,enableHTTPTimings:S,ignoreResourceSpans:_,ignorePerformanceApiSpans:I,instrumentPageLoad:C,instrumentNavigation:k,detectRedirects:P,linkPreviousTrace:E,consistentTraceSampling:T,onRequestSpanStart:O}=Bi(Bi({},Ug),e);let x,M;function A(e,r,s=!0){const i="pageload"===r.op,o=d?d(r):r,a=o.attributes||{};if(r.name!==o.name&&(a[ze]="custom",o.attributes=a),!s){const e=ve();return void Qi($i(Bi({},o),{startTime:e})).end(e)}t.name=o.name,t.source=a[ze];const l=oo(o,{idleTimeout:p,finalTimeout:h,childSpanTimeout:m,disableAutoFinish:i,beforeSpanEnd:t=>{null==x||x(),mu(t,{recordClsOnPageloadSpan:!c,recordLcpOnPageloadSpan:!u,ignoreResourceSpans:_,ignorePerformanceApiSpans:I}),Gg(e,void 0);const n=je(),r=n.getPropagationContext();n.setPropagationContext($i(Bi({},r),{traceId:l.spanContext().traceId,sampled:Et(l),dsc:Gt(t)}))}});function g(){n&&["interactive","complete"].includes(n.readyState)&&e.emit("idleSpanEnableAutoFinish",l)}Gg(e,l),i&&n&&(n.addEventListener("readystatechange",()=>{g()}),g())}return{name:"BrowserTracing",setup(e){if(Ui(),x=hu({recordClsStandaloneSpans:c||!1,recordLcpStandaloneSpans:u||!1,client:e}),r&&Iu(),i&&(nu()&&Ie()&&Hc("element",bu)),a&&s.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?new PerformanceObserver(e=>{const t=Dt();if(t)for(const n of e.getEntries()){if(!n.scripts[0])continue;const e=ru(Ie()+n.startTime),{start_timestamp:r,op:s}=Pt(t);if("navigation"===s&&r&&e<r)continue;const i=ru(n.duration),o={[Je]:"auto.ui.browser.metrics"},a=n.scripts[0],{invoker:l,invokerType:c,sourceURL:u,sourceFunctionName:d,sourceCharPosition:p}=a;o["browser.script.invoker"]=l,o["browser.script.invoker_type"]=c,u&&(o["code.filepath"]=u),d&&(o["code.function"]=d),-1!==p&&(o["browser.script.source_char_position"]=p),eu(t,e,e+i,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:o})}}).observe({type:"long-animation-frame",buffered:!0}):o&&Hc("longtask",({entries:e})=>{const t=Dt();if(!t)return;const{op:n,start_timestamp:r}=Pt(t);for(const s of e){const e=ru(Ie()+s.startTime),i=ru(s.duration);"navigation"===n&&r&&e<r||eu(t,e,e+i,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[Je]:"auto.ui.browser.metrics"}})}}),l&&Hc("event",({entries:e})=>{const t=Dt();if(t)for(const n of e)if("click"===n.name){const e=ru(Ie()+n.startTime),r=ru(n.duration),s={name:Q(n.target),op:`ui.interaction.${n.name}`,startTime:e,attributes:{[Je]:"auto.ui.browser.metrics"}},i=ee(n.target);i&&(s.attributes["ui.component_name"]=i),eu(t,e,e+r,s)}}),P&&n){const e=()=>{M=_e()};addEventListener("click",e,{capture:!0}),addEventListener("keydown",e,{capture:!0,passive:!0})}function t(){const t=Kg(e);t&&!Pt(t).timestamp&&(ri&&g.log(`[Tracing] Finishing current active span with op: ${Pt(t).op}`),t.setAttribute(Ye,"cancelled"),t.end())}e.on("startNavigationSpan",(n,r)=>{if(He()!==e)return;if(null!=r&&r.isRedirect)return ri&&g.warn("[Tracing] Detected redirect, navigation span will not be the root span, but a child span."),void A(e,Bi({op:"navigation.redirect"},n),!1);t(),Fe().setPropagationContext({traceId:Ee(),sampleRand:Math.random()});const s=je();s.setPropagationContext({traceId:Ee(),sampleRand:Math.random()}),s.setSDKProcessingMetadata({normalizedRequest:void 0}),A(e,Bi({op:"navigation"},n))}),e.on("startPageLoadSpan",(n,r={})=>{if(He()!==e)return;t();const s=bt(r.sentryTrace||zg("sentry-trace"),r.baggage||zg("baggage")),i=je();i.setPropagationContext(s),i.setSDKProcessingMetadata({normalizedRequest:os()}),A(e,Bi({op:"pageload"},n))})},afterAllSetup(e){let n=Z();if("off"!==E&&jg(e,{linkPreviousTrace:E,consistentTraceSampling:T}),ns.location){if(C){const t=Ie();Hg(e,{name:ns.location.pathname,startTime:t?t/1e3:void 0,attributes:{[ze]:"url",[Je]:"auto.pageload.browser"}})}k&&xs(({to:t,from:r})=>{if(void 0===r&&-1!==(null==n?void 0:n.indexOf(t)))return void(n=void 0);n=void 0;const s=Wr(t),i=Kg(e),o=i&&P&&function(e,t){const n=Pt(e),r=ve(),s=n.start_timestamp;return!(r-s>Jg||t&&r-t<=Jg)}(i,M);Vg(e,{name:(null==s?void 0:s.pathname)||ns.location.pathname,attributes:{[ze]:"url",[Je]:"auto.navigation.browser"}},{url:t,isRedirect:o})})}f&&(ns.document?ns.document.addEventListener("visibilitychange",()=>{const e=Dt();if(!e)return;const t=Rt(e);if(ns.document.hidden&&t){const e="cancelled",{op:n,status:r}=Pt(t);ri&&g.log(`[Tracing] Transaction: ${e} -> since tab moved to the background, op: ${n}`),r||t.setStatus({code:2,message:e}),t.setAttribute("sentry.cancellation_reason","document.hidden"),t.end()}}):ri&&g.warn("[Tracing] Could not set up background tab detection due to lack of global document")),l&&function(e,t,n,r,s){const i=ns.document;let o;const a=()=>{const i="ui.action.click",a=Kg(e);if(a){const e=Pt(a).op;if(["navigation","pageload"].includes(e))return void(ri&&g.warn(`[Tracing] Did not create ${i} span because a pageload or navigation span is in progress.`))}o&&(o.setAttribute(Ye,"interactionInterrupted"),o.end(),o=void 0),s.name?o=oo({name:s.name,op:i,attributes:{[ze]:s.source||"url"}},{idleTimeout:t,finalTimeout:n,childSpanTimeout:r}):ri&&g.warn(`[Tracing] Did not create ${i} transaction because _latestRouteName is missing.`)};i&&addEventListener("click",a,{capture:!0})}(e,p,h,m,t),r&&function(){const e=({entries:e})=>{const t=Dt(),n=t&&Rt(t);e.forEach(e=>{if(!function(e){return"duration"in e}(e)||!n)return;const t=e.interactionId;if(null!=t&&!_u.has(t)){if(Su.length>10){const e=Su.shift();_u.delete(e)}Su.push(t),_u.set(t,n)}})};Hc("event",e),Hc("first-input",e)}(),Dg(e,{traceFetch:b,traceXHR:y,trackFetchStreamPerformance:v,tracePropagationTargets:e.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:w,enableHTTPTimings:S,onRequestSpanStart:O})}}};function Hg(e,t,n){e.emit("startPageLoadSpan",t,n),je().setTransactionName(t.name);const r=Kg(e);return r&&e.emit("afterStartPageLoadSpan",r),r}function Vg(e,t,n){const{url:r,isRedirect:s}=n||{};e.emit("beforeStartNavigationSpan",t,{isRedirect:s}),e.emit("startNavigationSpan",t,{isRedirect:s});const i=je();return i.setTransactionName(t.name),r&&!s&&i.setSDKProcessingMetadata({normalizedRequest:$i(Bi({},os()),{url:r})}),Kg(e)}function zg(e){const t=ns.document,n=null==t?void 0:t.querySelector(`meta[name=${e}]`);return(null==n?void 0:n.getAttribute("content"))||void 0}const qg="_sentry_idleSpan";function Kg(e){return e[qg]}function Gg(e,t){ae(e,qg,t)}const Jg=.3;function Yg(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function Qg(e){return Yg(e.getAllKeys())}function Xg(e){let t;function n(){return null==t&&(t=function(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=Yg(n);return e=>r.then(n=>e(n.transaction(t,"readwrite").objectStore(t)))}(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{push:async t=>{try{const r=await rn(t);await function(e,t,n){return e(e=>Qg(e).then(r=>{if(!(r.length>=n))return e.put(t,Math.max(...r,0)+1),Yg(e.transaction)}))}(n(),r,e.maxQueueSize||30)}catch(e){}},unshift:async t=>{try{const r=await rn(t);await function(e,t,n){return e(e=>Qg(e).then(r=>{if(!(r.length>=n))return e.put(t,Math.min(...r,0)-1),Yg(e.transaction)}))}(n(),r,e.maxQueueSize||30)}catch(e){}},shift:async()=>{try{const e=await function(e){return e(e=>Qg(e).then(t=>{const n=t[0];if(null!=n)return Yg(e.get(n)).then(t=>(e.delete(n),Yg(e.transaction).then(()=>t)))}))}(n());if(e)return sn(e)}catch(e){}}}}const Zg=1e6,ef=String(0),tf="main",nf=ns.navigator;let rf="",sf="",of="",af=(null==nf?void 0:nf.userAgent)||"",lf="";var cf;const uf=(null==nf?void 0:nf.language)||(null==(cf=null==nf?void 0:nf.languages)?void 0:cf[0])||"";const df=null==nf?void 0:nf.userAgentData;function pf(e){return function(e){return!("thread_metadata"in e)}(e)?function(e){let t,n=0;const r={samples:[],stacks:[],frames:[],thread_metadata:{[ef]:{name:tf}}},s=e.samples[0];if(!s)return r;const i=s.timestamp,o=Ie(),a="number"==typeof performance.timeOrigin?performance.timeOrigin:o||0,l=a-(o||a);return e.samples.forEach((s,o)=>{if(void 0===s.stackId)return void 0===t&&(t=n,r.stacks[t]=[],n++),void(r.samples[o]={elapsed_since_start_ns:((s.timestamp+l-i)*Zg).toFixed(0),stack_id:t,thread_id:ef});let a=e.stacks[s.stackId];const c=[];for(;a;){c.push(a.frameId);const t=e.frames[a.frameId];t&&void 0===r.frames[a.frameId]&&(r.frames[a.frameId]={function:t.name,abs_path:"number"==typeof t.resourceId?e.resources[t.resourceId]:void 0,lineno:t.line,colno:t.column}),a=void 0===a.parentId?void 0:e.stacks[a.parentId]}const u={elapsed_since_start_ns:((s.timestamp+l-i)*Zg).toFixed(0),stack_id:n,thread_id:ef};r.stacks[n]=c,r.samples[o]=u,n++}),r}(e):e}function hf(e,t,n,r){if("transaction"!==r.type)throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(null==n)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);const s=function(e){var t,n;const r=null==(n=null==(t=e.contexts)?void 0:t.trace)?void 0:n.trace_id;return"string"==typeof r&&32!==r.length&&ri&&g.log(`[Profiling] Invalid traceId: ${r} on profiled event`),"string"!=typeof r?"":r}(r),i=pf(n),o=t||("number"==typeof r.start_timestamp?1e3*r.start_timestamp:1e3*_e()),a="number"==typeof r.timestamp?1e3*r.timestamp:1e3*_e();return{event_id:e,timestamp:new Date(o).toISOString(),platform:"javascript",version:"1",release:r.release||"",environment:r.environment||$t,runtime:{name:"javascript",version:ns.navigator.userAgent},os:{name:rf,version:sf,build_number:af},device:{locale:uf,model:lf,manufacturer:af,architecture:of,is_emulator:!1},debug_meta:{images:gf(n.resources)},profile:i,transactions:[{name:r.transaction||"",id:r.event_id||he(),trace_id:s,active_thread_id:ef,relative_start_ns:"0",relative_end_ns:(1e6*(a-o)).toFixed(0)}]}}function mf(e){return"pageload"===Pt(e).op}function gf(e){const t=He(),n=null==t?void 0:t.getOptions(),r=null==n?void 0:n.stackParser;return r?function(e,t){const n=_n(e);if(!n)return[];const r=[];for(const e of t)e&&n[e]&&r.push({type:"sourcemap",code_file:e,debug_id:n[e]});return r}(r,e):[]}(function(e){return"object"==typeof e&&null!==e&&"getHighEntropyValues"in e})(df)&&df.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then(e=>{var t;if(rf=e.platform||"",of=e.architecture||"",lf=e.model||"",sf=e.platformVersion||"",null!=(t=e.fullVersionList)&&t.length){const t=e.fullVersionList[e.fullVersionList.length-1];af=`${t.brand} ${t.version}`}}).catch(e=>{});let ff=!1;function bf(e){if(ff)return ri&&g.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return ri&&g.log("[Profiling] Discarding profile because transaction was not sampled."),!1;const t=He(),n=null==t?void 0:t.getOptions();if(!n)return ri&&g.log("[Profiling] Profiling disabled, no options found."),!1;const r=n.profilesSampleRate;return function(e){return"number"!=typeof e&&"boolean"!=typeof e||"number"==typeof e&&isNaN(e)?(ri&&g.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):!0===e||!1===e||!(e<0||e>1)||(ri&&g.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${e}.`),!1)}(r)?r?!0===r||Math.random()<r||(ri&&g.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(r)})`),!1):(ri&&g.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1):(ri&&g.warn("[Profiling] Discarding profile because of invalid sample rate."),!1)}function yf(e,t,n,r){return function(e){return e.samples.length<2?(ri&&g.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):!!e.frames.length||(ri&&g.log("[Profiling] Discarding profile because it contains no frames"),!1)}(n)?hf(e,t,n,r):null}const vf=new Map;function wf(e){const t=vf.get(e);return t&&vf.delete(e),t}function Sf(e){let t;mf(e)&&(t=1e3*_e());const n=function(){const e=ns.Profiler;if(!function(e){return"function"==typeof e}(e))return void(ri&&g.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object."));const t=Math.floor(3e3);try{return new e({sampleInterval:10,maxBufferSize:t})}catch(e){ri&&(g.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),g.log("[Profiling] Disabling profiling for current user session.")),ff=!0}}();if(!n)return;ri&&g.log(`[Profiling] started profiling span: ${Pt(e).description}`);const r=he();async function s(){if(e&&n)return n.stop().then(t=>{i&&(ns.clearTimeout(i),i=void 0),ri&&g.log(`[Profiling] stopped profiling of span: ${Pt(e).description}`),t?function(e,t){if(vf.set(e,t),vf.size>30){const e=vf.keys().next().value;vf.delete(e)}}(r,t):ri&&g.log(`[Profiling] profiler returned null profile for: ${Pt(e).description}`,"this may indicate an overlapping span or a call to stopProfiling with a profile title that was never started")}).catch(e=>{ri&&g.log("[Profiling] error while stopping profiler:",e)})}je().setContext("profile",{profile_id:r,start_timestamp:t});let i=ns.setTimeout(()=>{ri&&g.log("[Profiling] max profile duration elapsed, stopping profiling for:",Pt(e).description),s()},3e4);const o=e.end.bind(e);e.end=function(){return e?(s().then(()=>{o()},()=>{o()}),e):o()}}const _f=()=>({name:"BrowserProfiling",setup(e){const t=Dt(),n=t&&Rt(t);n&&mf(n)&&bf(n)&&Sf(n),e.on("spanStart",e=>{e===Rt(e)&&bf(e)&&Sf(e)}),e.on("beforeEnvelope",e=>{var t,n;if(!vf.size)return;const r=function(e){const t=[];return en(e,(e,n)=>{var r,s;if("transaction"===n)for(let n=1;n<e.length;n++){const i=e[n];null!=(s=null==(r=null==i?void 0:i.contexts)?void 0:r.profile)&&s.profile_id&&t.push(e[n])}}),t}(e);if(!r.length)return;const s=[];for(const e of r){const r=null==e?void 0:e.contexts,i=null==(t=null==r?void 0:r.profile)?void 0:t.profile_id,o=null==(n=null==r?void 0:r.profile)?void 0:n.start_timestamp;if("string"!=typeof i){ri&&g.log("[Profiling] cannot find profile for a span without a profile context");continue}if(!i){ri&&g.log("[Profiling] cannot find profile for a span without a profile context");continue}null!=r&&r.profile&&delete r.profile;const a=wf(i);if(!a){ri&&g.log(`[Profiling] Could not retrieve profile for span: ${i}`);continue}const l=yf(i,o,a,e);l&&s.push(l)}!function(e,t){if(!t.length)return e;for(const n of t)e[1].push([{type:"profile"},n])}(e,s)})}});const If=(e={})=>{const t=e.sidecarUrl||"http://localhost:8969/stream";return{name:"SpotlightBrowser",setup:()=>{ri&&g.log("Using Sidecar URL",t)},processEvent:e=>function(e){var t;return!!("transaction"===e.type&&e.spans&&null!=(t=e.contexts)&&t.trace&&"ui.action.click"===e.contexts.trace.op&&e.spans.some(({description:e})=>null==e?void 0:e.includes("#sentry-spotlight")))}(e)?null:e,afterAllSetup:e=>{!function(e,t){const n=Rs("fetch");let r=0;e.on("beforeEnvelope",e=>{r>3?g.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests:",r):n(t,{method:"POST",body:rn(e),headers:{"Content-Type":"application/x-sentry-envelope"},mode:"cors"}).then(e=>{e.status>=200&&e.status<400&&(r=0)},e=>{r++,g.error("Sentry SDK can't connect to Sidecar is it running? See: https://spotlightjs.com/sidecar/npx/",e)})})}(e,t)}}};const Cf=()=>({name:"LaunchDarkly",processEvent(e,t,n){return Jo(e)}});const kf=()=>({name:"OpenFeature",processEvent(e,t,n){return Jo(e)}});const Pf=({featureFlagClientClass:e})=>({name:"Unleash",setupOnce(){oe(e.prototype,"isEnabled",Ef)},processEvent(e,t,n){return Jo(e)}});function Ef(e){return function(...t){const n=t[0],r=e.apply(this,t);return"string"==typeof n&&"boolean"==typeof r?(Yo(n,r),Qo(n,r)):ri&&g.error(`[Feature Flags] UnleashClient.isEnabled does not match expected signature. arg0: ${n} (${typeof n}), result: ${r} (${typeof r})`),r}}const Tf=({featureFlagClient:e})=>({name:"Statsig",setup(t){e.on("gate_evaluation",e=>{Yo(e.gate.name,e.gate.value),Qo(e.gate.name,e.gate.value)})},processEvent(e,t,n){return Jo(e)}});const Of=({worker:e})=>({name:"WebWorker",setupOnce:()=>{(Array.isArray(e)?e:[e]).forEach(e=>xf(e))},addWorker:e=>xf(e)});function xf(e){e.addEventListener("message",e=>{(function(e){return V(e)&&!0===e._sentryMessage&&"_sentryDebugIds"in e&&(V(e._sentryDebugIds)||void 0===e._sentryDebugIds)})(e.data)&&(e.stopImmediatePropagation(),ri&&g.log("Sentry debugId web worker message received",e.data),ns._sentryDebugIds=Bi(Bi({},e.data._sentryDebugIds),ns._sentryDebugIds))})}function Mf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Af(e,{componentStack:t},n){if(function(e){const t=e.match(/^([^.]+)/);return null!==t&&parseInt(t[0])>=17}(ki.version)&&$(e)&&t){const n=new Error(e.message);n.name=`React ErrorBoundary ${e.name}`,n.stack=t,function(e,t){const n=new WeakSet;!function e(t,r){if(!n.has(t)){if(t.cause)return n.add(t),e(t.cause,r);t.cause=r}}(e,t)}(e,n)}return We(r=>(r.setContext("react",{componentStack:t}),Pn(e,n)))}const Rf="ui.react.render",Df="ui.react.mount";var Lf,Bf={exports:{}},$f={};var Nf,jf,Ff;function Uf(){return Nf||(Nf=1,Bf.exports=function(){if(Lf)return $f;Lf=1;var e="function"==typeof Symbol&&Symbol.for,t=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,s=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,a=e?Symbol.for("react.context"):60110,l=e?Symbol.for("react.async_mode"):60111,c=e?Symbol.for("react.concurrent_mode"):60111,u=e?Symbol.for("react.forward_ref"):60112,d=e?Symbol.for("react.suspense"):60113,p=e?Symbol.for("react.suspense_list"):60120,h=e?Symbol.for("react.memo"):60115,m=e?Symbol.for("react.lazy"):60116,g=e?Symbol.for("react.block"):60121,f=e?Symbol.for("react.fundamental"):60117,b=e?Symbol.for("react.responder"):60118,y=e?Symbol.for("react.scope"):60119;function v(e){if("object"==typeof e&&null!==e){var p=e.$$typeof;switch(p){case t:switch(e=e.type){case l:case c:case r:case i:case s:case d:return e;default:switch(e=e&&e.$$typeof){case a:case u:case m:case h:case o:return e;default:return p}}case n:return p}}}function w(e){return v(e)===c}return $f.AsyncMode=l,$f.ConcurrentMode=c,$f.ContextConsumer=a,$f.ContextProvider=o,$f.Element=t,$f.ForwardRef=u,$f.Fragment=r,$f.Lazy=m,$f.Memo=h,$f.Portal=n,$f.Profiler=i,$f.StrictMode=s,$f.Suspense=d,$f.isAsyncMode=function(e){return w(e)||v(e)===l},$f.isConcurrentMode=w,$f.isContextConsumer=function(e){return v(e)===a},$f.isContextProvider=function(e){return v(e)===o},$f.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===t},$f.isForwardRef=function(e){return v(e)===u},$f.isFragment=function(e){return v(e)===r},$f.isLazy=function(e){return v(e)===m},$f.isMemo=function(e){return v(e)===h},$f.isPortal=function(e){return v(e)===n},$f.isProfiler=function(e){return v(e)===i},$f.isStrictMode=function(e){return v(e)===s},$f.isSuspense=function(e){return v(e)===d},$f.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===r||e===c||e===i||e===s||e===d||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===h||e.$$typeof===o||e.$$typeof===a||e.$$typeof===u||e.$$typeof===f||e.$$typeof===b||e.$$typeof===y||e.$$typeof===g)},$f.typeOf=v,$f}()),Bf.exports}var Wf=function(){if(Ff)return jf;Ff=1;var e=Uf(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function i(n){return e.isMemo(n)?r:s[n.$$typeof]||t}s[e.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[e.Memo]=r;var o=Object.defineProperty,a=Object.getOwnPropertyNames,l=Object.getOwnPropertySymbols,c=Object.getOwnPropertyDescriptor,u=Object.getPrototypeOf,d=Object.prototype;return jf=function e(t,r,s){if("string"!=typeof r){if(d){var p=u(r);p&&p!==d&&e(t,p,s)}var h=a(r);l&&(h=h.concat(l(r)));for(var m=i(t),g=i(r),f=0;f<h.length;++f){var b=h[f];if(!(n[b]||s&&s[b]||g&&g[b]||m&&m[b])){var y=c(r,b);try{o(t,b,y)}catch(e){}}}}return t},jf}();const Hf=Mf(Wf),Vf=Hf||ji({__proto__:null,default:Hf},[Wf]);class zf extends ki.Component{constructor(e){super(e);const{name:t,disabled:n=!1}=this.props;n||(this._mountSpan=Qi({name:`<${t}>`,onlyIfParent:!0,op:Df,attributes:{[Je]:"auto.ui.react.profiler","ui.component_name":t}}))}componentDidMount(){this._mountSpan&&this._mountSpan.end()}shouldComponentUpdate({updateProps:e,includeUpdates:t=!0}){if(t&&this._mountSpan&&e!==this.props.updateProps){const t=Object.keys(e).filter(t=>e[t]!==this.props.updateProps[t]);if(t.length>0){const e=_e();this._updateSpan=Xi(this._mountSpan,()=>Qi({name:`<${this.props.name}>`,onlyIfParent:!0,op:"ui.react.update",startTime:e,attributes:{[Je]:"auto.ui.react.profiler","ui.component_name":this.props.name,"ui.react.changed_props":t}}))}}return!0}componentDidUpdate(){this._updateSpan&&(this._updateSpan.end(),this._updateSpan=void 0)}componentWillUnmount(){const e=_e(),{name:t,includeRender:n=!0}=this.props;if(this._mountSpan&&n){const n=Pt(this._mountSpan).timestamp;Xi(this._mountSpan,()=>{const r=Qi({onlyIfParent:!0,name:`<${t}>`,op:Rf,startTime:n,attributes:{[Je]:"auto.ui.react.profiler","ui.component_name":t}});r&&r.end(e)})}}render(){return this.props.children}}Object.assign(zf,{defaultProps:{disabled:!1,includeRender:!0,includeUpdates:!0}});const qf=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Kf={componentStack:null,error:null,eventId:null};class Gf extends ki.Component{constructor(e){super(e),this.state=Kf,this._openFallbackReportDialog=!0;const t=He();t&&e.showDialog&&(this._openFallbackReportDialog=!1,this._cleanupHook=t.on("afterSendEvent",t=>{!t.type&&this._lastEventId&&t.event_id===this._lastEventId&&Pu($i(Bi({},e.dialogOptions),{eventId:this._lastEventId}))}))}componentDidCatch(e,t){const{componentStack:n}=t,{beforeCapture:r,onError:s,showDialog:i,dialogOptions:o}=this.props;We(a=>{r&&r(a,e,n);const l=null!=this.props.handled?this.props.handled:!!this.props.fallback,c=Af(e,t,{mechanism:{handled:l}});s&&s(e,n,c),i&&(this._lastEventId=c,this._openFallbackReportDialog&&Pu($i(Bi({},o),{eventId:c}))),this.setState({error:e,componentStack:n,eventId:c})})}componentDidMount(){const{onMount:e}=this.props;e&&e()}componentWillUnmount(){const{error:e,componentStack:t,eventId:n}=this.state,{onUnmount:r}=this.props;r&&(this.state===Kf?r(null,null,null):r(e,t,n)),this._cleanupHook&&(this._cleanupHook(),this._cleanupHook=void 0)}resetErrorBoundary(){const{onReset:e}=this.props,{error:t,componentStack:n,eventId:r}=this.state;e&&e(t,n,r),this.setState(Kf)}render(){const{fallback:e,children:t}=this.props,n=this.state;if(null===n.componentStack)return"function"==typeof t?t():t;const r="function"==typeof e?ki.createElement(e,{error:n.error,componentStack:n.componentStack,resetError:()=>this.resetErrorBoundary(),eventId:n.eventId}):e;return ki.isValidElement(r)?r:(e&&qf&&g.warn("fallback did not produce a valid ReactElement"),null)}}const Jf={attachReduxState:!0,actionTransformer:e=>e,stateTransformer:e=>e||null};function Yf(e,t,n,r){let s=t.pathname;n({location:t,routes:e},(e,t,n)=>{if(e||!n)return r(s);const i=function(e){var t;if(!Array.isArray(e)||0===e.length)return"";const n=e.filter(e=>!!e.path);let r=-1;for(let e=n.length-1;e>=0;e--)if(null!=(t=n[e].path)&&t.startsWith("/")){r=e;break}return n.slice(r).reduce((e,{path:t})=>`${e}${"/"===e||""===e?t:`/${t}`}`,"")}(n.routes||[]);return 0===i.length||"/*"===i?r(s):(s=i,r(s,"route"))})}function Qf(e){if(!e)return{};const t={};return Object.entries(e.params).forEach(([e,n])=>{t[`url.path.params.${e}`]=n,t[`url.path.parameter.${e}`]=n,t[`params.${e}`]=n}),t}function Xf(e,t,n,r,s,i=[],o){function a(e){if(0===i.length||!o)return[e,"url"];const t=Zf(i,e,o);for(const e of t)if(e.match.isExact)return[e.match.path,"route"];return[e,"url"]}if(t){const t=r.location?r.location.pathname:ns.location?ns.location.pathname:void 0;if(t){const[n,r]=a(t);Hg(e,{name:n,attributes:{[Ge]:"pageload",[Je]:`auto.pageload.react.${s}`,[ze]:r}})}}n&&r.listen&&r.listen((t,n)=>{if(n&&("PUSH"===n||"POP"===n)){const[n,r]=a(t.pathname);Vg(e,{name:n,attributes:{[Ge]:"navigation",[Je]:`auto.navigation.react.${s}`,[ze]:r}})}})}function Zf(e,t,n,r=[]){return e.some(e=>{const s=e.path?n(t,e):r.length?r[r.length-1].match:function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}}(t);return s&&(r.push({route:e,match:s}),e.routes&&Zf(e.routes,t,n,r)),!!s}),r}let eb,tb,nb,rb,sb,ib=!1;const ob=new WeakSet,ab=new Set;function lb(e,t){return eb&&tb&&nb&&sb?function(n,r){vb(n);const s=e(n,r),i=null==r?void 0:r.basename,o=Ob();return"POP"===s.state.historyAction&&o&&Eb(o,s.state.location,n,void 0,i,Array.from(ab)),s.subscribe(e=>{("PUSH"===e.historyAction||"POP"===e.historyAction)&&("idle"!==e.navigation.state?requestAnimationFrame(()=>{pb({location:e.location,routes:n,navigationType:e.historyAction,version:t,basename:i,allRoutes:Array.from(ab)})}):pb({location:e.location,routes:n,navigationType:e.historyAction,version:t,basename:i,allRoutes:Array.from(ab)}))}),s}:(qf&&g.warn(`reactRouterV${t}Instrumentation was unable to wrap the \`createRouter\` function because of one or more missing parameters.`),e)}function cb(e,t){return eb&&tb&&nb&&sb?function(n,r){vb(n);const s=e(n,r),i=null==r?void 0:r.basename,o=Ob();let a;const l=null==r?void 0:r.initialEntries,c=null==r?void 0:r.initialIndex,u=l&&1===l.length,d=void 0!==c&&l&&l[c];a=u?l[0]:d?l[c]:void 0;const p=a?"string"==typeof a?{pathname:a}:a:s.state.location;return"POP"===s.state.historyAction&&o&&Eb(o,p,n,void 0,i,Array.from(ab)),s.subscribe(e=>{const r=e.location;("PUSH"===e.historyAction||"POP"===e.historyAction)&&pb({location:r,routes:n,navigationType:e.historyAction,version:t,basename:i,allRoutes:Array.from(ab)})}),s}:(qf&&g.warn(`reactRouterV${t}Instrumentation was unable to wrap the \`createMemoryRouter\` function because of one or more missing parameters.`),e)}function ub(e,t){const n=Wg($i(Bi({},e),{instrumentPageLoad:!1,instrumentNavigation:!1})),{useEffect:r,useLocation:s,useNavigationType:i,createRoutesFromChildren:o,matchRoutes:a,stripBasename:l,instrumentPageLoad:c=!0,instrumentNavigation:u=!0}=e;return $i(Bi({},n),{setup(e){n.setup(e),eb=r,tb=s,nb=i,sb=a,rb=o,ib=l||!1},afterAllSetup(e){var r;n.afterAllSetup(e);const s=null==(r=ns.location)?void 0:r.pathname;c&&s&&Hg(e,{name:s,attributes:{[ze]:"url",[Ge]:"pageload",[Je]:`auto.pageload.react.reactrouter_v${t}`}}),u&&ob.add(e)}})}function db(e,t){if(!(eb&&tb&&nb&&sb))return qf&&g.warn("reactRouterV6Instrumentation was unable to wrap `useRoutes` because of one or more missing parameters."),e;const n=n=>{const r=ki.useRef(!0),{routes:s,locationArg:i}=n,o=e(s,i),a=tb(),l=nb(),c="string"==typeof i||null!=i&&i.pathname?i:a;return eb(()=>{const e="string"==typeof c?{pathname:c}:c;r.current?(vb(s),Eb(Ob(),e,s,void 0,void 0,Array.from(ab)),r.current=!1):pb({location:e,routes:s,navigationType:l,version:t,allRoutes:Array.from(ab)})},[l,c]),o};return(e,t)=>ki.createElement(n,{routes:e,locationArg:t})}function pb(e){const{location:t,routes:n,navigationType:r,version:s,matches:i,basename:o,allRoutes:a}=e,l=Array.isArray(i)?i:sb(n,t,o),c=He();if(c&&ob.has(c)&&("PUSH"===r||"POP"===r)&&l){let e,r="url";const i=yb(t,a||n);i&&(e=Cb(kb(a||n,t)),r="route"),(!i||!e)&&([e,r]=Pb(n,t,l,o));const u=Dt();u&&"navigation"===Pt(u).op?(null==u||u.updateName(e),null==u||u.setAttribute(ze,r)):Vg(c,{name:e,attributes:{[ze]:r,[Ge]:"navigation",[Je]:`auto.navigation.react.reactrouter_v${s}`}})}}function hb(e,t){if(!t||"/"===t||!e.toLowerCase().startsWith(t.toLowerCase()))return e;const n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?e:e.slice(n)||"/"}function mb(e,t,n){const r=e||ib?hb(t,n):t;return["/"===r[r.length-1]||"/*"===r.slice(-2)?r.slice(0,-1):r,"route"]}function gb(e){return e.endsWith("*")}function fb(e,t){var n;return gb(e)&&!(null==(n=t.route.children)||!n.length)||!1}function bb(e){var t;return!(e.children||!e.element||null==(t=e.path)||!t.endsWith("/*"))}function yb(e,t){const n=sb(t,e);if(n)for(const e of n)if(bb(e.route)&&_b(e))return!0;return!1}function vb(e){e.forEach(e=>{wb(e).forEach(e=>{ab.add(e)})})}function wb(e,t=new Set){return t.has(e)||(t.add(e),e.children&&!e.index&&e.children.forEach(e=>{wb(e,t).forEach(e=>{t.add(e)})})),t}function Sb(e){return function(e){return"*"===e[e.length-1]?e.slice(0,-1):e}(e.route.path||"")}function _b(e){return e.params["*"]||""}function Ib(e){return"/"===e[e.length-1]?e.slice(0,-1):e}function Cb(e){return"/"===e[0]?e:`/${e}`}function kb(e,t){const n=sb(e,t);if(!n||0===n.length)return"";for(const r of n)if(r.route.path&&"*"!==r.route.path){const n=Sb(r),s=hb(t.pathname,Cb(r.pathnameBase));return t.pathname===s?Ib(s):Ib(Ib(n||"")+Cb(kb(e.filter(e=>e!==r.route),{pathname:s})))}return""}function Pb(e,t,n,r=""){if(!e||0===e.length)return[ib?hb(t.pathname,r):t.pathname,"url"];let s="";if(n)for(const e of n){const n=e.route;if(n){if(n.index)return mb(s,e.pathname,r);const i=n.path;if(i&&!fb(i,e)){const n="/"===i[0]||"/"===s[s.length-1]?i:`/${i}`;if(s=Ib(s)+Cb(n),Ib(t.pathname)===Ib(r+e.pathname))return xb(s)===xb(e.pathname)||gb(s)?(fb(s,e)&&(s=s.slice(0,-1)),[(ib?"":r)+s,"route"]):[(ib?"":r)+n,"route"]}}}return[ib?hb(t.pathname,r):t.pathname||"/","url"]}function Eb(e,t,n,r,s,i){const o=Array.isArray(r)?r:sb(i||n,t,s);if(o){let r,a="url";const l=yb(t,i||n);l&&(r=Cb(kb(i||n,t)),a="route"),(!l||!r)&&([r,a]=Pb(n,t,o,s)),je().setTransactionName(r||"/"),e&&(e.updateName(r),e.setAttribute(ze,a))}}function Tb(e,t){if(!(eb&&tb&&nb&&rb&&sb))return qf&&g.warn(`reactRouterV6Instrumentation was unable to wrap Routes because of one or more missing parameters.\n      useEffect: ${eb}. useLocation: ${tb}. useNavigationType: ${nb}.\n      createRoutesFromChildren: ${rb}. matchRoutes: ${sb}.`),e;const n=n=>{const r=ki.useRef(!0),s=tb(),i=nb();return eb(()=>{const e=rb(n.children);r.current?(vb(e),Eb(Ob(),s,e,void 0,void 0,Array.from(ab)),r.current=!1):pb({location:s,routes:e,navigationType:i,version:t,allRoutes:Array.from(ab)})},[s,i]),ki.createElement(e,Bi({},n))};return Vf(n,e),n}function Ob(){const e=Dt(),t=e?Rt(e):void 0;if(!t)return;const n=Pt(t).op;return"navigation"===n||"pageload"===n?t:void 0}function xb(e){return e.split(/\\?\//).filter(e=>e.length>0&&","!==e).length}const Mb=Object.freeze(Object.defineProperty({__proto__:null,BrowserClient:ws,ErrorBoundary:Gf,OpenFeatureIntegrationHook:class{after(e,t){Yo(t.flagKey,t.value),Qo(t.flagKey,t.value)}error(e,t,n){Yo(e.flagKey,e.defaultValue),Qo(e.flagKey,e.defaultValue)}},Profiler:zf,SDK_VERSION:i,SEMANTIC_ATTRIBUTE_SENTRY_OP:Ge,SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN:Je,SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE:qe,SEMANTIC_ATTRIBUTE_SENTRY_SOURCE:ze,Scope:Ae,WINDOW:ns,addBreadcrumb:Sr,addEventProcessor:An,addIntegration:Hn,breadcrumbsIntegration:ii,browserApiErrorsIntegration:ai,browserProfilingIntegration:_f,browserSessionIntegration:di,browserTracingIntegration:Wg,buildLaunchDarklyFlagUsedHandler:function(){return{name:"sentry-flag-auditor",type:"flag-used",synchronous:!0,method:(e,t,n)=>{Yo(e,t.value),Qo(e,t.value)}}},captureConsoleIntegration:_o,captureEvent:Tn,captureException:Pn,captureFeedback:na,captureMessage:En,captureReactException:Af,captureSession:Bn,chromeStackLineParser:Vs,close:async function(e){const t=He();return t?t.close(e):(r&&g.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))},consoleLoggingIntegration:sa,contextLinesIntegration:Nu,continueTrace:(e,t)=>{const n=Ne(o());if(n.continueTrace)return n.continueTrace(e,t);const{sentryTrace:r,baggage:s}=e;return We(e=>{const n=bt(r,s);return e.setPropagationContext(n),t()})},createReduxEnhancer:function(e){const t=Bi(Bi({},Jf),e);return e=>(n,r)=>{function s(e){return(n,r)=>{const s=e(n,r),i=je(),o=t.actionTransformer(r);typeof o<"u"&&null!==o&&Sr({category:"redux.action",data:o,type:"info"});const a=t.stateTransformer(s);if(typeof a<"u"&&null!==a){const e=He(),t=null==e?void 0:e.getOptions(),n={state:{type:"redux",value:a}};ae(n,"__sentry_override_normalization_depth__",3+((null==t?void 0:t.normalizeDepth)||3)),i.setContext("state",n)}else i.setContext("state",null);const{configureScopeWithState:l}=t;return"function"==typeof l&&l(i,s),s}}t.attachReduxState&&Ue().addEventProcessor((e,t)=>{try{void 0===e.type&&"redux"===e.contexts.state.state.type&&(t.attachments=[...t.attachments||[],{filename:"redux_state.json",data:JSON.stringify(e.contexts.state.state.value)}])}catch(e){}return e});const i=e(s(n),r);return i.replaceReducer=new Proxy(i.replaceReducer,{apply:function(e,t,n){e.apply(t,[s(n[0])])}}),i}},createTransport:fr,createUserFeedbackEnvelope:function(e,{metadata:t,tunnel:n,dsn:r}){const s=Bi(Bi({event_id:e.event_id,sent_at:(new Date).toISOString()},(null==t?void 0:t.sdk)&&{sdk:{name:t.sdk.name,version:t.sdk.version}}),!!n&&!!r&&{dsn:Ft(r)}),i=function(e){return[{type:"user_report"},e]}(e);return Xt(s,[i])},dedupeIntegration:$r,defaultRequestInstrumentationOptions:Rg,defaultStackLineParsers:ei,defaultStackParser:ti,diagnoseSdkConnectivity:async function(){const e=He();if(!e)return"no-client-active";if(!e.getDsn())return"no-dsn-configured";try{await fetch("https://o447951.ingest.sentry.io/api/4509632503087104/envelope/?sentry_version=7&sentry_key=c1dfb07d783ad5325c245c1fd3725390&sentry_client=sentry.javascript.browser%2F1.33.7",{body:"{}",method:"POST",mode:"cors",credentials:"omit"})}catch(e){return"sentry-unreachable"}},endSession:Dn,eventFiltersIntegration:Pr,eventFromException:gs,eventFromMessage:fs,exceptionFromError:as,extraErrorDataIntegration:Io,featureFlagsIntegration:Xo,feedbackAsyncIntegration:Gl,feedbackIntegration:Jl,feedbackSyncIntegration:Jl,flush:async function(e){const t=He();return t?t.flush(e):(r&&g.warn("Cannot flush events. No client defined."),Promise.resolve(!1))},forceLoad:function(){},functionToStringIntegration:Cr,geckoStackLineParser:Ks,getActiveSpan:Dt,getClient:He,getCurrentScope:je,getDefaultIntegrations:yi,getFeedback:function(){const e=He();return null==e?void 0:e.getIntegrationByName("Feedback")},getGlobalScope:Ue,getIsolationScope:Fe,getReplay:function(){const e=He();return null==e?void 0:e.getIntegrationByName("Replay")},getRootSpan:Rt,getSpanDescendants:At,getSpanStatusFromHttpCode:it,getTraceData:go,globalHandlersIntegration:pi,graphqlClientIntegration:Wu,httpClientIntegration:xu,httpContextIntegration:gi,inboundFiltersIntegration:Er,init:Pi,instrumentOutgoingRequests:Dg,instrumentSupabaseClient:jo,isEnabled:Mn,isInitialized:function(){return!!He()},lastEventId:xn,launchDarklyIntegration:Cf,lazyLoadIntegration:Kl,linkedErrorsIntegration:fi,logger:Ql,makeBrowserOfflineTransport:function(e=js){return function(e){return t=>{const n=e($i(Bi({},t),{createStore:Xg}));return ns.addEventListener("online",async e=>{await n.flush()}),n}}(lo(e))},makeFetchTransport:js,makeMultiplexedTransport:function(e,t){return n=>{const r=e(n),s=new Map;function i(t,r){const i=r?`${t}:${r}`:t;let o=s.get(i);if(!o){const a=Ut(t);if(!a)return;const l=Nn(a,n.tunnel);o=r?function(e,t){return n=>{const r=e(n);return $i(Bi({},r),{send:async e=>{const n=co(e,["event","transaction","profile","replay_event"]);return n&&(n.release=t),r.send(e)}})}}(e,r)($i(Bi({},n),{url:l})):e($i(Bi({},n),{url:l})),s.set(i,o)}return[t,o]}return{send:async function(e){const n=t({envelope:e,getEvent:function(t){const n=null!=t&&t.length?t:["event"];return co(e,n)}}).map(e=>"string"==typeof e?i(e,void 0):i(e.dsn,e.release)).filter(e=>!!e),s=n.length?n:[["",r]];return(await Promise.all(s.map(([t,n])=>n.send(function(e,t){return Xt(t?$i(Bi({},e[0]),{dsn:t}):e[0],e[1])}(e,t)))))[0]},flush:async function(e){const t=[...s.values(),r];return(await Promise.all(t.map(t=>t.flush(e)))).every(e=>e)}}}},moduleMetadataIntegration:So,onLoad:function(e){e()},openFeatureIntegration:kf,opera10StackLineParser:Qs,opera11StackLineParser:Zs,parameterize:ho,reactErrorHandler:function(e){return(t,n)=>{const r=Af(t,n);e&&e(t,n,r)}},reactRouterV3BrowserTracingIntegration:function(e){const t=Wg($i(Bi({},e),{instrumentPageLoad:!1,instrumentNavigation:!1})),{history:n,routes:r,match:s,instrumentPageLoad:i=!0,instrumentNavigation:o=!0}=e;return $i(Bi({},t),{afterAllSetup(e){t.afterAllSetup(e),i&&ns.location&&Yf(r,ns.location,s,(t,n="url")=>{Hg(e,{name:t,attributes:{[Ge]:"pageload",[Je]:"auto.pageload.react.reactrouter_v3",[ze]:n}})}),o&&n.listen&&n.listen(t=>{("PUSH"===t.action||"POP"===t.action)&&Yf(r,t,s,(t,n="url")=>{Vg(e,{name:t,attributes:{[Ge]:"navigation",[Je]:"auto.navigation.react.reactrouter_v3",[ze]:n}})})})}})},reactRouterV4BrowserTracingIntegration:function(e){const t=Wg($i(Bi({},e),{instrumentPageLoad:!1,instrumentNavigation:!1})),{history:n,routes:r,matchPath:s,instrumentPageLoad:i=!0,instrumentNavigation:o=!0}=e;return $i(Bi({},t),{afterAllSetup(e){t.afterAllSetup(e),Xf(e,i,o,n,"reactrouter_v4",r,s)}})},reactRouterV5BrowserTracingIntegration:function(e){const t=Wg($i(Bi({},e),{instrumentPageLoad:!1,instrumentNavigation:!1})),{history:n,routes:r,matchPath:s,instrumentPageLoad:i=!0,instrumentNavigation:o=!0}=e;return $i(Bi({},t),{afterAllSetup(e){t.afterAllSetup(e),Xf(e,i,o,n,"reactrouter_v5",r,s)}})},reactRouterV6BrowserTracingIntegration:function(e){return ub(e,"6")},reactRouterV7BrowserTracingIntegration:function(e){return ub(e,"7")},registerSpanErrorInstrumentation:Ui,registerWebWorker:function({self:e}){var t;e.postMessage({_sentryMessage:!0,_sentryDebugIds:null!=(t=e._sentryDebugIds)?t:void 0})},replayCanvasIntegration:Og,replayIntegration:e=>new Jm(e),reportingObserverIntegration:Ou,rewriteFramesIntegration:To,sendFeedback:pa,setContext:On,setCurrentClient:ur,setExtra:function(e,t){Fe().setExtra(e,t)},setExtras:function(e){Fe().setExtras(e)},setHttpStatus:ot,setMeasurement:Hi,setTag:function(e,t){Fe().setTag(e,t)},setTags:function(e){Fe().setTags(e)},setUser:function(e){Fe().setUser(e)},showReportDialog:Pu,spanToBaggageHeader:function(e){return ht(Gt(e))},spanToJSON:Pt,spanToTraceHeader:_t,spotlightBrowserIntegration:If,startBrowserTracingNavigationSpan:Vg,startBrowserTracingPageLoadSpan:Hg,startInactiveSpan:Qi,startNewTrace:function(e){return We(t=>(t.setPropagationContext({traceId:Ee(),sampleRand:Math.random()}),r&&g.log(`Starting a new trace with id ${t.getPropagationContext().traceId}`),Xi(null,e)))},startSession:Rn,startSpan:Yi,startSpanManual:function(e,t){const n=to();if(n.startSpanManual)return n.startSpanManual(e,t);const r=eo(e),{forceTransaction:s,parentSpan:i,scope:o}=e;return We(null==o?void 0:o.clone(),()=>so(i)(()=>{const n=je(),o=ro(n,i),a=e.onlyIfParent&&!o?new Wi:Zi({parentSpan:o,spanArguments:r,forceTransaction:s,scope:n});return xe(n,a),Gi(()=>t(a,()=>a.end()),()=>{const{status:e}=Pt(a);a.isRecording()&&(!e||"ok"===e)&&a.setStatus({code:2,message:"internal_error"})})}))},statsigIntegration:Tf,supabaseIntegration:Fo,suppressTracing:function(e){const t=to();return t.suppressTracing?t.suppressTracing(e):We(t=>{t.setSDKProcessingMetadata({[Ji]:!0});const n=e();return t.setSDKProcessingMetadata({[Ji]:void 0}),n})},tanstackRouterBrowserTracingIntegration:function(e,t={}){const n=e,r=Wg($i(Bi({},t),{instrumentNavigation:!1,instrumentPageLoad:!1})),{instrumentPageLoad:s=!0,instrumentNavigation:i=!0}=t;return $i(Bi({},r),{afterAllSetup(e){r.afterAllSetup(e);const t=ns.location;if(s&&t){const r=n.matchRoutes(t.pathname,n.options.parseSearch(t.search),{preload:!1,throwOnError:!1}),s=r[r.length-1];Hg(e,{name:s?s.routeId:t.pathname,attributes:Bi({[Ge]:"pageload",[Je]:"auto.pageload.react.tanstack_router",[ze]:s?"route":"url"},Qf(s))})}i&&n.subscribe("onBeforeNavigate",t=>{var r;if(t.toLocation.state===(null==(r=t.fromLocation)?void 0:r.state))return;const s=n.matchRoutes(t.toLocation.pathname,t.toLocation.search,{preload:!1,throwOnError:!1}),i=s[s.length-1],o=ns.location,a=Vg(e,{name:i?i.routeId:o.pathname,attributes:{[Ge]:"navigation",[Je]:"auto.navigation.react.tanstack_router",[ze]:i?"route":"url"}}),l=n.subscribe("onResolved",e=>{if(l(),a){const t=n.matchRoutes(e.toLocation.pathname,e.toLocation.search,{preload:!1,throwOnError:!1}),r=t[t.length-1];r&&(a.updateName(r.routeId),a.setAttribute(ze,"route"),a.setAttributes(Qf(r)))}})})}})},thirdPartyErrorFilterIntegration:qo,unleashIntegration:Pf,updateSpanName:function(e,t){e.updateName(t),e.setAttributes({[ze]:"custom",[Ze]:t})},useProfiler:function(e,t={disabled:!1,hasRenderSpan:!0}){const[n]=ki.useState(()=>{if(null==t||!t.disabled)return Qi({name:`<${e}>`,onlyIfParent:!0,op:Df,attributes:{[Je]:"auto.ui.react.profiler","ui.component_name":e}})});ki.useEffect(()=>(n&&n.end(),()=>{if(n&&t.hasRenderSpan){const t=Pt(n).timestamp,r=_e(),s=Qi({name:`<${e}>`,onlyIfParent:!0,op:Rf,startTime:t,attributes:{[Je]:"auto.ui.react.profiler","ui.component_name":e}});s&&s.end(r)}}),[])},webWorkerIntegration:Of,winjsStackLineParser:Js,withActiveSpan:Xi,withErrorBoundary:function(e,t){const n=e.displayName||e.name||"unknown",r=n=>ki.createElement(Gf,Bi({},t),ki.createElement(e,Bi({},n)));return r.displayName=`errorBoundary(${n})`,Vf(r,e),r},withIsolationScope:function(...e){const t=Ne(o());if(2===e.length){const[n,r]=e;return n?t.withSetIsolationScope(n,r):t.withIsolationScope(r)}return t.withIsolationScope(e[0])},withProfiler:function(e,t){const n=(null==t?void 0:t.name)||e.displayName||e.name||"unknown",r=r=>ki.createElement(zf,$i(Bi({},t),{name:n,updateProps:r}),ki.createElement(e,Bi({},r)));return r.displayName=`profiler(${n})`,Vf(r,e),r},withScope:We,withSentryReactRouterV6Routing:function(e){return Tb(e,"6")},withSentryReactRouterV7Routing:function(e){return Tb(e,"7")},withSentryRouting:function(e){const t=e.displayName||e.name,n=t=>{var n;if(null!=(n=null==t?void 0:t.computedMatch)&&n.isExact){const e=t.computedMatch.path,n=function(){const e=Dt(),t=e&&Rt(e);if(!t)return;const n=Pt(t).op;return"navigation"===n||"pageload"===n?t:void 0}();je().setTransactionName(e),n&&(n.updateName(e),n.setAttribute(ze,"route"))}return ki.createElement(e,Bi({},t))};return n.displayName=`sentryRoute(${t})`,Vf(n,e),n},wrapCreateBrowserRouterV6:function(e){return lb(e,"6")},wrapCreateBrowserRouterV7:function(e){return lb(e,"7")},wrapCreateMemoryRouterV6:function(e){return cb(e,"6")},wrapCreateMemoryRouterV7:function(e){return cb(e,"7")},wrapUseRoutesV6:function(e){return db(e,"6")},wrapUseRoutesV7:function(e){return db(e,"7")},zodErrorsIntegration:zo},Symbol.toStringTag,{value:"Module"}))},63772:function(e,t,n){"use strict";n.d(t,{B:function(){return o},C:function(){return i}});var r=n(90568);const s="apiSupport",i=()=>(0,r.getSaveInstance)(s),o=e=>{(0,r.setInstance)(s,e)}},46940:function(e,t,n){"use strict";n.d(t,{f:function(){return o},u:function(){return i}});var r=n(90568);const s="AppContainers",i=()=>(0,r.getSaveInstance)(s),o=e=>{(0,r.setInstance)(s,e)}},97784:function(e,t,n){"use strict";n.d(t,{M:function(){return i},Z:function(){return o}});var r=n(90568);const s="businessHelpers",i=()=>(0,r.getSaveInstance)(s),o=e=>{(0,r.setInstance)(s,e)}},91797:function(e,t,n){"use strict";n.d(t,{B:function(){return i},M:function(){return o}});var r=n(90568);const s="geoLocation",i=()=>(0,r.getSaveInstance)(s),o=e=>{(0,r.setInstance)(s,e)}},48982:function(e,t,n){"use strict";n.d(t,{d:function(){return i},v:function(){return o}});var r=n(90568);const s="utilsHelpers",i=()=>(0,r.getSaveInstance)(s),o=e=>{(0,r.setInstance)(s,e)}},88927:function(e,t,n){"use strict";n.d(t,{BN:function(){return a.B},BZ:function(){return s.B},CM:function(){return s.C},DQ:function(){return S.DQ},DR:function(){return b.D},Dg:function(){return g.D},Gv:function(){return c.G},Kv:function(){return r.K},MA:function(){return o.M},MF:function(){return h.M},MH:function(){return y.M},MR:function(){return a.M},N$:function(){return y.N},Uz:function(){return f.U},VX:function(){return h.V},Y:function(){return d.Y},Z1:function(){return S.Z1},ZS:function(){return c.Z},Zs:function(){return o.Z},cI:function(){return v.c},cQ:function(){return S.cQ},dU:function(){return l.d},eM:function(){return m.e},eX:function(){return b.e},fk:function(){return w.f},ft:function(){return i.f},kB:function(){return p.k},kf:function(){return p.T},n8:function(){return u.n},pL:function(){return m.p},rB:function(){return v.r},sL:function(){return u.s},sp:function(){return g.s},u:function(){return S.u},u4:function(){return w.u},uL:function(){return i.u},vO:function(){return l.v},wm:function(){return d.w},xR:function(){return f.x},yj:function(){return r.y}});var r=n(38558),s=n(63772),i=n(46940),o=n(97784),a=n(91797),l=n(48982),c=n(44093),u=n(89232),d=n(10214),p=n(5010),h=n(47629),m=n(86629),g=n(51066),f=n(90085),b=n(75199),y=n(24122),v=n(59770),w=n(15012),S=n(73735)},89232:function(e,t,n){"use strict";n.d(t,{n:function(){return o},s:function(){return i}});var r=n(90568);const s="moduleLoader",i=()=>(0,r.getSaveInstance)(s),o=e=>{(0,r.setInstance)(s,e)}},44093:function(e,t,n){"use strict";n.d(t,{G:function(){return o},Z:function(){return i}});var r=n(90568);const s="observerHelper",i=()=>(0,r.getSaveInstance)(s),o=e=>{(0,r.setInstance)(s,e)}},10214:function(e,t,n){"use strict";n.d(t,{Y:function(){return o},w:function(){return i}});var r=n(90568);const s="productCardPopupHelper",i=()=>(0,r.getSaveInstance)(s),o=e=>{(0,r.setInstance)(s,e)}},5010:function(e,t,n){"use strict";n.d(t,{T:function(){return o},k:function(){return i}});var r=n(90568);const s="routeData",i=()=>(0,r.getSaveInstance)(s),o=e=>{(0,r.setInstance)(s,e)}},59770:function(e,t,n){"use strict";n.d(t,{c:function(){return i},r:function(){return o}});var r=n(90568);const s="router",i=()=>(0,r.getSaveInstance)(s),o=e=>{(0,r.setInstance)(s,e)}},47629:function(e,t,n){"use strict";n.d(t,{M:function(){return o},V:function(){return i}});var r=n(90568);const s="routerHelpers",i=()=>(0,r.getSaveInstance)(s),o=e=>{(0,r.setInstance)(s,e)}},86629:function(e,t,n){"use strict";n.d(t,{e:function(){return o},p:function(){return i}});var r=n(90568);const s="routerState",i=()=>(0,r.getSaveInstance)(s),o=e=>{(0,r.setInstance)(s,e)}},51066:function(e,t,n){"use strict";n.d(t,{D:function(){return o},s:function(){return i}});var r=n(90568);const s="seoHelper",i=()=>(0,r.getSaveInstance)(s),o=e=>{(0,r.setInstance)(s,e)}},75199:function(e,t,n){"use strict";n.d(t,{D:function(){return i},e:function(){return o}});var r=n(90568);const s="serviceLoader",i=()=>(0,r.getSaveInstance)(s),o=e=>{(0,r.setInstance)(s,e)}},73735:function(e,t,n){"use strict";n.d(t,{DQ:function(){return a},Z1:function(){return i},cQ:function(){return l},u:function(){return o}});var r=n(90568);const s="spaServices",i=()=>(0,r.getSaveInstance)(s),o=e=>{(0,r.setInstance)(s,e)},a=(e,t)=>{(0,r.getSaveInstance)(s)[e]=t},l=e=>{const t=(0,r.getSaveInstance)(s);if(!t[e])throw new Error(`Can't find service ${e}`);return t[e]}},24122:function(e,t,n){"use strict";n.d(t,{M:function(){return i},N:function(){return o}});var r=n(90568);const s="StorageHelper",i=()=>(0,r.getSaveInstance)(s),o=e=>{(0,r.setInstance)(s,e)}},38558:function(e,t,n){"use strict";n.d(t,{K:function(){return o},y:function(){return i}});var r=n(19417);const s="userCompaniesManager",i=async({preventRefresh:e=!1}={})=>{let t=await(0,r.g)(s);return t.setPreventRefresh(e),t},o=e=>{(0,r.C)(s,e)}},90085:function(e,t,n){"use strict";n.d(t,{U:function(){return o},x:function(){return i}});var r=n(90568);const s="userEnv",i=()=>(0,r.getSaveInstance)(s),o=e=>{(0,r.setInstance)(s,e)}},15012:function(e,t,n){"use strict";n.d(t,{f:function(){return o},u:function(){return i}});var r=n(90568);const s="userHelper",i=()=>(0,r.getSaveInstance)(s),o=e=>{(0,r.setInstance)(s,e)}},37122:function(e){"use strict";e.exports=window.__MF_PROMISE__personalCabinet||=new Promise((e,t)=>{const n=n=>{const r=n?.["personal-cabinet"]||{},s=r?.prod,i="v2.1.0",o=n=>{if(n){const r=document.createElement("script"),s="https://static-basket-01.wbbasket.ru/vol2/personal-cabinet/dist/"+n+"-personalCabinet-remoteEntry.js";r.src=s,r.onload=()=>{console.group("personal-cabinet"),console.info("Version:",n),console.groupEnd();e({get:e=>window.personalCabinet.get(e),init:(...e)=>{try{return window.personalCabinet.init(...e)}catch{console.warn("Remote container personalCabinet already initialized")}}})},r.onerror=()=>{n!==i&&i?(console.warn("personalCabinet Falling back to",i),o(i)):(console.error("Failed to load remote for personal-cabinet"),t(new Error("MF init error")))},document.head.appendChild(r)}else console.warn("personalCabinet Falling back to",i),o(i)};o(s)};window.__MF_VERSIONS_FETCH__||(window.__MF_VERSIONS_FETCH__=fetch("https://static-basket-01.wbbasket.ru/vol0/data/prodversion-front.json",{cache:"no-cache"}).then(e=>e.json())),window.__MF_VERSIONS_FETCH__.then(n).catch(()=>{console.warn("Using fallback due to preload fetch failure"),n(null)})})},56871:function(e){"use strict";e.exports=window.__MF_PROMISE__pharma||=new Promise((e,t)=>{const n=n=>{const r=n?.pharma||{},s=r?.prod,i="v1.0.0",o=n=>{if(n){const r=document.createElement("script"),s="https://static-basket-01.wbbasket.ru/vol2/pharma/dist/"+n+"-pharma-remoteEntry.js";r.src=s,r.onload=()=>{console.group("pharma"),console.info("Version:",n),console.groupEnd();e({get:e=>window.pharma.get(e),init:(...e)=>{try{return window.pharma.init(...e)}catch{console.warn("Remote container pharma already initialized")}}})},r.onerror=()=>{n!==i&&i?(console.warn("pharma Falling back to",i),o(i)):(console.error("Failed to load remote for pharma"),t(new Error("MF init error")))},document.head.appendChild(r)}else console.warn("pharma Falling back to",i),o(i)};o(s)};window.__MF_VERSIONS_FETCH__||(window.__MF_VERSIONS_FETCH__=fetch("https://static-basket-01.wbbasket.ru/vol0/data/prodversion-front.json",{cache:"no-cache"}).then(e=>e.json())),window.__MF_VERSIONS_FETCH__.then(n).catch(()=>{console.warn("Using fallback due to preload fetch failure"),n(null)})})},76546:function(e){"use strict";e.exports=window.__MF_PROMISE__realty||=new Promise((e,t)=>{const n=n=>{const r=n?.realty||{},s=r?.prod,i="v1.0.1",o=n=>{if(n){const r=document.createElement("script"),s="https://static-basket-01.wbbasket.ru/vol2/realty/dist/"+n+"-realty-remoteEntry.js";r.src=s,r.onload=()=>{console.group("realty"),console.info("Version:",n),console.groupEnd();e({get:e=>window.realty.get(e),init:(...e)=>{try{return window.realty.init(...e)}catch{console.warn("Remote container realty already initialized")}}})},r.onerror=()=>{n!==i&&i?(console.warn("realty Falling back to",i),o(i)):(console.error("Failed to load remote for realty"),t(new Error("MF init error")))},document.head.appendChild(r)}else console.warn("realty Falling back to",i),o(i)};o(s)};window.__MF_VERSIONS_FETCH__||(window.__MF_VERSIONS_FETCH__=fetch("https://static-basket-01.wbbasket.ru/vol0/data/prodversion-front.json",{cache:"no-cache"}).then(e=>e.json())),window.__MF_VERSIONS_FETCH__.then(n).catch(()=>{console.warn("Using fallback due to preload fetch failure"),n(null)})})},36650:function(e,t,n){"use strict";n.d(t,{Ay:function(){return te}});var r=Object.defineProperty,s=Object.defineProperties,i=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(e,t,n)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u=(e,t)=>{for(var n in t||(t={}))a.call(t,n)&&c(e,n,t[n]);if(o)for(var n of o(t))l.call(t,n)&&c(e,n,t[n]);return e},d=(e,t)=>s(e,i(t));const p=e=>"string"==typeof e,h=()=>{let e,t;const n=new Promise((n,r)=>{e=n,t=r});return n.resolve=e,n.reject=t,n},m=e=>null==e?"":""+e,g=/###/g,f=e=>e&&e.indexOf("###")>-1?e.replace(g,"."):e,b=e=>!e||p(e),y=(e,t,n)=>{const r=p(t)?t.split("."):t;let s=0;for(;s<r.length-1;){if(b(e))return{};const t=f(r[s]);!e[t]&&n&&(e[t]=new n),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++s}return b(e)?{}:{obj:e,k:f(r[s])}},v=(e,t,n)=>{const{obj:r,k:s}=y(e,t,Object);if(void 0!==r||1===t.length)return void(r[s]=n);let i=t[t.length-1],o=t.slice(0,t.length-1),a=y(e,o,Object);for(;void 0===a.obj&&o.length;)i=`${o[o.length-1]}.${i}`,o=o.slice(0,o.length-1),a=y(e,o,Object),(null==a?void 0:a.obj)&&void 0!==a.obj[`${a.k}.${i}`]&&(a.obj=void 0);a.obj[`${a.k}.${i}`]=n},w=(e,t)=>{const{obj:n,k:r}=y(e,t);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},S=(e,t,n)=>{for(const r in t)"__proto__"!==r&&"constructor"!==r&&(r in e?p(e[r])||e[r]instanceof String||p(t[r])||t[r]instanceof String?n&&(e[r]=t[r]):S(e[r],t[r],n):e[r]=t[r]);return e},_=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var I={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const C=e=>p(e)?e.replace(/[&<>"'\/]/g,e=>I[e]):e;const k=[" ",",","?","!",";"],P=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}(20),E=(e,t,n=".")=>{if(!e)return;if(e[t]){if(!Object.prototype.hasOwnProperty.call(e,t))return;return e[t]}const r=t.split(n);let s=e;for(let e=0;e<r.length;){if(!s||"object"!=typeof s)return;let t,i="";for(let o=e;o<r.length;++o)if(o!==e&&(i+=n),i+=r[o],t=s[i],void 0!==t){if(["string","number","boolean"].indexOf(typeof t)>-1&&o<r.length-1)continue;e+=o-e+1;break}s=t}return s},T=e=>null==e?void 0:e.replace("_","-"),O={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){var n,r;null==(r=null==(n=null==console?void 0:console[e])?void 0:n.apply)||r.call(n,console,t)}};class x{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||O,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,r){return r&&!this.debug?null:(p(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new x(this.logger,u(u({},{prefix:`${this.prefix}:${e}:`}),this.options))}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new x(this.logger,e)}}var M=new x;class A{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(e=>{this.observers[e]||(this.observers[e]=new Map);const n=this.observers[e].get(t)||0;this.observers[e].set(t,n+1)}),this}off(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])}emit(e,...t){if(this.observers[e]){Array.from(this.observers[e].entries()).forEach(([e,n])=>{for(let r=0;r<n;r++)e(...t)})}if(this.observers["*"]){Array.from(this.observers["*"].entries()).forEach(([n,r])=>{for(let s=0;s<r;s++)n.apply(n,[e,...t])})}}}class R extends A{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n,r={}){var s,i;const o=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,a=void 0!==r.ignoreJSONStructure?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;e.indexOf(".")>-1?l=e.split("."):(l=[e,t],n&&(Array.isArray(n)?l.push(...n):p(n)&&o?l.push(...n.split(o)):l.push(n)));const c=w(this.data,l);return!c&&!t&&!n&&e.indexOf(".")>-1&&(e=l[0],t=l[1],n=l.slice(2).join(".")),!c&&a&&p(n)?E(null==(i=null==(s=this.data)?void 0:s[e])?void 0:i[t],n,o):c}addResource(e,t,n,r,s={silent:!1}){const i=void 0!==s.keySeparator?s.keySeparator:this.options.keySeparator;let o=[e,t];n&&(o=o.concat(i?n.split(i):n)),e.indexOf(".")>-1&&(o=e.split("."),r=t,t=o[1]),this.addNamespaces(t),v(this.data,o,r),s.silent||this.emit("added",e,t,n,r)}addResources(e,t,n,r={silent:!1}){for(const r in n)(p(n[r])||Array.isArray(n[r]))&&this.addResource(e,t,r,n[r],{silent:!0});r.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,r,s,i={silent:!1,skipCopy:!1}){let o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),r=n,n=t,t=o[1]),this.addNamespaces(t);let a=w(this.data,o)||{};i.skipCopy||(n=JSON.parse(JSON.stringify(n))),r?S(a,n,s):a=u(u({},a),n),v(this.data,o,a),i.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(e=>t[e]&&Object.keys(t[e]).length>0)}toJSON(){return this.data}}var D={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,s){return e.forEach(e=>{var i,o;t=null!=(o=null==(i=this.processors[e])?void 0:i.process(t,n,r,s))?o:t}),t}};const L=Symbol("i18next/PATH_KEY");function B(e,t){var n;const{[L]:r}=e(function(){const e=[],t=Object.create(null);let n;return t.get=(r,s)=>{var i;return null==(i=null==n?void 0:n.revoke)||i.call(n),s===L?e:(e.push(s),n=Proxy.revocable(r,t),n.proxy)},Proxy.revocable(Object.create(null),t).proxy}());return r.join(null!=(n=null==t?void 0:t.keySeparator)?n:".")}const $={},N=e=>!p(e)&&"boolean"!=typeof e&&"number"!=typeof e;class j extends A{constructor(e,t={}){var n,r;super(),n=e,r=this,["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"].forEach(e=>{n[e]&&(r[e]=n[e])}),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=M.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const n=u({},t);if(null==e)return!1;const r=this.resolve(e,n);return void 0!==(null==r?void 0:r.res)}extractFromKey(e,t){let n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");const r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let s=t.ns||this.options.defaultNS||[];const i=n&&e.indexOf(n)>-1,o=!(this.options.userDefinedKeySeparator||t.keySeparator||this.options.userDefinedNsSeparator||t.nsSeparator||((e,t,n)=>{t=t||"",n=n||"";const r=k.filter(e=>t.indexOf(e)<0&&n.indexOf(e)<0);if(0===r.length)return!0;const s=P.getRegExp(`(${r.map(e=>"?"===e?"\\?":e).join("|")})`);let i=!s.test(e);if(!i){const t=e.indexOf(n);t>0&&!s.test(e.substring(0,t))&&(i=!0)}return i})(e,n,r));if(i&&!o){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:p(s)?[s]:s};const i=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(i[0])>-1)&&(s=i.shift()),e=i.join(r)}return{key:e,namespaces:p(s)?[s]:s}}translate(e,t,n){let r="object"==typeof t?u({},t):t;if("object"!=typeof r&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),"object"==typeof r&&(r=u({},r)),r||(r={}),null==e)return"";"function"==typeof e&&(e=B(e,u(u({},this.options),r))),Array.isArray(e)||(e=[String(e)]);const s=void 0!==r.returnDetails?r.returnDetails:this.options.returnDetails,i=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,{key:o,namespaces:a}=this.extractFromKey(e[e.length-1],r),l=a[a.length-1];let c=void 0!==r.nsSeparator?r.nsSeparator:this.options.nsSeparator;void 0===c&&(c=":");const h=r.lng||this.language,m=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if("cimode"===(null==h?void 0:h.toLowerCase()))return m?s?{res:`${l}${c}${o}`,usedKey:o,exactUsedKey:o,usedLng:h,usedNS:l,usedParams:this.getUsedParamsDetails(r)}:`${l}${c}${o}`:s?{res:o,usedKey:o,exactUsedKey:o,usedLng:h,usedNS:l,usedParams:this.getUsedParamsDetails(r)}:o;const g=this.resolve(e,r);let f=null==g?void 0:g.res;const b=(null==g?void 0:g.usedKey)||o,y=(null==g?void 0:g.exactUsedKey)||o,v=void 0!==r.joinArrays?r.joinArrays:this.options.joinArrays,w=!this.i18nFormat||this.i18nFormat.handleAsObject,S=void 0!==r.count&&!p(r.count),_=j.hasDefaultValue(r),I=S?this.pluralResolver.getSuffix(h,r.count,r):"",C=r.ordinal&&S?this.pluralResolver.getSuffix(h,r.count,{ordinal:!1}):"",k=S&&!r.ordinal&&0===r.count,P=k&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${I}`]||r[`defaultValue${C}`]||r.defaultValue;let E=f;w&&!f&&_&&(E=P);const T=N(E),O=Object.prototype.toString.apply(E);if(!(w&&E&&T&&["[object Number]","[object Function]","[object RegExp]"].indexOf(O)<0)||p(v)&&Array.isArray(E))if(w&&p(v)&&Array.isArray(f))f=f.join(v),f&&(f=this.extendTranslation(f,e,r,n));else{let t=!1,s=!1;!this.isValidLookup(f)&&_&&(t=!0,f=P),this.isValidLookup(f)||(s=!0,f=o);const a=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&s?void 0:f,p=_&&P!==f&&this.options.updateMissing;if(s||t||p){if(this.logger.log(p?"updateKey":"missingKey",h,l,o,p?P:f),i){const e=this.resolve(o,d(u({},r),{keySeparator:!1}));e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const t=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if("fallback"===this.options.saveMissingTo&&t&&t[0])for(let n=0;n<t.length;n++)e.push(t[n]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(r.lng||this.language):e.push(r.lng||this.language);const n=(e,t,n)=>{var s;const i=_&&n!==f?n:a;this.options.missingKeyHandler?this.options.missingKeyHandler(e,l,t,i,p,r):(null==(s=this.backendConnector)?void 0:s.saveMissing)&&this.backendConnector.saveMissing(e,l,t,i,p,r),this.emit("missingKey",e,l,t,f)};this.options.saveMissing&&(this.options.saveMissingPlurals&&S?e.forEach(e=>{const t=this.pluralResolver.getSuffixes(e,r);k&&r[`defaultValue${this.options.pluralSeparator}zero`]&&t.indexOf(`${this.options.pluralSeparator}zero`)<0&&t.push(`${this.options.pluralSeparator}zero`),t.forEach(t=>{n([e],o+t,r[`defaultValue${t}`]||P)})}):n(e,o,P))}f=this.extendTranslation(f,e,r,g,n),s&&f===o&&this.options.appendNamespaceToMissingKey&&(f=`${l}${c}${o}`),(s||t)&&this.options.parseMissingKeyHandler&&(f=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}${c}${o}`:o,t?f:void 0,r))}else{if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(b,E,d(u({},r),{ns:a})):`key '${o} (${this.language})' returned an object instead of string.`;return s?(g.res=e,g.usedParams=this.getUsedParamsDetails(r),g):e}if(i){const e=Array.isArray(E),t=e?[]:{},n=e?y:b;for(const e in E)if(Object.prototype.hasOwnProperty.call(E,e)){const s=`${n}${i}${e}`;t[e]=_&&!f?this.translate(s,u(d(u({},r),{defaultValue:N(P)?P[e]:void 0}),{joinArrays:!1,ns:a})):this.translate(s,u(u({},r),{joinArrays:!1,ns:a})),t[e]===s&&(t[e]=E[e])}f=t}}return s?(g.res=f,g.usedParams=this.getUsedParamsDetails(r),g):f}extendTranslation(e,t,n,r,s){var i,o;if(null==(i=this.i18nFormat)?void 0:i.parse)e=this.i18nFormat.parse(e,u(u({},this.options.interpolation.defaultVariables),n),n.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(u(u({},n),{interpolation:u(u({},this.options.interpolation),n.interpolation)}));const i=p(e)&&(void 0!==(null==(o=null==n?void 0:n.interpolation)?void 0:o.skipOnVariables)?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let a;if(i){const t=e.match(this.interpolator.nestingRegexp);a=t&&t.length}let l=n.replace&&!p(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(l=u(u({},this.options.interpolation.defaultVariables),l)),e=this.interpolator.interpolate(e,l,n.lng||this.language||r.usedLng,n),i){const t=e.match(this.interpolator.nestingRegexp);a<(t&&t.length)&&(n.nest=!1)}!n.lng&&r&&r.res&&(n.lng=this.language||r.usedLng),!1!==n.nest&&(e=this.interpolator.nest(e,(...e)=>(null==s?void 0:s[0])!==e[0]||n.context?this.translate(...e,t):(this.logger.warn(`It seems you are nesting recursively key: ${e[0]} in key: ${t[0]}`),null),n)),n.interpolation&&this.interpolator.reset()}const a=n.postProcess||this.options.postProcess,l=p(a)?[a]:a;return null!=e&&(null==l?void 0:l.length)&&!1!==n.applyPostProcessor&&(e=D.handle(l,e,t,this.options&&this.options.postProcessPassResolved?u({i18nResolved:d(u({},r),{usedParams:this.getUsedParamsDetails(n)})},n):n,this)),e}resolve(e,t={}){let n,r,s,i,o;return p(e)&&(e=[e]),e.forEach(e=>{if(this.isValidLookup(n))return;const a=this.extractFromKey(e,t),l=a.key;r=l;let c=a.namespaces;this.options.fallbackNS&&(c=c.concat(this.options.fallbackNS));const u=void 0!==t.count&&!p(t.count),d=u&&!t.ordinal&&0===t.count,h=void 0!==t.context&&(p(t.context)||"number"==typeof t.context)&&""!==t.context,m=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);c.forEach(e=>{var a,c;this.isValidLookup(n)||(o=e,$[`${m[0]}-${e}`]||!(null==(a=this.utils)?void 0:a.hasLoadedNamespace)||(null==(c=this.utils)?void 0:c.hasLoadedNamespace(o))||($[`${m[0]}-${e}`]=!0,this.logger.warn(`key "${r}" for languages "${m.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),m.forEach(r=>{var o;if(this.isValidLookup(n))return;i=r;const a=[l];if(null==(o=this.i18nFormat)?void 0:o.addLookupKeys)this.i18nFormat.addLookupKeys(a,l,r,e,t);else{let e;u&&(e=this.pluralResolver.getSuffix(r,t.count,t));const n=`${this.options.pluralSeparator}zero`,s=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(u&&(t.ordinal&&0===e.indexOf(s)&&a.push(l+e.replace(s,this.options.pluralSeparator)),a.push(l+e),d&&a.push(l+n)),h){const r=`${l}${this.options.contextSeparator||"_"}${t.context}`;a.push(r),u&&(t.ordinal&&0===e.indexOf(s)&&a.push(r+e.replace(s,this.options.pluralSeparator)),a.push(r+e),d&&a.push(r+n))}}let c;for(;c=a.pop();)this.isValidLookup(n)||(s=c,n=this.getResource(r,e,c,t))}))})}),{res:n,usedKey:r,exactUsedKey:s,usedLng:i,usedNS:o}}isValidLookup(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}getResource(e,t,n,r={}){var s;return(null==(s=this.i18nFormat)?void 0:s.getResource)?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!p(e.replace);let r=n?e.replace:e;if(n&&void 0!==e.count&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r=u(u({},this.options.interpolation.defaultVariables),r)),!n){r=u({},r);for(const e of t)delete r[e]}return r}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,12)&&void 0!==e[n])return!0;return!1}}class F{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=M.create("languageUtils")}getScriptPartFromCode(e){if(!(e=T(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=T(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(p(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch(e){}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(e=>{if(t)return;const n=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(n)||(t=n)}),!t&&this.options.supportedLngs&&e.forEach(e=>{if(t)return;const n=this.getScriptPartFromCode(e);if(this.isSupportedCode(n))return t=n;const r=this.getLanguagePartFromCode(e);if(this.isSupportedCode(r))return t=r;t=this.options.supportedLngs.find(e=>e===r?e:e.indexOf("-")<0&&r.indexOf("-")<0?void 0:e.indexOf("-")>0&&r.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===r||0===e.indexOf(r)&&r.length>1?e:void 0)}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),p(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes((!1===t?[]:t)||this.options.fallbackLng||[],e),r=[],s=e=>{e&&(this.isSupportedCode(e)?r.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`))};return p(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&s(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&s(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&s(this.getLanguagePartFromCode(e))):p(e)&&s(this.formatLanguageCode(e)),n.forEach(e=>{r.indexOf(e)<0&&s(this.formatLanguageCode(e))}),r}}const U={zero:0,one:1,two:2,few:3,many:4,other:5},W={select:e=>1===e?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class H{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=M.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const n=T("dev"===e?"en":e),r=t.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:n,type:r});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let i;try{i=new Intl.PluralRules(n,{type:r})}catch(n){if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),W;if(!e.match(/-|_/))return W;const r=this.languageUtils.getLanguagePartFromCode(e);i=this.getRule(r,t)}return this.pluralRulesCache[s]=i,i}needsPlural(e,t={}){let n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),(null==n?void 0:n.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t,n={}){return this.getSuffixes(e,n).map(e=>`${t}${e}`)}getSuffixes(e,t={}){let n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),n?n.resolvedOptions().pluralCategories.sort((e,t)=>U[e]-U[t]).map(e=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${e}`):[]}getSuffix(e,t,n={}){const r=this.getRule(e,n);return r?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${r.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,n))}}const V=(e,t,n,r=".",s=!0)=>{let i=((e,t,n)=>{const r=w(e,n);return void 0!==r?r:w(t,n)})(e,t,n);return!i&&s&&p(n)&&(i=E(e,n,r),void 0===i&&(i=E(t,n,r))),i},z=e=>e.replace(/\$/g,"$$$$");class q{constructor(e={}){var t;this.logger=M.create("interpolator"),this.options=e,this.format=(null==(t=null==e?void 0:e.interpolation)?void 0:t.format)||(e=>e),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:r,prefix:s,prefixEscaped:i,suffix:o,suffixEscaped:a,formatSeparator:l,unescapeSuffix:c,unescapePrefix:u,nestingPrefix:d,nestingPrefixEscaped:p,nestingSuffix:h,nestingSuffixEscaped:m,nestingOptionsSeparator:g,maxReplaces:f,alwaysFormat:b}=e.interpolation;this.escape=void 0!==t?t:C,this.escapeValue=void 0===n||n,this.useRawValueToEscape=void 0!==r&&r,this.prefix=s?_(s):i||"{{",this.suffix=o?_(o):a||"}}",this.formatSeparator=l||",",this.unescapePrefix=c?"":u||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=d?_(d):p||_("$t("),this.nestingSuffix=h?_(h):m||_(")"),this.nestingOptionsSeparator=g||",",this.maxReplaces=f||1e3,this.alwaysFormat=void 0!==b&&b,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>(null==e?void 0:e.source)===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,n,r){var s;let i,o,a;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=e=>{if(e.indexOf(this.formatSeparator)<0){const s=V(t,l,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(s,void 0,n,d(u(u({},r),t),{interpolationkey:e})):s}const s=e.split(this.formatSeparator),i=s.shift().trim(),o=s.join(this.formatSeparator).trim();return this.format(V(t,l,i,this.options.keySeparator,this.options.ignoreJSONStructure),o,n,d(u(u({},r),t),{interpolationkey:i}))};this.resetRegExp();const h=(null==r?void 0:r.missingInterpolationHandler)||this.options.missingInterpolationHandler,g=void 0!==(null==(s=null==r?void 0:r.interpolation)?void 0:s.skipOnVariables)?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>z(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?z(this.escape(e)):z(e)}].forEach(t=>{for(a=0;i=t.regex.exec(e);){const n=i[1].trim();if(o=c(n),void 0===o)if("function"==typeof h){const t=h(e,i,r);o=p(t)?t:""}else if(r&&Object.prototype.hasOwnProperty.call(r,n))o="";else{if(g){o=i[0];continue}this.logger.warn(`missed to pass in variable ${n} for interpolating ${e}`),o=""}else p(o)||this.useRawValueToEscape||(o=m(o));const s=t.safeValue(o);if(e=e.replace(i[0],s),g?(t.regex.lastIndex+=o.length,t.regex.lastIndex-=i[0].length):t.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,t,n={}){let r,s,i;const o=(e,t)=>{var n;const r=this.nestingOptionsSeparator;if(e.indexOf(r)<0)return e;const s=e.split(new RegExp(`${r}[ ]*{`));let o=`{${s[1]}`;e=s[0],o=this.interpolate(o,i);const a=o.match(/'/g),l=o.match(/"/g);((null!=(n=null==a?void 0:a.length)?n:0)%2==0&&!l||l.length%2!=0)&&(o=o.replace(/'/g,'"'));try{i=JSON.parse(o),t&&(i=u(u({},t),i))}catch(t){return this.logger.warn(`failed parsing options string in nesting for key ${e}`,t),`${e}${r}${o}`}return i.defaultValue&&i.defaultValue.indexOf(this.prefix)>-1&&delete i.defaultValue,e};for(;r=this.nestingRegexp.exec(e);){let a=[];i=u({},n),i=i.replace&&!p(i.replace)?i.replace:i,i.applyPostProcessor=!1,delete i.defaultValue;const l=/{.*}/.test(r[1])?r[1].lastIndexOf("}")+1:r[1].indexOf(this.formatSeparator);if(-1!==l&&(a=r[1].slice(l).split(this.formatSeparator).map(e=>e.trim()).filter(Boolean),r[1]=r[1].slice(0,l)),s=t(o.call(this,r[1].trim(),i),i),s&&r[0]===e&&!p(s))return s;p(s)||(s=m(s)),s||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${e}`),s=""),a.length&&(s=a.reduce((e,t)=>this.format(e,t,n.lng,d(u({},n),{interpolationkey:r[1].trim()})),s.trim())),e=e.replace(r[0],s),this.regexp.lastIndex=0}return e}}const K=e=>{const t={};return(n,r,s)=>{let i=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(i=d(u({},i),{[s.interpolationkey]:void 0}));const o=r+JSON.stringify(i);let a=t[o];return a||(a=e(T(r),s),t[o]=a),a(n)}},G=e=>(t,n,r)=>e(T(n),r)(t);class J{constructor(e={}){this.logger=M.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const n=t.cacheInBuiltFormats?K:G;this.formats={number:n((e,t)=>{const n=new Intl.NumberFormat(e,u({},t));return e=>n.format(e)}),currency:n((e,t)=>{const n=new Intl.NumberFormat(e,d(u({},t),{style:"currency"}));return e=>n.format(e)}),datetime:n((e,t)=>{const n=new Intl.DateTimeFormat(e,u({},t));return e=>n.format(e)}),relativetime:n((e,t)=>{const n=new Intl.RelativeTimeFormat(e,u({},t));return e=>n.format(e,t.range||"day")}),list:n((e,t)=>{const n=new Intl.ListFormat(e,u({},t));return e=>n.format(e)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=K(t)}format(e,t,n,r={}){const s=t.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(e=>e.indexOf(")")>-1)){const e=s.findIndex(e=>e.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,e)].join(this.formatSeparator)}return s.reduce((e,t)=>{var s;const{formatName:i,formatOptions:o}=(e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const s=r[1].substring(0,r[1].length-1);"currency"===t&&s.indexOf(":")<0?n.currency||(n.currency=s.trim()):"relativetime"===t&&s.indexOf(":")<0?n.range||(n.range=s.trim()):s.split(";").forEach(e=>{if(e){const[t,...r]=e.split(":"),s=r.join(":").trim().replace(/^'+|'+$/g,""),i=t.trim();n[i]||(n[i]=s),"false"===s&&(n[i]=!1),"true"===s&&(n[i]=!0),isNaN(s)||(n[i]=parseInt(s,10))}})}return{formatName:t,formatOptions:n}})(t);if(this.formats[i]){let t=e;try{const a=(null==(s=null==r?void 0:r.formatParams)?void 0:s[r.interpolationkey])||{},l=a.locale||a.lng||r.locale||r.lng||n;t=this.formats[i](e,l,u(u(u({},o),r),a))}catch(e){this.logger.warn(e)}return t}return this.logger.warn(`there was no format function for ${i}`),e},e)}}class Y extends A{constructor(e,t,n,r={}){var s,i;super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=r,this.logger=M.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],null==(i=null==(s=this.backend)?void 0:s.init)||i.call(s,n,r.backend,r)}queueLoad(e,t,n,r){const s={},i={},o={},a={};return e.forEach(e=>{let r=!0;t.forEach(t=>{const o=`${e}|${t}`;!n.reload&&this.store.hasResourceBundle(e,t)?this.state[o]=2:this.state[o]<0||(1===this.state[o]?void 0===i[o]&&(i[o]=!0):(this.state[o]=1,r=!1,void 0===i[o]&&(i[o]=!0),void 0===s[o]&&(s[o]=!0),void 0===a[t]&&(a[t]=!0)))}),r||(o[e]=!0)}),(Object.keys(s).length||Object.keys(i).length)&&this.queue.push({pending:i,pendingCount:Object.keys(i).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(s),pending:Object.keys(i),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(a)}}loaded(e,t,n){const r=e.split("|"),s=r[0],i=r[1];t&&this.emit("failedLoading",s,i,t),!t&&n&&this.store.addResourceBundle(s,i,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const o={};this.queue.forEach(n=>{((e,t,n)=>{const{obj:r,k:s}=y(e,t,Object);r[s]=r[s]||[],r[s].push(n)})(n.loaded,[s],i),((e,t)=>{void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)})(n,e),t&&n.errors.push(t),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach(e=>{o[e]||(o[e]={});const t=n.loaded[e];t.length&&t.forEach(t=>{void 0===o[e][t]&&(o[e][t]=!0)})}),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(e=>!e.done)}read(e,t,n,r=0,s=this.retryTimeout,i){if(!e.length)return i(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:n,tried:r,wait:s,callback:i});this.readingCalls++;const o=(o,a)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}o&&a&&r<this.maxRetries?setTimeout(()=>{this.read.call(this,e,t,n,r+1,2*s,i)},s):i(o,a)},a=this.backend[n].bind(this.backend);if(2!==a.length)return a(e,t,o);try{const n=a(e,t);n&&"function"==typeof n.then?n.then(e=>o(null,e)).catch(o):o(null,n)}catch(e){o(e)}}prepareLoading(e,t,n={},r){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();p(e)&&(e=this.languageUtils.toResolveHierarchy(e)),p(t)&&(t=[t]);const s=this.queueLoad(e,t,n,r);if(!s.toLoad.length)return s.pending.length||r(),null;s.toLoad.forEach(e=>{this.loadOne(e)})}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e,t=""){const n=e.split("|"),r=n[0],s=n[1];this.read(r,s,"read",void 0,void 0,(n,i)=>{n&&this.logger.warn(`${t}loading namespace ${s} for language ${r} failed`,n),!n&&i&&this.logger.log(`${t}loaded namespace ${s} for language ${r}`,i),this.loaded(e,n,i)})}saveMissing(e,t,n,r,s,i={},o=()=>{}){var a,l,c,p,h;if(!(null==(l=null==(a=this.services)?void 0:a.utils)?void 0:l.hasLoadedNamespace)||(null==(p=null==(c=this.services)?void 0:c.utils)?void 0:p.hasLoadedNamespace(t))){if(null!=n&&""!==n){if(null==(h=this.backend)?void 0:h.create){const a=d(u({},i),{isUpdate:s}),l=this.backend.create.bind(this.backend);if(l.length<6)try{let s;s=5===l.length?l(e,t,n,r,a):l(e,t,n,r),s&&"function"==typeof s.then?s.then(e=>o(null,e)).catch(o):o(null,s)}catch(e){o(e)}else l(e,t,n,r,o,a)}e&&e[0]&&this.store.addResource(e[0],t,n,r)}}else this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")}}const Q=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if("object"==typeof e[1]&&(t=e[1]),p(e[1])&&(t.defaultValue=e[1]),p(e[2])&&(t.tDescription=e[2]),"object"==typeof e[2]||"object"==typeof e[3]){const n=e[3]||e[2];Object.keys(n).forEach(e=>{t[e]=n[e]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),X=e=>{var t,n;return p(e.ns)&&(e.ns=[e.ns]),p(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),p(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),(null==(n=null==(t=e.supportedLngs)?void 0:t.indexOf)?void 0:n.call(t,"cimode"))<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),"boolean"==typeof e.initImmediate&&(e.initAsync=e.initImmediate),e},Z=()=>{};class ee extends A{constructor(e={},t){var n;if(super(),this.options=X(e),this.services={},this.logger=M,this.modules={external:[]},n=this,Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(e=>{"function"==typeof n[e]&&(n[e]=n[e].bind(n))}),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,"function"==typeof e&&(t=e,e={}),null==e.defaultNS&&e.ns&&(p(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const n=Q();this.options=u(u(u({},n),this.options),X(e)),this.options.interpolation=u(u({},n.interpolation),this.options.interpolation),void 0!==e.keySeparator&&(this.options.userDefinedKeySeparator=e.keySeparator),void 0!==e.nsSeparator&&(this.options.userDefinedNsSeparator=e.nsSeparator);const r=e=>e?"function"==typeof e?new e:e:null;if(!this.options.isClone){let e;this.modules.logger?M.init(r(this.modules.logger),this.options):M.init(null,this.options),e=this.modules.formatter?this.modules.formatter:J;const t=new F(this.options);this.store=new R(this.options.resources,this.options);const s=this.services;s.logger=M,s.resourceStore=this.store,s.languageUtils=t,s.pluralResolver=new H(t,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix});this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),!e||this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format||(s.formatter=r(e),s.formatter.init&&s.formatter.init(s,this.options),this.options.interpolation.format=s.formatter.format.bind(s.formatter)),s.interpolator=new q(this.options),s.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},s.backendConnector=new Y(r(this.modules.backend),s.resourceStore,s,this.options),s.backendConnector.on("*",(e,...t)=>{this.emit(e,...t)}),this.modules.languageDetector&&(s.languageDetector=r(this.modules.languageDetector),s.languageDetector.init&&s.languageDetector.init(s,this.options.detection,this.options)),this.modules.i18nFormat&&(s.i18nFormat=r(this.modules.i18nFormat),s.i18nFormat.init&&s.i18nFormat.init(this)),this.translator=new j(this.services,this.options),this.translator.on("*",(e,...t)=>{this.emit(e,...t)}),this.modules.external.forEach(e=>{e.init&&e.init(this)})}if(this.format=this.options.interpolation.format,t||(t=Z),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(e=>{this[e]=(...t)=>this.store[e](...t)});["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(e=>{this[e]=(...t)=>(this.store[e](...t),this)});const s=h(),i=()=>{const e=(e,n)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),s.resolve(n),t(e,n)};if(this.languages&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initAsync?i():setTimeout(i,0),s}loadResources(e,t=Z){var n,r;let s=t;const i=p(e)?e:this.language;if("function"==typeof e&&(s=e),!this.options.resources||this.options.partialBundledLanguages){if("cimode"===(null==i?void 0:i.toLowerCase())&&(!this.options.preload||0===this.options.preload.length))return s();const e=[],t=t=>{if(!t)return;if("cimode"===t)return;this.services.languageUtils.toResolveHierarchy(t).forEach(t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)})};if(i)t(i);else{this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(e=>t(e))}null==(r=null==(n=this.options.preload)?void 0:n.forEach)||r.call(n,e=>t(e)),this.services.backendConnector.load(e,this.options.ns,e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),s(e)})}else s(null)}reloadResources(e,t,n){const r=h();return"function"==typeof e&&(n=e,e=void 0),"function"==typeof t&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=Z),this.services.backendConnector.reload(e,t,e=>{r.resolve(),n(e)}),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&D.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1)){for(let e=0;e<this.languages.length;e++){const t=this.languages[e];if(!(["cimode","dev"].indexOf(t)>-1)&&this.store.hasLanguageSomeTranslations(t)){this.resolvedLanguage=t;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const n=h();this.emit("languageChanging",e);const r=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},s=(s,i)=>{i?this.isLanguageChangingTo===e&&(r(i),this.translator.changeLanguage(i),this.isLanguageChangingTo=void 0,this.emit("languageChanged",i),this.logger.log("languageChanged",i)):this.isLanguageChangingTo=void 0,n.resolve((...e)=>this.t(...e)),t&&t(s,(...e)=>this.t(...e))},i=t=>{var n,i;e||t||!this.services.languageDetector||(t=[]);const o=p(t)?t:t&&t[0],a=this.store.hasLanguageSomeTranslations(o)?o:this.services.languageUtils.getBestMatchFromCodes(p(t)?[t]:t);a&&(this.language||r(a),this.translator.language||this.translator.changeLanguage(a),null==(i=null==(n=this.services.languageDetector)?void 0:n.cacheUserLanguage)||i.call(n,a)),this.loadResources(a,e=>{s(e,a)})};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(i):this.services.languageDetector.detect(i):i(e):i(this.services.languageDetector.detect()),n}getFixedT(e,t,n){const r=(e,t,...s)=>{let i;i="object"!=typeof t?this.options.overloadTranslationOptionHandler([e,t].concat(s)):u({},t),i.lng=i.lng||r.lng,i.lngs=i.lngs||r.lngs,i.ns=i.ns||r.ns,""!==i.keyPrefix&&(i.keyPrefix=i.keyPrefix||n||r.keyPrefix);const o=this.options.keySeparator||".";let a;return i.keyPrefix&&Array.isArray(e)?a=e.map(e=>("function"==typeof e&&(e=B(e,u(u({},this.options),t))),`${i.keyPrefix}${o}${e}`)):("function"==typeof e&&(e=B(e,u(u({},this.options),t))),a=i.keyPrefix?`${i.keyPrefix}${o}${e}`:e),this.t(a,i)};return p(e)?r.lng=e:r.lngs=e,r.ns=t,r.keyPrefix=n,r}t(...e){var t;return null==(t=this.translator)?void 0:t.translate(...e)}exists(...e){var t;return null==(t=this.translator)?void 0:t.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],r=!!this.options&&this.options.fallbackLng,s=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;const i=(e,t)=>{const n=this.services.backendConnector.state[`${e}|${t}`];return-1===n||0===n||2===n};if(t.precheck){const e=t.precheck(this,i);if(void 0!==e)return e}return!!this.hasResourceBundle(n,e)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!i(n,e)||r&&!i(s,e)))}loadNamespaces(e,t){const n=h();return this.options.ns?(p(e)&&(e=[e]),e.forEach(e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}),this.loadResources(e=>{n.resolve(),t&&t(e)}),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=h();p(e)&&(e=[e]);const r=this.options.preload||[],s=e.filter(e=>r.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e));return s.length?(this.options.preload=r.concat(s),this.loadResources(e=>{n.resolve(),t&&t(e)}),n):(t&&t(),Promise.resolve())}dir(e){var t,n;if(e||(e=this.resolvedLanguage||((null==(t=this.languages)?void 0:t.length)>0?this.languages[0]:this.language)),!e)return"rtl";try{const t=new Intl.Locale(e);if(t&&t.getTextInfo){const e=t.getTextInfo();if(e&&e.direction)return e.direction}}catch(e){}const r=(null==(n=this.services)?void 0:n.languageUtils)||new F(Q());return e.toLowerCase().indexOf("-latn")>1?"ltr":["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){return new ee(e,t)}cloneInstance(e={},t=Z){const n=e.forkResourceStore;n&&delete e.forkResourceStore;const r=u(u(u({},this.options),e),{isClone:!0}),s=new ee(r);void 0===e.debug&&void 0===e.prefix||(s.logger=s.logger.clone(e));if(["store","services","language"].forEach(e=>{s[e]=this[e]}),s.services=u({},this.services),s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},n){const e=Object.keys(this.store.data).reduce((e,t)=>(e[t]=u({},this.store.data[t]),e[t]=Object.keys(e[t]).reduce((n,r)=>(n[r]=u({},e[t][r]),n),e[t]),e),{});s.store=new R(e,r),s.services.resourceStore=s.store}return s.translator=new j(s.services,r),s.translator.on("*",(e,...t)=>{s.emit(e,...t)}),s.init(r,t),s.translator.options=r,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const te=ee.createInstance();te.createInstance=ee.createInstance;te.createInstance,te.dir,te.init,te.loadResources,te.reloadResources,te.use,te.changeLanguage,te.getFixedT,te.t,te.exists,te.setDefaultNamespace,te.hasLoadedNamespace,te.loadNamespaces,te.loadLanguages},51799:function(e,t,n){"use strict";n.d(t,{C:function(){return l},a:function(){return a}});const r=()=>window||globalThis||{},s=e=>{const t=`instancer_${e}`;return Symbol.for(t)},i=e=>{const t=(e=>{const t=s(e);return r()[t]||null})(e);if(!t)throw new Error(`Can't get ${e} instance`);return t},o="analitic",a=()=>i(o),l=e=>{((e,t)=>{const n=s(e);r()[n]=t})(o,e)}},74929:function(e,t,n){"use strict";n.d(t,{B:function(){return l},c:function(){return a}});const r=()=>window||globalThis||{},s=e=>{const t=`instancer_${e}`;return Symbol.for(t)},i=e=>{const t=(e=>{const t=s(e);return r()[t]||null})(e);if(!t)throw new Error(`Can't get ${e} instance`);return t},o="authService",a=()=>i(o),l=e=>{((e,t)=>{const n=s(e);r()[n]=t})(o,e)}},82516:function(e,t,n){"use strict";n.d(t,{Fu:function(){return i},_q:function(){return s},iA:function(){return r}});const r={FBS:BigInt(1),DBS:BigInt(2),WBGO:BigInt(4),WH:BigInt(8),LM:BigInt(16),DBC:BigInt(32),EDBS:BigInt(64),WBE:BigInt(128),WHE:BigInt(256),CC:BigInt(512),WBD:BigInt(1024),WCE:BigInt(2048),C2C:BigInt(4096),DBSP:BigInt(8192),isCargoDelivery:BigInt("4294967296"),ShouldApplyDuty:BigInt("8589934592"),ShouldForceLogistics:BigInt("17179869184"),DBS_PVZ:BigInt("34359738368"),isLogisticsInPrice:BigInt("68719476736"),isSuperExpressDelivery:BigInt("140737488355328"),isSpecialDelivery:BigInt("281474976710656")},s={isBestPrice:BigInt("1"),isNew:BigInt(2),isSupplierWb:BigInt(4),isOriginal:BigInt(8),hasVideo:BigInt(16),isDiscounted:BigInt(32),isAdvert:BigInt(64),disablePostamatAndKioskDelivery:BigInt(128),isKGT:BigInt(256),isSKGT:BigInt(512),photoTestGroup0:BigInt(1024),photoTestGroup1:BigInt(2048),autoPlayPC:BigInt(4096),isB2B:BigInt(8192),isB2B_NDS_refund:BigInt(16384),disablePostDelivery:BigInt(32768),disableSmartPooDelivery:BigInt(65536),autoPlayCatalog:BigInt(1<<17),isAdult:BigInt(1<<22),isC2C:BigInt(1<<23),isKGT2:BigInt(1<<24),disablePooDelivery:BigInt(1<<25),shouldCheckIMEI:BigInt(1<<26),isCustomerChoice:BigInt(1<<27),isWholesale:BigInt(1<<28),isPreorderFirstBit:BigInt("1")<<BigInt("29"),isPreorderSecondBit:BigInt("1")<<BigInt("30"),hidePhoto:BigInt("1")<<BigInt("53")},i={isPremium:BigInt("1"),disableSimilar:BigInt(2),unlimitedRichContent:BigInt(4),enablePremiumBackground:BigInt(8),enableSellerRecommendations:BigInt(16),enableChatSellerClient:BigInt(32)}},65644:function(e,t,n){"use strict";n.d(t,{BD:function(){return p},Fn:function(){return m},Q2:function(){return c},dt:function(){return d},jZ:function(){return a},lD:function(){return h}});const r={ru:["RUB","BYN","KZT","AMD","KGS","UZS","TJS"],by:["RUB","BYN","KZT","AMD","KGS","UZS","TJS"],kz:["RUB","BYN","KZT","AMD","KGS","UZS","TJS"],kg:["RUB","BYN","KZT","AMD","KGS","UZS"],am:["RUB","BYN","KZT","AMD","KGS","UZS","TJS"],uz:["RUB","BYN","KZT","AMD","KGS","UZS","TJS"],tj:["RUB","BYN","KZT","AMD","UZS","TJS"],tm:[],il:[],ge:["GEL"],global:["RUB","BYN","KZT","AMD","KGS","UZS","TJS","USD"]},s={RUB:{locale:"ru",sign:"₽",code:"643"},BYN:{locale:"by",sign:"р.",code:"933"},KZT:{locale:"kz",sign:"₸",code:"398"},AMD:{locale:"am",sign:"драм",code:"051"},KGS:{locale:"kg",sign:"сом",code:"417"},UZS:{locale:"uz",signRu:"сум",sign:"soʻm",code:"860"},TJS:{locale:"tj",sign:"с.",code:"972"},GEL:{locale:"ge",sign:"₾",code:"981"},USD:{locale:"us",sign:"$",code:"840"}},i=s;let o={unclaimedPrice:{},currencyCodeByLetters:"0",currentLocale:"ru"};const a=(e,t)=>{o=e.settings,o.unclaimedPrice=t,"ru"===e.currentLanguage&&Object.entries(s).forEach(([e,t])=>{i[e]=t,i[e].signRu&&(i[e].sign=i[e].signRu)})},l={RUB:100,BYN:3.5,AMD:430,KZT:540,KGS:93,UZS:13800,GEL:3,TJS:12,TMT:3.8,AZN:1.9,USD:1},c={info:s,getIsoBySign:e=>Object.entries(i).reduce((e,[t,n])=>(e[n.sign]=t,e),{})[e]||o.currencyCodeByLetters,getDefaultForLocale:e=>{let t;for(const n in i)i[n].locale===e&&(t=n);return null!=t?t:"RUB"},getCurrencyByCode:e=>Object.entries(i).reduce((e,[t,n])=>(e[n.code]=t,e),{})[e],localeWithCoins:["BYN","TJS","GEL","USD","byn","tjs","gel","usd"],isCryptoReplenishForCurrency:e=>["BYN"].includes(e)},u=()=>r[o.currentLocale],d=()=>u().reduce((e,t)=>(e[t]=c.info[t],e),{}),p=e=>{var t;const n=e.toUpperCase();return null==(t=c.info[n]||c.info[o.currencyCodeByLetters])?void 0:t.code},h=e=>{var t;return null==(t=c.info[e]||c.info[o.currencyCodeByLetters])?void 0:t.sign},m=e=>{var t;const n=null==(t=o.unclaimedPrice)?void 0:t[e];return(e=>!isNaN(parseFloat(String(e)))&&isFinite(Number(e)))(n)&&n>0?n:l[e]}},59168:function(e,t,n){"use strict";n.d(t,{J:function(){return c}});var r=Object.defineProperty,s=(e,t,n)=>((e,t,n)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);const i=()=>window||globalThis||{},o=e=>{const t=`instancer_${e}`;return Symbol.for(t)};class a{constructor(){s(this,"eventsDictionary"),this.eventsDictionary={}}addEventListener(e,t,{single:n}={}){const r=this._validateInput(e,t);if(!r.valid)throw r.error;null==this.eventsDictionary[e]&&(this.eventsDictionary[e]=[]);const s=this.eventsDictionary[e];(!n||!s.includes(t))&&s.push(t)}removeEventListener(e,t){var n;const r=this._validateInput(e,t);if(!r.valid)throw r.error;const s=this.eventsDictionary[e];this.eventsDictionary[e]=null!=(n=null==s?void 0:s.filter(e=>e!==t))?n:[]}dispatchEvent(e){if(!(e instanceof Event))throw new TypeError("DispatchEvent can be called only with Event instance");if(""==e.type)throw new TypeError("Event doesnt have sufficient type");const t=this.eventsDictionary[e.type];null==t||t.forEach(t=>{e.isPropagationStopped||queueMicrotask(()=>{t(e)})})}_validateInput(e,t){return"string"!=typeof e||""==e?{valid:!1,error:new TypeError("Event type must be a valid string value")}:t instanceof Function?{valid:!0}:{valid:!1,error:new TypeError("Callback must be a function")}}}const l="eventBus",c=()=>{let e=(e=>{const t=o(e);return i()[t]||null})(l);return e||(e=new a,u(e)),e},u=e=>{((e,t)=>{const n=o(e);i()[n]=t})(l,e)}},33863:function(e,t,n){"use strict";n.d(t,{M:function(){return o},z:function(){return i}});var r=n(43512);const s="adultHelper",i=()=>(0,r.a)(s),o=e=>{(0,r.b)(s,e)}},86291:function(e,t,n){"use strict";n.d(t,{V:function(){return l}});var r=n(43512),s=Object.defineProperty,i=(e,t,n)=>((e,t,n)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class o{constructor(){i(this,"volHostV2Cdn"),i(this,"volFeedbackPhotoHostCdn"),i(this,"volFeedbackPhotoUuidHostCdn"),i(this,"volFeedbackVideoHostCdn"),i(this,"volVideoHostCdn"),i(this,"volContentHostCdn"),i(this,"volStaticHostCdn")}setImgFunc(e,t){if("function"==typeof t)switch(e){case"mediabasket_route_map":this.volHostV2Cdn=t;break;case"feedback_route_map":this.volFeedbackPhotoHostCdn=t;break;case"content_uuid_route_map":this.volContentHostCdn=t;break;case"videonme_route_map":this.volVideoHostCdn=t;break;case"staticbasket_route_map":this.volStaticHostCdn=t;break;case"videofeedback_uuid_route_map":this.volFeedbackVideoHostCdn=t;break;case"feedback_uuid_route_map":this.volFeedbackPhotoUuidHostCdn=t}}volStaticHost(e,t=!1){if(this.volStaticHostCdn){const n=this.volStaticHostCdn(e,t);if(n)return n}let n;const r=e;switch(!0){case r>=0&&r<=4:n="01";break;case r>=20&&r<=35:n="02";break;case r>=40&&r<=54:n="03";break;case r>=70&&r<=113:n="04";break;case r>=114&&r<=125:n="05";break;case r>=126&&r<=137:n="06";break;case r>=138&&r<=149:n="07";break;default:n="08"}return`static-basket-${n}.wbbasket.ru/vol${r}`}volHostV2(e,t=!1){if(this.volHostV2Cdn){const n=this.volHostV2Cdn(e,t);if(n)return n}let n;const r=~~(e/1e5);switch(!0){case r>=0&&r<=143:n="01";break;case r<=287:n="02";break;case r<=431:n="03";break;case r<=719:n="04";break;case r<=1007:n="05";break;case r<=1061:n="06";break;case r<=1115:n="07";break;case r<=1169:n="08";break;case r<=1313:n="09";break;case r<=1601:n="10";break;case r<=1655:n="11";break;case r<=1919:n="12";break;case r<=2045:n="13";break;case r<=2189:n="14";break;case r<=2405:n="15";break;case r<=2621:n="16";break;case r<=2837:n="17";break;case r<=3053:n="18";break;case r<=3269:n="19";break;case r<=3485:n="20";break;case r<=3701:n="21";break;case r<=3917:n="22";break;case r<=4133:n="23";break;case r<=4349:n="24";break;case r<=4565:n="25";break;case r<=4877:n="26";break;case r<=5189:n="27";break;case r<=5501:n="28";break;case r<=5813:n="29";break;case r<=6125:n="30";break;case r<=6437:n="31";break;default:n="32"}return`basket-${n}.wbbasket.ru/vol${r}`}volFeedbackPhotoHost(e,t=!1){if(this.volFeedbackPhotoHostCdn){const n=this.volFeedbackPhotoHostCdn(e,t);if(n)return n}let n;const r=~~(e/1e5);switch(!0){case r>=0&&r<=431:n="01";break;case r<=863:n="02";break;case r<=1199:n="03";break;case r<=1535:n="04";break;case r<=1919:n="05";break;case r<=2303:n="06";break;case r<=2687:n="07";break;case r<=3071:n="08";break;case r<=3455:n="09";break;case r<=3839:n="10";break;default:n="11"}return`feedback${n}.wbbasket.ru/vol${r}`}volFeedbackPhotoUuidHost(e,t=!1){if(this.volFeedbackPhotoUuidHostCdn){const n=this.volFeedbackPhotoUuidHostCdn(e,t);if(n)return n}const[n,r]=null==e?void 0:e.split("/");return`feedback-${("00"+n).slice(-2)}.wbbasket.ru/${r}`}volFeedbackVideoHost(e,t=!1){if(this.volFeedbackVideoHostCdn){const n=this.volFeedbackVideoHostCdn(e,t);if(n)return n}const[n,r]=null==e?void 0:e.split("/");return`videofeedback${("00"+n).slice(-2)}.wbbasket.ru/${r}`}volVideoHost(e,t=!1){if(this.volVideoHostCdn){const n=this.volVideoHostCdn(e,t);if(n)return n}let n;const r=e%144;switch(!0){case r>=0&&r<=11:n="01";break;case r<=23:n="02";break;case r<=35:n="03";break;case r<=47:n="04";break;case r<=59:n="05";break;case r<=71:n="06";break;case r<=83:n="07";break;case r<=95:n="08";break;case r<=107:n="09";break;case r<=119:n="10";break;case r<=131:n="11";break;case r<=143:n="12";break;default:n="13"}return`videonme-basket-${n}.wbbasket.ru/vol${r}`}volContentHost(e,t=!1){if(this.volContentHostCdn){const n=this.volContentHostCdn(e,t);if(n)return n}const[n,r]=null==e?void 0:e.split("/");return`content-${`00${n}`.slice(-2)}.wbbasket.ru/${r}`}constructHostV2(e,t="nm",n=!1){const r=parseInt(String(e),10),s="video"===t?~~(r/1e4):~~(r/1e3);let i="";return"nm"===t?i=this.volHostV2(r,n):"feedbackPhoto"===t?i=this.volFeedbackPhotoHost(r,n):"video"===t&&(i=this.volVideoHost(r,n)),`https://${i}/part${s}/${r}`}}const a="ImgServer",l=()=>{let e=(0,r.r)(a);return e||(e=new o,c(e)),e},c=e=>{(0,r.b)(a,e)}},43512:function(e,t,n){"use strict";n.d(t,{a:function(){return o},b:function(){return a},r:function(){return i}});const r=()=>window||globalThis||{},s=e=>{const t=`instancer_${e}`;return Symbol.for(t)},i=e=>{const t=s(e);return r()[t]||null},o=e=>{const t=i(e);if(!t)throw new Error(`Can't get ${e} instance`);return t},a=(e,t)=>{const n=s(e);r()[n]=t}},78590:function(e,t,n){"use strict";n.r(t),n.d(t,{ImageUrl:function(){return Oe},ImageUrlPb:function(){return xe},basketDeliveryDate:function(){return Qe},brandUrl:function(){return at},capitalize:function(){return qe},checkMobileRange:function(){return Me},checkRealtyBookingAvailable:function(){return et},convertQuantity:function(){return dt},createBitMask:function(){return tt},customDateTimeFormat:function(){return pt},dateDiff:function(){return Ke},dateFromTimestamp:function(){return Je},dayNameFromDate:function(){return Re},deliveryDateTxt:function(){return Ye},divideNumberBySeparator:function(){return Le},downloadFile:function(){return je},downloadOrShareFile:function(){return Fe},fastDeliveryText:function(){return Ze},forBrandLogoFromId:function(){return lt},forSellerLogo:function(){return ke},forSellerLogoPb:function(){return Ce},formatDate:function(){return Pe},formatNumberWithDot:function(){return He},formatPhone:function(){return Ue},formatPrice:function(){return Te},humanDate:function(){return Ge},humanTimerFormatSaleTimer:function(){return ut},isDateValid:function(){return nt},isDefaultSupplier:function(){return Ve},leadZero:function(){return Ne},minFiscalPriceInCurrency:function(){return Ee},minutesToTime:function(){return Xe},nextTick:function(){return Ae},nonBreakingSpaceFormatted:function(){return ze},priceFromRubNew:function(){return it},priceWithCurrencyV2:function(){return De},shortenPriceNumber:function(){return $e},spaceFormatted:function(){return Be},trimWord:function(){return rt},urlForGood:function(){return We},urlPdfInstruction:function(){return st},urlPriceHistoryStatic:function(){return ot},urlRichContent:function(){return ct},urlSiteStatic:function(){return _e},urlSiteStaticPb:function(){return Ie},urlStaticBasket:function(){return we},urlStaticData:function(){return Se}});var r=n(86291),s=Object.defineProperty,i=Object.defineProperties,o=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,u=(e,t,n)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,d=(e,t)=>{for(var n in t||(t={}))l.call(t,n)&&u(e,n,t[n]);if(a)for(var n of a(t))c.call(t,n)&&u(e,n,t[n]);return e},p=(e,t)=>i(e,o(t));BigInt(1),BigInt(2),BigInt(4),BigInt(8),BigInt(16),BigInt(32),BigInt(64),BigInt(128),BigInt(256),BigInt(512),BigInt(1024),BigInt(2048),BigInt(4096),BigInt(8192);const h={isNew:BigInt(2),isSupplierWb:BigInt(4),isOriginal:BigInt(8),hasVideo:BigInt(16),isDiscounted:BigInt(32),isAdvert:BigInt(64),disablePostamatAndKioskDelivery:BigInt(128),isKGT:BigInt(256),isSKGT:BigInt(512),photoTestGroup0:BigInt(1024),photoTestGroup1:BigInt(2048),autoPlayPC:BigInt(4096),isB2B:BigInt(8192),isB2B_NDS_refund:BigInt(16384),disablePostDelivery:BigInt(32768),disableSmartPooDelivery:BigInt(65536),autoPlayCatalog:BigInt(1<<17),isAdult:BigInt(1<<22),isC2C:BigInt(1<<23),isKGT2:BigInt(1<<24),disablePooDelivery:BigInt(1<<25),shouldCheckIMEI:BigInt(1<<26),isCustomerChoice:BigInt(1<<27),isWholesale:BigInt(1<<28),hidePhoto:BigInt("1")<<BigInt("53")};BigInt(2),BigInt(4),BigInt(8),BigInt(16),BigInt(32);const m="website";function g(e,t){return!e.includes(":")||t.includes(e.split(":")[0])}function f(e){const{frontName:t,key:n,nsFromOptions:r}=e;let s=t===m?[m]:[t,m],i=Array.isArray(n)?n.every(e=>g(e,s)):g(n,s);return{isValid:(!r||s.includes(r))&&i,availableNS:s}}const b=e=>"string"==typeof e,y=()=>{let e,t;const n=new Promise((n,r)=>{e=n,t=r});return n.resolve=e,n.reject=t,n},v=e=>null==e?"":""+e,w=/###/g,S=e=>e&&e.indexOf("###")>-1?e.replace(w,"."):e,_=e=>!e||b(e),I=(e,t,n)=>{const r=b(t)?t.split("."):t;let s=0;for(;s<r.length-1;){if(_(e))return{};const t=S(r[s]);!e[t]&&n&&(e[t]=new n),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++s}return _(e)?{}:{obj:e,k:S(r[s])}},C=(e,t,n)=>{const{obj:r,k:s}=I(e,t,Object);if(void 0!==r||1===t.length)return void(r[s]=n);let i=t[t.length-1],o=t.slice(0,t.length-1),a=I(e,o,Object);for(;void 0===a.obj&&o.length;)i=`${o[o.length-1]}.${i}`,o=o.slice(0,o.length-1),a=I(e,o,Object),null!=a&&a.obj&&typeof a.obj[`${a.k}.${i}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${i}`]=n},k=(e,t)=>{const{obj:n,k:r}=I(e,t);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},P=(e,t,n)=>{for(const r in t)"__proto__"!==r&&"constructor"!==r&&(r in e?b(e[r])||e[r]instanceof String||b(t[r])||t[r]instanceof String?n&&(e[r]=t[r]):P(e[r],t[r],n):e[r]=t[r]);return e},E=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var T={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const O=e=>b(e)?e.replace(/[&<>"'\/]/g,e=>T[e]):e;const x=[" ",",","?","!",";"],M=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}(20),A=(e,t,n=".")=>{if(!e)return;if(e[t])return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0;const r=t.split(n);let s=e;for(let e=0;e<r.length;){if(!s||"object"!=typeof s)return;let t,i="";for(let o=e;o<r.length;++o)if(o!==e&&(i+=n),i+=r[o],t=s[i],void 0!==t){if(["string","number","boolean"].indexOf(typeof t)>-1&&o<r.length-1)continue;e+=o-e+1;break}s=t}return s},R=e=>null==e?void 0:e.replace("_","-"),D={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){var n,r;null==(r=null==(n=null==console?void 0:console[e])?void 0:n.apply)||r.call(n,console,t)}};class L{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||D,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,r){return r&&!this.debug?null:(b(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new L(this.logger,d({prefix:`${this.prefix}:${e}:`},this.options))}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new L(this.logger,e)}}var B=new L;class ${constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(e=>{this.observers[e]||(this.observers[e]=new Map);const n=this.observers[e].get(t)||0;this.observers[e].set(t,n+1)}),this}off(e,t){if(this.observers[e]){if(!t)return void delete this.observers[e];this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([e,n])=>{for(let r=0;r<n;r++)e(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([n,r])=>{for(let s=0;s<r;s++)n.apply(n,[e,...t])})}}class N extends ${constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n,r={}){var s,i;const o=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,a=void 0!==r.ignoreJSONStructure?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;e.indexOf(".")>-1?l=e.split("."):(l=[e,t],n&&(Array.isArray(n)?l.push(...n):b(n)&&o?l.push(...n.split(o)):l.push(n)));const c=k(this.data,l);return!c&&!t&&!n&&e.indexOf(".")>-1&&(e=l[0],t=l[1],n=l.slice(2).join(".")),!c&&a&&b(n)?A(null==(i=null==(s=this.data)?void 0:s[e])?void 0:i[t],n,o):c}addResource(e,t,n,r,s={silent:!1}){const i=void 0!==s.keySeparator?s.keySeparator:this.options.keySeparator;let o=[e,t];n&&(o=o.concat(i?n.split(i):n)),e.indexOf(".")>-1&&(o=e.split("."),r=t,t=o[1]),this.addNamespaces(t),C(this.data,o,r),s.silent||this.emit("added",e,t,n,r)}addResources(e,t,n,r={silent:!1}){for(const r in n)(b(n[r])||Array.isArray(n[r]))&&this.addResource(e,t,r,n[r],{silent:!0});r.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,r,s,i={silent:!1,skipCopy:!1}){let o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),r=n,n=t,t=o[1]),this.addNamespaces(t);let a=k(this.data,o)||{};i.skipCopy||(n=JSON.parse(JSON.stringify(n))),r?P(a,n,s):a=d(d({},a),n),C(this.data,o,a),i.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(e=>t[e]&&Object.keys(t[e]).length>0)}toJSON(){return this.data}}var j={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,s){return e.forEach(e=>{var i,o;t=null!=(i=null==(o=this.processors[e])?void 0:o.process(t,n,r,s))?i:t}),t}};const F=Symbol("i18next/PATH_KEY");function U(e,t){var n;const{[F]:r}=e(function(){const e=[],t=Object.create(null);let n;return t.get=(r,s)=>{var i;return null==(i=null==n?void 0:n.revoke)||i.call(n),s===F?e:(e.push(s),n=Proxy.revocable(r,t),n.proxy)},Proxy.revocable(Object.create(null),t).proxy}());return r.join(null!=(n=null==t?void 0:t.keySeparator)?n:".")}const W={},H=e=>!b(e)&&"boolean"!=typeof e&&"number"!=typeof e;class V extends ${constructor(e,t={}){super(),((e,t,n)=>{e.forEach(e=>{t[e]&&(n[e]=t[e])})})(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=B.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const n=d({},t);if(null==e)return!1;const r=this.resolve(e,n);return void 0!==(null==r?void 0:r.res)}extractFromKey(e,t){let n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");const r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let s=t.ns||this.options.defaultNS||[];const i=n&&e.indexOf(n)>-1,o=!(this.options.userDefinedKeySeparator||t.keySeparator||this.options.userDefinedNsSeparator||t.nsSeparator||((e,t,n)=>{t=t||"",n=n||"";const r=x.filter(e=>t.indexOf(e)<0&&n.indexOf(e)<0);if(0===r.length)return!0;const s=M.getRegExp(`(${r.map(e=>"?"===e?"\\?":e).join("|")})`);let i=!s.test(e);if(!i){const t=e.indexOf(n);t>0&&!s.test(e.substring(0,t))&&(i=!0)}return i})(e,n,r));if(i&&!o){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:b(s)?[s]:s};const i=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(i[0])>-1)&&(s=i.shift()),e=i.join(r)}return{key:e,namespaces:b(s)?[s]:s}}translate(e,t,n){let r="object"==typeof t?d({},t):t;if("object"!=typeof r&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),"object"==typeof r&&(r=d({},r)),r||(r={}),null==e)return"";"function"==typeof e&&(e=U(e,d(d({},this.options),r))),Array.isArray(e)||(e=[String(e)]);const s=void 0!==r.returnDetails?r.returnDetails:this.options.returnDetails,i=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,{key:o,namespaces:a}=this.extractFromKey(e[e.length-1],r),l=a[a.length-1];let c=void 0!==r.nsSeparator?r.nsSeparator:this.options.nsSeparator;void 0===c&&(c=":");const u=r.lng||this.language,h=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if("cimode"===(null==u?void 0:u.toLowerCase()))return h?s?{res:`${l}${c}${o}`,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(r)}:`${l}${c}${o}`:s?{res:o,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(r)}:o;const m=this.resolve(e,r);let g=null==m?void 0:m.res;const f=(null==m?void 0:m.usedKey)||o,y=(null==m?void 0:m.exactUsedKey)||o,v=void 0!==r.joinArrays?r.joinArrays:this.options.joinArrays,w=!this.i18nFormat||this.i18nFormat.handleAsObject,S=void 0!==r.count&&!b(r.count),_=V.hasDefaultValue(r),I=S?this.pluralResolver.getSuffix(u,r.count,r):"",C=r.ordinal&&S?this.pluralResolver.getSuffix(u,r.count,{ordinal:!1}):"",k=S&&!r.ordinal&&0===r.count,P=k&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${I}`]||r[`defaultValue${C}`]||r.defaultValue;let E=g;w&&!g&&_&&(E=P);const T=H(E),O=Object.prototype.toString.apply(E);if(!(w&&E&&T&&["[object Number]","[object Function]","[object RegExp]"].indexOf(O)<0)||b(v)&&Array.isArray(E))if(w&&b(v)&&Array.isArray(g))g=g.join(v),g&&(g=this.extendTranslation(g,e,r,n));else{let t=!1,s=!1;!this.isValidLookup(g)&&_&&(t=!0,g=P),this.isValidLookup(g)||(s=!0,g=o);const a=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&s?void 0:g,h=_&&P!==g&&this.options.updateMissing;if(s||t||h){if(this.logger.log(h?"updateKey":"missingKey",u,l,o,h?P:g),i){const e=this.resolve(o,p(d({},r),{keySeparator:!1}));e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const t=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if("fallback"===this.options.saveMissingTo&&t&&t[0])for(let n=0;n<t.length;n++)e.push(t[n]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(r.lng||this.language):e.push(r.lng||this.language);const n=(e,t,n)=>{var s;const i=_&&n!==g?n:a;this.options.missingKeyHandler?this.options.missingKeyHandler(e,l,t,i,h,r):null!=(s=this.backendConnector)&&s.saveMissing&&this.backendConnector.saveMissing(e,l,t,i,h,r),this.emit("missingKey",e,l,t,g)};this.options.saveMissing&&(this.options.saveMissingPlurals&&S?e.forEach(e=>{const t=this.pluralResolver.getSuffixes(e,r);k&&r[`defaultValue${this.options.pluralSeparator}zero`]&&t.indexOf(`${this.options.pluralSeparator}zero`)<0&&t.push(`${this.options.pluralSeparator}zero`),t.forEach(t=>{n([e],o+t,r[`defaultValue${t}`]||P)})}):n(e,o,P))}g=this.extendTranslation(g,e,r,m,n),s&&g===o&&this.options.appendNamespaceToMissingKey&&(g=`${l}${c}${o}`),(s||t)&&this.options.parseMissingKeyHandler&&(g=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}${c}${o}`:o,t?g:void 0,r))}else{if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,E,p(d({},r),{ns:a})):`key '${o} (${this.language})' returned an object instead of string.`;return s?(m.res=e,m.usedParams=this.getUsedParamsDetails(r),m):e}if(i){const e=Array.isArray(E),t=e?[]:{},n=e?y:f;for(const e in E)if(Object.prototype.hasOwnProperty.call(E,e)){const s=`${n}${i}${e}`;t[e]=_&&!g?this.translate(s,p(d({},r),{defaultValue:H(P)?P[e]:void 0,joinArrays:!1,ns:a})):this.translate(s,p(d({},r),{joinArrays:!1,ns:a})),t[e]===s&&(t[e]=E[e])}g=t}}return s?(m.res=g,m.usedParams=this.getUsedParamsDetails(r),m):g}extendTranslation(e,t,n,r,s){var i,o;if(null!=(i=this.i18nFormat)&&i.parse)e=this.i18nFormat.parse(e,d(d({},this.options.interpolation.defaultVariables),n),n.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(p(d({},n),{interpolation:d(d({},this.options.interpolation),n.interpolation)}));const i=b(e)&&(void 0!==(null==(o=null==n?void 0:n.interpolation)?void 0:o.skipOnVariables)?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let a;if(i){const t=e.match(this.interpolator.nestingRegexp);a=t&&t.length}let l=n.replace&&!b(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(l=d(d({},this.options.interpolation.defaultVariables),l)),e=this.interpolator.interpolate(e,l,n.lng||this.language||r.usedLng,n),i){const t=e.match(this.interpolator.nestingRegexp);a<(t&&t.length)&&(n.nest=!1)}!n.lng&&r&&r.res&&(n.lng=this.language||r.usedLng),!1!==n.nest&&(e=this.interpolator.nest(e,(...e)=>(null==s?void 0:s[0])!==e[0]||n.context?this.translate(...e,t):(this.logger.warn(`It seems you are nesting recursively key: ${e[0]} in key: ${t[0]}`),null),n)),n.interpolation&&this.interpolator.reset()}const a=n.postProcess||this.options.postProcess,l=b(a)?[a]:a;return null!=e&&null!=l&&l.length&&!1!==n.applyPostProcessor&&(e=j.handle(l,e,t,this.options&&this.options.postProcessPassResolved?d({i18nResolved:p(d({},r),{usedParams:this.getUsedParamsDetails(n)})},n):n,this)),e}resolve(e,t={}){let n,r,s,i,o;return b(e)&&(e=[e]),e.forEach(e=>{if(this.isValidLookup(n))return;const a=this.extractFromKey(e,t),l=a.key;r=l;let c=a.namespaces;this.options.fallbackNS&&(c=c.concat(this.options.fallbackNS));const u=void 0!==t.count&&!b(t.count),d=u&&!t.ordinal&&0===t.count,p=void 0!==t.context&&(b(t.context)||"number"==typeof t.context)&&""!==t.context,h=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);c.forEach(e=>{var a,c;this.isValidLookup(n)||(o=e,!W[`${h[0]}-${e}`]&&null!=(a=this.utils)&&a.hasLoadedNamespace&&!(null!=(c=this.utils)&&c.hasLoadedNamespace(o))&&(W[`${h[0]}-${e}`]=!0,this.logger.warn(`key "${r}" for languages "${h.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),h.forEach(r=>{var o;if(this.isValidLookup(n))return;i=r;const a=[l];if(null!=(o=this.i18nFormat)&&o.addLookupKeys)this.i18nFormat.addLookupKeys(a,l,r,e,t);else{let e;u&&(e=this.pluralResolver.getSuffix(r,t.count,t));const n=`${this.options.pluralSeparator}zero`,s=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(u&&(t.ordinal&&0===e.indexOf(s)&&a.push(l+e.replace(s,this.options.pluralSeparator)),a.push(l+e),d&&a.push(l+n)),p){const r=`${l}${this.options.contextSeparator||"_"}${t.context}`;a.push(r),u&&(t.ordinal&&0===e.indexOf(s)&&a.push(r+e.replace(s,this.options.pluralSeparator)),a.push(r+e),d&&a.push(r+n))}}let c;for(;c=a.pop();)this.isValidLookup(n)||(s=c,n=this.getResource(r,e,c,t))}))})}),{res:n,usedKey:r,exactUsedKey:s,usedLng:i,usedNS:o}}isValidLookup(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}getResource(e,t,n,r={}){var s;return null!=(s=this.i18nFormat)&&s.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!b(e.replace);let r=n?e.replace:e;if(n&&typeof e.count<"u"&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r=d(d({},this.options.interpolation.defaultVariables),r)),!n){r=d({},r);for(const e of t)delete r[e]}return r}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,12)&&void 0!==e[n])return!0;return!1}}class z{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=B.create("languageUtils")}getScriptPartFromCode(e){if(!(e=R(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length||(t.pop(),"x"===t[t.length-1].toLowerCase())?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(!(e=R(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(b(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch(e){}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(e=>{if(t)return;const n=this.formatLanguageCode(e);(!this.options.supportedLngs||this.isSupportedCode(n))&&(t=n)}),!t&&this.options.supportedLngs&&e.forEach(e=>{if(t)return;const n=this.getScriptPartFromCode(e);if(this.isSupportedCode(n))return t=n;const r=this.getLanguagePartFromCode(e);if(this.isSupportedCode(r))return t=r;t=this.options.supportedLngs.find(e=>e===r?e:e.indexOf("-")<0&&r.indexOf("-")<0||!(e.indexOf("-")>0&&r.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===r||0===e.indexOf(r)&&r.length>1)?void 0:e)}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),b(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes((!1===t?[]:t)||this.options.fallbackLng||[],e),r=[],s=e=>{e&&(this.isSupportedCode(e)?r.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`))};return b(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&s(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&s(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&s(this.getLanguagePartFromCode(e))):b(e)&&s(this.formatLanguageCode(e)),n.forEach(e=>{r.indexOf(e)<0&&s(this.formatLanguageCode(e))}),r}}const q={zero:0,one:1,two:2,few:3,many:4,other:5},K={select:e=>1===e?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class G{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=B.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const n=R("dev"===e?"en":e),r=t.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:n,type:r});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let i;try{i=new Intl.PluralRules(n,{type:r})}catch(n){if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),K;if(!e.match(/-|_/))return K;const r=this.languageUtils.getLanguagePartFromCode(e);i=this.getRule(r,t)}return this.pluralRulesCache[s]=i,i}needsPlural(e,t={}){let n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),(null==n?void 0:n.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t,n={}){return this.getSuffixes(e,n).map(e=>`${t}${e}`)}getSuffixes(e,t={}){let n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),n?n.resolvedOptions().pluralCategories.sort((e,t)=>q[e]-q[t]).map(e=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${e}`):[]}getSuffix(e,t,n={}){const r=this.getRule(e,n);return r?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${r.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,n))}}const J=(e,t,n,r=".",s=!0)=>{let i=((e,t,n)=>{const r=k(e,n);return void 0!==r?r:k(t,n)})(e,t,n);return!i&&s&&b(n)&&(i=A(e,n,r),void 0===i&&(i=A(t,n,r))),i},Y=e=>e.replace(/\$/g,"$$$$");class Q{constructor(e={}){var t;this.logger=B.create("interpolator"),this.options=e,this.format=(null==(t=null==e?void 0:e.interpolation)?void 0:t.format)||(e=>e),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:r,prefix:s,prefixEscaped:i,suffix:o,suffixEscaped:a,formatSeparator:l,unescapeSuffix:c,unescapePrefix:u,nestingPrefix:d,nestingPrefixEscaped:p,nestingSuffix:h,nestingSuffixEscaped:m,nestingOptionsSeparator:g,maxReplaces:f,alwaysFormat:b}=e.interpolation;this.escape=void 0!==t?t:O,this.escapeValue=void 0===n||n,this.useRawValueToEscape=void 0!==r&&r,this.prefix=s?E(s):i||"{{",this.suffix=o?E(o):a||"}}",this.formatSeparator=l||",",this.unescapePrefix=c?"":u||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=d?E(d):p||E("$t("),this.nestingSuffix=h?E(h):m||E(")"),this.nestingOptionsSeparator=g||",",this.maxReplaces=f||1e3,this.alwaysFormat=void 0!==b&&b,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>(null==e?void 0:e.source)===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,n,r){var s;let i,o,a;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=e=>{if(e.indexOf(this.formatSeparator)<0){const s=J(t,l,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(s,void 0,n,p(d(d({},r),t),{interpolationkey:e})):s}const s=e.split(this.formatSeparator),i=s.shift().trim(),o=s.join(this.formatSeparator).trim();return this.format(J(t,l,i,this.options.keySeparator,this.options.ignoreJSONStructure),o,n,p(d(d({},r),t),{interpolationkey:i}))};this.resetRegExp();const u=(null==r?void 0:r.missingInterpolationHandler)||this.options.missingInterpolationHandler,h=void 0!==(null==(s=null==r?void 0:r.interpolation)?void 0:s.skipOnVariables)?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>Y(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?Y(this.escape(e)):Y(e)}].forEach(t=>{for(a=0;i=t.regex.exec(e);){const n=i[1].trim();if(o=c(n),void 0===o)if("function"==typeof u){const t=u(e,i,r);o=b(t)?t:""}else if(r&&Object.prototype.hasOwnProperty.call(r,n))o="";else{if(h){o=i[0];continue}this.logger.warn(`missed to pass in variable ${n} for interpolating ${e}`),o=""}else!b(o)&&!this.useRawValueToEscape&&(o=v(o));const s=t.safeValue(o);if(e=e.replace(i[0],s),h?(t.regex.lastIndex+=o.length,t.regex.lastIndex-=i[0].length):t.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,t,n={}){let r,s,i;const o=(e,t)=>{var n;const r=this.nestingOptionsSeparator;if(e.indexOf(r)<0)return e;const s=e.split(new RegExp(`${r}[ ]*{`));let o=`{${s[1]}`;e=s[0],o=this.interpolate(o,i);const a=o.match(/'/g),l=o.match(/"/g);((null!=(n=null==a?void 0:a.length)?n:0)%2==0&&!l||l.length%2!=0)&&(o=o.replace(/'/g,'"'));try{i=JSON.parse(o),t&&(i=d(d({},t),i))}catch(t){return this.logger.warn(`failed parsing options string in nesting for key ${e}`,t),`${e}${r}${o}`}return i.defaultValue&&i.defaultValue.indexOf(this.prefix)>-1&&delete i.defaultValue,e};for(;r=this.nestingRegexp.exec(e);){let a=[];i=d({},n),i=i.replace&&!b(i.replace)?i.replace:i,i.applyPostProcessor=!1,delete i.defaultValue;const l=/{.*}/.test(r[1])?r[1].lastIndexOf("}")+1:r[1].indexOf(this.formatSeparator);if(-1!==l&&(a=r[1].slice(l).split(this.formatSeparator).map(e=>e.trim()).filter(Boolean),r[1]=r[1].slice(0,l)),s=t(o.call(this,r[1].trim(),i),i),s&&r[0]===e&&!b(s))return s;b(s)||(s=v(s)),s||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${e}`),s=""),a.length&&(s=a.reduce((e,t)=>this.format(e,t,n.lng,p(d({},n),{interpolationkey:r[1].trim()})),s.trim())),e=e.replace(r[0],s),this.regexp.lastIndex=0}return e}}const X=e=>{const t={};return(n,r,s)=>{let i=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(i=p(d({},i),{[s.interpolationkey]:void 0}));const o=r+JSON.stringify(i);let a=t[o];return a||(a=e(R(r),s),t[o]=a),a(n)}},Z=e=>(t,n,r)=>e(R(n),r)(t);class ee{constructor(e={}){this.logger=B.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const n=t.cacheInBuiltFormats?X:Z;this.formats={number:n((e,t)=>{const n=new Intl.NumberFormat(e,d({},t));return e=>n.format(e)}),currency:n((e,t)=>{const n=new Intl.NumberFormat(e,p(d({},t),{style:"currency"}));return e=>n.format(e)}),datetime:n((e,t)=>{const n=new Intl.DateTimeFormat(e,d({},t));return e=>n.format(e)}),relativetime:n((e,t)=>{const n=new Intl.RelativeTimeFormat(e,d({},t));return e=>n.format(e,t.range||"day")}),list:n((e,t)=>{const n=new Intl.ListFormat(e,d({},t));return e=>n.format(e)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=X(t)}format(e,t,n,r={}){const s=t.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(e=>e.indexOf(")")>-1)){const e=s.findIndex(e=>e.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,e)].join(this.formatSeparator)}return s.reduce((e,t)=>{var s;const{formatName:i,formatOptions:o}=(e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const s=r[1].substring(0,r[1].length-1);"currency"===t&&s.indexOf(":")<0?n.currency||(n.currency=s.trim()):"relativetime"===t&&s.indexOf(":")<0?n.range||(n.range=s.trim()):s.split(";").forEach(e=>{if(e){const[t,...r]=e.split(":"),s=r.join(":").trim().replace(/^'+|'+$/g,""),i=t.trim();n[i]||(n[i]=s),"false"===s&&(n[i]=!1),"true"===s&&(n[i]=!0),isNaN(s)||(n[i]=parseInt(s,10))}})}return{formatName:t,formatOptions:n}})(t);if(this.formats[i]){let t=e;try{const a=(null==(s=null==r?void 0:r.formatParams)?void 0:s[r.interpolationkey])||{},l=a.locale||a.lng||r.locale||r.lng||n;t=this.formats[i](e,l,d(d(d({},o),r),a))}catch(e){this.logger.warn(e)}return t}return this.logger.warn(`there was no format function for ${i}`),e},e)}}class te extends ${constructor(e,t,n,r={}){var s,i;super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=r,this.logger=B.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],null==(i=null==(s=this.backend)?void 0:s.init)||i.call(s,n,r.backend,r)}queueLoad(e,t,n,r){const s={},i={},o={},a={};return e.forEach(e=>{let r=!0;t.forEach(t=>{const o=`${e}|${t}`;!n.reload&&this.store.hasResourceBundle(e,t)?this.state[o]=2:this.state[o]<0||(1===this.state[o]?void 0===i[o]&&(i[o]=!0):(this.state[o]=1,r=!1,void 0===i[o]&&(i[o]=!0),void 0===s[o]&&(s[o]=!0),void 0===a[t]&&(a[t]=!0)))}),r||(o[e]=!0)}),(Object.keys(s).length||Object.keys(i).length)&&this.queue.push({pending:i,pendingCount:Object.keys(i).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(s),pending:Object.keys(i),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(a)}}loaded(e,t,n){const r=e.split("|"),s=r[0],i=r[1];t&&this.emit("failedLoading",s,i,t),!t&&n&&this.store.addResourceBundle(s,i,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const o={};this.queue.forEach(n=>{((e,t,n)=>{const{obj:r,k:s}=I(e,t,Object);r[s]=r[s]||[],r[s].push(n)})(n.loaded,[s],i),((e,t)=>{void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)})(n,e),t&&n.errors.push(t),0===n.pendingCount&&!n.done&&(Object.keys(n.loaded).forEach(e=>{o[e]||(o[e]={});const t=n.loaded[e];t.length&&t.forEach(t=>{void 0===o[e][t]&&(o[e][t]=!0)})}),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(e=>!e.done)}read(e,t,n,r=0,s=this.retryTimeout,i){if(!e.length)return i(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:n,tried:r,wait:s,callback:i});this.readingCalls++;const o=(o,a)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}o&&a&&r<this.maxRetries?setTimeout(()=>{this.read.call(this,e,t,n,r+1,2*s,i)},s):i(o,a)},a=this.backend[n].bind(this.backend);if(2!==a.length)return a(e,t,o);try{const n=a(e,t);n&&"function"==typeof n.then?n.then(e=>o(null,e)).catch(o):o(null,n)}catch(e){o(e)}}prepareLoading(e,t,n={},r){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();b(e)&&(e=this.languageUtils.toResolveHierarchy(e)),b(t)&&(t=[t]);const s=this.queueLoad(e,t,n,r);if(!s.toLoad.length)return s.pending.length||r(),null;s.toLoad.forEach(e=>{this.loadOne(e)})}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e,t=""){const n=e.split("|"),r=n[0],s=n[1];this.read(r,s,"read",void 0,void 0,(n,i)=>{n&&this.logger.warn(`${t}loading namespace ${s} for language ${r} failed`,n),!n&&i&&this.logger.log(`${t}loaded namespace ${s} for language ${r}`,i),this.loaded(e,n,i)})}saveMissing(e,t,n,r,s,i={},o=()=>{}){var a,l,c,u,h;if(null==(l=null==(a=this.services)?void 0:a.utils)||!l.hasLoadedNamespace||null!=(u=null==(c=this.services)?void 0:c.utils)&&u.hasLoadedNamespace(t)){if(null!=n&&""!==n){if(null!=(h=this.backend)&&h.create){const a=p(d({},i),{isUpdate:s}),l=this.backend.create.bind(this.backend);if(l.length<6)try{let s;s=5===l.length?l(e,t,n,r,a):l(e,t,n,r),s&&"function"==typeof s.then?s.then(e=>o(null,e)).catch(o):o(null,s)}catch(e){o(e)}else l(e,t,n,r,o,a)}!e||!e[0]||this.store.addResource(e[0],t,n,r)}}else this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")}}const ne=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if("object"==typeof e[1]&&(t=e[1]),b(e[1])&&(t.defaultValue=e[1]),b(e[2])&&(t.tDescription=e[2]),"object"==typeof e[2]||"object"==typeof e[3]){const n=e[3]||e[2];Object.keys(n).forEach(e=>{t[e]=n[e]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),re=e=>{var t,n;return b(e.ns)&&(e.ns=[e.ns]),b(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),b(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),(null==(n=null==(t=e.supportedLngs)?void 0:t.indexOf)?void 0:n.call(t,"cimode"))<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),"boolean"==typeof e.initImmediate&&(e.initAsync=e.initImmediate),e},se=()=>{};class ie extends ${constructor(e={},t){if(super(),this.options=re(e),this.services={},this.logger=B,this.modules={external:[]},n=this,Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(e=>{"function"==typeof n[e]&&(n[e]=n[e].bind(n))}),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}var n}init(e={},t){this.isInitializing=!0,"function"==typeof e&&(t=e,e={}),null==e.defaultNS&&e.ns&&(b(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const n=ne();this.options=d(d(d({},n),this.options),re(e)),this.options.interpolation=d(d({},n.interpolation),this.options.interpolation),void 0!==e.keySeparator&&(this.options.userDefinedKeySeparator=e.keySeparator),void 0!==e.nsSeparator&&(this.options.userDefinedNsSeparator=e.nsSeparator);const r=e=>e?"function"==typeof e?new e:e:null;if(!this.options.isClone){let e;this.modules.logger?B.init(r(this.modules.logger),this.options):B.init(null,this.options),e=this.modules.formatter?this.modules.formatter:ee;const t=new z(this.options);this.store=new N(this.options.resources,this.options);const s=this.services;s.logger=B,s.resourceStore=this.store,s.languageUtils=t,s.pluralResolver=new G(t,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),e&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(s.formatter=r(e),s.formatter.init&&s.formatter.init(s,this.options),this.options.interpolation.format=s.formatter.format.bind(s.formatter)),s.interpolator=new Q(this.options),s.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},s.backendConnector=new te(r(this.modules.backend),s.resourceStore,s,this.options),s.backendConnector.on("*",(e,...t)=>{this.emit(e,...t)}),this.modules.languageDetector&&(s.languageDetector=r(this.modules.languageDetector),s.languageDetector.init&&s.languageDetector.init(s,this.options.detection,this.options)),this.modules.i18nFormat&&(s.i18nFormat=r(this.modules.i18nFormat),s.i18nFormat.init&&s.i18nFormat.init(this)),this.translator=new V(this.services,this.options),this.translator.on("*",(e,...t)=>{this.emit(e,...t)}),this.modules.external.forEach(e=>{e.init&&e.init(this)})}if(this.format=this.options.interpolation.format,t||(t=se),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(e=>{this[e]=(...t)=>this.store[e](...t)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(e=>{this[e]=(...t)=>(this.store[e](...t),this)});const s=y(),i=()=>{const e=(e,n)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),s.resolve(n),t(e,n)};if(this.languages&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initAsync?i():setTimeout(i,0),s}loadResources(e,t=se){var n,r;let s=t;const i=b(e)?e:this.language;if("function"==typeof e&&(s=e),!this.options.resources||this.options.partialBundledLanguages){if("cimode"===(null==i?void 0:i.toLowerCase())&&(!this.options.preload||0===this.options.preload.length))return s();const e=[],t=t=>{t&&"cimode"!==t&&this.services.languageUtils.toResolveHierarchy(t).forEach(t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)})};i?t(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(e=>t(e)),null==(r=null==(n=this.options.preload)?void 0:n.forEach)||r.call(n,e=>t(e)),this.services.backendConnector.load(e,this.options.ns,e=>{!e&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),s(e)})}else s(null)}reloadResources(e,t,n){const r=y();return"function"==typeof e&&(n=e,e=void 0),"function"==typeof t&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=se),this.services.backendConnector.reload(e,t,e=>{r.resolve(),n(e)}),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&j.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1)){for(let e=0;e<this.languages.length;e++){const t=this.languages[e];if(!(["cimode","dev"].indexOf(t)>-1)&&this.store.hasLanguageSomeTranslations(t)){this.resolvedLanguage=t;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const n=y();this.emit("languageChanging",e);const r=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},s=(s,i)=>{i?this.isLanguageChangingTo===e&&(r(i),this.translator.changeLanguage(i),this.isLanguageChangingTo=void 0,this.emit("languageChanged",i),this.logger.log("languageChanged",i)):this.isLanguageChangingTo=void 0,n.resolve((...e)=>this.t(...e)),t&&t(s,(...e)=>this.t(...e))},i=t=>{var n,i;!e&&!t&&this.services.languageDetector&&(t=[]);const o=b(t)?t:t&&t[0],a=this.store.hasLanguageSomeTranslations(o)?o:this.services.languageUtils.getBestMatchFromCodes(b(t)?[t]:t);a&&(this.language||r(a),this.translator.language||this.translator.changeLanguage(a),null==(i=null==(n=this.services.languageDetector)?void 0:n.cacheUserLanguage)||i.call(n,a)),this.loadResources(a,e=>{s(e,a)})};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(i):this.services.languageDetector.detect(i):i(e):i(this.services.languageDetector.detect()),n}getFixedT(e,t,n){const r=(e,t,...s)=>{let i;i="object"!=typeof t?this.options.overloadTranslationOptionHandler([e,t].concat(s)):d({},t),i.lng=i.lng||r.lng,i.lngs=i.lngs||r.lngs,i.ns=i.ns||r.ns,""!==i.keyPrefix&&(i.keyPrefix=i.keyPrefix||n||r.keyPrefix);const o=this.options.keySeparator||".";let a;return i.keyPrefix&&Array.isArray(e)?a=e.map(e=>("function"==typeof e&&(e=U(e,d(d({},this.options),t))),`${i.keyPrefix}${o}${e}`)):("function"==typeof e&&(e=U(e,d(d({},this.options),t))),a=i.keyPrefix?`${i.keyPrefix}${o}${e}`:e),this.t(a,i)};return b(e)?r.lng=e:r.lngs=e,r.ns=t,r.keyPrefix=n,r}t(...e){var t;return null==(t=this.translator)?void 0:t.translate(...e)}exists(...e){var t;return null==(t=this.translator)?void 0:t.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],r=!!this.options&&this.options.fallbackLng,s=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;const i=(e,t)=>{const n=this.services.backendConnector.state[`${e}|${t}`];return-1===n||0===n||2===n};if(t.precheck){const e=t.precheck(this,i);if(void 0!==e)return e}return!!(this.hasResourceBundle(n,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||i(n,e)&&(!r||i(s,e)))}loadNamespaces(e,t){const n=y();return this.options.ns?(b(e)&&(e=[e]),e.forEach(e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}),this.loadResources(e=>{n.resolve(),t&&t(e)}),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=y();b(e)&&(e=[e]);const r=this.options.preload||[],s=e.filter(e=>r.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e));return s.length?(this.options.preload=r.concat(s),this.loadResources(e=>{n.resolve(),t&&t(e)}),n):(t&&t(),Promise.resolve())}dir(e){var t,n;if(e||(e=this.resolvedLanguage||((null==(t=this.languages)?void 0:t.length)>0?this.languages[0]:this.language)),!e)return"rtl";try{const t=new Intl.Locale(e);if(t&&t.getTextInfo){const e=t.getTextInfo();if(e&&e.direction)return e.direction}}catch(e){}const r=(null==(n=this.services)?void 0:n.languageUtils)||new z(ne());return e.toLowerCase().indexOf("-latn")>1?"ltr":["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){return new ie(e,t)}cloneInstance(e={},t=se){const n=e.forkResourceStore;n&&delete e.forkResourceStore;const r=p(d(d({},this.options),e),{isClone:!0}),s=new ie(r);if((void 0!==e.debug||void 0!==e.prefix)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(e=>{s[e]=this[e]}),s.services=d({},this.services),s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},n){const e=Object.keys(this.store.data).reduce((e,t)=>(e[t]=d({},this.store.data[t]),e[t]=Object.keys(e[t]).reduce((n,r)=>(n[r]=d({},e[t][r]),n),e[t]),e),{});s.store=new N(e,r),s.services.resourceStore=s.store}return s.translator=new V(s.services,r),s.translator.on("*",(e,...t)=>{s.emit(e,...t)}),s.init(r,t),s.translator.options=r,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const oe=ie.createInstance();oe.createInstance=ie.createInstance,oe.createInstance,oe.dir,oe.init,oe.loadResources,oe.reloadResources,oe.use,oe.changeLanguage,oe.getFixedT,oe.t,oe.exists,oe.setDefaultNamespace,oe.hasLoadedNamespace,oe.loadNamespaces,oe.loadLanguages;var ae=Object.defineProperty,le=(e,t,n)=>((e,t,n)=>t in e?ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);const ce=()=>window||globalThis||{},ue=e=>{const t=`instancer_${e}`;return Symbol.for(t)},de={fallbackLng:"ru",debug:"true"===localStorage.getItem("i18n_debug"),fallbackNS:!1,saveMissing:!0,missingKeyHandler:(e,t,n,r,s,i)=>((!i||!i.ignoreMissingKey)&&console.warn("i18next missingKey: "+n),n)};class pe{constructor(){var e;le(this,"instance"),le(this,"language"),le(this,"remoteMfeImports"),this.remoteMfeImports={},this.language=(null==(e=window.wb)?void 0:e.currentLanguage)||"ru"}getUtils(e){return{t:(t,n={})=>{if(!this.instance)throw new Error("instance ещё не инициализирован");const{isValid:r,availableNS:s}=f({frontName:e,key:t,nsFromOptions:null==n?void 0:n.ns});return r||console.error(`Ключ "${t}" использует NS другого микрофронта, разрешенные NS: [${s}]`),this.instance.t(t,p(d({},n),{ns:e}))},plural:(t,n)=>{const r=n,{count:s,displayCount:i}=r,o=((e,t)=>{var n={};for(var r in e)l.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&a)for(var r of a(e))t.indexOf(r)<0&&c.call(e,r)&&(n[r]=e[r]);return n})(r,["count","displayCount"]);if(!this.instance)throw new Error("instance ещё не инициализирован");const{isValid:u,availableNS:h}=f({frontName:e,key:t,nsFromOptions:null==n?void 0:n.ns});return u||console.error(`Ключ "${t}" использует NS другого микрофронта, разрешенные NS: [${h}]`),this.instance.t(`${t}.plural`,p(d({count:s||0,displayCount:i||s||0,interpolation:{escapeValue:!i}},o),{ns:e}))},getLanguage:()=>this.language,changeLang:e=>{localStorage.setItem("wb__lang",e),window.wb.currentLanguage=e,location.reload()}}}getI18nInstance(){return this.instance}registerRemoteMfeImports(e){this.remoteMfeImports=e}async createI18nInstance(e){if(this.instance)return this.instance;const{initReactI18next:t}=await n.e(30725).then(n.bind(n,30725));this.instance=oe.createInstance();const{hostName:r,options:s,lazyForeignTranslations:i}=e;return await this.instance.use(t).init(d(d({lng:this.language},de),s)),await this._loadTranslationsModule(this.instance,r,i),this.instance}async loadRemoteResourcesAsync(e){try{if(!this.instance)throw new Error("instance ещё не инициализирован");if(this.instance.hasResourceBundle(this.language,e))return;const{ru:t,lazyForeignTranslations:n}=await this._loadRemoteResoucesAsync(e);this.instance.addResourceBundle("ru",e,t),await this._loadTranslationsModule(this.instance,e,n)}catch(e){console.error("loadRemoteResourcesAsync = ",e)}}async _loadTranslationsModule(e,t,n){try{const r=this.language;if("ru"!==r){const s=new Promise((e,t)=>setTimeout(()=>t(new Error("загрузка перевода превысила 15 секунд")),15e3)),i=(0,n[r])(),o=await Promise.race([i,s]);o&&e.addResourceBundle(r,t,o.default)}}catch(e){console.error("Translation loading error:",e)}}async _loadRemoteResoucesAsync(e){const t=this.remoteMfeImports[e];if(!t)throw new Error(`Не найден ${e}, добавьте в REMOTE_I18N_RESOURCES_IMPORT`);return(await t()).default}}const he="i18nService",me=()=>{let e=(e=>{const t=ue(e);return ce()[t]||null})(he);return e||(e=new pe,ge(e)),e},ge=e=>{((e,t)=>{const n=ue(e);ce()[n]=t})(he,e)},fe=p(d({},me().getUtils("website")),{getInstance:()=>me().getI18nInstance()}),be=navigator.connection||navigator.mozConnection||navigator.webkitConnection,ye=Object.freeze({tm:"tm",c246x328:"c246x328",c516x688:"c246x328",big:"c516x688",hq:"c516x688"}),ve=e=>e in ye,we=(e,t,n=!1)=>e.startsWith("//")||e.startsWith("http")?e:`https://${(0,r.V)().volStaticHost(t,n)}/${e}`,Se=(e,t=!1)=>we(`data/${e}`,0,t),_e=(e,t=!1)=>(e=e.startsWith("//")||e.startsWith("http")?e:`${window.wb.settings.siteStaticPath}${e}`,"/"===window.wb.settings.siteStaticPath?e:we(e,2,t)),Ie=e=>_e(e,!0),Ce=(e,t=!1,n=!0)=>we(`crm-bnrs/shops/${e}_${t?"main_banner":"logo"}.webp`,1),ke=(e,t=!1)=>Ce(e,t,!1);function Pe(e,t){return new Date(e).format(t)}function Ee(e){switch(e.toUpperCase()){case"UZS":return 100;case"AMD":case"KZT":return 10;case"BYN":case"TJS":case"GEL":case"USD":return.01;default:return 1}}function Te(e,t,n){let r=Le(e)+(t?`,${t}`:"");return""!==n&&(r+=" "+(n||window.wb.settings.currencyShortName)),r}function Oe(e,t,n=1,s,i,o=!1){var a,l;if(s&&!WbSpaModel.prototype.$isDesktop&&(t=s),null!=be&&be.effectiveType&&"4g"!==(null==be?void 0:be.effectiveType)&&"3g"!==(null==be?void 0:be.effectiveType)&&ve(t)&&null!=(l=null==(a=window.wb.global.settings)?void 0:a.switches)&&l.enableProductImageDowngrade&&(t=ye[t]),0===e)return _e(`i/product/notfound/${t}.jpg`,o);if(window.wb.xnm.isViewFlagSet(i,h.hidePhoto))return _e(`i/product/unavailable/${t}.jpg`,o);return`${(0,r.V)().constructHostV2(e,"nm",o)}/images/${t}/${window.wb.helpers.getCardImgName({nmId:e,viewFlags:i,idx:n})}.webp`}const xe=(e,t,n,r,s)=>Oe(e,t,n,r,s,!0);function Me(e,t){if(!t||0===t.length)return!1;isNaN(e)&&(e=0);for(let n=0;n<t.length;n++){const r=t[n];if(r&&e>=r.fromId&&e<=r.toId)return!0}return!1}const Ae=()=>Promise.resolve().then(()=>Promise.resolve());function Re(e,t=!1,n=!1,r=!1,s=!1,i=!1){if(!e)return;const o=new Date,a=e instanceof Date?e:new Date(e),l=o.daysBetween(a),c=fe.t,u=fe.plural;return 0===l?s?c("common.today").toLowerCase():c("common.today"):1===l?s?c("common.tomorrow").toLowerCase():c("common.tomorrow"):2===l&&t?s?c("common.dayAfterTomorrow").toLowerCase():c("common.dayAfterTomorrow"):l>=3&&l<=7&&r?u("common.time.afterDays",{count:l}):n?a.getFullYear()!==o.getFullYear()?a.format("d MMMM yyyy"):a.format("d MMMM"):i?a.format("d MMM"):a.format("d MMMM")}function De(e,t){var n,r,s,i;let{showEmpty:o=!1,withCoins:a=!1,iso:l=null,sale:c=0,currency:u=null,omitZeroCents:d=!1}=t;if(!o&&(!e||isNaN(Number(e))))return"";const p=Number(e).toString().split(".");a=a&&Number(e)%1!=0;const h=u?null==(r=null==(n=window.wb.currencies)?void 0:n.getIsoBySign)?void 0:r.call(n,u):"string"==typeof l?l.toUpperCase():WbSpaModel.prototype.$user.getCurrency();u||(u=null==(i=null==(s=window.wb.currencies)?void 0:s.info[h])?void 0:i.sign);const m=null!=c?c:0;if(m>0){e=Number(e);let t=Math.ceil(e*(m/100));const n=Ee(u);t=t<n?-n:-Math.ceil(t/n)*n,e+=t,p[0]=`${e}`}if("RUB"===h&&!a)return Te(p[0],null,u||"₽");let g,f=Number(e);if("BYN"===h||"GEL"===h||"USD"===h||"RUB"===h&&a){f=Math.floor(Number(e)),g="00";const t=Number(e).toString().replace(",",".").split(".")[1];(null==t?void 0:t.length)>0&&(g=t.substring(0,2),1==g.length&&(g+="0")),d&&["BYN","USD"].includes(h)&&"00"===g&&(g=""),u="BYN"===h?"р.":"USD"===h?"$":"GEL"===h?"₾":"₽"}else"AMD"!==h&&"KZT"!==h||"string"==typeof e?"UZS"===h?f=100*parseInt(String(Number(e)/100)):"KGS"===h?f=Math.floor(Number(e)):"TJS"===h&&(f=Math.round(100*Number(e))/100):f=10*parseInt(String(Number(e)/10));return Te(f,g,u)}function Le(e,t){return Object.is(e,-0)?"-0":null==e?void 0:e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,t||" ")}function Be(e){return String(e).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1 ")}function $e(e,t={decimals:1,stripTrailingZero:!0}){if(isNaN(parseFloat(String(e)))||!isFinite(Number(e)))return"—";const n=Math.abs(e),r=[""," тыс."," млн"," млрд"," трлн"],s=Math.min(Math.floor(Math.log10(n+.01)/3),r.length-1);if(t.minDegree&&s<t.minDegree)return e.toString();const i=e/10**(3*s);return`${t.stripTrailingZero&&i.toFixedNumber(t.decimals)%1==0?i.toFixed():i.toFixed(t.decimals)}${r[s]}`}function Ne(e,t){if(isNaN(e)||null==e)return null;let n=Math.floor(e);for(;n.toString().length<t;)n="0"+n;return n}function je(e,t){const n=URL.createObjectURL(e),r=document.createElement("a");r.setAttribute("target","_blank"),r.href=n,t&&(r.download=t),document.body.appendChild(r),r.click(),document.body.removeChild(r)}async function Fe(e,t,n,r,s){const i=new File([e],t,{type:n}),o=[i];try{if("m"===window.wb.settings.displayMode&&navigator.canShare({files:o}))return await navigator.share({files:o}),void(null==s||s())}catch(e){window.wb.spa.logError(e,r)}je(i)}function Ue(e,t){return e.toString().formatPhone(t)}const We=(e,t,n,r,s,i,o,a)=>{const l=new URL(`/catalog/${e}/detail.aspx`,window.location.origin);return n&&l.searchParams.set("targetUrl",n),i&&l.searchParams.set("size",String(i)),a&&l.searchParams.set("erid",a),o&&l.searchParams.set("isTrend","true"),r&&(l.hash=r),l.toString()},He=e=>e?String(e).replace(".",","):"",Ve=(e,t)=>32477===e||12399===e||17887===e||23316===e||28906===e||"Brands Seller"===t||"Best Brands"===t||"First Choice"===t||"WILDBERRIES"===t,ze=e=>String(e).replace(/\B(?=(\d{3})+(?!\d))/g," "),qe=e=>e.charAt(0).toUpperCase()+e.slice(1),Ke=(e,t=new Date)=>{const n={days:0,months:0,years:0};if(e==t)return n;if(e>t)return Ke(t,e);if(n.years=t.getFullYear()-e.getFullYear(),n.months=t.getMonth()-e.getMonth(),n.days=t.getDate()-e.getDate(),n.days<0){const t=new Date(e.getFullYear(),e.getMonth()+1,0);n.months--,n.days+=t.getDate()}return n.months<0&&(n.years--,n.months+=12),n},Ge=(e,t=!1,n)=>{if(!e)return"";"string"==typeof e&&(e=new Date(e));const r=fe.plural,s=e=>r("common.time.month_short",{count:e}),i=e=>r("common.time.year",{count:e}),{years:o,months:a,days:l}=Ke(e);let c=(o>0||a>0)&&l>15?a+1:a;return o>0?0==c?i(o):12==c?i(o+1):`${i(o)} ${s(c)}`:a>0?12==c?i(o+1):s(c):null!=n?n:r(t?"common.time.daysGenitive":"common.time.days",{count:l})},Je=(e,t)=>new Date(e).format(t||"dd.MM.yyyy HH:mm"),Ye=(e,t=!1,n=!1)=>{if(!e||"number"!=typeof e)return"";let r;const s=new Date(Date.now()),i=new Date(s.getTime()+60*e*60*1e3);1===i.getDate()&&0===i.getDay()&&!n&&(i.setDate(i.getDate()+1),e+=24);const o=fe.t,a=fe.plural,l=24-s.getHours(),c=i.getHours();return s.getDate()===i.getDate()&&e<24?r=c<9?o("common.todayMorning"):c<23?t?a("common.time.todayTimePeriodHour",e<5?{count:4,displayCount:"1–4"}:{count:e}):a("common.time.timePeriodHour",{count:e}):o("common.tomorrowMorning"):e<l+9?r=o(e<5?"common.tomorrowMorning":"common.tomorrow"):e<24+l?r=o(c<23?"common.tomorrow":"common.dayAfterTomorrow"):e<48+l&&c<23?r=o("common.dayAfterTomorrow"):(c>=23&&(e+=l),r=Je(Date.now()+60*e*60*1e3,"d MMMM")),r},Qe=(e,t,n,r,s=!1,i=!1,o=!1,a=!1,l=!1,c=!1,u=!1)=>{if(!e)return"";const d=!(8&~n);o&&i&&u&&Number(i)>540&&(s="9:00–23:00");if(d){const t=(new Date).daysBetween(e);if(s){const t=Re(e,l);return a?t:`${t}, ${s}`}if(r<5&&0==t)return Ye(r,!0,d)}if(!t){if(s){const t=Re(e,l);return a?t:`${t}, ${s}`}return c?`${(p=e).format("ddd")}, ${Re(p,l,void 0,void 0,!0)}`:Re(e,l)}var p;const h=t instanceof Date?t:new Date;return"number"==typeof t&&(h.setTime(e.getTime()),h.setDate(h.getDate()+t)),1===h.getDate()&&0===h.getDay()&&!d&&h.setDate(h.getDate()+1),e.getMonth()!==h.getMonth()?`${e.format("d MMMM")}-${h.format("d MMMM")}`:`${e.format("d")}-${h.format("d MMMM")}`},Xe=e=>`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`,Ze=(e,t,n)=>{if(!t||!e||!n)return;const r=fe.t,s=fe.plural,i=new Date,o=60*i.getHours()+i.getMinutes(),a=n[0],l=n[1],c=o+60*e,u=t[0].start,d=Xe(u);return o<=a?r("common.todayFrom",{slot:d}):o>=a&&o<=l&&t.some(e=>c<e.start)?s("common.time.timePeriodHour",e<5?{count:4,displayCount:"1–4"}:{count:e}):r("common.tomorrowFrom",{slot:d})},et=(e,t,n)=>{const r=window.wb.global.settings.switches.enableRealtyReservation,s=window.wb.global.settings.switches.enableRealtyReservationForEmployees,i=window.wb.global.settings.mobileAppVariables.objects.realtyRange,o="ru"===window.wb.settings.currentLocale||"ru"===n,a=r&&Me(e,i);return o&&(a||s&&t)};function tt(...e){return e.reduce((e,t)=>e|1<<t,0)}function nt(e){return e instanceof Date&&!isNaN(e.getTime())}function rt(e,t){if(null==t||!t.length||!e)return e;if((null==(t=[].concat(t))?void 0:t.length)>0){const n=(e=e.trim()).toLowerCase();for(let r=0;r<t.length;r++){const s=t[r].toLowerCase(),i=n.indexOf(s+" ",0);0==i&&(e=e.substring(s.length).trim());const o=e.toLowerCase().indexOf(s,e.length-s.length);if(o>0&&(e=e.substring(0,o)),0==i||o>0)return e.trim()}}return e}function st(e,t=!1){return`https://${(0,r.V)().volContentHost(`${e.shard}/${e.uuid}`,t)}/${e.type_id}.pdf`}function it(e,t,n){var r,s;if(null==(s=null==(r=window.wb.global)?void 0:r.settings)||!s.currencies||"RUB"===n||!window.wb.global.settings.currencies[n])return e;const i=e/window.wb.global.settings.currencies[n].rubRate;return t?"AMD"===n||"KZT"===n?10*Math.floor(i/10):"BYN"===n||"GEL"===n||"USD"===n?Math.floor(100*i)/100:"UZS"===n?100*Math.floor(i/100):Math.floor(i):i}function ot(e,t=!1){return`${(0,r.V)().constructHostV2(e,"nm",t)}/info/price-history.json`}function at(e){return`/brands/${encodeURIComponent(e)}`}function lt(e,t=!1){return e?window.wb.global.settings.switches.brandLogoV3?we(`brand-flow-logos/by-id/${e}.webp`,0):we(`sellers/brands/${e}.webp`,1):_e("i/nologo.gif")}function ct(e,t=!1){return`${(0,r.V)().constructHostV2(e,"nm",t)}/info/ru/rich_v1.json`}function ut(e=0,t=!1){if(null==e)return;if(e>86400){const t=Math.ceil(e/86400);return fe.plural("common.time.days",{count:t})}const n=Math.floor(e/3600),r=Math.floor(e%3600/60),s=e%60;return`${n>0||t?`${n<10?"0":""}${n}:`:""}${r<10?"0":""}${r}:${s<10?"0":""}${s}`}function dt(e){return fe.t("common.quantity",{quantity:e})}function pt(e,t,n,r,s,i){s||(s="HH:mm");const o=new Date(e),a=new Date;if(o.toDateString()===a.toDateString())return i?`${n}`:`${n}, ${o.format(s)}`;const l=function(){return this.setDate(this.getDate()-1),this}.call(a);if(o.toDateString()===l.toDateString())return i?`${r}`:`${r}, ${o.format(s)}`;const c=o.format(t);return o.getFullYear()<a.getFullYear()?i?`${c} ${o.getFullYear()}`:`${c} ${o.getFullYear()}, ${o.format(s)}`:i?`${c}`:`${c}, ${o.format(s)}`}},28946:function(e,t,n){"use strict";n.d(t,{a:function(){return i},f:function(){return o}});var r=n(43512);const s="pharmaHelper",i=()=>(0,r.a)(s),o=e=>{(0,r.b)(s,e)}},70311:function(e,t,n){"use strict";n.d(t,{v:function(){return o}});var r=n(43512);class s{get(e){const{nm:t,query:n,url:r}=localStorage.getObject(this.storageKey(e))||{url:[],query:[],nm:[]};return{nm:t.map(e=>e.nmId),query:n,url:r}}getRecentWithTimestamp(e){return localStorage.getObject(this.storageKey(e))||{url:[],query:[],nm:[]}}addProduct(e,t){("number"==typeof e||"string"==typeof e&&!isNaN(Number(e)))&&this.putInStorage("nm",Number(e),100,t)}putInStorage(e,t,n,r){let s=this.getRecentWithTimestamp(r),i={time:parseInt(""+Date.now()/1e3),nmId:t},o=s[e];const a=o.findIndex(e=>e.nmId===i.nmId);0!==a&&(a>0&&o.splice(a,1),o.unshift(i),o.length>n&&(o.length=n),s[e]=o,localStorage.putObject(this.storageKey(r),s))}storageKey(e){return`recentViewsV2-${e}`}static factory(){return new s}}const i="recentViewHelper",o=()=>{let e=(0,r.r)(i);return e||(e=new s,a(e)),e},a=e=>(0,r.b)(i,e)},80781:function(e,t,n){"use strict";n.d(t,{G:function(){return r.g},X:function(){return r.p}});var r=n(98503)},98503:function(e,t,n){"use strict";n.d(t,{H:function(){return m},a:function(){return b},b:function(){return y},c:function(){return g},d:function(){return f},g:function(){return v},h:function(){return h},p:function(){return Ie}});var r=Object.defineProperty,s=Object.defineProperties,i=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(e,t,n)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u=(e,t)=>{for(var n in t||(t={}))a.call(t,n)&&c(e,n,t[n]);if(o)for(var n of o(t))l.call(t,n)&&c(e,n,t[n]);return e},d=(e,t)=>s(e,i(t));const p=e=>{const t=(e=>{const t=`instancer_${e}`;return Symbol.for(t)})(e);return(window||globalThis||{})[t]||null},h=()=>(e=>{const t=p(e);if(!t)throw new Error(`Can't get ${e} instance`);return t})("authService"),m={SUCCESS:200,CREATED:201,ACCEPTED:202,NO_CONTENT:204,BAD_REQUEST:400,UNAUTHORIZED:401,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_ALLOWED:405,CONFLICT:409,TOO_MANY_REQUESTS:429,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,SERVICE_UNAVAILABLE:503,ALREADY_REPORTED:208,INVALID_TOKEN:498},g=["ru-basket-api.wildberries.ru","basket-api.wildberries.by","basket-api.wildberries.kz","basket-api.wildberries.kg","basket-api.wildberries.am","basket-api.wildberries.tj","basket-api.wildberries.ge","basket-api.wildberries.uz","localhost","wbxoofex.wildberries.ru","customs.wb.ru","user-geo-data.wildberries.ru","shopper-bt.wb.ru","webappx-proxy.wbx-site-utility.k8s.stage-xc","wbx-site-utility-ingress-controller.wbx-site-utility.k8s.stage-el","webapp-*.wbx-site.k8s.dev-el","webapp-*.wbx-site.k8s.stage-dm","webapp-*.wbx-site.k8s.prod-el","kg.wildberries.ru","uz.wildberries.ru","global.wildberries.ru","gateway.c2c.k8s.stage-dm","resale-api.wildberries.ru","dfa.wildberries.by","product-insurance.wildberries.ru","paywb.com"],f=["www.wildberries.ru","www.wildberries.by","www.wildberries.kz","www.wildberries.kg","kz.wildberries.ru","www.wildberries.am","www.wildberries.tj","www.wildberries.ge","www.wildberries.uz","www.wildberries.global","ru-basket-api.wildberries.ru","basket-api.wildberries.by","basket-api.wildberries.kz","basket-api.wildberries.kg","basket-api.wildberries.am","basket-api.wildberries.tj","basket-api.wildberries.ge","basket-api.wildberries.uz","localhost","webapp-*.wbx-site.k8s.dev-el","webapp-*.wbx-site.k8s.stage-dm","webapp-*.wbx-site.k8s.prod-el","kg.wildberries.ru","uz.wildberries.ru","global.wildberries.ru","gateway.c2c.k8s.stage-dm","resale-api.wildberries.ru"],b=new RegExp(g.map(e=>e.replace(/\./g,"\\.").replace(/\*/g,".*")).join("|")),y=new RegExp(f.map(e=>e.replace(/\./g,"\\.").replace(/\*/g,".*")).join("|")),v=({url:e,reqBody:t,type:n,appVersion:r,getUserHelper:s,wbSettings:i,getServices:o})=>{var a;const[l,c]=e.split("?"),u=null==c?void 0:c.replace(/^\?/,"").split("&").join("; "),d=null!=(a=s().getLocale())?a:i.currentLocale,p=Date.now(),m=h(),g=o().sessionService;return{url:l,params:u,locale:d,auth:String(m.isAuth),location:null==window?void 0:window.location.href,type:n,source:"site",reqBody:t,headers:{"Wb-AppType":"site","Wb-AppVersion":r,deviceid:g.getSession(),sessionid:m.jwtData.session_id},ts:p}},w="website";function S(e,t){return!e.includes(":")||t.includes(e.split(":")[0])}function _(e){const{frontName:t,key:n,nsFromOptions:r}=e;let s=t===w?[w]:[t,w],i=Array.isArray(n)?n.every(e=>S(e,s)):S(n,s);return{isValid:(!r||s.includes(r))&&i,availableNS:s}}const I=e=>"string"==typeof e,C=()=>{let e,t;const n=new Promise((n,r)=>{e=n,t=r});return n.resolve=e,n.reject=t,n},k=e=>null==e?"":""+e,P=/###/g,E=e=>e&&e.indexOf("###")>-1?e.replace(P,"."):e,T=e=>!e||I(e),O=(e,t,n)=>{const r=I(t)?t.split("."):t;let s=0;for(;s<r.length-1;){if(T(e))return{};const t=E(r[s]);!e[t]&&n&&(e[t]=new n),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++s}return T(e)?{}:{obj:e,k:E(r[s])}},x=(e,t,n)=>{const{obj:r,k:s}=O(e,t,Object);if(void 0!==r||1===t.length)return void(r[s]=n);let i=t[t.length-1],o=t.slice(0,t.length-1),a=O(e,o,Object);for(;void 0===a.obj&&o.length;)i=`${o[o.length-1]}.${i}`,o=o.slice(0,o.length-1),a=O(e,o,Object),null!=a&&a.obj&&typeof a.obj[`${a.k}.${i}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${i}`]=n},M=(e,t)=>{const{obj:n,k:r}=O(e,t);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},A=(e,t,n)=>{for(const r in t)"__proto__"!==r&&"constructor"!==r&&(r in e?I(e[r])||e[r]instanceof String||I(t[r])||t[r]instanceof String?n&&(e[r]=t[r]):A(e[r],t[r],n):e[r]=t[r]);return e},R=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var D={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const L=e=>I(e)?e.replace(/[&<>"'\/]/g,e=>D[e]):e;const B=[" ",",","?","!",";"],$=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}(20),N=(e,t,n=".")=>{if(!e)return;if(e[t])return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0;const r=t.split(n);let s=e;for(let e=0;e<r.length;){if(!s||"object"!=typeof s)return;let t,i="";for(let o=e;o<r.length;++o)if(o!==e&&(i+=n),i+=r[o],t=s[i],void 0!==t){if(["string","number","boolean"].indexOf(typeof t)>-1&&o<r.length-1)continue;e+=o-e+1;break}s=t}return s},j=e=>null==e?void 0:e.replace("_","-"),F={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){var n,r;null==(r=null==(n=null==console?void 0:console[e])?void 0:n.apply)||r.call(n,console,t)}};class U{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||F,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,r){return r&&!this.debug?null:(I(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new U(this.logger,u({prefix:`${this.prefix}:${e}:`},this.options))}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new U(this.logger,e)}}var W=new U;class H{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(e=>{this.observers[e]||(this.observers[e]=new Map);const n=this.observers[e].get(t)||0;this.observers[e].set(t,n+1)}),this}off(e,t){if(this.observers[e]){if(!t)return void delete this.observers[e];this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([e,n])=>{for(let r=0;r<n;r++)e(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([n,r])=>{for(let s=0;s<r;s++)n.apply(n,[e,...t])})}}class V extends H{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n,r={}){var s,i;const o=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,a=void 0!==r.ignoreJSONStructure?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;e.indexOf(".")>-1?l=e.split("."):(l=[e,t],n&&(Array.isArray(n)?l.push(...n):I(n)&&o?l.push(...n.split(o)):l.push(n)));const c=M(this.data,l);return!c&&!t&&!n&&e.indexOf(".")>-1&&(e=l[0],t=l[1],n=l.slice(2).join(".")),!c&&a&&I(n)?N(null==(i=null==(s=this.data)?void 0:s[e])?void 0:i[t],n,o):c}addResource(e,t,n,r,s={silent:!1}){const i=void 0!==s.keySeparator?s.keySeparator:this.options.keySeparator;let o=[e,t];n&&(o=o.concat(i?n.split(i):n)),e.indexOf(".")>-1&&(o=e.split("."),r=t,t=o[1]),this.addNamespaces(t),x(this.data,o,r),s.silent||this.emit("added",e,t,n,r)}addResources(e,t,n,r={silent:!1}){for(const r in n)(I(n[r])||Array.isArray(n[r]))&&this.addResource(e,t,r,n[r],{silent:!0});r.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,r,s,i={silent:!1,skipCopy:!1}){let o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),r=n,n=t,t=o[1]),this.addNamespaces(t);let a=M(this.data,o)||{};i.skipCopy||(n=JSON.parse(JSON.stringify(n))),r?A(a,n,s):a=u(u({},a),n),x(this.data,o,a),i.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(e=>t[e]&&Object.keys(t[e]).length>0)}toJSON(){return this.data}}var z={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,s){return e.forEach(e=>{var i,o;t=null!=(i=null==(o=this.processors[e])?void 0:o.process(t,n,r,s))?i:t}),t}};const q=Symbol("i18next/PATH_KEY");function K(e,t){var n;const{[q]:r}=e(function(){const e=[],t=Object.create(null);let n;return t.get=(r,s)=>{var i;return null==(i=null==n?void 0:n.revoke)||i.call(n),s===q?e:(e.push(s),n=Proxy.revocable(r,t),n.proxy)},Proxy.revocable(Object.create(null),t).proxy}());return r.join(null!=(n=null==t?void 0:t.keySeparator)?n:".")}const G={},J=e=>!I(e)&&"boolean"!=typeof e&&"number"!=typeof e;class Y extends H{constructor(e,t={}){super(),((e,t,n)=>{e.forEach(e=>{t[e]&&(n[e]=t[e])})})(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=W.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const n=u({},t);if(null==e)return!1;const r=this.resolve(e,n);return void 0!==(null==r?void 0:r.res)}extractFromKey(e,t){let n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");const r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let s=t.ns||this.options.defaultNS||[];const i=n&&e.indexOf(n)>-1,o=!(this.options.userDefinedKeySeparator||t.keySeparator||this.options.userDefinedNsSeparator||t.nsSeparator||((e,t,n)=>{t=t||"",n=n||"";const r=B.filter(e=>t.indexOf(e)<0&&n.indexOf(e)<0);if(0===r.length)return!0;const s=$.getRegExp(`(${r.map(e=>"?"===e?"\\?":e).join("|")})`);let i=!s.test(e);if(!i){const t=e.indexOf(n);t>0&&!s.test(e.substring(0,t))&&(i=!0)}return i})(e,n,r));if(i&&!o){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:I(s)?[s]:s};const i=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(i[0])>-1)&&(s=i.shift()),e=i.join(r)}return{key:e,namespaces:I(s)?[s]:s}}translate(e,t,n){let r="object"==typeof t?u({},t):t;if("object"!=typeof r&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),"object"==typeof r&&(r=u({},r)),r||(r={}),null==e)return"";"function"==typeof e&&(e=K(e,u(u({},this.options),r))),Array.isArray(e)||(e=[String(e)]);const s=void 0!==r.returnDetails?r.returnDetails:this.options.returnDetails,i=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,{key:o,namespaces:a}=this.extractFromKey(e[e.length-1],r),l=a[a.length-1];let c=void 0!==r.nsSeparator?r.nsSeparator:this.options.nsSeparator;void 0===c&&(c=":");const p=r.lng||this.language,h=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if("cimode"===(null==p?void 0:p.toLowerCase()))return h?s?{res:`${l}${c}${o}`,usedKey:o,exactUsedKey:o,usedLng:p,usedNS:l,usedParams:this.getUsedParamsDetails(r)}:`${l}${c}${o}`:s?{res:o,usedKey:o,exactUsedKey:o,usedLng:p,usedNS:l,usedParams:this.getUsedParamsDetails(r)}:o;const m=this.resolve(e,r);let g=null==m?void 0:m.res;const f=(null==m?void 0:m.usedKey)||o,b=(null==m?void 0:m.exactUsedKey)||o,y=void 0!==r.joinArrays?r.joinArrays:this.options.joinArrays,v=!this.i18nFormat||this.i18nFormat.handleAsObject,w=void 0!==r.count&&!I(r.count),S=Y.hasDefaultValue(r),_=w?this.pluralResolver.getSuffix(p,r.count,r):"",C=r.ordinal&&w?this.pluralResolver.getSuffix(p,r.count,{ordinal:!1}):"",k=w&&!r.ordinal&&0===r.count,P=k&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${_}`]||r[`defaultValue${C}`]||r.defaultValue;let E=g;v&&!g&&S&&(E=P);const T=J(E),O=Object.prototype.toString.apply(E);if(!(v&&E&&T&&["[object Number]","[object Function]","[object RegExp]"].indexOf(O)<0)||I(y)&&Array.isArray(E))if(v&&I(y)&&Array.isArray(g))g=g.join(y),g&&(g=this.extendTranslation(g,e,r,n));else{let t=!1,s=!1;!this.isValidLookup(g)&&S&&(t=!0,g=P),this.isValidLookup(g)||(s=!0,g=o);const a=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&s?void 0:g,h=S&&P!==g&&this.options.updateMissing;if(s||t||h){if(this.logger.log(h?"updateKey":"missingKey",p,l,o,h?P:g),i){const e=this.resolve(o,d(u({},r),{keySeparator:!1}));e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const t=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if("fallback"===this.options.saveMissingTo&&t&&t[0])for(let n=0;n<t.length;n++)e.push(t[n]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(r.lng||this.language):e.push(r.lng||this.language);const n=(e,t,n)=>{var s;const i=S&&n!==g?n:a;this.options.missingKeyHandler?this.options.missingKeyHandler(e,l,t,i,h,r):null!=(s=this.backendConnector)&&s.saveMissing&&this.backendConnector.saveMissing(e,l,t,i,h,r),this.emit("missingKey",e,l,t,g)};this.options.saveMissing&&(this.options.saveMissingPlurals&&w?e.forEach(e=>{const t=this.pluralResolver.getSuffixes(e,r);k&&r[`defaultValue${this.options.pluralSeparator}zero`]&&t.indexOf(`${this.options.pluralSeparator}zero`)<0&&t.push(`${this.options.pluralSeparator}zero`),t.forEach(t=>{n([e],o+t,r[`defaultValue${t}`]||P)})}):n(e,o,P))}g=this.extendTranslation(g,e,r,m,n),s&&g===o&&this.options.appendNamespaceToMissingKey&&(g=`${l}${c}${o}`),(s||t)&&this.options.parseMissingKeyHandler&&(g=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}${c}${o}`:o,t?g:void 0,r))}else{if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,E,d(u({},r),{ns:a})):`key '${o} (${this.language})' returned an object instead of string.`;return s?(m.res=e,m.usedParams=this.getUsedParamsDetails(r),m):e}if(i){const e=Array.isArray(E),t=e?[]:{},n=e?b:f;for(const e in E)if(Object.prototype.hasOwnProperty.call(E,e)){const s=`${n}${i}${e}`;t[e]=S&&!g?this.translate(s,d(u({},r),{defaultValue:J(P)?P[e]:void 0,joinArrays:!1,ns:a})):this.translate(s,d(u({},r),{joinArrays:!1,ns:a})),t[e]===s&&(t[e]=E[e])}g=t}}return s?(m.res=g,m.usedParams=this.getUsedParamsDetails(r),m):g}extendTranslation(e,t,n,r,s){var i,o;if(null!=(i=this.i18nFormat)&&i.parse)e=this.i18nFormat.parse(e,u(u({},this.options.interpolation.defaultVariables),n),n.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(d(u({},n),{interpolation:u(u({},this.options.interpolation),n.interpolation)}));const i=I(e)&&(void 0!==(null==(o=null==n?void 0:n.interpolation)?void 0:o.skipOnVariables)?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let a;if(i){const t=e.match(this.interpolator.nestingRegexp);a=t&&t.length}let l=n.replace&&!I(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(l=u(u({},this.options.interpolation.defaultVariables),l)),e=this.interpolator.interpolate(e,l,n.lng||this.language||r.usedLng,n),i){const t=e.match(this.interpolator.nestingRegexp);a<(t&&t.length)&&(n.nest=!1)}!n.lng&&r&&r.res&&(n.lng=this.language||r.usedLng),!1!==n.nest&&(e=this.interpolator.nest(e,(...e)=>(null==s?void 0:s[0])!==e[0]||n.context?this.translate(...e,t):(this.logger.warn(`It seems you are nesting recursively key: ${e[0]} in key: ${t[0]}`),null),n)),n.interpolation&&this.interpolator.reset()}const a=n.postProcess||this.options.postProcess,l=I(a)?[a]:a;return null!=e&&null!=l&&l.length&&!1!==n.applyPostProcessor&&(e=z.handle(l,e,t,this.options&&this.options.postProcessPassResolved?u({i18nResolved:d(u({},r),{usedParams:this.getUsedParamsDetails(n)})},n):n,this)),e}resolve(e,t={}){let n,r,s,i,o;return I(e)&&(e=[e]),e.forEach(e=>{if(this.isValidLookup(n))return;const a=this.extractFromKey(e,t),l=a.key;r=l;let c=a.namespaces;this.options.fallbackNS&&(c=c.concat(this.options.fallbackNS));const u=void 0!==t.count&&!I(t.count),d=u&&!t.ordinal&&0===t.count,p=void 0!==t.context&&(I(t.context)||"number"==typeof t.context)&&""!==t.context,h=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);c.forEach(e=>{var a,c;this.isValidLookup(n)||(o=e,!G[`${h[0]}-${e}`]&&null!=(a=this.utils)&&a.hasLoadedNamespace&&!(null!=(c=this.utils)&&c.hasLoadedNamespace(o))&&(G[`${h[0]}-${e}`]=!0,this.logger.warn(`key "${r}" for languages "${h.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),h.forEach(r=>{var o;if(this.isValidLookup(n))return;i=r;const a=[l];if(null!=(o=this.i18nFormat)&&o.addLookupKeys)this.i18nFormat.addLookupKeys(a,l,r,e,t);else{let e;u&&(e=this.pluralResolver.getSuffix(r,t.count,t));const n=`${this.options.pluralSeparator}zero`,s=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(u&&(t.ordinal&&0===e.indexOf(s)&&a.push(l+e.replace(s,this.options.pluralSeparator)),a.push(l+e),d&&a.push(l+n)),p){const r=`${l}${this.options.contextSeparator||"_"}${t.context}`;a.push(r),u&&(t.ordinal&&0===e.indexOf(s)&&a.push(r+e.replace(s,this.options.pluralSeparator)),a.push(r+e),d&&a.push(r+n))}}let c;for(;c=a.pop();)this.isValidLookup(n)||(s=c,n=this.getResource(r,e,c,t))}))})}),{res:n,usedKey:r,exactUsedKey:s,usedLng:i,usedNS:o}}isValidLookup(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}getResource(e,t,n,r={}){var s;return null!=(s=this.i18nFormat)&&s.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!I(e.replace);let r=n?e.replace:e;if(n&&typeof e.count<"u"&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r=u(u({},this.options.interpolation.defaultVariables),r)),!n){r=u({},r);for(const e of t)delete r[e]}return r}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,12)&&void 0!==e[n])return!0;return!1}}class Q{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=W.create("languageUtils")}getScriptPartFromCode(e){if(!(e=j(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length||(t.pop(),"x"===t[t.length-1].toLowerCase())?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(!(e=j(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(I(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch(e){}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(e=>{if(t)return;const n=this.formatLanguageCode(e);(!this.options.supportedLngs||this.isSupportedCode(n))&&(t=n)}),!t&&this.options.supportedLngs&&e.forEach(e=>{if(t)return;const n=this.getScriptPartFromCode(e);if(this.isSupportedCode(n))return t=n;const r=this.getLanguagePartFromCode(e);if(this.isSupportedCode(r))return t=r;t=this.options.supportedLngs.find(e=>e===r?e:e.indexOf("-")<0&&r.indexOf("-")<0||!(e.indexOf("-")>0&&r.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===r||0===e.indexOf(r)&&r.length>1)?void 0:e)}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),I(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes((!1===t?[]:t)||this.options.fallbackLng||[],e),r=[],s=e=>{e&&(this.isSupportedCode(e)?r.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`))};return I(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&s(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&s(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&s(this.getLanguagePartFromCode(e))):I(e)&&s(this.formatLanguageCode(e)),n.forEach(e=>{r.indexOf(e)<0&&s(this.formatLanguageCode(e))}),r}}const X={zero:0,one:1,two:2,few:3,many:4,other:5},Z={select:e=>1===e?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class ee{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=W.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const n=j("dev"===e?"en":e),r=t.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:n,type:r});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let i;try{i=new Intl.PluralRules(n,{type:r})}catch(n){if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Z;if(!e.match(/-|_/))return Z;const r=this.languageUtils.getLanguagePartFromCode(e);i=this.getRule(r,t)}return this.pluralRulesCache[s]=i,i}needsPlural(e,t={}){let n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),(null==n?void 0:n.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t,n={}){return this.getSuffixes(e,n).map(e=>`${t}${e}`)}getSuffixes(e,t={}){let n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),n?n.resolvedOptions().pluralCategories.sort((e,t)=>X[e]-X[t]).map(e=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${e}`):[]}getSuffix(e,t,n={}){const r=this.getRule(e,n);return r?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${r.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,n))}}const te=(e,t,n,r=".",s=!0)=>{let i=((e,t,n)=>{const r=M(e,n);return void 0!==r?r:M(t,n)})(e,t,n);return!i&&s&&I(n)&&(i=N(e,n,r),void 0===i&&(i=N(t,n,r))),i},ne=e=>e.replace(/\$/g,"$$$$");class re{constructor(e={}){var t;this.logger=W.create("interpolator"),this.options=e,this.format=(null==(t=null==e?void 0:e.interpolation)?void 0:t.format)||(e=>e),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:r,prefix:s,prefixEscaped:i,suffix:o,suffixEscaped:a,formatSeparator:l,unescapeSuffix:c,unescapePrefix:u,nestingPrefix:d,nestingPrefixEscaped:p,nestingSuffix:h,nestingSuffixEscaped:m,nestingOptionsSeparator:g,maxReplaces:f,alwaysFormat:b}=e.interpolation;this.escape=void 0!==t?t:L,this.escapeValue=void 0===n||n,this.useRawValueToEscape=void 0!==r&&r,this.prefix=s?R(s):i||"{{",this.suffix=o?R(o):a||"}}",this.formatSeparator=l||",",this.unescapePrefix=c?"":u||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=d?R(d):p||R("$t("),this.nestingSuffix=h?R(h):m||R(")"),this.nestingOptionsSeparator=g||",",this.maxReplaces=f||1e3,this.alwaysFormat=void 0!==b&&b,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>(null==e?void 0:e.source)===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,n,r){var s;let i,o,a;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=e=>{if(e.indexOf(this.formatSeparator)<0){const s=te(t,l,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(s,void 0,n,d(u(u({},r),t),{interpolationkey:e})):s}const s=e.split(this.formatSeparator),i=s.shift().trim(),o=s.join(this.formatSeparator).trim();return this.format(te(t,l,i,this.options.keySeparator,this.options.ignoreJSONStructure),o,n,d(u(u({},r),t),{interpolationkey:i}))};this.resetRegExp();const p=(null==r?void 0:r.missingInterpolationHandler)||this.options.missingInterpolationHandler,h=void 0!==(null==(s=null==r?void 0:r.interpolation)?void 0:s.skipOnVariables)?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>ne(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?ne(this.escape(e)):ne(e)}].forEach(t=>{for(a=0;i=t.regex.exec(e);){const n=i[1].trim();if(o=c(n),void 0===o)if("function"==typeof p){const t=p(e,i,r);o=I(t)?t:""}else if(r&&Object.prototype.hasOwnProperty.call(r,n))o="";else{if(h){o=i[0];continue}this.logger.warn(`missed to pass in variable ${n} for interpolating ${e}`),o=""}else!I(o)&&!this.useRawValueToEscape&&(o=k(o));const s=t.safeValue(o);if(e=e.replace(i[0],s),h?(t.regex.lastIndex+=o.length,t.regex.lastIndex-=i[0].length):t.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,t,n={}){let r,s,i;const o=(e,t)=>{var n;const r=this.nestingOptionsSeparator;if(e.indexOf(r)<0)return e;const s=e.split(new RegExp(`${r}[ ]*{`));let o=`{${s[1]}`;e=s[0],o=this.interpolate(o,i);const a=o.match(/'/g),l=o.match(/"/g);((null!=(n=null==a?void 0:a.length)?n:0)%2==0&&!l||l.length%2!=0)&&(o=o.replace(/'/g,'"'));try{i=JSON.parse(o),t&&(i=u(u({},t),i))}catch(t){return this.logger.warn(`failed parsing options string in nesting for key ${e}`,t),`${e}${r}${o}`}return i.defaultValue&&i.defaultValue.indexOf(this.prefix)>-1&&delete i.defaultValue,e};for(;r=this.nestingRegexp.exec(e);){let a=[];i=u({},n),i=i.replace&&!I(i.replace)?i.replace:i,i.applyPostProcessor=!1,delete i.defaultValue;const l=/{.*}/.test(r[1])?r[1].lastIndexOf("}")+1:r[1].indexOf(this.formatSeparator);if(-1!==l&&(a=r[1].slice(l).split(this.formatSeparator).map(e=>e.trim()).filter(Boolean),r[1]=r[1].slice(0,l)),s=t(o.call(this,r[1].trim(),i),i),s&&r[0]===e&&!I(s))return s;I(s)||(s=k(s)),s||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${e}`),s=""),a.length&&(s=a.reduce((e,t)=>this.format(e,t,n.lng,d(u({},n),{interpolationkey:r[1].trim()})),s.trim())),e=e.replace(r[0],s),this.regexp.lastIndex=0}return e}}const se=e=>{const t={};return(n,r,s)=>{let i=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(i=d(u({},i),{[s.interpolationkey]:void 0}));const o=r+JSON.stringify(i);let a=t[o];return a||(a=e(j(r),s),t[o]=a),a(n)}},ie=e=>(t,n,r)=>e(j(n),r)(t);class oe{constructor(e={}){this.logger=W.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const n=t.cacheInBuiltFormats?se:ie;this.formats={number:n((e,t)=>{const n=new Intl.NumberFormat(e,u({},t));return e=>n.format(e)}),currency:n((e,t)=>{const n=new Intl.NumberFormat(e,d(u({},t),{style:"currency"}));return e=>n.format(e)}),datetime:n((e,t)=>{const n=new Intl.DateTimeFormat(e,u({},t));return e=>n.format(e)}),relativetime:n((e,t)=>{const n=new Intl.RelativeTimeFormat(e,u({},t));return e=>n.format(e,t.range||"day")}),list:n((e,t)=>{const n=new Intl.ListFormat(e,u({},t));return e=>n.format(e)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=se(t)}format(e,t,n,r={}){const s=t.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(e=>e.indexOf(")")>-1)){const e=s.findIndex(e=>e.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,e)].join(this.formatSeparator)}return s.reduce((e,t)=>{var s;const{formatName:i,formatOptions:o}=(e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const s=r[1].substring(0,r[1].length-1);"currency"===t&&s.indexOf(":")<0?n.currency||(n.currency=s.trim()):"relativetime"===t&&s.indexOf(":")<0?n.range||(n.range=s.trim()):s.split(";").forEach(e=>{if(e){const[t,...r]=e.split(":"),s=r.join(":").trim().replace(/^'+|'+$/g,""),i=t.trim();n[i]||(n[i]=s),"false"===s&&(n[i]=!1),"true"===s&&(n[i]=!0),isNaN(s)||(n[i]=parseInt(s,10))}})}return{formatName:t,formatOptions:n}})(t);if(this.formats[i]){let t=e;try{const a=(null==(s=null==r?void 0:r.formatParams)?void 0:s[r.interpolationkey])||{},l=a.locale||a.lng||r.locale||r.lng||n;t=this.formats[i](e,l,u(u(u({},o),r),a))}catch(e){this.logger.warn(e)}return t}return this.logger.warn(`there was no format function for ${i}`),e},e)}}class ae extends H{constructor(e,t,n,r={}){var s,i;super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=r,this.logger=W.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],null==(i=null==(s=this.backend)?void 0:s.init)||i.call(s,n,r.backend,r)}queueLoad(e,t,n,r){const s={},i={},o={},a={};return e.forEach(e=>{let r=!0;t.forEach(t=>{const o=`${e}|${t}`;!n.reload&&this.store.hasResourceBundle(e,t)?this.state[o]=2:this.state[o]<0||(1===this.state[o]?void 0===i[o]&&(i[o]=!0):(this.state[o]=1,r=!1,void 0===i[o]&&(i[o]=!0),void 0===s[o]&&(s[o]=!0),void 0===a[t]&&(a[t]=!0)))}),r||(o[e]=!0)}),(Object.keys(s).length||Object.keys(i).length)&&this.queue.push({pending:i,pendingCount:Object.keys(i).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(s),pending:Object.keys(i),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(a)}}loaded(e,t,n){const r=e.split("|"),s=r[0],i=r[1];t&&this.emit("failedLoading",s,i,t),!t&&n&&this.store.addResourceBundle(s,i,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const o={};this.queue.forEach(n=>{((e,t,n)=>{const{obj:r,k:s}=O(e,t,Object);r[s]=r[s]||[],r[s].push(n)})(n.loaded,[s],i),((e,t)=>{void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)})(n,e),t&&n.errors.push(t),0===n.pendingCount&&!n.done&&(Object.keys(n.loaded).forEach(e=>{o[e]||(o[e]={});const t=n.loaded[e];t.length&&t.forEach(t=>{void 0===o[e][t]&&(o[e][t]=!0)})}),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(e=>!e.done)}read(e,t,n,r=0,s=this.retryTimeout,i){if(!e.length)return i(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:n,tried:r,wait:s,callback:i});this.readingCalls++;const o=(o,a)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}o&&a&&r<this.maxRetries?setTimeout(()=>{this.read.call(this,e,t,n,r+1,2*s,i)},s):i(o,a)},a=this.backend[n].bind(this.backend);if(2!==a.length)return a(e,t,o);try{const n=a(e,t);n&&"function"==typeof n.then?n.then(e=>o(null,e)).catch(o):o(null,n)}catch(e){o(e)}}prepareLoading(e,t,n={},r){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();I(e)&&(e=this.languageUtils.toResolveHierarchy(e)),I(t)&&(t=[t]);const s=this.queueLoad(e,t,n,r);if(!s.toLoad.length)return s.pending.length||r(),null;s.toLoad.forEach(e=>{this.loadOne(e)})}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e,t=""){const n=e.split("|"),r=n[0],s=n[1];this.read(r,s,"read",void 0,void 0,(n,i)=>{n&&this.logger.warn(`${t}loading namespace ${s} for language ${r} failed`,n),!n&&i&&this.logger.log(`${t}loaded namespace ${s} for language ${r}`,i),this.loaded(e,n,i)})}saveMissing(e,t,n,r,s,i={},o=()=>{}){var a,l,c,p,h;if(null==(l=null==(a=this.services)?void 0:a.utils)||!l.hasLoadedNamespace||null!=(p=null==(c=this.services)?void 0:c.utils)&&p.hasLoadedNamespace(t)){if(null!=n&&""!==n){if(null!=(h=this.backend)&&h.create){const a=d(u({},i),{isUpdate:s}),l=this.backend.create.bind(this.backend);if(l.length<6)try{let s;s=5===l.length?l(e,t,n,r,a):l(e,t,n,r),s&&"function"==typeof s.then?s.then(e=>o(null,e)).catch(o):o(null,s)}catch(e){o(e)}else l(e,t,n,r,o,a)}!e||!e[0]||this.store.addResource(e[0],t,n,r)}}else this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")}}const le=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if("object"==typeof e[1]&&(t=e[1]),I(e[1])&&(t.defaultValue=e[1]),I(e[2])&&(t.tDescription=e[2]),"object"==typeof e[2]||"object"==typeof e[3]){const n=e[3]||e[2];Object.keys(n).forEach(e=>{t[e]=n[e]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),ce=e=>{var t,n;return I(e.ns)&&(e.ns=[e.ns]),I(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),I(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),(null==(n=null==(t=e.supportedLngs)?void 0:t.indexOf)?void 0:n.call(t,"cimode"))<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),"boolean"==typeof e.initImmediate&&(e.initAsync=e.initImmediate),e},ue=()=>{};class de extends H{constructor(e={},t){if(super(),this.options=ce(e),this.services={},this.logger=W,this.modules={external:[]},n=this,Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(e=>{"function"==typeof n[e]&&(n[e]=n[e].bind(n))}),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}var n}init(e={},t){this.isInitializing=!0,"function"==typeof e&&(t=e,e={}),null==e.defaultNS&&e.ns&&(I(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const n=le();this.options=u(u(u({},n),this.options),ce(e)),this.options.interpolation=u(u({},n.interpolation),this.options.interpolation),void 0!==e.keySeparator&&(this.options.userDefinedKeySeparator=e.keySeparator),void 0!==e.nsSeparator&&(this.options.userDefinedNsSeparator=e.nsSeparator);const r=e=>e?"function"==typeof e?new e:e:null;if(!this.options.isClone){let e;this.modules.logger?W.init(r(this.modules.logger),this.options):W.init(null,this.options),e=this.modules.formatter?this.modules.formatter:oe;const t=new Q(this.options);this.store=new V(this.options.resources,this.options);const s=this.services;s.logger=W,s.resourceStore=this.store,s.languageUtils=t,s.pluralResolver=new ee(t,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),e&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(s.formatter=r(e),s.formatter.init&&s.formatter.init(s,this.options),this.options.interpolation.format=s.formatter.format.bind(s.formatter)),s.interpolator=new re(this.options),s.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},s.backendConnector=new ae(r(this.modules.backend),s.resourceStore,s,this.options),s.backendConnector.on("*",(e,...t)=>{this.emit(e,...t)}),this.modules.languageDetector&&(s.languageDetector=r(this.modules.languageDetector),s.languageDetector.init&&s.languageDetector.init(s,this.options.detection,this.options)),this.modules.i18nFormat&&(s.i18nFormat=r(this.modules.i18nFormat),s.i18nFormat.init&&s.i18nFormat.init(this)),this.translator=new Y(this.services,this.options),this.translator.on("*",(e,...t)=>{this.emit(e,...t)}),this.modules.external.forEach(e=>{e.init&&e.init(this)})}if(this.format=this.options.interpolation.format,t||(t=ue),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(e=>{this[e]=(...t)=>this.store[e](...t)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(e=>{this[e]=(...t)=>(this.store[e](...t),this)});const s=C(),i=()=>{const e=(e,n)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),s.resolve(n),t(e,n)};if(this.languages&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initAsync?i():setTimeout(i,0),s}loadResources(e,t=ue){var n,r;let s=t;const i=I(e)?e:this.language;if("function"==typeof e&&(s=e),!this.options.resources||this.options.partialBundledLanguages){if("cimode"===(null==i?void 0:i.toLowerCase())&&(!this.options.preload||0===this.options.preload.length))return s();const e=[],t=t=>{t&&"cimode"!==t&&this.services.languageUtils.toResolveHierarchy(t).forEach(t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)})};i?t(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(e=>t(e)),null==(r=null==(n=this.options.preload)?void 0:n.forEach)||r.call(n,e=>t(e)),this.services.backendConnector.load(e,this.options.ns,e=>{!e&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),s(e)})}else s(null)}reloadResources(e,t,n){const r=C();return"function"==typeof e&&(n=e,e=void 0),"function"==typeof t&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=ue),this.services.backendConnector.reload(e,t,e=>{r.resolve(),n(e)}),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&z.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1)){for(let e=0;e<this.languages.length;e++){const t=this.languages[e];if(!(["cimode","dev"].indexOf(t)>-1)&&this.store.hasLanguageSomeTranslations(t)){this.resolvedLanguage=t;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const n=C();this.emit("languageChanging",e);const r=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},s=(s,i)=>{i?this.isLanguageChangingTo===e&&(r(i),this.translator.changeLanguage(i),this.isLanguageChangingTo=void 0,this.emit("languageChanged",i),this.logger.log("languageChanged",i)):this.isLanguageChangingTo=void 0,n.resolve((...e)=>this.t(...e)),t&&t(s,(...e)=>this.t(...e))},i=t=>{var n,i;!e&&!t&&this.services.languageDetector&&(t=[]);const o=I(t)?t:t&&t[0],a=this.store.hasLanguageSomeTranslations(o)?o:this.services.languageUtils.getBestMatchFromCodes(I(t)?[t]:t);a&&(this.language||r(a),this.translator.language||this.translator.changeLanguage(a),null==(i=null==(n=this.services.languageDetector)?void 0:n.cacheUserLanguage)||i.call(n,a)),this.loadResources(a,e=>{s(e,a)})};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(i):this.services.languageDetector.detect(i):i(e):i(this.services.languageDetector.detect()),n}getFixedT(e,t,n){const r=(e,t,...s)=>{let i;i="object"!=typeof t?this.options.overloadTranslationOptionHandler([e,t].concat(s)):u({},t),i.lng=i.lng||r.lng,i.lngs=i.lngs||r.lngs,i.ns=i.ns||r.ns,""!==i.keyPrefix&&(i.keyPrefix=i.keyPrefix||n||r.keyPrefix);const o=this.options.keySeparator||".";let a;return i.keyPrefix&&Array.isArray(e)?a=e.map(e=>("function"==typeof e&&(e=K(e,u(u({},this.options),t))),`${i.keyPrefix}${o}${e}`)):("function"==typeof e&&(e=K(e,u(u({},this.options),t))),a=i.keyPrefix?`${i.keyPrefix}${o}${e}`:e),this.t(a,i)};return I(e)?r.lng=e:r.lngs=e,r.ns=t,r.keyPrefix=n,r}t(...e){var t;return null==(t=this.translator)?void 0:t.translate(...e)}exists(...e){var t;return null==(t=this.translator)?void 0:t.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],r=!!this.options&&this.options.fallbackLng,s=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;const i=(e,t)=>{const n=this.services.backendConnector.state[`${e}|${t}`];return-1===n||0===n||2===n};if(t.precheck){const e=t.precheck(this,i);if(void 0!==e)return e}return!!(this.hasResourceBundle(n,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||i(n,e)&&(!r||i(s,e)))}loadNamespaces(e,t){const n=C();return this.options.ns?(I(e)&&(e=[e]),e.forEach(e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}),this.loadResources(e=>{n.resolve(),t&&t(e)}),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=C();I(e)&&(e=[e]);const r=this.options.preload||[],s=e.filter(e=>r.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e));return s.length?(this.options.preload=r.concat(s),this.loadResources(e=>{n.resolve(),t&&t(e)}),n):(t&&t(),Promise.resolve())}dir(e){var t,n;if(e||(e=this.resolvedLanguage||((null==(t=this.languages)?void 0:t.length)>0?this.languages[0]:this.language)),!e)return"rtl";try{const t=new Intl.Locale(e);if(t&&t.getTextInfo){const e=t.getTextInfo();if(e&&e.direction)return e.direction}}catch(e){}const r=(null==(n=this.services)?void 0:n.languageUtils)||new Q(le());return e.toLowerCase().indexOf("-latn")>1?"ltr":["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){return new de(e,t)}cloneInstance(e={},t=ue){const n=e.forkResourceStore;n&&delete e.forkResourceStore;const r=d(u(u({},this.options),e),{isClone:!0}),s=new de(r);if((void 0!==e.debug||void 0!==e.prefix)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(e=>{s[e]=this[e]}),s.services=u({},this.services),s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},n){const e=Object.keys(this.store.data).reduce((e,t)=>(e[t]=u({},this.store.data[t]),e[t]=Object.keys(e[t]).reduce((n,r)=>(n[r]=u({},e[t][r]),n),e[t]),e),{});s.store=new V(e,r),s.services.resourceStore=s.store}return s.translator=new Y(s.services,r),s.translator.on("*",(e,...t)=>{s.emit(e,...t)}),s.init(r,t),s.translator.options=r,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const pe=de.createInstance();pe.createInstance=de.createInstance,pe.createInstance,pe.dir,pe.init,pe.loadResources,pe.reloadResources,pe.use,pe.changeLanguage,pe.getFixedT,pe.t,pe.exists,pe.setDefaultNamespace,pe.hasLoadedNamespace,pe.loadNamespaces,pe.loadLanguages;var he=Object.defineProperty,me=(e,t,n)=>((e,t,n)=>t in e?he(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);const ge=()=>window||globalThis||{},fe=e=>{const t=`instancer_${e}`;return Symbol.for(t)},be={fallbackLng:"ru",debug:"true"===localStorage.getItem("i18n_debug"),fallbackNS:!1,saveMissing:!0,missingKeyHandler:(e,t,n,r,s,i)=>((!i||!i.ignoreMissingKey)&&console.warn("i18next missingKey: "+n),n)};class ye{constructor(){var e;me(this,"instance"),me(this,"language"),me(this,"remoteMfeImports"),this.remoteMfeImports={},this.language=(null==(e=window.wb)?void 0:e.currentLanguage)||"ru"}getUtils(e){return{t:(t,n={})=>{if(!this.instance)throw new Error("instance ещё не инициализирован");const{isValid:r,availableNS:s}=_({frontName:e,key:t,nsFromOptions:null==n?void 0:n.ns});return r||console.error(`Ключ "${t}" использует NS другого микрофронта, разрешенные NS: [${s}]`),this.instance.t(t,d(u({},n),{ns:e}))},plural:(t,n)=>{const r=n,{count:s,displayCount:i}=r,c=((e,t)=>{var n={};for(var r in e)a.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&o)for(var r of o(e))t.indexOf(r)<0&&l.call(e,r)&&(n[r]=e[r]);return n})(r,["count","displayCount"]);if(!this.instance)throw new Error("instance ещё не инициализирован");const{isValid:p,availableNS:h}=_({frontName:e,key:t,nsFromOptions:null==n?void 0:n.ns});return p||console.error(`Ключ "${t}" использует NS другого микрофронта, разрешенные NS: [${h}]`),this.instance.t(`${t}.plural`,d(u({count:s||0,displayCount:i||s||0,interpolation:{escapeValue:!i}},c),{ns:e}))},getLanguage:()=>this.language,changeLang:e=>{localStorage.setItem("wb__lang",e),window.wb.currentLanguage=e,location.reload()}}}getI18nInstance(){return this.instance}registerRemoteMfeImports(e){this.remoteMfeImports=e}async createI18nInstance(e){if(this.instance)return this.instance;const{initReactI18next:t}=await Promise.all([n.e(25020),n.e(25207)]).then(n.bind(n,25207));this.instance=pe.createInstance();const{hostName:r,options:s,lazyForeignTranslations:i}=e;return await this.instance.use(t).init(u(u({lng:this.language},be),s)),await this._loadTranslationsModule(this.instance,r,i),this.instance}async loadRemoteResourcesAsync(e){try{if(!this.instance)throw new Error("instance ещё не инициализирован");if(this.instance.hasResourceBundle(this.language,e))return;const{ru:t,lazyForeignTranslations:n}=await this._loadRemoteResoucesAsync(e);this.instance.addResourceBundle("ru",e,t),await this._loadTranslationsModule(this.instance,e,n)}catch(e){console.error("loadRemoteResourcesAsync = ",e)}}async _loadTranslationsModule(e,t,n){try{const r=this.language;if("ru"!==r){const s=new Promise((e,t)=>setTimeout(()=>t(new Error("загрузка перевода превысила 15 секунд")),15e3)),i=(0,n[r])(),o=await Promise.race([i,s]);o&&e.addResourceBundle(r,t,o.default)}}catch(e){console.error("Translation loading error:",e)}}async _loadRemoteResoucesAsync(e){const t=this.remoteMfeImports[e];if(!t)throw new Error(`Не найден ${e}, добавьте в REMOTE_I18N_RESOURCES_IMPORT`);return(await t()).default}}const ve="i18nService",we=()=>{let e=(e=>{const t=fe(e);return ge()[t]||null})(ve);return e||(e=new ye,Se(e)),e},Se=e=>{((e,t)=>{const n=fe(e);ge()[n]=t})(ve,e)},_e=d(u({},we().getUtils("website")),{getInstance:()=>we().getI18nInstance()});function Ie({wb:e,getWbSpa:t}){return function(n,r,s,i){if(null==n)return!1;const o=n.resultState,a=n.value;if(-1===o){const t=n.value||_e.t("common.errors.serverError");return"boolean"==typeof s?(s&&e.popup.renderModalError(t),!0):(null!=s&&null!=a?s(a):null!=a&&window.alert(String(a)),!0)}if(0===o)return null!=r&&(r(a),!0);if(1===o)return window.location.href=String(a),!0;if(2===o||4===o){if(4===o&&t())return t().refresh(),!0;let e=window.location.href;const n=e.indexOf("#");return-1!==n&&(e=e.substr(0,n)),null!=a?(window.location.href=e+a,window.location.reload()):window.location.href=e,!0}if(3===o){const e=a;if(null!=e&&e.url){if(t()){const n=e.url.indexOf("?")>-1?e.url:e.url+window.location.search,r=new URL(decodeURIComponent(n),window.location.origin);return e.redirect=!0,null==i||i(e),t().redirect(r.href,e.replaceState,e.forceUpdate),!0}return window.location.href=e.url,!0}}return!0}}},20166:function(e,t,n){"use strict";n.d(t,{C:function(){return je},H:function(){return He},K:function(){return $e},N:function(){return Fe},O:function(){return Le},T:function(){return Ue},U:function(){return Ne},a:function(){return De},b:function(){return We},g:function(){return ze},o:function(){return xe},s:function(){return qe},t:function(){return Oe}});var r=n(98503),s=Object.defineProperty,i=Object.defineProperties,o=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,u=(e,t,n)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,d=(e,t)=>{for(var n in t||(t={}))l.call(t,n)&&u(e,n,t[n]);if(a)for(var n of a(t))c.call(t,n)&&u(e,n,t[n]);return e},p=(e,t)=>i(e,o(t)),h=(e,t)=>{var n={};for(var r in e)l.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&a)for(var r of a(e))t.indexOf(r)<0&&c.call(e,r)&&(n[r]=e[r]);return n},m=Object.defineProperty,g=(e,t,n)=>((e,t,n)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);const f=()=>window||globalThis||{},b=e=>{const t=`instancer_${e}`;return Symbol.for(t)},y=e=>{const t=(e=>{const t=b(e);return f()[t]||null})(e);if(!t)throw new Error(`Can't get ${e} instance`);return t},v=()=>window||globalThis||{},w=e=>{const t=`instancer_${e}`;return Symbol.for(t)};var S=Object.defineProperty,_=(e,t,n)=>((e,t,n)=>t in e?S(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class I{constructor(){_(this,"volHostV2Cdn"),_(this,"volFeedbackPhotoHostCdn"),_(this,"volFeedbackPhotoUuidHostCdn"),_(this,"volFeedbackVideoHostCdn"),_(this,"volVideoHostCdn"),_(this,"volContentHostCdn"),_(this,"volStaticHostCdn")}setImgFunc(e,t){if("function"==typeof t)switch(e){case"mediabasket_route_map":this.volHostV2Cdn=t;break;case"feedback_route_map":this.volFeedbackPhotoHostCdn=t;break;case"content_uuid_route_map":this.volContentHostCdn=t;break;case"videonme_route_map":this.volVideoHostCdn=t;break;case"staticbasket_route_map":this.volStaticHostCdn=t;break;case"videofeedback_uuid_route_map":this.volFeedbackVideoHostCdn=t;break;case"feedback_uuid_route_map":this.volFeedbackPhotoUuidHostCdn=t}}volStaticHost(e,t=!1){if(this.volStaticHostCdn){const n=this.volStaticHostCdn(e,t);if(n)return n}let n;const r=e;switch(!0){case r>=0&&r<=4:n="01";break;case r>=20&&r<=35:n="02";break;case r>=40&&r<=54:n="03";break;case r>=70&&r<=113:n="04";break;case r>=114&&r<=125:n="05";break;case r>=126&&r<=137:n="06";break;case r>=138&&r<=149:n="07";break;default:n="08"}return`static-basket-${n}.wbbasket.ru/vol${r}`}volHostV2(e,t=!1){if(this.volHostV2Cdn){const n=this.volHostV2Cdn(e,t);if(n)return n}let n;const r=~~(e/1e5);switch(!0){case r>=0&&r<=143:n="01";break;case r<=287:n="02";break;case r<=431:n="03";break;case r<=719:n="04";break;case r<=1007:n="05";break;case r<=1061:n="06";break;case r<=1115:n="07";break;case r<=1169:n="08";break;case r<=1313:n="09";break;case r<=1601:n="10";break;case r<=1655:n="11";break;case r<=1919:n="12";break;case r<=2045:n="13";break;case r<=2189:n="14";break;case r<=2405:n="15";break;case r<=2621:n="16";break;case r<=2837:n="17";break;case r<=3053:n="18";break;case r<=3269:n="19";break;case r<=3485:n="20";break;case r<=3701:n="21";break;case r<=3917:n="22";break;case r<=4133:n="23";break;case r<=4349:n="24";break;case r<=4565:n="25";break;case r<=4877:n="26";break;case r<=5189:n="27";break;case r<=5501:n="28";break;case r<=5813:n="29";break;case r<=6125:n="30";break;case r<=6437:n="31";break;default:n="32"}return`basket-${n}.wbbasket.ru/vol${r}`}volFeedbackPhotoHost(e,t=!1){if(this.volFeedbackPhotoHostCdn){const n=this.volFeedbackPhotoHostCdn(e,t);if(n)return n}let n;const r=~~(e/1e5);switch(!0){case r>=0&&r<=431:n="01";break;case r<=863:n="02";break;case r<=1199:n="03";break;case r<=1535:n="04";break;case r<=1919:n="05";break;case r<=2303:n="06";break;case r<=2687:n="07";break;case r<=3071:n="08";break;case r<=3455:n="09";break;case r<=3839:n="10";break;default:n="11"}return`feedback${n}.wbbasket.ru/vol${r}`}volFeedbackPhotoUuidHost(e,t=!1){if(this.volFeedbackPhotoUuidHostCdn){const n=this.volFeedbackPhotoUuidHostCdn(e,t);if(n)return n}const[n,r]=null==e?void 0:e.split("/");return`feedback-${("00"+n).slice(-2)}.wbbasket.ru/${r}`}volFeedbackVideoHost(e,t=!1){if(this.volFeedbackVideoHostCdn){const n=this.volFeedbackVideoHostCdn(e,t);if(n)return n}const[n,r]=null==e?void 0:e.split("/");return`videofeedback${("00"+n).slice(-2)}.wbbasket.ru/${r}`}volVideoHost(e,t=!1){if(this.volVideoHostCdn){const n=this.volVideoHostCdn(e,t);if(n)return n}let n;const r=e%144;switch(!0){case r>=0&&r<=11:n="01";break;case r<=23:n="02";break;case r<=35:n="03";break;case r<=47:n="04";break;case r<=59:n="05";break;case r<=71:n="06";break;case r<=83:n="07";break;case r<=95:n="08";break;case r<=107:n="09";break;case r<=119:n="10";break;case r<=131:n="11";break;case r<=143:n="12";break;default:n="13"}return`videonme-basket-${n}.wbbasket.ru/vol${r}`}volContentHost(e,t=!1){if(this.volContentHostCdn){const n=this.volContentHostCdn(e,t);if(n)return n}const[n,r]=null==e?void 0:e.split("/");return`content-${`00${n}`.slice(-2)}.wbbasket.ru/${r}`}constructHostV2(e,t="nm",n=!1){const r=parseInt(String(e),10),s="video"===t?~~(r/1e4):~~(r/1e3);let i="";return"nm"===t?i=this.volHostV2(r,n):"feedbackPhoto"===t?i=this.volFeedbackPhotoHost(r,n):"video"===t&&(i=this.volVideoHost(r,n)),`https://${i}/part${s}/${r}`}}const C="ImgServer",k=()=>{let e=(e=>{const t=w(e);return v()[t]||null})(C);return e||(e=new I,P(e)),e},P=e=>{((e,t)=>{const n=w(e);v()[n]=t})(C,e)};BigInt(1),BigInt(2),BigInt(4),BigInt(8),BigInt(16),BigInt(32),BigInt(64),BigInt(128),BigInt(256),BigInt(512),BigInt(1024),BigInt(2048),BigInt(4096),BigInt(8192),BigInt(2),BigInt(4),BigInt(8),BigInt(16),BigInt(32),BigInt(64),BigInt(128),BigInt(256),BigInt(512),BigInt(1024),BigInt(2048),BigInt(4096),BigInt(8192),BigInt(16384),BigInt(32768),BigInt(65536),BigInt(1<<17),BigInt(1<<22),BigInt(1<<23),BigInt(1<<24),BigInt(1<<25),BigInt(1<<26),BigInt(1<<27),BigInt(1<<28),BigInt(2),BigInt(4),BigInt(8),BigInt(16),BigInt(32);const E="website";function T(e,t){return!e.includes(":")||t.includes(e.split(":")[0])}function O(e){const{frontName:t,key:n,nsFromOptions:r}=e;let s=t===E?[E]:[t,E],i=Array.isArray(n)?n.every(e=>T(e,s)):T(n,s);return{isValid:(!r||s.includes(r))&&i,availableNS:s}}const x=e=>"string"==typeof e,M=()=>{let e,t;const n=new Promise((n,r)=>{e=n,t=r});return n.resolve=e,n.reject=t,n},A=e=>null==e?"":""+e,R=/###/g,D=e=>e&&e.indexOf("###")>-1?e.replace(R,"."):e,L=e=>!e||x(e),B=(e,t,n)=>{const r=x(t)?t.split("."):t;let s=0;for(;s<r.length-1;){if(L(e))return{};const t=D(r[s]);!e[t]&&n&&(e[t]=new n),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++s}return L(e)?{}:{obj:e,k:D(r[s])}},$=(e,t,n)=>{const{obj:r,k:s}=B(e,t,Object);if(void 0!==r||1===t.length)return void(r[s]=n);let i=t[t.length-1],o=t.slice(0,t.length-1),a=B(e,o,Object);for(;void 0===a.obj&&o.length;)i=`${o[o.length-1]}.${i}`,o=o.slice(0,o.length-1),a=B(e,o,Object),null!=a&&a.obj&&typeof a.obj[`${a.k}.${i}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${i}`]=n},N=(e,t)=>{const{obj:n,k:r}=B(e,t);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},j=(e,t,n)=>{for(const r in t)"__proto__"!==r&&"constructor"!==r&&(r in e?x(e[r])||e[r]instanceof String||x(t[r])||t[r]instanceof String?n&&(e[r]=t[r]):j(e[r],t[r],n):e[r]=t[r]);return e},F=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var U={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const W=e=>x(e)?e.replace(/[&<>"'\/]/g,e=>U[e]):e;const H=[" ",",","?","!",";"],V=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}(20),z=(e,t,n=".")=>{if(!e)return;if(e[t])return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0;const r=t.split(n);let s=e;for(let e=0;e<r.length;){if(!s||"object"!=typeof s)return;let t,i="";for(let o=e;o<r.length;++o)if(o!==e&&(i+=n),i+=r[o],t=s[i],void 0!==t){if(["string","number","boolean"].indexOf(typeof t)>-1&&o<r.length-1)continue;e+=o-e+1;break}s=t}return s},q=e=>null==e?void 0:e.replace("_","-"),K={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){var n,r;null==(r=null==(n=null==console?void 0:console[e])?void 0:n.apply)||r.call(n,console,t)}};class G{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||K,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,r){return r&&!this.debug?null:(x(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new G(this.logger,d({prefix:`${this.prefix}:${e}:`},this.options))}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new G(this.logger,e)}}var J=new G;class Y{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(e=>{this.observers[e]||(this.observers[e]=new Map);const n=this.observers[e].get(t)||0;this.observers[e].set(t,n+1)}),this}off(e,t){if(this.observers[e]){if(!t)return void delete this.observers[e];this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([e,n])=>{for(let r=0;r<n;r++)e(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([n,r])=>{for(let s=0;s<r;s++)n.apply(n,[e,...t])})}}class Q extends Y{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n,r={}){var s,i;const o=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,a=void 0!==r.ignoreJSONStructure?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;e.indexOf(".")>-1?l=e.split("."):(l=[e,t],n&&(Array.isArray(n)?l.push(...n):x(n)&&o?l.push(...n.split(o)):l.push(n)));const c=N(this.data,l);return!c&&!t&&!n&&e.indexOf(".")>-1&&(e=l[0],t=l[1],n=l.slice(2).join(".")),!c&&a&&x(n)?z(null==(i=null==(s=this.data)?void 0:s[e])?void 0:i[t],n,o):c}addResource(e,t,n,r,s={silent:!1}){const i=void 0!==s.keySeparator?s.keySeparator:this.options.keySeparator;let o=[e,t];n&&(o=o.concat(i?n.split(i):n)),e.indexOf(".")>-1&&(o=e.split("."),r=t,t=o[1]),this.addNamespaces(t),$(this.data,o,r),s.silent||this.emit("added",e,t,n,r)}addResources(e,t,n,r={silent:!1}){for(const r in n)(x(n[r])||Array.isArray(n[r]))&&this.addResource(e,t,r,n[r],{silent:!0});r.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,r,s,i={silent:!1,skipCopy:!1}){let o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),r=n,n=t,t=o[1]),this.addNamespaces(t);let a=N(this.data,o)||{};i.skipCopy||(n=JSON.parse(JSON.stringify(n))),r?j(a,n,s):a=d(d({},a),n),$(this.data,o,a),i.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(e=>t[e]&&Object.keys(t[e]).length>0)}toJSON(){return this.data}}var X={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,s){return e.forEach(e=>{var i,o;t=null!=(i=null==(o=this.processors[e])?void 0:o.process(t,n,r,s))?i:t}),t}};const Z=Symbol("i18next/PATH_KEY");function ee(e,t){var n;const{[Z]:r}=e(function(){const e=[],t=Object.create(null);let n;return t.get=(r,s)=>{var i;return null==(i=null==n?void 0:n.revoke)||i.call(n),s===Z?e:(e.push(s),n=Proxy.revocable(r,t),n.proxy)},Proxy.revocable(Object.create(null),t).proxy}());return r.join(null!=(n=null==t?void 0:t.keySeparator)?n:".")}const te={},ne=e=>!x(e)&&"boolean"!=typeof e&&"number"!=typeof e;class re extends Y{constructor(e,t={}){super(),((e,t,n)=>{e.forEach(e=>{t[e]&&(n[e]=t[e])})})(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=J.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const n=d({},t);if(null==e)return!1;const r=this.resolve(e,n);return void 0!==(null==r?void 0:r.res)}extractFromKey(e,t){let n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");const r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let s=t.ns||this.options.defaultNS||[];const i=n&&e.indexOf(n)>-1,o=!(this.options.userDefinedKeySeparator||t.keySeparator||this.options.userDefinedNsSeparator||t.nsSeparator||((e,t,n)=>{t=t||"",n=n||"";const r=H.filter(e=>t.indexOf(e)<0&&n.indexOf(e)<0);if(0===r.length)return!0;const s=V.getRegExp(`(${r.map(e=>"?"===e?"\\?":e).join("|")})`);let i=!s.test(e);if(!i){const t=e.indexOf(n);t>0&&!s.test(e.substring(0,t))&&(i=!0)}return i})(e,n,r));if(i&&!o){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:x(s)?[s]:s};const i=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(i[0])>-1)&&(s=i.shift()),e=i.join(r)}return{key:e,namespaces:x(s)?[s]:s}}translate(e,t,n){let r="object"==typeof t?d({},t):t;if("object"!=typeof r&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),"object"==typeof r&&(r=d({},r)),r||(r={}),null==e)return"";"function"==typeof e&&(e=ee(e,d(d({},this.options),r))),Array.isArray(e)||(e=[String(e)]);const s=void 0!==r.returnDetails?r.returnDetails:this.options.returnDetails,i=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,{key:o,namespaces:a}=this.extractFromKey(e[e.length-1],r),l=a[a.length-1];let c=void 0!==r.nsSeparator?r.nsSeparator:this.options.nsSeparator;void 0===c&&(c=":");const u=r.lng||this.language,h=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if("cimode"===(null==u?void 0:u.toLowerCase()))return h?s?{res:`${l}${c}${o}`,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(r)}:`${l}${c}${o}`:s?{res:o,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(r)}:o;const m=this.resolve(e,r);let g=null==m?void 0:m.res;const f=(null==m?void 0:m.usedKey)||o,b=(null==m?void 0:m.exactUsedKey)||o,y=void 0!==r.joinArrays?r.joinArrays:this.options.joinArrays,v=!this.i18nFormat||this.i18nFormat.handleAsObject,w=void 0!==r.count&&!x(r.count),S=re.hasDefaultValue(r),_=w?this.pluralResolver.getSuffix(u,r.count,r):"",I=r.ordinal&&w?this.pluralResolver.getSuffix(u,r.count,{ordinal:!1}):"",C=w&&!r.ordinal&&0===r.count,k=C&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${_}`]||r[`defaultValue${I}`]||r.defaultValue;let P=g;v&&!g&&S&&(P=k);const E=ne(P),T=Object.prototype.toString.apply(P);if(!(v&&P&&E&&["[object Number]","[object Function]","[object RegExp]"].indexOf(T)<0)||x(y)&&Array.isArray(P))if(v&&x(y)&&Array.isArray(g))g=g.join(y),g&&(g=this.extendTranslation(g,e,r,n));else{let t=!1,s=!1;!this.isValidLookup(g)&&S&&(t=!0,g=k),this.isValidLookup(g)||(s=!0,g=o);const a=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&s?void 0:g,h=S&&k!==g&&this.options.updateMissing;if(s||t||h){if(this.logger.log(h?"updateKey":"missingKey",u,l,o,h?k:g),i){const e=this.resolve(o,p(d({},r),{keySeparator:!1}));e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const t=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if("fallback"===this.options.saveMissingTo&&t&&t[0])for(let n=0;n<t.length;n++)e.push(t[n]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(r.lng||this.language):e.push(r.lng||this.language);const n=(e,t,n)=>{var s;const i=S&&n!==g?n:a;this.options.missingKeyHandler?this.options.missingKeyHandler(e,l,t,i,h,r):null!=(s=this.backendConnector)&&s.saveMissing&&this.backendConnector.saveMissing(e,l,t,i,h,r),this.emit("missingKey",e,l,t,g)};this.options.saveMissing&&(this.options.saveMissingPlurals&&w?e.forEach(e=>{const t=this.pluralResolver.getSuffixes(e,r);C&&r[`defaultValue${this.options.pluralSeparator}zero`]&&t.indexOf(`${this.options.pluralSeparator}zero`)<0&&t.push(`${this.options.pluralSeparator}zero`),t.forEach(t=>{n([e],o+t,r[`defaultValue${t}`]||k)})}):n(e,o,k))}g=this.extendTranslation(g,e,r,m,n),s&&g===o&&this.options.appendNamespaceToMissingKey&&(g=`${l}${c}${o}`),(s||t)&&this.options.parseMissingKeyHandler&&(g=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}${c}${o}`:o,t?g:void 0,r))}else{if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,P,p(d({},r),{ns:a})):`key '${o} (${this.language})' returned an object instead of string.`;return s?(m.res=e,m.usedParams=this.getUsedParamsDetails(r),m):e}if(i){const e=Array.isArray(P),t=e?[]:{},n=e?b:f;for(const e in P)if(Object.prototype.hasOwnProperty.call(P,e)){const s=`${n}${i}${e}`;t[e]=S&&!g?this.translate(s,p(d({},r),{defaultValue:ne(k)?k[e]:void 0,joinArrays:!1,ns:a})):this.translate(s,p(d({},r),{joinArrays:!1,ns:a})),t[e]===s&&(t[e]=P[e])}g=t}}return s?(m.res=g,m.usedParams=this.getUsedParamsDetails(r),m):g}extendTranslation(e,t,n,r,s){var i,o;if(null!=(i=this.i18nFormat)&&i.parse)e=this.i18nFormat.parse(e,d(d({},this.options.interpolation.defaultVariables),n),n.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(p(d({},n),{interpolation:d(d({},this.options.interpolation),n.interpolation)}));const i=x(e)&&(void 0!==(null==(o=null==n?void 0:n.interpolation)?void 0:o.skipOnVariables)?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let a;if(i){const t=e.match(this.interpolator.nestingRegexp);a=t&&t.length}let l=n.replace&&!x(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(l=d(d({},this.options.interpolation.defaultVariables),l)),e=this.interpolator.interpolate(e,l,n.lng||this.language||r.usedLng,n),i){const t=e.match(this.interpolator.nestingRegexp);a<(t&&t.length)&&(n.nest=!1)}!n.lng&&r&&r.res&&(n.lng=this.language||r.usedLng),!1!==n.nest&&(e=this.interpolator.nest(e,(...e)=>(null==s?void 0:s[0])!==e[0]||n.context?this.translate(...e,t):(this.logger.warn(`It seems you are nesting recursively key: ${e[0]} in key: ${t[0]}`),null),n)),n.interpolation&&this.interpolator.reset()}const a=n.postProcess||this.options.postProcess,l=x(a)?[a]:a;return null!=e&&null!=l&&l.length&&!1!==n.applyPostProcessor&&(e=X.handle(l,e,t,this.options&&this.options.postProcessPassResolved?d({i18nResolved:p(d({},r),{usedParams:this.getUsedParamsDetails(n)})},n):n,this)),e}resolve(e,t={}){let n,r,s,i,o;return x(e)&&(e=[e]),e.forEach(e=>{if(this.isValidLookup(n))return;const a=this.extractFromKey(e,t),l=a.key;r=l;let c=a.namespaces;this.options.fallbackNS&&(c=c.concat(this.options.fallbackNS));const u=void 0!==t.count&&!x(t.count),d=u&&!t.ordinal&&0===t.count,p=void 0!==t.context&&(x(t.context)||"number"==typeof t.context)&&""!==t.context,h=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);c.forEach(e=>{var a,c;this.isValidLookup(n)||(o=e,!te[`${h[0]}-${e}`]&&null!=(a=this.utils)&&a.hasLoadedNamespace&&!(null!=(c=this.utils)&&c.hasLoadedNamespace(o))&&(te[`${h[0]}-${e}`]=!0,this.logger.warn(`key "${r}" for languages "${h.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),h.forEach(r=>{var o;if(this.isValidLookup(n))return;i=r;const a=[l];if(null!=(o=this.i18nFormat)&&o.addLookupKeys)this.i18nFormat.addLookupKeys(a,l,r,e,t);else{let e;u&&(e=this.pluralResolver.getSuffix(r,t.count,t));const n=`${this.options.pluralSeparator}zero`,s=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(u&&(t.ordinal&&0===e.indexOf(s)&&a.push(l+e.replace(s,this.options.pluralSeparator)),a.push(l+e),d&&a.push(l+n)),p){const r=`${l}${this.options.contextSeparator||"_"}${t.context}`;a.push(r),u&&(t.ordinal&&0===e.indexOf(s)&&a.push(r+e.replace(s,this.options.pluralSeparator)),a.push(r+e),d&&a.push(r+n))}}let c;for(;c=a.pop();)this.isValidLookup(n)||(s=c,n=this.getResource(r,e,c,t))}))})}),{res:n,usedKey:r,exactUsedKey:s,usedLng:i,usedNS:o}}isValidLookup(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}getResource(e,t,n,r={}){var s;return null!=(s=this.i18nFormat)&&s.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!x(e.replace);let r=n?e.replace:e;if(n&&typeof e.count<"u"&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r=d(d({},this.options.interpolation.defaultVariables),r)),!n){r=d({},r);for(const e of t)delete r[e]}return r}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,12)&&void 0!==e[n])return!0;return!1}}class se{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=J.create("languageUtils")}getScriptPartFromCode(e){if(!(e=q(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length||(t.pop(),"x"===t[t.length-1].toLowerCase())?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(!(e=q(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(x(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch(e){}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(e=>{if(t)return;const n=this.formatLanguageCode(e);(!this.options.supportedLngs||this.isSupportedCode(n))&&(t=n)}),!t&&this.options.supportedLngs&&e.forEach(e=>{if(t)return;const n=this.getScriptPartFromCode(e);if(this.isSupportedCode(n))return t=n;const r=this.getLanguagePartFromCode(e);if(this.isSupportedCode(r))return t=r;t=this.options.supportedLngs.find(e=>{if(e===r||!(e.indexOf("-")<0&&r.indexOf("-")<0)&&(e.indexOf("-")>0&&r.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===r||0===e.indexOf(r)&&r.length>1))return e})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),x(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes((!1===t?[]:t)||this.options.fallbackLng||[],e),r=[],s=e=>{e&&(this.isSupportedCode(e)?r.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`))};return x(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&s(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&s(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&s(this.getLanguagePartFromCode(e))):x(e)&&s(this.formatLanguageCode(e)),n.forEach(e=>{r.indexOf(e)<0&&s(this.formatLanguageCode(e))}),r}}const ie={zero:0,one:1,two:2,few:3,many:4,other:5},oe={select:e=>1===e?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class ae{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=J.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const n=q("dev"===e?"en":e),r=t.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:n,type:r});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let i;try{i=new Intl.PluralRules(n,{type:r})}catch(n){if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),oe;if(!e.match(/-|_/))return oe;const r=this.languageUtils.getLanguagePartFromCode(e);i=this.getRule(r,t)}return this.pluralRulesCache[s]=i,i}needsPlural(e,t={}){let n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),(null==n?void 0:n.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t,n={}){return this.getSuffixes(e,n).map(e=>`${t}${e}`)}getSuffixes(e,t={}){let n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),n?n.resolvedOptions().pluralCategories.sort((e,t)=>ie[e]-ie[t]).map(e=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${e}`):[]}getSuffix(e,t,n={}){const r=this.getRule(e,n);return r?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${r.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,n))}}const le=(e,t,n,r=".",s=!0)=>{let i=((e,t,n)=>{const r=N(e,n);return void 0!==r?r:N(t,n)})(e,t,n);return!i&&s&&x(n)&&(i=z(e,n,r),void 0===i&&(i=z(t,n,r))),i},ce=e=>e.replace(/\$/g,"$$$$");class ue{constructor(e={}){var t;this.logger=J.create("interpolator"),this.options=e,this.format=(null==(t=null==e?void 0:e.interpolation)?void 0:t.format)||(e=>e),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:r,prefix:s,prefixEscaped:i,suffix:o,suffixEscaped:a,formatSeparator:l,unescapeSuffix:c,unescapePrefix:u,nestingPrefix:d,nestingPrefixEscaped:p,nestingSuffix:h,nestingSuffixEscaped:m,nestingOptionsSeparator:g,maxReplaces:f,alwaysFormat:b}=e.interpolation;this.escape=void 0!==t?t:W,this.escapeValue=void 0===n||n,this.useRawValueToEscape=void 0!==r&&r,this.prefix=s?F(s):i||"{{",this.suffix=o?F(o):a||"}}",this.formatSeparator=l||",",this.unescapePrefix=c?"":u||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=d?F(d):p||F("$t("),this.nestingSuffix=h?F(h):m||F(")"),this.nestingOptionsSeparator=g||",",this.maxReplaces=f||1e3,this.alwaysFormat=void 0!==b&&b,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>(null==e?void 0:e.source)===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,n,r){var s;let i,o,a;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=e=>{if(e.indexOf(this.formatSeparator)<0){const s=le(t,l,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(s,void 0,n,p(d(d({},r),t),{interpolationkey:e})):s}const s=e.split(this.formatSeparator),i=s.shift().trim(),o=s.join(this.formatSeparator).trim();return this.format(le(t,l,i,this.options.keySeparator,this.options.ignoreJSONStructure),o,n,p(d(d({},r),t),{interpolationkey:i}))};this.resetRegExp();const u=(null==r?void 0:r.missingInterpolationHandler)||this.options.missingInterpolationHandler,h=void 0!==(null==(s=null==r?void 0:r.interpolation)?void 0:s.skipOnVariables)?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>ce(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?ce(this.escape(e)):ce(e)}].forEach(t=>{for(a=0;i=t.regex.exec(e);){const n=i[1].trim();if(o=c(n),void 0===o)if("function"==typeof u){const t=u(e,i,r);o=x(t)?t:""}else if(r&&Object.prototype.hasOwnProperty.call(r,n))o="";else{if(h){o=i[0];continue}this.logger.warn(`missed to pass in variable ${n} for interpolating ${e}`),o=""}else!x(o)&&!this.useRawValueToEscape&&(o=A(o));const s=t.safeValue(o);if(e=e.replace(i[0],s),h?(t.regex.lastIndex+=o.length,t.regex.lastIndex-=i[0].length):t.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,t,n={}){let r,s,i;const o=(e,t)=>{var n;const r=this.nestingOptionsSeparator;if(e.indexOf(r)<0)return e;const s=e.split(new RegExp(`${r}[ ]*{`));let o=`{${s[1]}`;e=s[0],o=this.interpolate(o,i);const a=o.match(/'/g),l=o.match(/"/g);((null!=(n=null==a?void 0:a.length)?n:0)%2==0&&!l||l.length%2!=0)&&(o=o.replace(/'/g,'"'));try{i=JSON.parse(o),t&&(i=d(d({},t),i))}catch(t){return this.logger.warn(`failed parsing options string in nesting for key ${e}`,t),`${e}${r}${o}`}return i.defaultValue&&i.defaultValue.indexOf(this.prefix)>-1&&delete i.defaultValue,e};for(;r=this.nestingRegexp.exec(e);){let a=[];i=d({},n),i=i.replace&&!x(i.replace)?i.replace:i,i.applyPostProcessor=!1,delete i.defaultValue;const l=/{.*}/.test(r[1])?r[1].lastIndexOf("}")+1:r[1].indexOf(this.formatSeparator);if(-1!==l&&(a=r[1].slice(l).split(this.formatSeparator).map(e=>e.trim()).filter(Boolean),r[1]=r[1].slice(0,l)),s=t(o.call(this,r[1].trim(),i),i),s&&r[0]===e&&!x(s))return s;x(s)||(s=A(s)),s||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${e}`),s=""),a.length&&(s=a.reduce((e,t)=>this.format(e,t,n.lng,p(d({},n),{interpolationkey:r[1].trim()})),s.trim())),e=e.replace(r[0],s),this.regexp.lastIndex=0}return e}}const de=e=>{const t={};return(n,r,s)=>{let i=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(i=p(d({},i),{[s.interpolationkey]:void 0}));const o=r+JSON.stringify(i);let a=t[o];return a||(a=e(q(r),s),t[o]=a),a(n)}},pe=e=>(t,n,r)=>e(q(n),r)(t);class he{constructor(e={}){this.logger=J.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const n=t.cacheInBuiltFormats?de:pe;this.formats={number:n((e,t)=>{const n=new Intl.NumberFormat(e,d({},t));return e=>n.format(e)}),currency:n((e,t)=>{const n=new Intl.NumberFormat(e,p(d({},t),{style:"currency"}));return e=>n.format(e)}),datetime:n((e,t)=>{const n=new Intl.DateTimeFormat(e,d({},t));return e=>n.format(e)}),relativetime:n((e,t)=>{const n=new Intl.RelativeTimeFormat(e,d({},t));return e=>n.format(e,t.range||"day")}),list:n((e,t)=>{const n=new Intl.ListFormat(e,d({},t));return e=>n.format(e)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=de(t)}format(e,t,n,r={}){const s=t.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(e=>e.indexOf(")")>-1)){const e=s.findIndex(e=>e.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,e)].join(this.formatSeparator)}return s.reduce((e,t)=>{var s;const{formatName:i,formatOptions:o}=(e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const s=r[1].substring(0,r[1].length-1);"currency"===t&&s.indexOf(":")<0?n.currency||(n.currency=s.trim()):"relativetime"===t&&s.indexOf(":")<0?n.range||(n.range=s.trim()):s.split(";").forEach(e=>{if(e){const[t,...r]=e.split(":"),s=r.join(":").trim().replace(/^'+|'+$/g,""),i=t.trim();n[i]||(n[i]=s),"false"===s&&(n[i]=!1),"true"===s&&(n[i]=!0),isNaN(s)||(n[i]=parseInt(s,10))}})}return{formatName:t,formatOptions:n}})(t);if(this.formats[i]){let t=e;try{const a=(null==(s=null==r?void 0:r.formatParams)?void 0:s[r.interpolationkey])||{},l=a.locale||a.lng||r.locale||r.lng||n;t=this.formats[i](e,l,d(d(d({},o),r),a))}catch(e){this.logger.warn(e)}return t}return this.logger.warn(`there was no format function for ${i}`),e},e)}}class me extends Y{constructor(e,t,n,r={}){var s,i;super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=r,this.logger=J.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],null==(i=null==(s=this.backend)?void 0:s.init)||i.call(s,n,r.backend,r)}queueLoad(e,t,n,r){const s={},i={},o={},a={};return e.forEach(e=>{let r=!0;t.forEach(t=>{const o=`${e}|${t}`;!n.reload&&this.store.hasResourceBundle(e,t)?this.state[o]=2:this.state[o]<0||(1===this.state[o]?void 0===i[o]&&(i[o]=!0):(this.state[o]=1,r=!1,void 0===i[o]&&(i[o]=!0),void 0===s[o]&&(s[o]=!0),void 0===a[t]&&(a[t]=!0)))}),r||(o[e]=!0)}),(Object.keys(s).length||Object.keys(i).length)&&this.queue.push({pending:i,pendingCount:Object.keys(i).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(s),pending:Object.keys(i),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(a)}}loaded(e,t,n){const r=e.split("|"),s=r[0],i=r[1];t&&this.emit("failedLoading",s,i,t),!t&&n&&this.store.addResourceBundle(s,i,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const o={};this.queue.forEach(n=>{((e,t,n)=>{const{obj:r,k:s}=B(e,t,Object);r[s]=r[s]||[],r[s].push(n)})(n.loaded,[s],i),((e,t)=>{void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)})(n,e),t&&n.errors.push(t),0===n.pendingCount&&!n.done&&(Object.keys(n.loaded).forEach(e=>{o[e]||(o[e]={});const t=n.loaded[e];t.length&&t.forEach(t=>{void 0===o[e][t]&&(o[e][t]=!0)})}),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(e=>!e.done)}read(e,t,n,r=0,s=this.retryTimeout,i){if(!e.length)return i(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:n,tried:r,wait:s,callback:i});this.readingCalls++;const o=(o,a)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}o&&a&&r<this.maxRetries?setTimeout(()=>{this.read.call(this,e,t,n,r+1,2*s,i)},s):i(o,a)},a=this.backend[n].bind(this.backend);if(2!==a.length)return a(e,t,o);try{const n=a(e,t);n&&"function"==typeof n.then?n.then(e=>o(null,e)).catch(o):o(null,n)}catch(e){o(e)}}prepareLoading(e,t,n={},r){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();x(e)&&(e=this.languageUtils.toResolveHierarchy(e)),x(t)&&(t=[t]);const s=this.queueLoad(e,t,n,r);if(!s.toLoad.length)return s.pending.length||r(),null;s.toLoad.forEach(e=>{this.loadOne(e)})}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e,t=""){const n=e.split("|"),r=n[0],s=n[1];this.read(r,s,"read",void 0,void 0,(n,i)=>{n&&this.logger.warn(`${t}loading namespace ${s} for language ${r} failed`,n),!n&&i&&this.logger.log(`${t}loaded namespace ${s} for language ${r}`,i),this.loaded(e,n,i)})}saveMissing(e,t,n,r,s,i={},o=()=>{}){var a,l,c,u,h;if(null==(l=null==(a=this.services)?void 0:a.utils)||!l.hasLoadedNamespace||null!=(u=null==(c=this.services)?void 0:c.utils)&&u.hasLoadedNamespace(t)){if(null!=n&&""!==n){if(null!=(h=this.backend)&&h.create){const a=p(d({},i),{isUpdate:s}),l=this.backend.create.bind(this.backend);if(l.length<6)try{let s;s=5===l.length?l(e,t,n,r,a):l(e,t,n,r),s&&"function"==typeof s.then?s.then(e=>o(null,e)).catch(o):o(null,s)}catch(e){o(e)}else l(e,t,n,r,o,a)}!e||!e[0]||this.store.addResource(e[0],t,n,r)}}else this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")}}const ge=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if("object"==typeof e[1]&&(t=e[1]),x(e[1])&&(t.defaultValue=e[1]),x(e[2])&&(t.tDescription=e[2]),"object"==typeof e[2]||"object"==typeof e[3]){const n=e[3]||e[2];Object.keys(n).forEach(e=>{t[e]=n[e]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),fe=e=>{var t,n;return x(e.ns)&&(e.ns=[e.ns]),x(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),x(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),(null==(n=null==(t=e.supportedLngs)?void 0:t.indexOf)?void 0:n.call(t,"cimode"))<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),"boolean"==typeof e.initImmediate&&(e.initAsync=e.initImmediate),e},be=()=>{};class ye extends Y{constructor(e={},t){if(super(),this.options=fe(e),this.services={},this.logger=J,this.modules={external:[]},n=this,Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(e=>{"function"==typeof n[e]&&(n[e]=n[e].bind(n))}),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}var n}init(e={},t){this.isInitializing=!0,"function"==typeof e&&(t=e,e={}),null==e.defaultNS&&e.ns&&(x(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const n=ge();this.options=d(d(d({},n),this.options),fe(e)),this.options.interpolation=d(d({},n.interpolation),this.options.interpolation),void 0!==e.keySeparator&&(this.options.userDefinedKeySeparator=e.keySeparator),void 0!==e.nsSeparator&&(this.options.userDefinedNsSeparator=e.nsSeparator);const r=e=>e?"function"==typeof e?new e:e:null;if(!this.options.isClone){let e;this.modules.logger?J.init(r(this.modules.logger),this.options):J.init(null,this.options),e=this.modules.formatter?this.modules.formatter:he;const t=new se(this.options);this.store=new Q(this.options.resources,this.options);const s=this.services;s.logger=J,s.resourceStore=this.store,s.languageUtils=t,s.pluralResolver=new ae(t,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),e&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(s.formatter=r(e),s.formatter.init&&s.formatter.init(s,this.options),this.options.interpolation.format=s.formatter.format.bind(s.formatter)),s.interpolator=new ue(this.options),s.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},s.backendConnector=new me(r(this.modules.backend),s.resourceStore,s,this.options),s.backendConnector.on("*",(e,...t)=>{this.emit(e,...t)}),this.modules.languageDetector&&(s.languageDetector=r(this.modules.languageDetector),s.languageDetector.init&&s.languageDetector.init(s,this.options.detection,this.options)),this.modules.i18nFormat&&(s.i18nFormat=r(this.modules.i18nFormat),s.i18nFormat.init&&s.i18nFormat.init(this)),this.translator=new re(this.services,this.options),this.translator.on("*",(e,...t)=>{this.emit(e,...t)}),this.modules.external.forEach(e=>{e.init&&e.init(this)})}if(this.format=this.options.interpolation.format,t||(t=be),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(e=>{this[e]=(...t)=>this.store[e](...t)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(e=>{this[e]=(...t)=>(this.store[e](...t),this)});const s=M(),i=()=>{const e=(e,n)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),s.resolve(n),t(e,n)};if(this.languages&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initAsync?i():setTimeout(i,0),s}loadResources(e,t=be){var n,r;let s=t;const i=x(e)?e:this.language;if("function"==typeof e&&(s=e),!this.options.resources||this.options.partialBundledLanguages){if("cimode"===(null==i?void 0:i.toLowerCase())&&(!this.options.preload||0===this.options.preload.length))return s();const e=[],t=t=>{!t||"cimode"===t||this.services.languageUtils.toResolveHierarchy(t).forEach(t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)})};i?t(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(e=>t(e)),null==(r=null==(n=this.options.preload)?void 0:n.forEach)||r.call(n,e=>t(e)),this.services.backendConnector.load(e,this.options.ns,e=>{!e&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),s(e)})}else s(null)}reloadResources(e,t,n){const r=M();return"function"==typeof e&&(n=e,e=void 0),"function"==typeof t&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=be),this.services.backendConnector.reload(e,t,e=>{r.resolve(),n(e)}),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&X.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1)){for(let e=0;e<this.languages.length;e++){const t=this.languages[e];if(!(["cimode","dev"].indexOf(t)>-1)&&this.store.hasLanguageSomeTranslations(t)){this.resolvedLanguage=t;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const n=M();this.emit("languageChanging",e);const r=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},s=(s,i)=>{i?this.isLanguageChangingTo===e&&(r(i),this.translator.changeLanguage(i),this.isLanguageChangingTo=void 0,this.emit("languageChanged",i),this.logger.log("languageChanged",i)):this.isLanguageChangingTo=void 0,n.resolve((...e)=>this.t(...e)),t&&t(s,(...e)=>this.t(...e))},i=t=>{var n,i;!e&&!t&&this.services.languageDetector&&(t=[]);const o=x(t)?t:t&&t[0],a=this.store.hasLanguageSomeTranslations(o)?o:this.services.languageUtils.getBestMatchFromCodes(x(t)?[t]:t);a&&(this.language||r(a),this.translator.language||this.translator.changeLanguage(a),null==(i=null==(n=this.services.languageDetector)?void 0:n.cacheUserLanguage)||i.call(n,a)),this.loadResources(a,e=>{s(e,a)})};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(i):this.services.languageDetector.detect(i):i(e):i(this.services.languageDetector.detect()),n}getFixedT(e,t,n){const r=(e,t,...s)=>{let i;i="object"!=typeof t?this.options.overloadTranslationOptionHandler([e,t].concat(s)):d({},t),i.lng=i.lng||r.lng,i.lngs=i.lngs||r.lngs,i.ns=i.ns||r.ns,""!==i.keyPrefix&&(i.keyPrefix=i.keyPrefix||n||r.keyPrefix);const o=this.options.keySeparator||".";let a;return i.keyPrefix&&Array.isArray(e)?a=e.map(e=>("function"==typeof e&&(e=ee(e,d(d({},this.options),t))),`${i.keyPrefix}${o}${e}`)):("function"==typeof e&&(e=ee(e,d(d({},this.options),t))),a=i.keyPrefix?`${i.keyPrefix}${o}${e}`:e),this.t(a,i)};return x(e)?r.lng=e:r.lngs=e,r.ns=t,r.keyPrefix=n,r}t(...e){var t;return null==(t=this.translator)?void 0:t.translate(...e)}exists(...e){var t;return null==(t=this.translator)?void 0:t.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],r=!!this.options&&this.options.fallbackLng,s=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;const i=(e,t)=>{const n=this.services.backendConnector.state[`${e}|${t}`];return-1===n||0===n||2===n};if(t.precheck){const e=t.precheck(this,i);if(void 0!==e)return e}return!!(this.hasResourceBundle(n,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||i(n,e)&&(!r||i(s,e)))}loadNamespaces(e,t){const n=M();return this.options.ns?(x(e)&&(e=[e]),e.forEach(e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}),this.loadResources(e=>{n.resolve(),t&&t(e)}),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=M();x(e)&&(e=[e]);const r=this.options.preload||[],s=e.filter(e=>r.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e));return s.length?(this.options.preload=r.concat(s),this.loadResources(e=>{n.resolve(),t&&t(e)}),n):(t&&t(),Promise.resolve())}dir(e){var t,n;if(e||(e=this.resolvedLanguage||((null==(t=this.languages)?void 0:t.length)>0?this.languages[0]:this.language)),!e)return"rtl";try{const t=new Intl.Locale(e);if(t&&t.getTextInfo){const e=t.getTextInfo();if(e&&e.direction)return e.direction}}catch(e){}const r=(null==(n=this.services)?void 0:n.languageUtils)||new se(ge());return e.toLowerCase().indexOf("-latn")>1?"ltr":["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){return new ye(e,t)}cloneInstance(e={},t=be){const n=e.forkResourceStore;n&&delete e.forkResourceStore;const r=p(d(d({},this.options),e),{isClone:!0}),s=new ye(r);if((void 0!==e.debug||void 0!==e.prefix)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(e=>{s[e]=this[e]}),s.services=d({},this.services),s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},n){const e=Object.keys(this.store.data).reduce((e,t)=>(e[t]=d({},this.store.data[t]),e[t]=Object.keys(e[t]).reduce((n,r)=>(n[r]=d({},e[t][r]),n),e[t]),e),{});s.store=new Q(e,r),s.services.resourceStore=s.store}return s.translator=new re(s.services,r),s.translator.on("*",(e,...t)=>{s.emit(e,...t)}),s.init(r,t),s.translator.options=r,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const ve=ye.createInstance();ve.createInstance=ye.createInstance,ve.createInstance,ve.dir,ve.init,ve.loadResources,ve.reloadResources,ve.use,ve.changeLanguage,ve.getFixedT,ve.t,ve.exists,ve.setDefaultNamespace,ve.hasLoadedNamespace,ve.loadNamespaces,ve.loadLanguages;var we=Object.defineProperty,Se=(e,t,n)=>((e,t,n)=>t in e?we(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);const _e=()=>window||globalThis||{},Ie=e=>{const t=`instancer_${e}`;return Symbol.for(t)},Ce={fallbackLng:"ru",debug:"true"===localStorage.getItem("i18n_debug"),fallbackNS:!1,saveMissing:!0,missingKeyHandler:(e,t,n,r,s,i)=>((!i||!i.ignoreMissingKey)&&console.warn("i18next missingKey: "+n),n)};class ke{constructor(){var e;Se(this,"instance"),Se(this,"language"),Se(this,"remoteMfeImports"),this.remoteMfeImports={},this.language=(null==(e=window.wb)?void 0:e.currentLanguage)||"ru"}getUtils(e){return{t:(t,n={})=>{if(!this.instance)throw new Error("instance ещё не инициализирован");const{isValid:r,availableNS:s}=O({frontName:e,key:t,nsFromOptions:null==n?void 0:n.ns});return r||console.error(`Ключ "${t}" использует NS другого микрофронта, разрешенные NS: [${s}]`),this.instance.t(t,p(d({},n),{ns:e}))},plural:(t,n)=>{const r=n,{count:s,displayCount:i}=r,o=h(r,["count","displayCount"]);if(!this.instance)throw new Error("instance ещё не инициализирован");const{isValid:a,availableNS:l}=O({frontName:e,key:t,nsFromOptions:null==n?void 0:n.ns});return a||console.error(`Ключ "${t}" использует NS другого микрофронта, разрешенные NS: [${l}]`),this.instance.t(`${t}.plural`,p(d({count:s||0,displayCount:i||s||0,interpolation:{escapeValue:!i}},o),{ns:e}))},getLanguage:()=>this.language,changeLang:e=>{localStorage.setItem("wb__lang",e),window.wb.currentLanguage=e,location.reload()}}}getI18nInstance(){return this.instance}registerRemoteMfeImports(e){this.remoteMfeImports=e}async createI18nInstance(e){if(this.instance)return this.instance;const{initReactI18next:t}=await n.e(6859).then(n.bind(n,6859));this.instance=ve.createInstance();const{hostName:r,options:s,lazyForeignTranslations:i}=e;return await this.instance.use(t).init(d(d({lng:this.language},Ce),s)),await this._loadTranslationsModule(this.instance,r,i),this.instance}async loadRemoteResourcesAsync(e){try{if(!this.instance)throw new Error("instance ещё не инициализирован");if(this.instance.hasResourceBundle(this.language,e))return;const{ru:t,lazyForeignTranslations:n}=await this._loadRemoteResoucesAsync(e);this.instance.addResourceBundle("ru",e,t),await this._loadTranslationsModule(this.instance,e,n)}catch(e){console.error("loadRemoteResourcesAsync = ",e)}}async _loadTranslationsModule(e,t,n){try{const r=this.language;if("ru"!==r){const s=new Promise((e,t)=>setTimeout(()=>t(new Error("загрузка перевода превысила 15 секунд")),15e3)),i=(0,n[r])(),o=await Promise.race([i,s]);o&&e.addResourceBundle(r,t,o.default)}}catch(e){console.error("Translation loading error:",e)}}async _loadRemoteResoucesAsync(e){const t=this.remoteMfeImports[e];if(!t)throw new Error(`Не найден ${e}, добавьте в REMOTE_I18N_RESOURCES_IMPORT`);return(await t()).default}}const Pe="i18nService",Ee=e=>{((e,t)=>{const n=Ie(e);_e()[n]=t})(Pe,e)};d({},(()=>{let e=(e=>{const t=Ie(e);return _e()[t]||null})(Pe);return e||(e=new ke,Ee(e)),e})().getUtils("website"));const Te=(e,t=!1)=>((e,t,n=!1)=>e.startsWith("//")||e.startsWith("http")?e:`https://${k().volStaticHost(t,n)}/${e}`)(`data/${e}`,0,t),Oe=e=>"string"==typeof e,xe=e=>void 0===e;var Me=Object.defineProperty,Ae=(e,t,n)=>((e,t,n)=>t in e?Me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class Re{constructor(e={}){return Ae(this,"observers",new Map),Ae(this,"updateInProgress",!1),Ae(this,"pendingNotifications",new Set),this.checkForConflicts(e),t=e,0===Object.keys(t).length||Object.entries(e).forEach(([e,t])=>{this.defineObservableProperty(e,t)}),new Proxy(this,{set:(e,t,n)=>{if(!Oe(t))throw new TypeError("Property must be a string, got "+typeof t);return e[t]!==n&&(e[t]=n,this.updateInProgress?this.pendingNotifications.add(t):this.notifyObservers(t)),!0},get:(e,t)=>{if(t)return e[t]}});var t}subscribe(e,t){const n=String(e);this.observers.has(n)||this.observers.set(n,new Set),t(),this.observers.get(n).add(t)}unsubscribe(e,t){var n;const r=String(e);null==(n=this.observers.get(r))||n.delete(t)}update(e){this.updateInProgress=!0,Object.entries(e).forEach(([e,t])=>{this[e]=t}),this.updateInProgress=!1,this.pendingNotifications.forEach(e=>this.notifyObservers(e)),this.pendingNotifications.clear()}notifyObservers(e){var t;const n=String(e);null==(t=this.observers.get(n))||t.forEach(e=>e())}checkForConflicts(e){const t=Object.getOwnPropertyNames(Object.getPrototypeOf(this)),n=Object.keys(e).filter(e=>t.includes(e));n.length>0&&console.warn(`Observable initialization warning: The following keys in the initial state conflict with properties in the prototype: ${n.join(", ")}.`)}defineObservableProperty(e,t){Object.defineProperty(this,e,{configurable:!0,enumerable:!0,writable:!0,value:t})}}class De extends Re{constructor(e){var t,n;super(),g(this,"url"),g(this,"settings"),g(this,"onSuccess"),g(this,"onError"),g(this,"onSettled"),g(this,"data",null),g(this,"error",null),g(this,"isLoading",!1),this.url=e.url,this.settings=e.settings,this.onSuccess=e.onSuccess,this.onError=e.onError,this.onSettled=e.onSettled,(null==(t=null==(n=e.settings)?void 0:n.enabled)||t)&&this.fetchData()}async refetch(){return await this.fetchData()}async fetchData(){var e,t,n;this.isLoading=!0,this.error=null;const r=ze();let s;try{return s=await r.get(this.url,this.settings),this.data=s,null==(e=this.onSuccess)||e.call(this,s),s}catch(e){throw this.error=e,null==(t=this.onError)||t.call(this,e),e}finally{null==(n=this.onSettled)||n.call(this,this.data,this.error),this.isLoading=!1}}}class Le extends Re{constructor(e){super(),g(this,"url"),g(this,"settings"),g(this,"method"),g(this,"onSuccess"),g(this,"onError"),g(this,"onSettled"),g(this,"data",null),g(this,"error",null),g(this,"isLoading",!1),this.url=e.url,this.settings=e.settings,this.method=e.method,this.onSuccess=e.onSuccess,this.onError=e.onError,this.onSettled=e.onSettled}async mutate(e){var t,n,r,s;this.isLoading=!0,this.error=null;const i=ze();try{const r=null!=(t=this.settings)?t:{};e&&(r.body=e);const s={POST:async()=>await i.post(this.url,r),PUT:async()=>await i.put(this.url,r),PATCH:async()=>await i.patch(this.url,r),DELETE:async()=>await i.delete(this.url,r)};return this.data=await s[this.method](),null==(n=this.onSuccess)||n.call(this,this.data),this.data}catch(e){throw this.error=e,null==(r=this.onError)||r.call(this,this.error),this.error}finally{this.isLoading=!1,null==(s=this.onSettled)||s.call(this,this.data,this.error)}}}class Be{constructor(){g(this,"cache",new Map),g(this,"defaultStaleTime",6e4)}makeCacheKey(e){return`${e}`}getCached(e){const t=this.makeCacheKey(e),n=this.cache.get(t);return n?Date.now()-n.timestamp>=n.staleTime?(this.cache.delete(t),null):n.data:null}invalidateQueries(e){null==e||e.forEach(e=>{this.cache.delete(e)})}set(e,t){const n=this.makeCacheKey(e);return this.cache.set(n,t),t}}class $e extends Error{constructor(e){const{message:t,payload:n}=$e.parsePayload(e);super(t),g(this,"isCustomError"),g(this,"payload"),this.isCustomError=!0,this.payload=n}static parsePayload(e){var t;return"string"==typeof e?{message:e,payload:null}:{message:null!=(t=null==e?void 0:e.message)?t:"Unknow error",payload:null==e?void 0:e.payload}}}class Ne extends $e{constructor({msg:e,jwtDrop:t}={}){super(e),g(this,"isUnauthorize"),g(this,"jwtDrop"),this.isUnauthorize=!0,this.jwtDrop=t}}class je extends $e{constructor(e=""){super(e),g(this,"isCancelled"),this.isCancelled=!0}}class Fe extends $e{constructor(e=""){super(e),g(this,"isNotFound"),this.isNotFound=!0}}class Ue extends $e{constructor(e=""){super(e),g(this,"isLimited"),this.isLimited=!0}}class We{constructor(){g(this,"isNetworkError"),this.isNetworkError=!0}}class He{constructor({getAppVersion:e,getWbSpa:t,getService:n,getServices:r,getUserHelper:s,getAdultHelper:i,wb:o}){g(this,"cache"),g(this,"getAppVersion"),g(this,"getWbSpa"),g(this,"getService"),g(this,"getServices"),g(this,"getUserHelper"),g(this,"getAdultHelper"),g(this,"wb"),this.getAppVersion=e,this.getWbSpa=t,this.getService=n,this.getServices=r,this.getUserHelper=s,this.getAdultHelper=i,this.wb=o,this.cache=new Be}async fetchJSON(e,t={},n={}){var s,i;const o=p(d({},n),{useProccessResponse:null!=(s=n.useProccessResponse)&&s}),a=(0,r.g)({url:e,reqBody:"string"!=typeof t.body?JSON.stringify(t.body):t.body,type:t.method,appVersion:this.getAppVersion(),getServices:this.getServices,getUserHelper:this.getUserHelper,wbSettings:this.wb.settings});this.prepareHeaders(t,o);const l=null!=(i=o.retry)?i:1,c=Math.max(l,2);for(let n=1;n<=c;n++){const r=n%2==0&&o.reserve?o.reserve:e;this.applyTimeout(t,o.timeout);try{const e=await this.fetch(r,t),{data:n,response:s}=await this.handleResponse(e,o,a);return await this.processFetchedData(s,n,o)}catch(r){if(r instanceof Fe&&o.offRepeatWith404Error)break;const s=await this.handleFetchError(r,e,t,o,n,c,a);if(void 0!==s)return s}}}async fetchText(e,t={},n={}){t&&n&&(this.prepareHeaders(t,n),this.applyTimeout(t,n.timeout));const r=await this.fetch(e,d(p(d({},t),{dataType:"text"}),n));return r.ok?r.text():Promise.reject("Could not get text from "+e)}async fetchStatic(e,t={timeout:3e4,fetchType:"json"},n,...r){var s,i;let o=e;e.startsWith("http")?n=void 0:n||(n=Te.bind(null,e));let a={};"function"==typeof n&&(a={nullOnError:!0,retry:2,reserve:n.apply(null,[e,...r,!0]),timeout:null!=(s=t.timeout)?s:3e4},o=n.apply(null,[e,...r]));const l=p(d(d({},a),t),{useProccessResponse:!1,throwErr:!1,timeout:null!=(i=null==t?void 0:t.timeout)?i:3e4});return await this.fetchJSON(o,{},l)}async fetch(e,t={}){var n,s,i,o,a;null!=t&&t.timeout&&this.applyTimeout(t,t.timeout);const l=t,{headers:c={}}=l,u=h(l,["headers"]),p=new Headers(c),m=(0,r.h)(),g=m.jwt;t.withAuthz&&m.checkSlide();let f=1,b=!1;try{const t=new URL(e.startsWith("//")?`${document.location.protocol}${e}`:e);if((t.hostname===window.location.host&&t.port===window.location.port||r.a.test(t.hostname))&&(r.b.test(t.hostname)&&(f=2,p.set("X-Spa-Version",this.getAppVersion()),p.set("X-Requested-With","XMLHttpRequest"),p.set("DeviceId",this.getServices().sessionService.getSession()),this.getAdultHelper().isConfirmed&&p.set("adultConfirmed","1")),!p.has("Authorization")&&g&&p.set("Authorization",`Bearer ${g}`)),this.wb.settings.secondHost){const n=t.host.split(".");n.splice(-1)[0]!==this.wb.settings.currentDomain&&(t.pathname=n.join(".")+t.pathname,t.host=this.wb.settings.secondHost,t.port="",e=t.href)}}catch(e){b=!0,f=2,p.set("X-Requested-With","XMLHttpRequest"),p.set("X-Spa-Version",this.getAppVersion()),p.set("DeviceId",this.getServices().sessionService.getSession()),!p.has("Authorization")&&g&&p.set("Authorization",`Bearer ${g}`),this.getAdultHelper().isConfirmed&&p.set("adultConfirmed","1")}t.body instanceof URLSearchParams&&(p.set("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),u.body=null==(i=null==u?void 0:u.body)?void 0:i.toString()),t.withJwtToken&&p.set("Authorization",`Bearer ${g}`);const y=d({credentials:null!=(n=t.credentials)?n:"same-origin",headers:p},u);let v;t.withPowToken&&await this.applyPowToken(y);for(let n=1;n<=f;n++){if(t.withJwtToken){if(!g)return Promise.reject("miss token");v=await fetch(e,y)}else v=await fetch(e,y);t.withAuthz&&this.slideWithAuthz(v);const n=v.headers.get("x-wbaas-token");if(n){const e=null!=(s=this.getServices().mainAntiBotTokenService)?s:await this.getService("mainAntiBotTokenService");if(v.status===r.H.INVALID_TOKEN&&("get"===n||"refresh"===n)){await e.refreshToken();continue}"expires-soon"===n&&e.refreshToken()}if(b&&null!=(a=null==(o=this.wb)?void 0:o.helpers)&&a.date){const e=v.headers.get("Date");this.wb.helpers.date.serverDate=new Date(String(e))}break}return this.handlePowResponseHeader(v),v}async get(e,t){var n,r,s;const i=null!=(n=null==t?void 0:t.staleTime)?n:this.cache.defaultStaleTime,o=null!=(r=null==t?void 0:t.queryKey)?r:e;if(null!=t&&t.cacheOn){const e=this.getCached(o);if(null!==e)return e}const a=null!=t?t:{};a.throwErr=!0;const l=await this.fetchJSON(e,p(d({},null!=(s=null==t?void 0:t.options)?s:{}),{method:"GET"}),a);return null!=t&&t.cacheOn&&this.cache.set(o,{data:l,timestamp:Date.now(),staleTime:i}),l}async post(e,t){var n,r;const s=null!=t?t:{};s.throwErr=!0,this.invalidateQueries(null!=(n=null==t?void 0:t.invalidateKeys)?n:[]);const i=null!=(r=null==t?void 0:t.options)?r:{},o=(null==t?void 0:t.body)instanceof FormData;return await this.fetchJSON(e,p(d({},i),{method:"POST",body:o?null==t?void 0:t.body:JSON.stringify(null==t?void 0:t.body)}),s)}async put(e,t){var n,r;const s=null!=t?t:{};s.throwErr=!0;const i=null!=(n=null==t?void 0:t.options)?n:{};return this.invalidateQueries(null!=(r=null==t?void 0:t.invalidateKeys)?r:[]),await this.fetchJSON(e,p(d({},i),{method:"PUT",body:JSON.stringify(null==t?void 0:t.body)}),s)}async delete(e,t){var n,r;const s=null!=t?t:{},i=null!=(n=null==t?void 0:t.options)?n:{};return s.throwErr=!0,this.invalidateQueries(null!=(r=null==t?void 0:t.invalidateKeys)?r:[]),await this.fetchJSON(e,p(d({},i),{method:"DELETE"}),s)}async patch(e,t){var n,r;const s=null!=t?t:{},i=null!=(n=null==t?void 0:t.options)?n:{};return s.throwErr=!0,this.invalidateQueries(null!=(r=null==t?void 0:t.invalidateKeys)?r:[]),await this.fetchJSON(e,p(d({},i),{method:"PATCH",body:JSON.stringify(null==t?void 0:t.body)}),s)}invalidateQueries(e){this.cache.invalidateQueries(e)}getCached(e){return this.cache.getCached(e)}createObservableQuery(e){return new De(e)}createObservableMutation(e){return new Le(e)}async slideWithAuthz(e){const t=(0,r.h)();if(e.ok){const n=Number(e.headers.get("content-length"));if(n>16&&n<256){const n=await e.clone().json();-1===(null==n?void 0:n.state)&&41===n.reason&&t.slide(!0)}}}prepareHeaders(e,t){if(e.headers?e.headers instanceof Headers||(e.headers=new Headers(e.headers)):e.headers=new Headers,t.addContentTypeHeader&&e.headers.set("Content-Type","application/json"),t.addUserHeader){const t=this.getUserHelper().getId();t&&e.headers.set("X-Userid",t)}t.noCache&&e.headers.set("cache","no-cache");const n=(0,r.h)().jwt;t.addAuthHeader&&n&&e.headers.set("Authorization",`Bearer ${n}`)}applyTimeout(e,t){if(t)if(AbortSignal.timeout&&"function"==typeof AbortSignal.timeout)e.signal=AbortSignal.timeout(t);else{const n=new AbortController;setTimeout(()=>n.abort(),t),e.signal=n.signal}}async handleResponse(e,t,n){var s;let i;switch(e.status){case r.H.UNAUTHORIZED:throw new Ne({jwtDrop:e.headers.has("X-Jwt-Drop")});case r.H.NOT_FOUND:throw new Fe;case r.H.TOO_MANY_REQUESTS:throw await(o=500,new Promise(e=>setTimeout(e,o))),new Ue;case r.H.NO_CONTENT:case r.H.ALREADY_REPORTED:i=null;break;default:if(e.status===r.H.FORBIDDEN&&!t.noThrowUnauthorizeErrorOn403)throw new Ne({jwtDrop:e.headers.has("X-Jwt-Drop")});if(!e.ok){const r=new Error(`Fetch failed with status code ${e.status}`);throw r.status=e.status,null!=(s=e.headers.get("Content-Type"))&&s.includes("application/json")&&(i=await e.json()),t.keepRespData&&(r.data=i),this.enrichJournalBody(n,i,e.status.toString(),r.message),r}if(i="text"===t.fetchType?await e.text():await e.json(),"v2"===t.v&&null!=i&&i.error)throw new $e(i.error)}var o;return{data:i,response:e}}handlePowResponseHeader(e){const t=e.headers.get("X-Pow"),n=this.getServices().tokenService;n&&n.handleServerResponse(t,e.url)}enrichJournalBody(e,t,n,r){e.body=JSON.stringify(t),e.status=n,e.errorText=null!=t&&t.error_description?null==t?void 0:t.error_description:r,null!=t&&t.error_code&&(e.errorCode=null==t?void 0:t.error_code)}processFetchedData(e,t,n){if(!n.useProccessResponse||null==t)return Promise.resolve(n.includeResponse?{response:e,responseData:t,headers:e.headers}:t);const s=(0,r.p)({wb:this.wb,getWbSpa:this.getWbSpa});return new Promise((r,i)=>{s(t,t=>n.includeResponse?r({response:e,responseData:t,headers:e.headers}):r(t),e=>i(new $e(e)),t=>n.includeResponse?r({response:e,responseData:t,headers:e.headers}):r(t))})}async handleFetchError(e,t,n,s,i,o,a){var l,c;let u=e;const h="AbortError"===e.name;if(h&&s.throwTimeoutError)throw e;const m=!e.isCustomError&&e instanceof TypeError&&("Failed to fetch"===e.message||"NetworkError when attempting to fetch resource."===e.message||"Cancelled"===e.message);if(s.logOff||null==(l=this.getWbSpa())||l.journalLogError(p(d({},a),{errorText:`${e.name}: ${e.message}`})),m&&(u=new je(e.message)),(m||h)&&s.tryResend)return this.getServices().retryFetchService.saveRequest(t,n,s),{};if(s.hasOwnProperty("defaultValue"))return s.includeResponse?{response:void 0,responseData:s.defaultValue}:s.defaultValue;if(u.isUnauthorize&&u.jwtDrop&&((0,r.h)().setToken(null),s.noLoginPopupOnUnauthorized?s.redirectUnauth&&(null==(c=this.getWbSpa())||c.signIn({query:{returnUrl:window.location.href}},!1)):await(0,r.h)().loginPopup()),e.isNotFound&&s.throwErr404)throw e;if(i===o&&s.nullOnError)return null;if(i===o&&e instanceof TypeError&&("Failed to fetch"===e.message||"NetworkError when attempting to fetch resource."===e.message))throw new We;if(s.throwErr||s.useProccessResponse||s.throwLastError&&i===o)throw e}async applyPowToken(e){e.headers instanceof Headers||(e.headers=new Headers(e.headers));try{const t=this.getServices().tokenService;if(t){const n=await t.initToken();n&&e.headers.set("X-Pow",n)}}catch(e){}}static factory(e){return new He(e)}}const Ve="httpClient",ze=()=>y(Ve),qe=e=>{((e,t)=>{const n=b(e);f()[n]=t})(Ve,e)}},48263:function(e,t,n){"use strict";n.r(t),n.d(t,{CancelledRequestError:function(){return r.C},HOST_AUTH_ALLOW:function(){return s.c},HOST_SITE:function(){return s.d},HTTP_CODES:function(){return s.H},HttpClient:function(){return r.H},KnownServerError:function(){return r.K},NetworkError:function(){return r.b},NotFoundError:function(){return r.N},TooManyRequestsError:function(){return r.T},UnauthorizeError:function(){return r.U},getHttpClient:function(){return r.g},setHttpClient:function(){return r.s}});var r=n(20166),s=n(98503)},68147:function(e,t,n){"use strict";n.r(t),n.d(t,{getI18nService:function(){return S}});var r=n(13934),s=n(36650),i=Object.defineProperty,o=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,d=(e,t,n)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,p=(e,t)=>{for(var n in t||(t={}))c.call(t,n)&&d(e,n,t[n]);if(l)for(var n of l(t))u.call(t,n)&&d(e,n,t[n]);return e},h=(e,t)=>o(e,a(t)),m=Object.defineProperty,g=(e,t,n)=>((e,t,n)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);const f=()=>window||globalThis||{},b=e=>{const t=`instancer_${e}`;return Symbol.for(t)},y={fallbackLng:"ru",debug:"true"===localStorage.getItem("i18n_debug"),fallbackNS:!1,saveMissing:!0,missingKeyHandler:(e,t,n,r,s,i)=>((!i||!i.ignoreMissingKey)&&console.warn("i18next missingKey: "+n),n)};class v{constructor(){var e;g(this,"instance"),g(this,"language"),g(this,"remoteMfeImports"),this.remoteMfeImports={},this.language=(null==(e=window.wb)?void 0:e.currentLanguage)||"ru"}getUtils(e){return{t:(t,n={})=>{if(!this.instance)throw new Error("instance ещё не инициализирован");const{isValid:s,availableNS:i}=(0,r.v)({frontName:e,key:t,nsFromOptions:null==n?void 0:n.ns});return s||console.error(`Ключ "${t}" использует NS другого микрофронта, разрешенные NS: [${i}]`),this.instance.t(t,h(p({},n),{ns:e}))},plural:(t,n)=>{const s=n,{count:i,displayCount:o}=s,a=((e,t)=>{var n={};for(var r in e)c.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&l)for(var r of l(e))t.indexOf(r)<0&&u.call(e,r)&&(n[r]=e[r]);return n})(s,["count","displayCount"]);if(!this.instance)throw new Error("instance ещё не инициализирован");const{isValid:d,availableNS:m}=(0,r.v)({frontName:e,key:t,nsFromOptions:null==n?void 0:n.ns});return d||console.error(`Ключ "${t}" использует NS другого микрофронта, разрешенные NS: [${m}]`),this.instance.t(`${t}.plural`,h(p({count:i||0,displayCount:o||i||0,interpolation:{escapeValue:!o}},a),{ns:e}))},getLanguage:()=>this.language,changeLang:e=>{localStorage.setItem("wb__lang",e),window.wb.currentLanguage=e,location.reload()}}}getI18nInstance(){return this.instance}registerRemoteMfeImports(e){this.remoteMfeImports=e}async createI18nInstance(e){if(this.instance)return this.instance;const{initReactI18next:t}=await n.e(43685).then(n.t.bind(n,43685,19));this.instance=s.Ay.createInstance();const{hostName:r,options:i,lazyForeignTranslations:o}=e;return await this.instance.use(t).init(p(p({lng:this.language},y),i)),await this._loadTranslationsModule(this.instance,r,o),this.instance}async loadRemoteResourcesAsync(e){try{if(!this.instance)throw new Error("instance ещё не инициализирован");if(this.instance.hasResourceBundle(this.language,e))return;const{ru:t,lazyForeignTranslations:n}=await this._loadRemoteResoucesAsync(e);this.instance.addResourceBundle("ru",e,t),await this._loadTranslationsModule(this.instance,e,n)}catch(e){console.error("loadRemoteResourcesAsync = ",e)}}async _loadTranslationsModule(e,t,n){try{const r=this.language;if("ru"!==r){const s=new Promise((e,t)=>setTimeout(()=>t(new Error("загрузка перевода превысила 15 секунд")),15e3)),i=(0,n[r])(),o=await Promise.race([i,s]);o&&e.addResourceBundle(r,t,o.default)}}catch(e){console.error("Translation loading error:",e)}}async _loadRemoteResoucesAsync(e){const t=this.remoteMfeImports[e];if(!t)throw new Error(`Не найден ${e}, добавьте в REMOTE_I18N_RESOURCES_IMPORT`);return(await t()).default}}const w="i18nService",S=()=>{let e=(e=>{const t=b(e);return f()[t]||null})(w);return e||(e=new v,_(e)),e},_=e=>{((e,t)=>{const n=b(e);f()[n]=t})(w,e)}},13934:function(e,t,n){"use strict";n.d(t,{v:function(){return i}});const r="website";function s(e,t){return!e.includes(":")||t.includes(e.split(":")[0])}function i(e){const{frontName:t,key:n,nsFromOptions:i}=e;let o=t===r?[r]:[t,r],a=Array.isArray(n)?n.every(e=>s(e,o)):s(n,o);return{isValid:(!i||o.includes(i))&&a,availableNS:o}}},68076:function(e,t,n){"use strict";n.r(t),n.d(t,{getInstance:function(){return i},getSaveInstance:function(){return o},setInstance:function(){return a}});const r=()=>window||globalThis||{},s=e=>{const t=`instancer_${e}`;return Symbol.for(t)},i=e=>{const t=s(e);return r()[t]||null},o=e=>{const t=i(e);if(!t)throw new Error(`Can't get ${e} instance`);return t},a=(e,t)=>{const n=s(e);r()[n]=t}},19417:function(e,t,n){"use strict";n.d(t,{C:function(){return l},g:function(){return a}});var r=n(68076),s=Object.defineProperty,i=(e,t,n)=>((e,t,n)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class o{constructor(e){i(this,"type","LazyInstanceStore"),i(this,"instance"),i(this,"loadTask",null),i(this,"loadFunc"),this.instance=null,this.loadTask=null,this.loadFunc=e}async getInstance(){if(this.instance)return this.instance;if(this.loadTask||(this.loadTask=this.loadInstance()),await this.loadTask,null===this.instance)throw new Error("Lazy instance not loaded");return this.instance}async loadInstance(){try{const e=await this.loadFunc();this.handleLoadFunc(e)}catch(e){throw this.loadTask=null,e}}handleLoadFunc(e){this.instance=e,this.loadTask=null}}const a=async e=>{const t=(0,r.getInstance)(e);if(!t)throw new Error(`Can't get ${e} instance`);if(!(e=>!!e&&"LazyInstanceStore"===e.type)(t))throw new Error(`Instance with name "${e}" is not a LazyInstanceStore`);return await t.getInstance()},l=(e,t)=>{const n=new o(t);(0,r.setInstance)(e,n)}},86805:function(e,t,n){"use strict";n.d(t,{e:function(){return s},i:function(){return i},r:function(){return r}});const r=e=>"string"==typeof e,s=e=>void 0===e,i=e=>0===Object.keys(e).length},98534:function(e,t,n){"use strict";n.r(t),n.d(t,{Observable:function(){return o},observify:function(){return a}});var r=n(86805),s=Object.defineProperty,i=(e,t,n)=>((e,t,n)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class o{constructor(e={}){return i(this,"observers",new Map),i(this,"updateInProgress",!1),i(this,"pendingNotifications",new Set),this.checkForConflicts(e),(0,r.i)(e)||Object.entries(e).forEach(([e,t])=>{this.defineObservableProperty(e,t)}),new Proxy(this,{set:(e,t,n)=>{if(!(0,r.r)(t))throw new TypeError("Property must be a string, got "+typeof t);return e[t]!==n&&(e[t]=n,this.updateInProgress?this.pendingNotifications.add(t):this.notifyObservers(t)),!0},get:(e,t)=>{if(t)return e[t]}})}subscribe(e,t){const n=String(e);this.observers.has(n)||this.observers.set(n,new Set),t(),this.observers.get(n).add(t)}unsubscribe(e,t){var n;const r=String(e);null==(n=this.observers.get(r))||n.delete(t)}update(e){this.updateInProgress=!0,Object.entries(e).forEach(([e,t])=>{this[e]=t}),this.updateInProgress=!1,this.pendingNotifications.forEach(e=>this.notifyObservers(e)),this.pendingNotifications.clear()}notifyObservers(e){var t;const n=String(e);null==(t=this.observers.get(n))||t.forEach(e=>e())}checkForConflicts(e){const t=Object.getOwnPropertyNames(Object.getPrototypeOf(this)),n=Object.keys(e).filter(e=>t.includes(e));n.length>0&&console.warn(`Observable initialization warning: The following keys in the initial state conflict with properties in the prototype: ${n.join(", ")}.`)}defineObservableProperty(e,t){Object.defineProperty(this,e,{configurable:!0,enumerable:!0,writable:!0,value:t})}}const a=(e={})=>new o(e)},42094:function(e,t,n){"use strict";n.d(t,{Et:function(){return l},Sw:function(){return m},cA:function(){return g},cY:function(){return c},nF:function(){return a},o4:function(){return h},sX:function(){return i},sg:function(){return o},yy:function(){return f}});var r=Object.defineProperty,s=(e,t,n)=>((e,t,n)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);const i=()=>(1e9*Math.random()).toFixed()+String(Date.now()),o=(e,t)=>{let n=null,r=Date.now();return t<=0?e:(...s)=>{const i=Date.now();n&&i-r<=t?clearTimeout(n):r=Date.now(),n=setTimeout(()=>e(...s),t)}},a=(e,t)=>{let n=Date.now();return(...r)=>{const s=Date.now();s-n<=t||(n=s,e(...r))}},l=e=>!isNaN(parseFloat(String(e)))&&isFinite(Number(e));class c{constructor(){s(this,"_resolve",()=>{}),s(this,"_reject",()=>{}),s(this,"_promise",new Promise((e,t)=>{this._reject=t,this._resolve=e}))}get promise(){return this._promise}get then(){return this._promise.then.bind(this._promise)}resolve(e){this._resolve(e)}reject(e){this._reject(e)}}function u(e){return e>64&&e<91?e-65:e>96&&e<123?e-71:e>47&&e<58?e+4:43===e?62:47===e?63:0}function d(e){return e<26?e+65:e<52?e+71:e<62?e-4:62===e?43:63===e?47:65}function p(e){for(var t=2,n="",r=e.length,s=0,i=0;i<r;i++)t=i%3,s|=e[i]<<(16>>>t&24),(2===t||e.length-i===1)&&(n+=String.fromCodePoint(d(s>>>18&63),d(s>>>12&63),d(s>>>6&63),d(63&s)),s=0);return n.substr(0,n.length-2+t)+(2===t?"":1===t?"=":"==")}class h{static decode(e){return e?function(e){for(var t,n="",r=e.length,s=0;s<r;s++)t=e[s],n+=String.fromCodePoint(t>251&&t<254&&s+5<r?1073741824*(t-252)+(e[++s]-128<<24)+(e[++s]-128<<18)+(e[++s]-128<<12)+(e[++s]-128<<6)+e[++s]-128:t>247&&t<252&&s+4<r?(t-248<<24)+(e[++s]-128<<18)+(e[++s]-128<<12)+(e[++s]-128<<6)+e[++s]-128:t>239&&t<248&&s+3<r?(t-240<<18)+(e[++s]-128<<12)+(e[++s]-128<<6)+e[++s]-128:t>223&&t<240&&s+2<r?(t-224<<12)+(e[++s]-128<<6)+e[++s]-128:t>191&&t<224&&s+1<r?(t-192<<6)+e[++s]-128:t);return n}(function(e){for(var t,n,r=e.replace(/[^A-Za-z0-9\+\/]/g,""),s=r.length,i=3*s+1>>2,o=new Uint8Array(i),a=0,l=0,c=0;c<s;c++)if(n=3&c,a|=u(r.charCodeAt(c))<<6*(3-n),3===n||s-c===1){for(t=0;t<3&&l<i;t++,l++)o[l]=a>>>(16>>>t&24)&255;a=0}return o}(e)):null}static encode(e){return e?p(function(e){for(var t,n,r=e.length,s=0,i=0;i<r&&null!=(n=e.codePointAt(i));i++)n>65536&&i++,s+=n<128?1:n<2048?2:n<65536?3:n<2097152?4:n<67108864?5:6;t=new Uint8Array(s);for(var o=0,a=0;o<s&&null!=(n=e.codePointAt(a));a++)n<128?t[o++]=n:n<2048?(t[o++]=192+(n>>>6),t[o++]=128+(63&n)):n<65536?(t[o++]=224+(n>>>12),t[o++]=128+(n>>>6&63),t[o++]=128+(63&n)):n<2097152?(t[o++]=240+(n>>>18),t[o++]=128+(n>>>12&63),t[o++]=128+(n>>>6&63),t[o++]=128+(63&n),a++):n<67108864?(t[o++]=248+(n>>>24),t[o++]=128+(n>>>18&63),t[o++]=128+(n>>>12&63),t[o++]=128+(n>>>6&63),t[o++]=128+(63&n),a++):(t[o++]=252+(n>>>30),t[o++]=128+(n>>>24&63),t[o++]=128+(n>>>18&63),t[o++]=128+(n>>>12&63),t[o++]=128+(n>>>6&63),t[o++]=128+(63&n),a++);return t}(e)):""}static encodeBytesArr(e){return p(e)}}const m=e=>!isNaN(parseFloat(String(e)))&&isFinite(Number(e)),g=()=>String(performance.now())+(1e9*Math.random()).toFixed()+String(Date.now()),f=e=>new Promise(t=>setTimeout(t,e))},8379:function(e,t,n){"use strict";n.d(t,{Kg:function(){return r},O9:function(){return d},RI:function(){return i},Uu:function(){return a},X1:function(){return l},b0:function(){return s},cy:function(){return c},oc:function(){return p},rI:function(){return o},tH:function(){return u}});const r=e=>"string"==typeof e,s=e=>void 0===e,i=e=>0===Object.keys(e).length,o=e=>"function"==typeof e&&"prototype"in e&&e.prototype.constructor===e,a=(e,t)=>e in t;function l(e){return e&&"object"==typeof e&&"data"in e}function c(e){return Array.isArray(e)}const u=(e,t)=>e instanceof t;function d(e){return null!=e}function p(){return typeof window<"u"}}},a={};function l(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={id:e,loaded:!1,exports:{}};return o[e].call(n.exports,n,n.exports,l),n.loaded=!0,n.exports}l.m=o,l.c=a,l.amdO={},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,{a:t}),t},t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},l.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var s=Object.create(null);l.r(s);var i={};e=e||[null,t({}),t([]),t(t)];for(var o=2&r&&n;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(function(e){i[e]=function(){return n[e]}});return i.default=function(){return n},l.d(s,i),s},l.d=function(e,t){for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.f={},l.e=function(e){return Promise.all(Object.keys(l.f).reduce(function(t,n){return l.f[n](e,t),t},[]))},l.u=function(e){return"app/"+({316:"orderThankYou-page",1191:"c2cFeedbackQuestions-page",1588:"offersOtherSellers-page",2332:"brandlistByLetter-viewmodel",2495:"giftCertificates-page",3994:"favBrandAndSellerItem-component",4626:"confirmEmail-viewmodel",5936:"sentryInit",6015:"SearchByImageUrlService",6857:"documents-page",7332:"catalogCard-component",7392:"Popover-component",8979:"SegmentControl-component",9050:"SearchSuggestionsPopupViewModel",9846:"realty-page",9867:"cancelCourier-popup",10930:"installment-component",11025:"polyfill-formdata",11599:"customerReceipt-page",12408:"PersonalCabinetMenuPreview",12422:"MobileBasketNavigateController",13168:"realtyCard-page",13178:"SuggestionsHelper",13392:"purchasesCertificates-viewmodel",13615:"info-cancel-popup",14130:"FadeText-component",15660:"UpgradeWalletPopup",15743:"recommendationsCatalog-viewmodel",16107:"chinaLanding-page",17462:"courierDeliveryOption-popup",17491:"sideMenu",17877:"favoriteGoods-page",18843:"activeOrders-viewmodel",19689:"btnAdvertising",21080:"chinaLanding-viewmodel",21100:"cashbackLanding-page",21556:"favBrandAndSellerItem",22131:"purchasesCertificates-page",22591:"emergencyAidLanding-page",23018:"wbBankActivation-page",23029:"c2cProduct-viewmodel",24014:"WarnReplanishWalletPdlPopup",24176:"notificationPopup",24388:"customerReceipt-viewmodel",24540:"CropSearchImagePopupViewModel",24564:"favoriteSellers-viewmodel",24997:"wbWallet-page",25201:"confirmEmail-page",25961:"TooltipNext-component",26174:"brandsPreviews-page",26192:"openUploadImageForSearchByImagePopup",26389:"c2cOrders-viewmodel",26524:"pathFinder-service",26712:"error404-viewmodel",29001:"b2bLanding-viewmodel",29107:"feedbacks-page",30068:"userCompaniesManager",30407:"residentialCard-page",30600:"signIn-viewmodel",31071:"favoriteSellers-page",31354:"deliveryCode-service",31773:"cashbackGuidePopup",31835:"archivePositions-page",31887:"generalPreloader-component",32321:"realtyCard-viewmodel",32466:"realtyBooking-viewmodel",32554:"collapse",33681:"sellerCatalog-page",33756:"collapse-component",33903:"animationHelper",34116:"userInfoRequester",34183:"yourCertificates-viewmodel",35417:"swiper-component",35726:"favoriteGoods-viewmodel",36572:"otpuskaemCenyLanding-page",36662:"activeOrders-page",37005:"myFeedbacks-page",37510:"expandableText",37896:"lottery-service",38270:"wbWallet-viewmodel",40065:"c2cAd-viewmodel",40119:"cancel-delivery-popup",40539:"realty-viewmodel",40629:"giftCertificatesThankYou-viewmodel",41356:"subMenuShower",42096:"walletLocaleError",42107:"NewOfferPopupViewModel",42369:"requisitesListPopup",42520:"categoryCatalog-page",44843:"pharmaHome-page",44914:"sessionsPopup",45050:"brandlist-page",45240:"pharmaHome-viewmodel",45352:"lotteryTickets-viewmodel",45817:"cashback-component",46950:"clubDelivery-popup",47920:"feedbacks-viewmodel",48078:"AdultConfirmModal",48378:"brandsCatalog-page",48818:"CropSearchImagePopup",48829:"generalPreloader",48898:"infiniteScroll-component",48907:"myWallet-viewmodel",49758:"Popover",49916:"polyfill-string-replaceall",50892:"webApiDeliveryCode-service",51249:"fixedPanel-component",52059:"btnAdvertising-component",52092:"wlArrived-viewmodel",52634:"searchByImage-viewmodel",53214:"helpers",53435:"lotteryTickets-page",53475:"retryUpgradeWallet-popup",53626:"questions-page",54130:"polyfill-array-findlast",55688:"b2bLanding-page",55868:"c2cProduct-page",56204:"c2cFeedbackQuestions-viewmodel",56467:"ActionNotificationsFactory",56543:"favoriteBrands-page",56868:"activateCertificate-viewmodel",57751:"wlArrived-page",57960:"archivePositions-viewmodel",58687:"walletOpenedPopup",58976:"mechtallionLottery-page",59489:"searchCatalog-viewmodel",59995:"promotions-page",60868:"chanceOnLanding-viewmodel",62045:"polyfill-svgclasslist",62131:"premiumUserPopup",62201:"services-page",62242:"recommendationsCatalog-page",62996:"favoriteBrands-viewmodel",63043:"polyfill-abortcontroller",63946:"mo-icons",64102:"realtyBookingsList-page",64210:"react-app",64849:"tracking-popup",64903:"AccountEditSettingsPopup",65097:"searchByImage-page",65863:"questions-viewmodel",66132:"emergencyAidLanding-viewmodel",67691:"personalCabinet-page",67825:"subscription-viewmodel",69146:"documents-viewmodel",69397:"loadingError",70504:"product-page",70619:"astroArchiveOrders-service",70973:"js-nacl",71352:"personalCabinet-viewmodel",71415:"walletCrypto",71717:"cashbackLanding-viewModel",71927:"ua-parser",72168:"promotions-viewmodel",72418:"recommendationsSearchCatalog-page",72747:"realtyBookingsList-viewmodel",72778:"services-viewmodel",73077:"otpuskaemCenyLanding-viewmodel",73266:"archiveOrders-service",73845:"orderThankYou-viewmodel",74212:"polyfill-array-flatmap",74425:"jsencrypt",74736:"searchCatalog-page",75440:"c2cAd-page",75955:"brandsPreviews-viewmodel",76273:"realtyBooking-page",76279:"brandlistByLetter-page",76323:"NewOfferPopup",76924:"giftCertificatesThankYou-page",76979:"swiper",77596:"DebtPositions",77842:"premiumSubscriptionService",78119:"brandlist-viewmodel",79197:"offersOtherSellers-viewmodel",80265:"product-viewmodel",80428:"customerReceiptsAstroClient",80554:"UpgradeToAccountWalletPopup",80852:"giftCertificates-viewmodel",81504:"subscription-page",81774:"mo-ui",82134:"promotionsCatalog-page",82343:"brandsCatalog-viewmodel",82704:"AgreeTermsPopup",83729:"mechtallionLottery-viewmodel",85145:"categoryCatalog-viewmodel",85576:"lkPaymentPopup",86127:"chanceOnLanding-page",86913:"SegmentControl",88151:"wbBankActivation-viewModel",89016:"customCharges-popup",89179:"signIn-page",89362:"react-vendors",90050:"courierRoute-popup",90258:"Floater",90616:"OutsideResalePopup",90873:"wallet-redesign-popup",90930:"sellerCatalog-viewmodel",91311:"cashbackGuidePopup-component",91944:"expandableText-component",93830:"myWallet-page",94243:"TooltipNext",95116:"EmptyBasket",95211:"error404-page",95338:"favoriteGoodsModel",95631:"activateCertificate-page",96186:"CompanySelectPopup",96406:"myFeedbacks-viewmodel",96910:"cancel-delivery-info-popup",96977:"polyfill-weblocks",97498:"yourCertificates-page",98084:"Floater-component",99058:"banners-component",99452:"c2cOrders-page"}[e]||e)+"."+{30:"126e3a0fe82eb3d4d006",316:"2699a7d199ca6cf83f36",1191:"355292de28d0e7be3ef2",1588:"2b90a58429876b8bea29",2332:"240e96990e96a433f009",2495:"a16420b8981c2d7dabb5",3994:"30ce55ffae8c72704f7c",4626:"eb381c287d6839a52ab9",5046:"711ca79ade63d8cdfc0c",5421:"a5caec0aaa91be321764",5521:"994f5c5ec2e7847fe8c8",5936:"c61b844e294990b09cb4",6015:"313caca7de8f730fe444",6103:"0a318a44c1ba59dc2506",6627:"a91f2a0ca337e32f9df1",6679:"7b365072c50ebe14c90a",6857:"a7d453839317a961668a",6859:"8b0d37587198f20e0421",7332:"c9acf52c048368c92b5a",7392:"87f160b2c774b67403d4",7573:"3b4544bd74c41ebc805f",8979:"4243b217f22f151fa21b",9050:"0f47cb71efdff92d782d",9282:"5717eff8304a5495ddaf",9846:"242c150f94ebb56adab8",9867:"c5924f5dda27031059f9",10930:"ea38faac6b4836faed3f",11025:"ff64a5400ce9c80306bc",11599:"a845d3da57a95f0821f2",12209:"3a82bc1978b0e6937f2d",12408:"8a1c80226a252fcb10e2",12422:"ed07d5374f940367abbd",13168:"f8f472da65c526b1f4a7",13178:"412137b2f8a4c5d9f7df",13392:"cde1661565e2722f1396",13615:"97e261419ff8cf32222f",14130:"2899919c7560a107cfc2",15660:"a629fe893ee6d65cd016",15743:"66334bb056d443e8bf49",16107:"ddde775d6901c017dddc",17166:"ccfcf8ee407f1aa077be",17462:"1a8d7611641a44f84bf3",17491:"bb07d46df84b5fef7319",17877:"2f699704b8acb74ec382",18843:"33621d855e17a16c411d",19689:"50d805e4d36b1d439ebc",20551:"978860a28fdff646c4f3",20576:"6880f6aea5668ccbd6ae",20617:"46a265aa1e68d40dbecc",20735:"89b29896bd1a2c7f6e5a",20939:"3e41386d60408a509a4c",21080:"900fbadaa6440f840f22",21100:"1eb352f42d26b9abb61b",21556:"d905244a57731e8eee9f",22131:"4a7369ce8a3491074adf",22591:"845d311d31dfa0c7591a",23018:"8190bd5d366c3dd060bb",23029:"0f0750ae134e28531449",23468:"d41e83f066102a7fd8d7",24014:"036edef904cfbb804c29",24176:"f128729bc709a6994a1a",24388:"aeef23c339c825fd85ff",24540:"8ddea16ae9c5d66aea26",24564:"115f6d33cb2cfe50ec2b",24997:"3e96aa1bae9bdd26b0ff",25020:"996020eaa80770a6e280",25201:"7520af7e4fc6f66e7853",25207:"f5571d958f918a1003e8",25281:"deac130f1f277b13b346",25961:"e3c1ed7495a492a8978f",26174:"17ca23c90cbc4fcf80dd",26192:"66113c1dee99c0696e96",26389:"ba07413eb323f2024775",26524:"677822c9c80f1bf78597",26625:"a75de24fdeec22ee8ab0",26712:"675f3834fdba0ed289f9",28288:"daf3092786f503f6eca2",28862:"fcef2fd995d4ad1a3bb5",29001:"1c89f3fddbf1a24112c0",29107:"a0330a7a3f2a4d5ded80",30068:"33dcfed9735ec5276005",30407:"018af73ad587e8d009cd",30600:"b630f3564d0d1c3d1679",30725:"d5da157cd514c3071c8a",31071:"6f8ffbc7f06dd4559815",31354:"bebd69479db94ba7ed71",31773:"ec2a2b8c6a59a2cf4fe8",31835:"260fdd5fc1b3744b9b12",31887:"bfeab9b3851afea4c176",32321:"bfd1b1f9c06033049018",32466:"87a2a4c4d45715594a4b",32554:"4b4f02e4dfe38ced688f",32889:"48fdfceeee4ac956a536",33681:"210c467d740592be11b1",33742:"69ff2a635e3b405e25be",33756:"e8b418aa0a114578c3a3",33903:"a06e3ebb2261630ecb1d",34116:"6b5ed65a0411a24f3026",34183:"597b316444929d68efb1",35417:"721ded0e4fa0327c5c1b",35658:"8ee3d698163ec8a7f102",35726:"11aeef0d6c1ce0b95347",35746:"bced056c30f236b81cf2",36e3:"75e04f1fc8bec679edb4",36572:"8068f57c1afce5c378b1",36662:"05671a185a3cc98eac92",37005:"d6aec3b7118193d7fb55",37251:"05dd3247b7043b4d31b7",37472:"0ec017be8ea57cd9abaa",37510:"fbb27a3293f89ecbb243",37896:"f3f3a437e58c11319c2e",38270:"9bd9e74be3f3fbbd26c9",40065:"6010ea14a259e1f88feb",40119:"051b41ffb760c8ab86b8",40243:"73cb6e2161f14543a927",40539:"bcafdfde58e82bb1624f",40629:"58b46c37691ce470db8d",41356:"783fe5a9e1831ec159b8",41467:"12428776050247d43841",42096:"dfac737782f0e5b88d7c",42107:"ee80af0d9fbf2f933ca1",42369:"340832834d9e0112a9f9",42520:"bda3b9351268368a1f99",43685:"b9523248586e3e58ecf7",44843:"93ebb6b99643a9d752f0",44914:"58bf09f60c92206a35dc",45039:"ea9e442e151f8baa042a",45050:"897c588f9c18f82ad886",45240:"3d334fe16e3cb3116bb9",45352:"b71a790e808f911a323b",45817:"eeb37cfea724407e5916",46894:"c36fe0781cfa63231fc7",46950:"89669e4b255f99277b84",47891:"fed19dbef43be1b7d91d",47920:"e86f8158e5a596701dd2",48078:"4b01e12c4a751cfe53ae",48378:"005904c8bcc99d14bffa",48818:"1da3531930c6471a9bca",48829:"48aac3ebdaf775b50504",48898:"e37f5b72501fc4abfba1",48907:"140aaf6735e6fc62909d",49452:"77b66b11c45a50f8b5b1",49758:"e26d84c6f6c02a05e008",49785:"32204377d89268818f16",49916:"1869dc48385befb7a2e2",50187:"ef10d9f3999cb6dce00b",50704:"134f56b015355675924d",50892:"f9ccec88fd21f50f61ca",51249:"c889cd092567f067af30",51411:"33dde5d6dfd90efea1db",52059:"8b9f8838ca58fec556ad",52092:"a23692921729dc83c679",52634:"ce0bf6572eef6af92768",53214:"2de8c76c68897aed1c3c",53435:"1388436060c3352b221a",53475:"e6a1b6864a06997187aa",53518:"e999c4344f3d530027e1",53626:"a201717c7f42e2a5c77b",54130:"47bd5721078b4c1a4f4a",55014:"f2edce0d7c2a723e7819",55270:"c9954fcd48df6ff5e568",55688:"4efb5baa162a492782fa",55868:"1e1dc75c362e719037b2",55971:"402eb9f4a77fc3e759bc",56204:"7a0706359ee55dd7f56f",56467:"975091199c4327172691",56543:"e4a92943cd5cf75a21cf",56868:"179982b33d9af3b9bb29",57751:"28c240cb37ef1a8f204b",57960:"4d492adaa2fb72fee9a4",58377:"a028876cb4d6cbec1153",58687:"1ff65fb7f760eebb0ba3",58976:"62f3b3f0a482a5110911",59489:"ac429a720831fa41de22",59995:"8307b7250e72c2eea472",60079:"f35bedf50c1ed97ef6db",60868:"99ea2f6765e677e150bf",61237:"baf7935f0e1257ba9e6b",61875:"d801cf48b7ae8a5f8e7d",62045:"b50b23e77e435b12ea7b",62131:"eeb0bd6a8c8417b50df2",62201:"a46b49dd81df81780341",62242:"da36de5e8258a553aa95",62609:"d3e85844d84c56ebed24",62886:"d47724037fd220062f9d",62996:"297ac7a72348348fd8d4",63043:"429abb4358c36eab3380",63089:"da2c5dd6e423fe344be3",63603:"2e68bd8d5f2685d82894",63946:"5e70ff141a2113967f18",64073:"f2737780e66657d75bd6",64102:"c511a71d208dc79fb21e",64210:"5281c910fb505858fd9f",64404:"8cb677518e6a8d2c6459",64849:"4d26da954e3c3594a29b",64903:"6514cc2a24649871550c",65097:"a7f7da4a8670d40d35f3",65379:"1c48341267e1e1bcaccd",65719:"4a0c0beaba8c51ecb48b",65863:"3114876ad604b7c28082",65949:"4fe84843f3603baa4f07",66132:"cd004b825c97c1ee59ac",66261:"ec5e367ec61d9d58c021",67691:"e88e8beb4063959c1b2c",67825:"84c9abdcc1e1e526de50",68151:"0c9e5a519776a37b25d8",68890:"d011296a2199c2c68746",69146:"a15a38a5b0a5a19b87ba",69397:"af6799ad8b1800d5d08d",69827:"dffe04e5d94836b4a619",70504:"564f752a21f48003d1cd",70619:"968c6f05c56ff6f080fc",70837:"c7b3bc7bd90b7535c59e",70973:"344753f278715a637488",71352:"974c604514c6d8f21267",71415:"c16a9c3bd08b21016bc3",71487:"7509219285c263086d3f",71717:"5acd8bd5056e10498231",71927:"31ebd44ce8cc23e941da",71979:"13da64c69b3199420b3b",72168:"10033968d344e026bf48",72418:"6ee35e4b7bc225605b5f",72592:"296edfea733a94af7492",72747:"4f327ef7a31365a4ee67",72778:"a42869433d44ab39e06c",73077:"88fc2d2f5c6024620ba3",73266:"bcefe9ef3191dd72a18b",73526:"94114cc2139f79e94a44",73801:"e669fcba4655e54e9701",73845:"f1e71d41a41b30a26ab6",74212:"1a7a27ada997d18eca25",74425:"6730dc3824de66a55d23",74736:"82e67a8c7bc2e8dc3f5a",75104:"ef249785f1b7aa392d51",75440:"a519a8fb16b76d2040d1",75955:"8d890e060fce78abc42c",76273:"46b307b4173332d657fd",76279:"68b70e22dc4166055856",76323:"1f8b44426f00e774eb60",76904:"9f57719a5414ecec1e09",76924:"ae6b53a096ce98c9ceba",76979:"e28e8b779f7278ad337c",77215:"f10945a20b230cfc7957",77596:"8c9e5e9c9981d30a9045",77649:"e1f38fd86864a567ce36",77842:"4cb883117aed0032e5f1",78119:"fde2e40460a98d67f2ac",79197:"8b3cca9938b17154b9e3",80089:"6d1654a7ba1f6bf0e84e",80265:"60ab8f269bdde4fca35d",80428:"89d62369c0bef4d32224",80554:"c3077904b218da4e2abe",80717:"f1e408275cf0c43fd83e",80852:"818b785cafc7ef6c4d5d",81504:"1a038cbf9c6a6af09420",81774:"caa33cae8cceee3844dd",82134:"af59a51dffcc8ab1765e",82343:"efa8856417187d283584",82460:"7791b2003051762b9ff5",82704:"39faee0ae3b3dfbcbc23",83500:"f1cac9c1c10e4b11c494",83729:"d15ce17c939ff7aa50b9",83871:"c3da3922f570121e762a",84901:"8ec1d90ddcd1826e998d",85013:"6971e298001347f9e0a8",85145:"50a17e6b96e108fca725",85576:"1aadde2b12958a06a307",86127:"ec450055834d0681f87d",86913:"3fb6d04143ce353a21ed",87445:"fa917c55e057fb7575e6",87712:"549ff18b470a0c4b645d",87760:"8da3db3e043f4da6739b",88146:"f6acdd14f3a7ef312ce5",88151:"0f6d81c22a1c286ba1ab",89016:"395db0405fd658ff9963",89179:"f8b1d1edd17e72d5ffbf",89362:"922a8b76c291896d0a53",90050:"5ff85db6bdd5b52c8014",90258:"a0b6402039608b4c12c6",90568:"a499a412f5086408df4c",90616:"5e00ab988c080112cfaa",90861:"804cea32387cdbd6a177",90873:"d015faff67fa6cd96464",90930:"3a91e93b028e018ca68f",91311:"8cf71d143fc719fa6d52",91944:"bdf74ae9bd51bf81f2c7",92754:"b4441e94fa00a60552f1",93218:"bc97e537d8a58c0b98ba",93590:"f307ee13571c8237e4d4",93771:"ba691c4c07c4d755552d",93830:"4314b984a2324f23cf9d",94243:"1db78831386e4b82a47d",94360:"f4338690a4d149d89908",94739:"d41c46ac40734f4cfad7",95116:"d8e1eea7b698a237593e",95211:"1ec70dbb4e5f2943689a",95332:"2afa986fe06a692ce578",95338:"9f110ffb7d6188a0a096",95450:"f09c45660e4e835b9078",95631:"ca482c4de3dade11965e",95997:"baa4f6e08353e941fa4a",96186:"fe4e601d20be24b00137",96266:"5cdd70f2fde9e3876e69",96406:"b4f6f43a5aa36d032b47",96600:"ba932a0fdbd9e730e941",96910:"db8862a1a48c5b8bedfd",96977:"b9d36dbf11d6a32b7d16",97498:"6d758f384436b53321ed",98084:"f48a221f216b5593a3e1",98720:"01c080952947475c7c8b",99058:"c121aed277d15b75ccfe",99254:"e157145b90e23a9c1f53",99452:"81700b2bd458c17e9ebb",99650:"79b41a9598fcdca39f4e"}[e]+".js"},l.miniCssF=function(e){return"app/"+({316:"orderThankYou-page",1191:"c2cFeedbackQuestions-page",1588:"offersOtherSellers-page",2495:"giftCertificates-page",9867:"cancelCourier-popup",10930:"installment-component",12422:"MobileBasketNavigateController",13615:"info-cancel-popup",16107:"chinaLanding-page",17462:"courierDeliveryOption-popup",17877:"favoriteGoods-page",18843:"activeOrders-viewmodel",19689:"btnAdvertising",21100:"cashbackLanding-page",21556:"favBrandAndSellerItem",22131:"purchasesCertificates-page",22591:"emergencyAidLanding-page",24014:"WarnReplanishWalletPdlPopup",24176:"notificationPopup",24997:"wbWallet-page",26174:"brandsPreviews-page",26192:"openUploadImageForSearchByImagePopup",29107:"feedbacks-page",31071:"favoriteSellers-page",31773:"cashbackGuidePopup",31835:"archivePositions-page",32554:"collapse",33681:"sellerCatalog-page",36572:"otpuskaemCenyLanding-page",36662:"activeOrders-page",37005:"myFeedbacks-page",37510:"expandableText",40119:"cancel-delivery-popup",42096:"walletLocaleError",42369:"requisitesListPopup",42520:"categoryCatalog-page",44914:"sessionsPopup",45817:"cashback-component",47920:"feedbacks-viewmodel",48078:"AdultConfirmModal",48378:"brandsCatalog-page",48829:"generalPreloader",49758:"Popover",53435:"lotteryTickets-page",53475:"retryUpgradeWallet-popup",55688:"b2bLanding-page",55868:"c2cProduct-page",58976:"mechtallionLottery-page",59995:"promotions-page",62131:"premiumUserPopup",64210:"react-app",64849:"tracking-popup",64903:"AccountEditSettingsPopup",65097:"searchByImage-page",70504:"product-page",71717:"cashbackLanding-viewModel",74736:"searchCatalog-page",75440:"c2cAd-page",76323:"NewOfferPopup",76924:"giftCertificatesThankYou-page",76979:"swiper",81504:"subscription-page",82134:"promotionsCatalog-page",85576:"lkPaymentPopup",86127:"chanceOnLanding-page",86913:"SegmentControl",89016:"customCharges-popup",89179:"signIn-page",90050:"courierRoute-popup",90258:"Floater",90616:"OutsideResalePopup",90873:"wallet-redesign-popup",93830:"myWallet-page",94243:"TooltipNext",95116:"EmptyBasket",95211:"error404-page",95631:"activateCertificate-page",96186:"CompanySelectPopup",96910:"cancel-delivery-info-popup",97498:"yourCertificates-page",99452:"c2cOrders-page"}[e]||e)+"."+{316:"595068e1795452d7d7a2",1191:"214f4319ebe3628ffbb4",1588:"f2b4ff5b77b274230729",2495:"21ae7e47350dd24a4bb3",5046:"07277ab28f590a02f0bd",5421:"acd5ef8b448ee68ef1dc",9282:"d02678a0a8d7273cea46",9867:"348041dc61e194b94d7e",10930:"2f98030d50fa804547b6",12422:"98157d3bc27376e86552",13615:"4fb1828375b673ac8126",16107:"1184cc1635b8a243b210",17166:"8ead7455d15e451d1487",17462:"10db803f676a258e5e19",17877:"abe99aecc17258704def",18843:"94c7d3f1b6d38134634e",19689:"6de2a1b035b915990361",20617:"79218615ab14ac0551ea",21100:"0cb0a4e1d87ba9ddca8f",21556:"8b23d84cc28bd62542a6",22131:"a099291eb8ba5d41272e",22591:"3aaa774475a13defd1d0",24014:"c3d850a0d0024c5e10fa",24176:"a437f54fc1d7715b8da0",24997:"5b3e0c7ea03ec40f3e0d",25281:"341b205eb0a38131647b",26174:"ef776f966f729ce5f602",26192:"bb43b5ea850dad24f26d",26625:"9e2e0d1b04ceca75cf49",29107:"bc41c536f83cf4ca39a9",31071:"8780ee7b180dd3d85027",31773:"e1d1cf8c454be93fb329",31835:"f5fc2925065738dbdb33",32554:"535099fd084f010960a9",33681:"0360e40cb755e9cf5bc4",33742:"60aa2c397808254f9c86",35658:"828290ba7aa61b17e9fe",36572:"b6f468698279880a5204",36662:"ffa15198339a67a9ece3",37005:"91935213053716b53c86",37251:"a9d726abac036e941a0b",37510:"4c9ab169bdb67cc6ac53",40119:"a3630b3c521e5fb655ad",40243:"0b01959e93d876fdff55",42096:"0dcbf9faf430c03c696d",42369:"318ad261c11d09dd037e",42520:"7bb5c568d8753c4f9aa7",44914:"e961b9a2f58a1cde36c5",45817:"7dd36a048db36dcc6676",47920:"bc41c536f83cf4ca39a9",48078:"b237513c78d2eaef2197",48378:"ef776f966f729ce5f602",48829:"61b5f7fa150f25dc6e6f",49452:"4c9da2b19dceadfba202",49758:"da8d288482eabfe77f45",51411:"9bd31e7b9a35aee57a9b",53435:"e000d5e7d020722aea1f",53475:"d63f74d32c816734306a",55688:"72f870ad5b30cd9bf239",55868:"e07a5cba7d71ec6ec417",58976:"271f96812ea161907723",59995:"fa2d53468f1dcaa33af7",61875:"4b1c882329a4202fe0ca",62131:"3e448520050ff29a9ad0",64210:"272225c908a4505004b5",64849:"934e2b87bcf5b77028d0",64903:"0c32c3b7e58591185dd0",65097:"258baa710ead1e3b6b69",65379:"c42de570765cb1fe3074",65719:"9a91cabf84aeec7565fc",68151:"d8ecbdd4c0349450626b",69827:"363fc47f73056cf965bb",70504:"cb85c639e7a14285e362",71717:"6e22abc66d0f3230450e",72592:"de0d27e5f103b400ce72",73801:"e036d2cb5a48197dabd9",74736:"2dbe9166a5c9eaf08045",75440:"50f016f4e96c8d78571a",76323:"d7ab3ff32213e6b8cab8",76924:"8c31ac7c07de63a16dfb",76979:"dc5276da037af78018bd",81504:"a073f7f8e8f810f58657",82134:"667e6face5bbe7fc2e8d",83500:"fee30c02f7b0aacb4e68",85576:"bb10f3bc3efbc176b0dc",86127:"8a93be85dc9d451b37b5",86913:"22a26f392aca1f4f24cf",87760:"e482d34774e51c2c345b",88146:"79218615ab14ac0551ea",89016:"8f03b8b1223910e4d5bd",89179:"4b1c882329a4202fe0ca",90050:"e78b00b7d2a9a7233331",90258:"b8be4b617b54126c20b6",90616:"32cacd5368aa884969cb",90873:"7fa8d3cda9f096ccce8e",92754:"69af45542c06990edd59",93830:"18e0dc0426e0e052fd8a",94243:"524636511a8d97acc837",95116:"f3474d0b0e7732329f68",95211:"3ced447143551787df09",95332:"3c2b299af5e4c3ff253b",95450:"73d0b92f0f00c8137bac",95631:"8cb56f4eface0aa66817",96186:"d9957cd97c21b88fa10f",96266:"904465f90c67a3330b78",96910:"aceb28c2445cb5c3586e",97498:"ba839a664a53454a109c",99452:"3d24dbc3a685dd25e23f",99650:"061eb15d0a2c59b94e0f"}[e]+".css"},l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n={},r="website:",l.l=function(e,t,s,i){if(n[e])n[e].push(t);else{var o,a;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==r+s){o=d;break}}o||(a=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,l.nc&&o.setAttribute("nonce",l.nc),o.setAttribute("data-webpack",r+s),o.src=e),n[e]=[t];var p=function(t,r){o.onerror=o.onload=null,clearTimeout(h);var s=n[e];if(delete n[e],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach(function(e){return e(r)}),t)return t(r)},h=setTimeout(p.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=p.bind(null,o.onerror),o.onload=p.bind(null,o.onload),a&&document.head.appendChild(o)}},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},s={6857:[95999],9846:[8309],11599:[15717],13168:[44283],20576:[20576],24388:[94686],26625:[57838],30407:[11230],32321:[2856,4083],32466:[89781],40539:[93934],44843:[11196],45240:[90165],46894:[46894],64102:[24597],69146:[45108],72747:[11918],76273:[37628],94739:[94739]},i={2856:["default","./RealtyCardViewModel",76546],4083:["default","./ResidentialCardViewModel",76546],8309:["default","./RealtyPage",76546],11196:["default","./PharmaHomePage",56871],11230:["default","./ResidentialCardPage",76546],11918:["default","./RealtyBookingsListViewModel",76546],15717:["default","./CustomerReceiptPage",37122],20576:["default","./I18nResources",76546],24597:["default","./RealtyBookingsListPage",76546],37628:["default","./RealtyBookingPage",76546],44283:["default","./RealtyCardPage",76546],45108:["default","./DocumentsViewModel",37122],46894:["default","./I18nResources",56871],57838:["default","./Edo",37122],89781:["default","./RealtyBookingViewModel",76546],90165:["default","./PharmaHomeViewModel",56871],93934:["default","./RealtyViewModel",76546],94686:["default","./CustomerReceiptViewModel",37122],94739:["default","./I18nResources",37122],95999:["default","./DocumentsPage",37122]},l.f.remotes=function(e,t){l.o(s,e)&&s[e].forEach(function(e){var n=l.R;n||(n=[]);var r=i[e];if(!(n.indexOf(r)>=0)){if(n.push(r),r.p)return t.push(r.p);var s=function(t){t||(t=new Error("Container missing")),"string"==typeof t.message&&(t.message+='\nwhile loading "'+r[1]+'" from '+r[2]),l.m[e]=function(){throw t},r.p=0},o=function(e,n,i,o,a,l){try{var c=e(n,i);if(!c||!c.then)return a(c,o,l);var u=c.then(function(e){return a(e,o)},s);if(!l)return u;t.push(r.p=u)}catch(e){s(e)}},a=function(e,t,s){return o(t.get,r[1],n,0,c,s)},c=function(t){r.p=1,l.m[e]=function(e){e.exports=t()}};o(l,r[2],0,0,function(e,t,n){return e?o(l.I,r[0],0,e,a,n):s()},1)}})},l.j=17605,function(){l.S={};var e={},t={};l.I=function(n,r){r||(r=[]);var s=t[n];if(s||(s=t[n]={}),!(r.indexOf(s)>=0)){if(r.push(s),e[n])return e[n];l.o(l.S,n)||(l.S[n]={});var i=l.S[n],o="website",a=function(e,t,n,r){var s=i[e]=i[e]||{},a=s[t];(!a||!a.loaded&&(!r!=!a.eager?r:o>a.from))&&(s[t]={get:n,from:o,eager:!!r})},c=function(e){var t=function(e){var t;t="Initialization of sharing external failed: "+e,"undefined"!=typeof console&&console.warn&&console.warn(t)};try{var s=l(e);if(!s)return;var i=function(e){return e&&e.init&&e.init(l.S[n],r)};if(s.then)return u.push(s.then(i,t));var o=i(s);if(o&&o.then)return u.push(o.catch(t))}catch(e){t(e)}},u=[];if("default"===n)a("@mo/ui","2.2.0",function(){return Promise.all([l.e(63946),l.e(81774),l.e(80717),l.e(25020),l.e(35746),l.e(50187),l.e(12209)]).then(function(){return function(){return l(39963)}})}),a("@wildberries/components","1.0.0",function(){return Promise.all([l.e(25020),l.e(43685),l.e(62609),l.e(35746),l.e(55971)]).then(function(){return function(){return l(55971)}})}),a("@wildberries/helpers","1.0.0",function(){return function(){return l(78590)}},1),a("@wildberries/http-client","1.0.0",function(){return function(){return l(48263)}},1),a("@wildberries/i18n","1.0.0",function(){return function(){return l(68147)}},1),a("@wildberries/instancer","1.0.0",function(){return function(){return l(68076)}},1),a("@wildberries/observable","1.0.0",function(){return function(){return l(98534)}},1),a("@wildberries/utils","1.0.0",function(){return l.e(93218).then(function(){return function(){return l(93218)}})}),a("@wildberries/vm-core/components","1.0.0",function(){return Promise.all([l.e(25020),l.e(61237),l.e(60079)]).then(function(){return function(){return l(60079)}})}),a("@wildberries/vm-core/featureFactory","1.0.0",function(){return Promise.all([l.e(25020),l.e(61237),l.e(71979)]).then(function(){return function(){return l(71979)}})}),a("@wildberries/vm-core/hooks","1.0.0",function(){return Promise.all([l.e(25020),l.e(77649)]).then(function(){return function(){return l(77649)}})}),a("classnames","2.5.1",function(){return l.e(93771).then(function(){return function(){return l(93771)}})}),a("react-dom","18.3.1",function(){return Promise.all([l.e(89362),l.e(25020),l.e(7573)]).then(function(){return function(){return l(54254)}})}),a("react-i18next","15.1.3",function(){return Promise.all([l.e(71487),l.e(25020)]).then(function(){return function(){return l(71487)}})}),a("react-intersection-observer","9.13.1",function(){return Promise.all([l.e(25020),l.e(32889)]).then(function(){return function(){return l(32889)}})}),a("react/jsx-runtime","18.3.1",function(){return Promise.all([l.e(89362),l.e(25020)]).then(function(){return function(){return l(96240)}})}),a("react","18.3.1",function(){return l.e(89362).then(function(){return function(){return l(59811)}})}),c(37122),c(76546),c(56871);return u.length?e[n]=Promise.all(u).then(function(){return e[n]=1}):e[n]=1}}}(),l.p="https://static-basket-01.wbbasket.ru/vol2/site/",function(){var e=function(e){var t=function(e){return e.split(".").map(function(e){return+e==e?+e:e})},n=/^([^-+]+)?(?:-([^+]+))?(?:\+(.+))?$/.exec(e),r=n[1]?t(n[1]):[];return n[2]&&(r.length++,r.push.apply(r,t(n[2]))),n[3]&&(r.push([]),r.push.apply(r,t(n[3]))),r},t=function(t,n){t=e(t),n=e(n);for(var r=0;;){if(r>=t.length)return r<n.length&&"u"!=(typeof n[r])[0];var s=t[r],i=(typeof s)[0];if(r>=n.length)return"u"==i;var o=n[r],a=(typeof o)[0];if(i!=a)return"o"==i&&"n"==a||"s"==a||"u"==i;if("o"!=i&&"u"!=i&&s!=o)return s<o;r++}},n=function(e){var t=e[0],r="";if(1===e.length)return"*";if(t+.5){r+=0==t?">=":-1==t?"<":1==t?"^":2==t?"~":t>0?"=":"!=";for(var s=1,i=1;i<e.length;i++)s--,r+="u"==(typeof(a=e[i]))[0]?"-":(s>0?".":"")+(s=2,a);return r}var o=[];for(i=1;i<e.length;i++){var a=e[i];o.push(0===a?"not("+l()+")":1===a?"("+l()+" || "+l()+")":2===a?o.pop()+" "+o.pop():n(a))}return l();function l(){return o.pop().replace(/^\((.+)\)$/,"$1")}},r=function(t,n){if(0 in t){n=e(n);var s=t[0],i=s<0;i&&(s=-s-1);for(var o=0,a=1,l=!0;;a++,o++){var c,u,d=a<t.length?(typeof t[a])[0]:"";if(o>=n.length||"o"==(u=(typeof(c=n[o]))[0]))return!l||("u"==d?a>s&&!i:""==d!=i);if("u"==u){if(!l||"u"!=d)return!1}else if(l)if(d==u)if(a<=s){if(c!=t[a])return!1}else{if(i?c>t[a]:c<t[a])return!1;c!=t[a]&&(l=!1)}else if("s"!=d&&"n"!=d){if(i||a<=s)return!1;l=!1,a--}else{if(a<=s||u<d!=i)return!1;l=!1}else"s"!=d&&"n"!=d&&(l=!1,a--)}}var p=[],h=p.pop.bind(p);for(o=1;o<t.length;o++){var m=t[o];p.push(1==m?h()|h():2==m?h()&h():m?r(m,n):!h())}return!!h()},s=function(e,t){return e&&l.o(e,t)},i=function(e){return e.loaded=1,e.get()},o=function(e){return Object.keys(e).reduce(function(t,n){return e[n].eager&&(t[n]=e[n]),t},{})},a=function(e,n,s,i){var a=i?o(e[n]):e[n];return(n=Object.keys(a).reduce(function(e,n){return r(s,n)&&(!e||t(e,n))?n:e},0))&&a[n]},c=function(e,n,r){var s=r?o(e[n]):e[n];return Object.keys(s).reduce(function(e,n){return!e||!s[e].loaded&&t(e,n)?n:e},0)},u=function(e,t,r,s){return"Unsatisfied version "+r+" from "+(r&&e[t][r].from)+" of shared singleton module "+t+" (required "+n(s)+")"},d=function(e,t,r,s,i){var o=e[r];return"No satisfying version ("+n(s)+")"+(i?" for eager consumption":"")+" of shared module "+r+" found in shared scope "+t+".\nAvailable versions: "+Object.keys(o).map(function(e){return e+" from "+o[e].from}).join(", ")},p=function(e){throw new Error(e)},h=function(e){"undefined"!=typeof console&&console.warn&&console.warn(e)},m=function(e){return function(t,n,r,s,i){var o=l.I(t);return o&&o.then&&!r?o.then(e.bind(e,t,l.S[t],n,!1,s,i)):e(t,l.S[t],n,r,s,i)}},g=function(e,t,n){return n?n():function(e,t){return p("Shared module "+t+" doesn't exist in shared scope "+e)}(e,t)},f=m(function(e,t,n,r,o,l){if(!s(t,n))return g(e,n,l);var c=a(t,n,o,r);return c?i(c):l?l():void p(d(t,e,n,o,r))}),b=m(function(e,t,n,o,a,l){if(!s(t,n))return g(e,n,l);var d=c(t,n,o);return r(a,d)||h(u(t,n,d,a)),i(t[n][d])}),y={},v={25020:function(){return b("default","react",!1,[4,18,3,1],function(){return l.e(89362).then(function(){return function(){return l(59811)}})})},35746:function(){return b("default","react-dom",!1,[4,18,3,1],function(){return Promise.all([l.e(89362),l.e(25020),l.e(7573)]).then(function(){return function(){return l(54254)}})})},50187:function(){return b("default","react/jsx-runtime",!1,[0,16,8,0],function(){return l.e(89362).then(function(){return function(){return l(96240)}})})},69924:function(){return b("default","react/jsx-runtime",!1,[0,17,0,0],function(){return l.e(89362).then(function(){return function(){return l(96240)}})})},70370:function(){return b("default","react/jsx-runtime",!1,[,[1,19,0,0],[1,18,0,0],[1,17,0,0],[1,16,14,0],1,1,1],function(){return l.e(89362).then(function(){return function(){return l(96240)}})})},43685:function(){return b("default","react-i18next",!1,[4,15,1,3],function(){return Promise.all([l.e(71487),l.e(25020)]).then(function(){return function(){return l(71487)}})})},62609:function(){return f("default","@mo/ui",!1,[4,2,2,0],function(){return Promise.all([l.e(63946),l.e(81774),l.e(80717),l.e(25020),l.e(35746),l.e(50187),l.e(12209)]).then(function(){return function(){return l(39963)}})})},5521:function(){return b("default","react/jsx-runtime",!1,[0],function(){return Promise.all([l.e(89362),l.e(25020)]).then(function(){return function(){return l(96240)}})})},47891:function(){return f("default","classnames",!1,[4,2,5,1],function(){return l.e(93771).then(function(){return function(){return l(93771)}})})},31573:function(){return f("default","@wildberries/components",!1,[0],function(){return Promise.all([l.e(25020),l.e(43685),l.e(62609),l.e(35746),l.e(55971)]).then(function(){return function(){return l(55971)}})})},28288:function(){return f("default","@wildberries/helpers",!0,[0],function(){return function(){return l(78590)}})},76904:function(){return f("default","@wildberries/http-client",!0,[0],function(){return function(){return l(48263)}})},58377:function(){return f("default","@wildberries/utils",!1,[0],function(){return l.e(70837).then(function(){return function(){return l(93218)}})})},90568:function(){return f("default","@wildberries/instancer",!0,[0],function(){return function(){return l(68076)}})},48867:function(){return f("default","react-intersection-observer",!1,[4,9,13,1],function(){return l.e(55270).then(function(){return function(){return l(32889)}})})},56883:function(){return b("default","@wildberries/vm-core/components",!1,[0],function(){return Promise.all([l.e(61237),l.e(82460)]).then(function(){return function(){return l(60079)}})})},58602:function(){return f("default","@wildberries/observable",!0,[0],function(){return function(){return l(98534)}})},25002:function(){return b("default","@wildberries/i18n",!0,[0],function(){return function(){return l(68147)}})},83871:function(){return b("default","@wildberries/vm-core/hooks",!1,[0],function(){return l.e(30).then(function(){return function(){return l(77649)}})})},63603:function(){return b("default","@wildberries/vm-core/featureFactory",!1,[0],function(){return Promise.all([l.e(61237),l.e(94360)]).then(function(){return function(){return l(71979)}})})}};[90568,25002,28288,76904,58602].forEach(function(e){l.m[e]=function(t){y[e]=0,delete l.c[e];var n=v[e]();if("function"!=typeof n)throw new Error("Shared module is not available for eager consumption: "+e);t.exports=n()}});var w={5521:[5521],12209:[69924,70370],20551:[58602],25020:[25020],28288:[28288],35746:[35746],43685:[43685],47891:[47891],50187:[50187],56467:[31573],58377:[58377],62609:[62609],63603:[63603],64210:[25002],65949:[48867,56883],76904:[76904],83871:[83871],90568:[90568]},S={};l.f.consumes=function(e,t){l.o(w,e)&&w[e].forEach(function(e){if(l.o(y,e))return t.push(y[e]);if(!S[e]){var n=function(t){y[e]=0,l.m[e]=function(n){delete l.c[e],n.exports=t()}};S[e]=!0;var r=function(t){delete y[e],l.m[e]=function(n){throw delete l.c[e],t}};try{var s=v[e]();s.then?t.push(y[e]=s.then(n).catch(r)):n(s)}catch(e){r(e)}}})}}(),function(){if("undefined"!=typeof document){var e=function(e){return new Promise(function(t,n){var r=l.miniCssF(e),s=l.p+r;if(function(e,t){for(var n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var s=(o=n[r]).getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(s===e||s===t))return o}var i=document.getElementsByTagName("style");for(r=0;r<i.length;r++){var o;if((s=(o=i[r]).getAttribute("data-href"))===e||s===t)return o}}(r,s))return t();!function(e,t,n,r,s){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",l.nc&&(i.nonce=l.nc),i.onerror=i.onload=function(n){if(i.onerror=i.onload=null,"load"===n.type)r();else{var o=n&&n.type,a=n&&n.target&&n.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+o+": "+a+")");l.name="ChunkLoadError",l.code="CSS_CHUNK_LOAD_FAILED",l.type=o,l.request=a,i.parentNode&&i.parentNode.removeChild(i),s(l)}},i.href=t,n?n.parentNode.insertBefore(i,n.nextSibling):document.head.appendChild(i)}(e,s,null,t,n)})},t={17605:0,15785:0,3260:0,48693:0,74417:0,80841:0,45742:0,35437:0,2326:0,50194:0,53214:0,28288:0,77215:0,76904:0,90568:0};l.f.miniCss=function(n,r){t[n]?r.push(t[n]):0!==t[n]&&{316:1,1191:1,1588:1,2495:1,5046:1,5421:1,9282:1,9867:1,10930:1,12422:1,13615:1,16107:1,17166:1,17462:1,17877:1,18843:1,19689:1,20617:1,21100:1,21556:1,22131:1,22591:1,24014:1,24176:1,24997:1,25281:1,26174:1,26192:1,26625:1,29107:1,31071:1,31773:1,31835:1,32554:1,33681:1,33742:1,35658:1,36572:1,36662:1,37005:1,37251:1,37510:1,40119:1,40243:1,42096:1,42369:1,42520:1,44914:1,45817:1,47920:1,48078:1,48378:1,48829:1,49452:1,49758:1,51411:1,53435:1,53475:1,55688:1,55868:1,58976:1,59995:1,61875:1,62131:1,64210:1,64849:1,64903:1,65097:1,65379:1,65719:1,68151:1,69827:1,70504:1,71717:1,72592:1,73801:1,74736:1,75440:1,76323:1,76924:1,76979:1,81504:1,82134:1,83500:1,85576:1,86127:1,86913:1,87760:1,88146:1,89016:1,89179:1,90050:1,90258:1,90616:1,90873:1,92754:1,93830:1,94243:1,95116:1,95211:1,95332:1,95450:1,95631:1,96186:1,96266:1,96910:1,97498:1,99452:1,99650:1}[n]&&r.push(t[n]=e(n).then(function(){t[n]=0},function(e){throw delete t[n],e}))}}}(),function(){l.b=document.baseURI||self.location.href;var e={17605:0,15785:0,3260:0,48693:0,74417:0,80841:0,45742:0,35437:0,2326:0,50194:0,53214:0,28288:0,77215:0,76904:0,90568:0};l.f.j=function(t,n){var r=l.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else if(/^(1((159|220|968)9|3168)|2((43|82)88|0576|1556|5020)|3(2(321|466|554)|0407|1773|5746|7510)|4((02|48)43|0539|3685|5240|6894|7891|8829|9758)|5((018|646|837)7|521)|6(2609|3603|4102|857|9146)|7(6(273|904|979)|2747)|9(0258|0568|4243|4739|846|9650)|83871|86913)$/.test(t))e[t]=0;else{var s=new Promise(function(n,s){r=e[t]=[n,s]});n.push(r[2]=s);var i=l.p+l.u(t),o=new Error;l.l(i,function(n){if(l.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var s=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+i+")",o.name="ChunkLoadError",o.type=s,o.request=i,r[1](o)}},"chunk-"+t,t)}};var t=function(t,n){var r,s,i=n[0],o=n[1],a=n[2],c=0;if(i.some(function(t){return 0!==e[t]})){for(r in o)l.o(o,r)&&(l.m[r]=o[r]);if(a)a(l)}for(t&&t(n);c<i.length;c++)s=i[c],l.o(e,s)&&e[s]&&e[s][0](),e[s]=0},n=self.webpackChunkwebsite=self.webpackChunkwebsite||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}(),l.nc=void 0,l(31226),l(68387);l(69464)}();